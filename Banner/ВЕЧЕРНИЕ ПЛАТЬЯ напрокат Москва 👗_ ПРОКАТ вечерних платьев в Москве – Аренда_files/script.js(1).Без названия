// widget bundle

// file: /bitrix/js/main/polyfill/core/dist/polyfill.bundle.js
(function(r){var t=r.babelHelpers={};function e(r){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){t.typeof=e=function(r){return typeof r}}else{t.typeof=e=function(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return e(r)}t.typeof=e;var n;function i(r,t,e,i){if(!n){n=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103}var a=r&&r.defaultProps;var o=arguments.length-3;if(!t&&o!==0){t={children:void 0}}if(t&&a){for(var u in a){if(t[u]===void 0){t[u]=a[u]}}}else if(!t){t=a||{}}if(o===1){t.children=i}else if(o>1){var f=new Array(o);for(var c=0;c<o;c++){f[c]=arguments[c+3]}t.children=f}return{$$typeof:n,type:r,key:e===undefined?null:""+e,ref:null,props:t,_owner:null}}t.jsx=i;function a(r){var t;if(typeof Symbol==="function"){if(Symbol.asyncIterator){t=r[Symbol.asyncIterator];if(t!=null)return t.call(r)}if(Symbol.iterator){t=r[Symbol.iterator];if(t!=null)return t.call(r)}}throw new TypeError("Object is not async iterable")}t.asyncIterator=a;function o(r){this.wrapped=r}t.AwaitValue=o;function u(r){var e,n;function i(r,t){return new Promise(function(i,o){var u={key:r,arg:t,resolve:i,reject:o,next:null};if(n){n=n.next=u}else{e=n=u;a(r,t)}})}function a(e,n){try{var i=r[e](n);var u=i.value;var f=u instanceof t.AwaitValue;Promise.resolve(f?u.wrapped:u).then(function(r){if(f){a("next",r);return}o(i.done?"return":"normal",r)},function(r){a("throw",r)})}catch(r){o("throw",r)}}function o(r,t){switch(r){case"return":e.resolve({value:t,done:true});break;case"throw":e.reject(t);break;default:e.resolve({value:t,done:false});break}e=e.next;if(e){a(e.key,e.arg)}else{n=null}}this._invoke=i;if(typeof r.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){u.prototype[Symbol.asyncIterator]=function(){return this}}u.prototype.next=function(r){return this._invoke("next",r)};u.prototype.throw=function(r){return this._invoke("throw",r)};u.prototype.return=function(r){return this._invoke("return",r)};t.AsyncGenerator=u;function f(r){return function(){return new t.AsyncGenerator(r.apply(this,arguments))}}t.wrapAsyncGenerator=f;function c(r){return new t.AwaitValue(r)}t.awaitAsyncGenerator=c;function s(r,t){var e={},n=false;function i(e,i){n=true;i=new Promise(function(t){t(r[e](i))});return{done:false,value:t(i)}}if(typeof Symbol==="function"&&Symbol.iterator){e[Symbol.iterator]=function(){return this}}e.next=function(r){if(n){n=false;return r}return i("next",r)};if(typeof r.throw==="function"){e.throw=function(r){if(n){n=false;throw r}return i("throw",r)}}if(typeof r.return==="function"){e.return=function(r){return i("return",r)}}return e}t.asyncGeneratorDelegate=s;function l(r,t,e,n,i,a,o){try{var u=r[a](o);var f=u.value}catch(r){e(r);return}if(u.done){t(f)}else{Promise.resolve(f).then(n,i)}}function v(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(r){l(a,n,i,o,u,"next",r)}function u(r){l(a,n,i,o,u,"throw",r)}o(undefined)})}}t.asyncToGenerator=v;function h(r,t){if(!(r instanceof t)){throw new TypeError("Cannot call a class as a function")}}t.classCallCheck=h;function p(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(r,n.key,n)}}function d(r,t,e){if(t)p(r.prototype,t);if(e)p(r,e);return r}t.createClass=d;function y(r,t){for(var e in t){var n=t[e];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(r,e,n)}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(var a=0;a<i.length;a++){var o=i[a];var n=t[o];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(r,o,n)}}return r}t.defineEnumerableProperties=y;function g(r,t){var e=Object.getOwnPropertyNames(t);for(var n=0;n<e.length;n++){var i=e[n];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&r[i]===undefined){Object.defineProperty(r,i,a)}}return r}t.defaults=g;function b(r,t,e){if(t in r){Object.defineProperty(r,t,{value:e,enumerable:true,configurable:true,writable:true})}else{r[t]=e}return r}t.defineProperty=b;function w(){t.extends=w=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){r[n]=e[n]}}}return r};return w.apply(this,arguments)}t.extends=w;function m(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))}i.forEach(function(e){t.defineProperty(r,e,n[e])})}return r}t.objectSpread=m;function S(r,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:true,configurable:true}});if(e)t.setPrototypeOf(r,e)}t.inherits=S;function _(r,t){r.prototype=Object.create(t.prototype);r.prototype.constructor=r;r.__proto__=t}t.inheritsLoose=_;function O(r){t.getPrototypeOf=O=Object.setPrototypeOf?Object.getPrototypeOf:function r(t){return t.__proto__||Object.getPrototypeOf(t)};return O(r)}t.getPrototypeOf=O;function x(r,e){t.setPrototypeOf=x=Object.setPrototypeOf||function r(t,e){t.__proto__=e;return t};return x(r,e)}t.setPrototypeOf=x;function E(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(r){return false}}function P(r,e,n){if(E()){t.construct=P=Reflect.construct}else{t.construct=P=function r(e,n,i){var a=[null];a.push.apply(a,n);var o=Function.bind.apply(e,a);var u=new o;if(i)t.setPrototypeOf(u,i.prototype);return u}}return P.apply(null,arguments)}t.construct=P;function j(r){return Function.toString.call(r).indexOf("[native code]")!==-1}t.isNativeFunction=j;function M(r){var e=typeof Map==="function"?new Map:undefined;t.wrapNativeSuper=M=function r(n){if(n===null||!t.isNativeFunction(n))return n;if(typeof n!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof e!=="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return t.construct(n,arguments,t.getPrototypeOf(this).constructor)}i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:false,writable:true,configurable:true}});return t.setPrototypeOf(i,n)};return M(r)}t.wrapNativeSuper=M;function F(r,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return t[Symbol.hasInstance](r)}else{return r instanceof t}}t.instanceof=F;function I(r){return r&&r.__esModule?r:{default:r}}t.interopRequireDefault=I;function A(r){if(r&&r.__esModule){return r}else{var t={};if(r!=null){for(var e in r){if(Object.prototype.hasOwnProperty.call(r,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};if(n.get||n.set){Object.defineProperty(t,e,n)}else{t[e]=r[e]}}}}t.default=r;return t}}t.interopRequireWildcard=A;function T(r,t){if(r!==t){throw new TypeError("Cannot instantiate an arrow function")}}t.newArrowCheck=T;function k(r){if(r==null)throw new TypeError("Cannot destructure undefined")}t.objectDestructuringEmpty=k;function N(r,t){if(r==null)return{};var e={};var n=Object.keys(r);var i,a;for(a=0;a<n.length;a++){i=n[a];if(t.indexOf(i)>=0)continue;e[i]=r[i]}return e}t.objectWithoutPropertiesLoose=N;function R(r,e){if(r==null)return{};var n=t.objectWithoutPropertiesLoose(r,e);var i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(a=0;a<o.length;a++){i=o[a];if(e.indexOf(i)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(r,i))continue;n[i]=r[i]}}return n}t.objectWithoutProperties=R;function L(r){if(r===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}t.assertThisInitialized=L;function D(r,e){if(e&&(typeof e==="object"||typeof e==="function")){return e}return t.assertThisInitialized(r)}t.possibleConstructorReturn=D;function C(r,e){while(!Object.prototype.hasOwnProperty.call(r,e)){r=t.getPrototypeOf(r);if(r===null)break}return r}t.superPropBase=C;function W(r,e,n){if(typeof Reflect!=="undefined"&&Reflect.get){t.get=W=Reflect.get}else{t.get=W=function r(e,n,i){var a=t.superPropBase(e,n);if(!a)return;var o=Object.getOwnPropertyDescriptor(a,n);if(o.get){return o.get.call(i)}return o.value}}return W(r,e,n||r)}t.get=W;function G(r,e,n,i){if(typeof Reflect!=="undefined"&&Reflect.set){G=Reflect.set}else{G=function r(e,n,i,a){var o=t.superPropBase(e,n);var u;if(o){u=Object.getOwnPropertyDescriptor(o,n);if(u.set){u.set.call(a,i);return true}else if(!u.writable){return false}}u=Object.getOwnPropertyDescriptor(a,n);if(u){if(!u.writable){return false}u.value=i;Object.defineProperty(a,n,u)}else{t.defineProperty(a,n,i)}return true}}return G(r,e,n,i)}function U(r,t,e,n,i){var a=G(r,t,e,n||r);if(!a&&i){throw new Error("failed to set property")}return e}t.set=U;function z(r,t){if(!t){t=r.slice(0)}return Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))}t.taggedTemplateLiteral=z;function V(r,t){if(!t){t=r.slice(0)}r.raw=t;return r}t.taggedTemplateLiteralLoose=V;function B(r,e){if(r===t.temporalUndefined){throw new ReferenceError(e+" is not defined - temporal dead zone")}else{return r}}t.temporalRef=B;function H(r){throw new Error('"'+r+'" is read-only')}t.readOnlyError=H;function K(r){throw new Error('Class "'+r+'" cannot be referenced in computed property keys.')}t.classNameTDZError=K;t.temporalUndefined={};function Y(r,e){return t.arrayWithHoles(r)||t.iterableToArrayLimit(r,e)||t.nonIterableRest()}t.slicedToArray=Y;function J(r,e){return t.arrayWithHoles(r)||t.iterableToArrayLimitLoose(r,e)||t.nonIterableRest()}t.slicedToArrayLoose=J;function $(r){return t.arrayWithHoles(r)||t.iterableToArray(r)||t.nonIterableRest()}t.toArray=$;function q(r){return t.arrayWithoutHoles(r)||t.iterableToArray(r)||t.nonIterableSpread()}t.toConsumableArray=q;function X(r){if(Array.isArray(r)){for(var t=0,e=new Array(r.length);t<r.length;t++)e[t]=r[t];return e}}t.arrayWithoutHoles=X;function Z(r){if(Array.isArray(r))return r}t.arrayWithHoles=Z;function Q(r){if(Symbol.iterator in Object(r)||Object.prototype.toString.call(r)==="[object Arguments]")return Array.from(r)}t.iterableToArray=Q;function rr(r,t){var e=[];var n=true;var i=false;var a=undefined;try{for(var o=r[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){e.push(u.value);if(t&&e.length===t)break}}catch(r){i=true;a=r}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return e}t.iterableToArrayLimit=rr;function tr(r,t){var e=[];for(var n=r[Symbol.iterator](),i;!(i=n.next()).done;){e.push(i.value);if(t&&e.length===t)break}return e}t.iterableToArrayLimitLoose=tr;function er(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.nonIterableSpread=er;function nr(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.nonIterableRest=nr;function ir(r){return function(){var t=r.apply(this,arguments);t.next();return t}}t.skipFirstGeneratorNext=ir;function ar(r){if(typeof r==="symbol"){return r}else{return String(r)}}t.toPropertyKey=ar;function or(r,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and set to use loose mode. "+"To use proposal-class-properties in spec mode with decorators, wait for "+"the next major version of decorators in stage 2.")}t.initializerWarningHelper=or;function ur(r,t,e,n){if(!e)return;Object.defineProperty(r,t,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})}t.initializerDefineProperty=ur;function fr(r,t,e,n,i){var a={};Object["ke"+"ys"](n).forEach(function(r){a[r]=n[r]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=e.slice().reverse().reduce(function(e,n){return n(r,t,e)||e},a);if(i&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(i):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](r,t,a);a=null}return a}t.applyDecoratedDescriptor=fr;var cr=0;function sr(r){return"__private_"+cr+++"_"+r}t.classPrivateFieldLooseKey=sr;function lr(r,t){if(!Object.prototype.hasOwnProperty.call(r,t)){throw new TypeError("attempted to use private field on non-instance")}return r}t.classPrivateFieldLooseBase=lr;function vr(r,t){if(!t.has(r)){throw new TypeError("attempted to get private field on non-instance")}return t.get(r).value}t.classPrivateFieldGet=vr;function hr(r,t,e){if(!t.has(r)){throw new TypeError("attempted to set private field on non-instance")}var n=t.get(r);if(!n.writable){throw new TypeError("attempted to set read only private field")}n.value=e;return e}t.classPrivateFieldSet=hr})(typeof global==="undefined"?window:global);!function(r){"use strict";var t=Object.prototype;var e=t.hasOwnProperty;var n;var i=typeof Symbol==="function"?Symbol:{};var a=i.iterator||"@@iterator";var o=i.asyncIterator||"@@asyncIterator";var u=i.toStringTag||"@@toStringTag";var f=r.regeneratorRuntime={};function c(r,t,e,n){var i=t&&t.prototype instanceof y?t:y;var a=Object.create(i.prototype);var o=new F(n||[]);a._invoke=E(r,e,o);return a}f.wrap=c;function s(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(r){return{type:"throw",arg:r}}}var l="suspendedStart";var v="suspendedYield";var h="executing";var p="completed";var d={};function y(){}function g(){}function b(){}var w={};w[a]=function(){return this};var m=Object.getPrototypeOf;var S=m&&m(m(I([])));if(S&&S!==t&&e.call(S,a)){w=S}var _=b.prototype=y.prototype=Object.create(w);g.prototype=_.constructor=b;b.constructor=g;b[u]=g.displayName="GeneratorFunction";function O(r){["next","throw","return"].forEach(function(t){r[t]=function(r){return this._invoke(t,r)}})}f.isGeneratorFunction=function(r){var t=typeof r==="function"&&r.constructor;return t?t===g||(t.displayName||t.name)==="GeneratorFunction":false};f.mark=function(r){if(Object.setPrototypeOf){Object.setPrototypeOf(r,b)}else{r.__proto__=b;if(!(u in r)){r[u]="GeneratorFunction"}}r.prototype=Object.create(_);return r};f.awrap=function(r){return{__await:r}};function x(r){function t(n,i,a,o){var u=s(r[n],r,i);if(u.type==="throw"){o(u.arg)}else{var f=u.arg;var c=f.value;if(c&&typeof c==="object"&&e.call(c,"__await")){return Promise.resolve(c.__await).then(function(r){t("next",r,a,o)},function(r){t("throw",r,a,o)})}return Promise.resolve(c).then(function(r){f.value=r;a(f)},o)}}var n;function i(r,e){function i(){return new Promise(function(n,i){t(r,e,n,i)})}return n=n?n.then(i,i):i()}this._invoke=i}O(x.prototype);x.prototype[o]=function(){return this};f.AsyncIterator=x;f.async=function(r,t,e,n){var i=new x(c(r,t,e,n));return f.isGeneratorFunction(t)?i:i.next().then(function(r){return r.done?r.value:i.next()})};function E(r,t,e){var n=l;return function i(a,o){if(n===h){throw new Error("Generator is already running")}if(n===p){if(a==="throw"){throw o}return A()}e.method=a;e.arg=o;while(true){var u=e.delegate;if(u){var f=P(u,e);if(f){if(f===d)continue;return f}}if(e.method==="next"){e.sent=e._sent=e.arg}else if(e.method==="throw"){if(n===l){n=p;throw e.arg}e.dispatchException(e.arg)}else if(e.method==="return"){e.abrupt("return",e.arg)}n=h;var c=s(r,t,e);if(c.type==="normal"){n=e.done?p:v;if(c.arg===d){continue}return{value:c.arg,done:e.done}}else if(c.type==="throw"){n=p;e.method="throw";e.arg=c.arg}}}}function P(r,t){var e=r.iterator[t.method];if(e===n){t.delegate=null;if(t.method==="throw"){if(r.iterator.return){t.method="return";t.arg=n;P(r,t);if(t.method==="throw"){return d}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=s(e,r.iterator,t.arg);if(i.type==="throw"){t.method="throw";t.arg=i.arg;t.delegate=null;return d}var a=i.arg;if(!a){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return d}if(a.done){t[r.resultName]=a.value;t.next=r.nextLoc;if(t.method!=="return"){t.method="next";t.arg=n}}else{return a}t.delegate=null;return d}O(_);_[u]="Generator";_[a]=function(){return this};_.toString=function(){return"[object Generator]"};function j(r){var t={tryLoc:r[0]};if(1 in r){t.catchLoc=r[1]}if(2 in r){t.finallyLoc=r[2];t.afterLoc=r[3]}this.tryEntries.push(t)}function M(r){var t=r.completion||{};t.type="normal";delete t.arg;r.completion=t}function F(r){this.tryEntries=[{tryLoc:"root"}];r.forEach(j,this);this.reset(true)}f.keys=function(r){var t=[];for(var e in r){t.push(e)}t.reverse();return function e(){while(t.length){var n=t.pop();if(n in r){e.value=n;e.done=false;return e}}e.done=true;return e}};function I(r){if(r){var t=r[a];if(t){return t.call(r)}if(typeof r.next==="function"){return r}if(!isNaN(r.length)){var i=-1,o=function t(){while(++i<r.length){if(e.call(r,i)){t.value=r[i];t.done=false;return t}}t.value=n;t.done=true;return t};return o.next=o}}return{next:A}}f.values=I;function A(){return{value:n,done:true}}F.prototype={constructor:F,reset:function(r){this.prev=0;this.next=0;this.sent=this._sent=n;this.done=false;this.delegate=null;this.method="next";this.arg=n;this.tryEntries.forEach(M);if(!r){for(var t in this){if(t.charAt(0)==="t"&&e.call(this,t)&&!isNaN(+t.slice(1))){this[t]=n}}}},stop:function(){this.done=true;var r=this.tryEntries[0];var t=r.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(r){if(this.done){throw r}var t=this;function i(e,i){u.type="throw";u.arg=r;t.next=e;if(i){t.method="next";t.arg=n}return!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];var u=o.completion;if(o.tryLoc==="root"){return i("end")}if(o.tryLoc<=this.prev){var f=e.call(o,"catchLoc");var c=e.call(o,"finallyLoc");if(f&&c){if(this.prev<o.catchLoc){return i(o.catchLoc,true)}else if(this.prev<o.finallyLoc){return i(o.finallyLoc)}}else if(f){if(this.prev<o.catchLoc){return i(o.catchLoc,true)}}else if(c){if(this.prev<o.finallyLoc){return i(o.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(r,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}if(a&&(r==="break"||r==="continue")&&a.tryLoc<=t&&t<=a.finallyLoc){a=null}var o=a?a.completion:{};o.type=r;o.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return d}return this.complete(o)},complete:function(r,t){if(r.type==="throw"){throw r.arg}if(r.type==="break"||r.type==="continue"){this.next=r.arg}else if(r.type==="return"){this.rval=this.arg=r.arg;this.method="return";this.next="end"}else if(r.type==="normal"&&t){this.next=t}return d},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===r){this.complete(e.completion,e.afterLoc);M(e);return d}}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===r){var n=e.completion;if(n.type==="throw"){var i=n.arg;M(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,e){this.delegate={iterator:I(r),resultName:t,nextLoc:e};if(this.method==="next"){this.arg=n}return d}}}(function(){return this}()||Function("return this")());(function(r){"use strict";function t(r,t){return t={exports:{}},r(t,t.exports),t.exports}var e=t(function(r){var t=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=t});var n={}.hasOwnProperty;var i=function(r,t){return n.call(r,t)};var a=function(r){try{return!!r()}catch(r){return true}};var o=!a(function(){return Object.defineProperty({},"a",{get:function r(){return 7}}).a!=7});var u=t(function(r){var t=r.exports={version:"2.6.3"};if(typeof __e=="number")__e=t});var f=u.version;var c=function(r){return babelHelpers.typeof(r)==="object"?r!==null:typeof r==="function"};var s=function(r){if(!c(r))throw TypeError(r+" is not an object!");return r};var l=e.document;var v=c(l)&&c(l.createElement);var h=function(r){return v?l.createElement(r):{}};var p=!o&&!a(function(){return Object.defineProperty(h("div"),"a",{get:function r(){return 7}}).a!=7});var d=function(r,t){if(!c(r))return r;var e,n;if(t&&typeof(e=r.toString)=="function"&&!c(n=e.call(r)))return n;if(typeof(e=r.valueOf)=="function"&&!c(n=e.call(r)))return n;if(!t&&typeof(e=r.toString)=="function"&&!c(n=e.call(r)))return n;throw TypeError("Can't convert object to primitive value")};var y=Object.defineProperty;var g=o?Object.defineProperty:function r(t,e,n){s(t);e=d(e,true);s(n);if(p)try{return y(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");if("value"in n)t[e]=n.value;return t};var b={f:g};var w=function(r,t){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:t}};var m=o?function(r,t,e){return b.f(r,t,w(1,e))}:function(r,t,e){r[t]=e;return r};var S=0;var _=Math.random();var O=function(r){return"Symbol(".concat(r===undefined?"":r,")_",(++S+_).toString(36))};var x=t(function(r){var t=O("src");var n="toString";var a=Function[n];var o=(""+a).split(n);u.inspectSource=function(r){return a.call(r)};(r.exports=function(r,n,a,u){var f=typeof a=="function";if(f)i(a,"name")||m(a,"name",n);if(r[n]===a)return;if(f)i(a,t)||m(a,t,r[n]?""+r[n]:o.join(String(n)));if(r===e){r[n]=a}else if(!u){delete r[n];m(r,n,a)}else if(r[n]){r[n]=a}else{m(r,n,a)}})(Function.prototype,n,function r(){return typeof this=="function"&&this[t]||a.call(this)})});var E=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r};var P=function(r,t,e){E(r);if(t===undefined)return r;switch(e){case 1:return function(e){return r.call(t,e)};case 2:return function(e,n){return r.call(t,e,n)};case 3:return function(e,n,i){return r.call(t,e,n,i)}}return function(){return r.apply(t,arguments)}};var j="prototype";var M=function r(t,n,i){var a=t&r.F;var o=t&r.G;var f=t&r.S;var c=t&r.P;var s=t&r.B;var l=o?e:f?e[n]||(e[n]={}):(e[n]||{})[j];var v=o?u:u[n]||(u[n]={});var h=v[j]||(v[j]={});var p,d,y,g;if(o)i=n;for(p in i){d=!a&&l&&l[p]!==undefined;y=(d?l:i)[p];g=s&&d?P(y,e):c&&typeof y=="function"?P(Function.call,y):y;if(l)x(l,p,y,t&r.U);if(v[p]!=y)m(v,p,g);if(c&&h[p]!=y)h[p]=y}};M.F=1;M.G=2;M.S=4;M.P=8;M.B=16;M.W=32;M.U=64;M.R=128;var F=M;var I=t(function(r){var t=O("meta");var e=b.f;var n=0;var o=Object.isExtensible||function(){return true};var u=!a(function(){return o(Object.preventExtensions({}))});var f=function r(i){e(i,t,{value:{i:"O"+ ++n,w:{}}})};var s=function r(e,n){if(!c(e))return babelHelpers.typeof(e)=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!i(e,t)){if(!o(e))return"F";if(!n)return"E";f(e)}return e[t].i};var l=function r(e,n){if(!i(e,t)){if(!o(e))return true;if(!n)return false;f(e)}return e[t].w};var v=function r(e){if(u&&h.NEED&&o(e)&&!i(e,t))f(e);return e};var h=r.exports={KEY:t,NEED:false,fastKey:s,getWeak:l,onFreeze:v}});var A=I.KEY;var T=I.NEED;var k=I.fastKey;var N=I.getWeak;var R=I.onFreeze;var L=false;var D=t(function(r){var t="__core-js_shared__";var n=e[t]||(e[t]={});(r.exports=function(r,t){return n[r]||(n[r]=t!==undefined?t:{})})("versions",[]).push({version:u.version,mode:L?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})});var C=t(function(r){var t=D("wks");var n=e.Symbol;var i=typeof n=="function";var a=r.exports=function(r){return t[r]||(t[r]=i&&n[r]||(i?n:O)("Symbol."+r))};a.store=t});var W=b.f;var G=C("toStringTag");var U=function(r,t,e){if(r&&!i(r=e?r:r.prototype,G))W(r,G,{configurable:true,value:t})};var z=C;var V={f:z};var B=b.f;var H=function(r){var t=u.Symbol||(u.Symbol=L?{}:e.Symbol||{});if(r.charAt(0)!="_"&&!(r in t))B(t,r,{value:V.f(r)})};var K={}.toString;var Y=function(r){return K.call(r).slice(8,-1)};var J=Object("z").propertyIsEnumerable(0)?Object:function(r){return Y(r)=="String"?r.split(""):Object(r)};var $=function(r){if(r==undefined)throw TypeError("Can't call method on  "+r);return r};var q=function(r){return J($(r))};var X=Math.ceil;var Z=Math.floor;var Q=function(r){return isNaN(r=+r)?0:(r>0?Z:X)(r)};var rr=Math.min;var tr=function(r){return r>0?rr(Q(r),9007199254740991):0};var er=Math.max;var nr=Math.min;var ir=function(r,t){r=Q(r);return r<0?er(r+t,0):nr(r,t)};var ar=function(r){return function(t,e,n){var i=q(t);var a=tr(i.length);var o=ir(n,a);var u;if(r&&e!=e)while(a>o){u=i[o++];if(u!=u)return true}else for(;a>o;o++){if(r||o in i){if(i[o]===e)return r||o||0}}return!r&&-1}};var or=D("keys");var ur=function(r){return or[r]||(or[r]=O(r))};var fr=ar(false);var cr=ur("IE_PROTO");var sr=function(r,t){var e=q(r);var n=0;var a=[];var o;for(o in e){if(o!=cr)i(e,o)&&a.push(o)}while(t.length>n){if(i(e,o=t[n++])){~fr(a,o)||a.push(o)}}return a};var lr="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");var vr=Object.keys||function r(t){return sr(t,lr)};var hr=Object.getOwnPropertySymbols;var pr={f:hr};var dr={}.propertyIsEnumerable;var yr={f:dr};var gr=function(r){var t=vr(r);var e=pr.f;if(e){var n=e(r);var i=yr.f;var a=0;var o;while(n.length>a){if(i.call(r,o=n[a++]))t.push(o)}}return t};var br=Array.isArray||function r(t){return Y(t)=="Array"};var wr=o?Object.defineProperties:function r(t,e){s(t);var n=vr(e);var i=n.length;var a=0;var o;while(i>a){b.f(t,o=n[a++],e[o])}return t};var mr=e.document;var Sr=mr&&mr.documentElement;var _r=ur("IE_PROTO");var Or=function r(){};var xr="prototype";var Er=function r(){var t=h("iframe");var e=lr.length;var n="<";var i=">";var a;t.style.display="none";Sr.appendChild(t);t.src="javascript:";a=t.contentWindow.document;a.open();a.write(n+"script"+i+"document.F=Object"+n+"/script"+i);a.close();Er=a.F;while(e--){delete Er[xr][lr[e]]}return Er()};var Pr=Object.create||function r(t,e){var n;if(t!==null){Or[xr]=s(t);n=new Or;Or[xr]=null;n[_r]=t}else n=Er();return e===undefined?n:wr(n,e)};var jr=lr.concat("length","prototype");var Mr=Object.getOwnPropertyNames||function r(t){return sr(t,jr)};var Fr={f:Mr};var Ir=Fr.f;var Ar={}.toString;var Tr=(typeof window==="undefined"?"undefined":babelHelpers.typeof(window))=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var kr=function r(t){try{return Ir(t)}catch(r){return Tr.slice()}};var Nr=function r(t){return Tr&&Ar.call(t)=="[object Window]"?kr(t):Ir(q(t))};var Rr={f:Nr};var Lr=Object.getOwnPropertyDescriptor;var Dr=o?Lr:function r(t,e){t=q(t);e=d(e,true);if(p)try{return Lr(t,e)}catch(r){}if(i(t,e))return w(!yr.f.call(t,e),t[e])};var Cr={f:Dr};var Wr=I.KEY;var Gr=Cr.f;var Ur=b.f;var zr=Rr.f;var Vr=e.Symbol;var Br=e.JSON;var Hr=Br&&Br.stringify;var Kr="prototype";var Yr=C("_hidden");var Jr=C("toPrimitive");var $r={}.propertyIsEnumerable;var qr=D("symbol-registry");var Xr=D("symbols");var Zr=D("op-symbols");var Qr=Object[Kr];var rt=typeof Vr=="function";var tt=e.QObject;var et=!tt||!tt[Kr]||!tt[Kr].findChild;var nt=o&&a(function(){return Pr(Ur({},"a",{get:function r(){return Ur(this,"a",{value:7}).a}})).a!=7})?function(r,t,e){var n=Gr(Qr,t);if(n)delete Qr[t];Ur(r,t,e);if(n&&r!==Qr)Ur(Qr,t,n)}:Ur;var it=function r(t){var e=Xr[t]=Pr(Vr[Kr]);e._k=t;return e};var at=rt&&babelHelpers.typeof(Vr.iterator)=="symbol"?function(r){return babelHelpers.typeof(r)=="symbol"}:function(r){return r instanceof Vr};var ot=function r(t,e,n){if(t===Qr)ot(Zr,e,n);s(t);e=d(e,true);s(n);if(i(Xr,e)){if(!n.enumerable){if(!i(t,Yr))Ur(t,Yr,w(1,{}));t[Yr][e]=true}else{if(i(t,Yr)&&t[Yr][e])t[Yr][e]=false;n=Pr(n,{enumerable:w(0,false)})}return nt(t,e,n)}return Ur(t,e,n)};var ut=function r(t,e){s(t);var n=gr(e=q(e));var i=0;var a=n.length;var o;while(a>i){ot(t,o=n[i++],e[o])}return t};var ft=function r(t,e){return e===undefined?Pr(t):ut(Pr(t),e)};var ct=function r(t){var e=$r.call(this,t=d(t,true));if(this===Qr&&i(Xr,t)&&!i(Zr,t))return false;return e||!i(this,t)||!i(Xr,t)||i(this,Yr)&&this[Yr][t]?e:true};var st=function r(t,e){t=q(t);e=d(e,true);if(t===Qr&&i(Xr,e)&&!i(Zr,e))return;var n=Gr(t,e);if(n&&i(Xr,e)&&!(i(t,Yr)&&t[Yr][e]))n.enumerable=true;return n};var lt=function r(t){var e=zr(q(t));var n=[];var a=0;var o;while(e.length>a){if(!i(Xr,o=e[a++])&&o!=Yr&&o!=Wr)n.push(o)}return n};var vt=function r(t){var e=t===Qr;var n=zr(e?Zr:q(t));var a=[];var o=0;var u;while(n.length>o){if(i(Xr,u=n[o++])&&(e?i(Qr,u):true))a.push(Xr[u])}return a};if(!rt){Vr=function r(){if(this instanceof Vr)throw TypeError("Symbol is not a constructor!");var t=O(arguments.length>0?arguments[0]:undefined);var e=function r(e){if(this===Qr)r.call(Zr,e);if(i(this,Yr)&&i(this[Yr],t))this[Yr][t]=false;nt(this,t,w(1,e))};if(o&&et)nt(Qr,t,{configurable:true,set:e});return it(t)};x(Vr[Kr],"toString",function r(){return this._k});Cr.f=st;b.f=ot;Fr.f=Rr.f=lt;yr.f=ct;pr.f=vt;if(o&&!L){x(Qr,"propertyIsEnumerable",ct,true)}V.f=function(r){return it(C(r))}}F(F.G+F.W+F.F*!rt,{Symbol:Vr});for(var ht="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),pt=0;ht.length>pt;){C(ht[pt++])}for(var dt=vr(C.store),yt=0;dt.length>yt;){H(dt[yt++])}F(F.S+F.F*!rt,"Symbol",{for:function r(t){return i(qr,t+="")?qr[t]:qr[t]=Vr(t)},keyFor:function r(t){if(!at(t))throw TypeError(t+" is not a symbol!");for(var e in qr){if(qr[e]===t)return e}},useSetter:function r(){et=true},useSimple:function r(){et=false}});F(F.S+F.F*!rt,"Object",{create:ft,defineProperty:ot,defineProperties:ut,getOwnPropertyDescriptor:st,getOwnPropertyNames:lt,getOwnPropertySymbols:vt});Br&&F(F.S+F.F*(!rt||a(function(){var r=Vr();return Hr([r])!="[null]"||Hr({a:r})!="{}"||Hr(Object(r))!="{}"})),"JSON",{stringify:function r(t){var e=[t];var n=1;var i,a;while(arguments.length>n){e.push(arguments[n++])}a=i=e[1];if(!c(i)&&t===undefined||at(t))return;if(!br(i))i=function r(t,e){if(typeof a=="function")e=a.call(this,t,e);if(!at(e))return e};e[1]=i;return Hr.apply(Br,e)}});Vr[Kr][Jr]||m(Vr[Kr],Jr,Vr[Kr].valueOf);U(Vr,"Symbol");U(Math,"Math",true);U(e.JSON,"JSON",true);F(F.S,"Object",{create:Pr});F(F.S+F.F*!o,"Object",{defineProperty:b.f});F(F.S+F.F*!o,"Object",{defineProperties:wr});var gt=function(r,t){var e=(u.Object||{})[r]||Object[r];var n={};n[r]=t(e);F(F.S+F.F*a(function(){e(1)}),"Object",n)};var bt=Cr.f;gt("getOwnPropertyDescriptor",function(){return function r(t,e){return bt(q(t),e)}});var wt=function(r){return Object($(r))};var mt=ur("IE_PROTO");var St=Object.prototype;var _t=Object.getPrototypeOf||function(r){r=wt(r);if(i(r,mt))return r[mt];if(typeof r.constructor=="function"&&r instanceof r.constructor){return r.constructor.prototype}return r instanceof Object?St:null};gt("getPrototypeOf",function(){return function r(t){return _t(wt(t))}});gt("keys",function(){return function r(t){return vr(wt(t))}});gt("getOwnPropertyNames",function(){return Rr.f});var Ot=I.onFreeze;gt("freeze",function(r){return function t(e){return r&&c(e)?r(Ot(e)):e}});var xt=I.onFreeze;gt("seal",function(r){return function t(e){return r&&c(e)?r(xt(e)):e}});var Et=I.onFreeze;gt("preventExtensions",function(r){return function t(e){return r&&c(e)?r(Et(e)):e}});gt("isFrozen",function(r){return function t(e){return c(e)?r?r(e):false:true}});gt("isSealed",function(r){return function t(e){return c(e)?r?r(e):false:true}});gt("isExtensible",function(r){return function t(e){return c(e)?r?r(e):true:false}});var Pt=Object.assign;var jt=!Pt||a(function(){var r={};var t={};var e=Symbol();var n="abcdefghijklmnopqrst";r[e]=7;n.split("").forEach(function(r){t[r]=r});return Pt({},r)[e]!=7||Object.keys(Pt({},t)).join("")!=n})?function r(t,e){var n=wt(t);var i=arguments.length;var a=1;var o=pr.f;var u=yr.f;while(i>a){var f=J(arguments[a++]);var c=o?vr(f).concat(o(f)):vr(f);var s=c.length;var l=0;var v;while(s>l){if(u.call(f,v=c[l++]))n[v]=f[v]}}return n}:Pt;F(F.S+F.F,"Object",{assign:jt});var Mt=Object.is||function r(t,e){return t===e?t!==0||1/t===1/e:t!=t&&e!=e};F(F.S,"Object",{is:Mt});var Ft=function r(t,e){s(t);if(!c(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};var It={set:Object.setPrototypeOf||("__proto__"in{}?function(r,t,e){try{e=P(Function.call,Cr.f(Object.prototype,"__proto__").set,2);e(r,[]);t=!(r instanceof Array)}catch(r){t=true}return function r(n,i){Ft(n,i);if(t)n.__proto__=i;else e(n,i);return n}}({},false):undefined),check:Ft};F(F.S,"Object",{setPrototypeOf:It.set});var At=C("toStringTag");var Tt=Y(function(){return arguments}())=="Arguments";var kt=function r(t,e){try{return t[e]}catch(r){}};var Nt=function(r){var t,e,n;return r===undefined?"Undefined":r===null?"Null":typeof(e=kt(t=Object(r),At))=="string"?e:Tt?Y(t):(n=Y(t))=="Object"&&typeof t.callee=="function"?"Arguments":n};var Rt={};Rt[C("toStringTag")]="z";if(Rt+""!="[object z]"){x(Object.prototype,"toString",function r(){return"[object "+Nt(this)+"]"},true)}var Lt=function(r,t,e){var n=e===undefined;switch(t.length){case 0:return n?r():r.call(e);case 1:return n?r(t[0]):r.call(e,t[0]);case 2:return n?r(t[0],t[1]):r.call(e,t[0],t[1]);case 3:return n?r(t[0],t[1],t[2]):r.call(e,t[0],t[1],t[2]);case 4:return n?r(t[0],t[1],t[2],t[3]):r.call(e,t[0],t[1],t[2],t[3])}return r.apply(e,t)};var Dt=[].slice;var Ct={};var Wt=function r(t,e,n){if(!(e in Ct)){for(var i=[],a=0;a<e;a++){i[a]="a["+a+"]"}Ct[e]=Function("F,a","return new F("+i.join(",")+")")}return Ct[e](t,n)};var Gt=Function.bind||function r(t){var e=E(this);var n=Dt.call(arguments,1);var i=function r(){var i=n.concat(Dt.call(arguments));return this instanceof r?Wt(e,i.length,i):Lt(e,i,t)};if(c(e.prototype))i.prototype=e.prototype;return i};F(F.P,"Function",{bind:Gt});var Ut=b.f;var zt=Function.prototype;var Vt=/^\s*function ([^ (]*)/;var Bt="name";Bt in zt||o&&Ut(zt,Bt,{configurable:true,get:function r(){try{return(""+this).match(Vt)[1]}catch(r){return""}}});var Ht=C("hasInstance");var Kt=Function.prototype;if(!(Ht in Kt))b.f(Kt,Ht,{value:function r(t){if(typeof this!="function"||!c(t))return false;if(!c(this.prototype))return t instanceof this;while(t=_t(t)){if(this.prototype===t)return true}return false}});var Yt="\t\n\v\f\r   ᠎    "+"         　\u2028\u2029\ufeff";var Jt="["+Yt+"]";var $t="​";var qt=RegExp("^"+Jt+Jt+"*");var Xt=RegExp(Jt+Jt+"*$");var Zt=function r(t,e,n){var i={};var o=a(function(){return!!Yt[t]()||$t[t]()!=$t});var u=i[t]=o?e(Qt):Yt[t];if(n)i[n]=u;F(F.P+F.F*o,"String",i)};var Qt=Zt.trim=function(r,t){r=String($(r));if(t&1)r=r.replace(qt,"");if(t&2)r=r.replace(Xt,"");return r};var re=Zt;var te=e.parseInt;var ee=re.trim;var ne=/^[-+]?0[xX]/;var ie=te(Yt+"08")!==8||te(Yt+"0x16")!==22?function r(t,e){var n=ee(String(t),3);return te(n,e>>>0||(ne.test(n)?16:10))}:te;F(F.G+F.F*(parseInt!=ie),{parseInt:ie});var ae=e.parseFloat;var oe=re.trim;var ue=1/ae(Yt+"-0")!==-Infinity?function r(t){var e=oe(String(t),3);var n=ae(e);return n===0&&e.charAt(0)=="-"?-0:n}:ae;F(F.G+F.F*(parseFloat!=ue),{parseFloat:ue});var fe=It.set;var ce=function(r,t,e){var n=t.constructor;var i;if(n!==e&&typeof n=="function"&&(i=n.prototype)!==e.prototype&&c(i)&&fe){fe(r,i)}return r};var se=Fr.f;var le=Cr.f;var ve=b.f;var he=re.trim;var pe="Number";var de=e[pe];var ye=de;var ge=de.prototype;var be=Y(Pr(ge))==pe;var we="trim"in String.prototype;var me=function r(t){var e=d(t,false);if(typeof e=="string"&&e.length>2){e=we?e.trim():he(e,3);var n=e.charCodeAt(0);var i,a,o;if(n===43||n===45){i=e.charCodeAt(2);if(i===88||i===120)return NaN}else if(n===48){switch(e.charCodeAt(1)){case 66:case 98:a=2;o=49;break;case 79:case 111:a=8;o=55;break;default:return+e}for(var u=e.slice(2),f=0,c=u.length,s;f<c;f++){s=u.charCodeAt(f);if(s<48||s>o)return NaN}return parseInt(u,a)}}return+e};if(!de(" 0o1")||!de("0b1")||de("+0x1")){de=function r(t){var e=arguments.length<1?0:t;var n=this;return n instanceof de&&(be?a(function(){ge.valueOf.call(n)}):Y(n)!=pe)?ce(new ye(me(e)),n,de):me(e)};for(var Se=o?se(ye):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),_e=0,Oe;Se.length>_e;_e++){if(i(ye,Oe=Se[_e])&&!i(de,Oe)){ve(de,Oe,le(ye,Oe))}}de.prototype=ge;ge.constructor=de;x(e,pe,de)}var xe=function(r,t){if(typeof r!="number"&&Y(r)!="Number")throw TypeError(t);return+r};var Ee=function r(t){var e=String($(this));var n="";var i=Q(t);if(i<0||i==Infinity)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e)){if(i&1)n+=e}return n};var Pe=1..toFixed;var je=Math.floor;var Me=[0,0,0,0,0,0];var Fe="Number.toFixed: incorrect invocation!";var Ie="0";var Ae=function r(t,e){var n=-1;var i=e;while(++n<6){i+=t*Me[n];Me[n]=i%1e7;i=je(i/1e7)}};var Te=function r(t){var e=6;var n=0;while(--e>=0){n+=Me[e];Me[e]=je(n/t);n=n%t*1e7}};var ke=function r(){var t=6;var e="";while(--t>=0){if(e!==""||t===0||Me[t]!==0){var n=String(Me[t]);e=e===""?n:e+Ee.call(Ie,7-n.length)+n}}return e};var Ne=function r(t,e,n){return e===0?n:e%2===1?r(t,e-1,n*t):r(t*t,e/2,n)};var Re=function r(t){var e=0;var n=t;while(n>=4096){e+=12;n/=4096}while(n>=2){e+=1;n/=2}return e};F(F.P+F.F*(!!Pe&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(0xde0b6b3a7640080).toFixed(0)!=="1000000000000000128")||!a(function(){Pe.call({})})),"Number",{toFixed:function r(t){var e=xe(this,Fe);var n=Q(t);var i="";var a=Ie;var o,u,f,c;if(n<0||n>20)throw RangeError(Fe);if(e!=e)return"NaN";if(e<=-1e21||e>=1e21)return String(e);if(e<0){i="-";e=-e}if(e>1e-21){o=Re(e*Ne(2,69,1))-69;u=o<0?e*Ne(2,-o,1):e/Ne(2,o,1);u*=4503599627370496;o=52-o;if(o>0){Ae(0,u);f=n;while(f>=7){Ae(1e7,0);f-=7}Ae(Ne(10,f,1),0);f=o-1;while(f>=23){Te(1<<23);f-=23}Te(1<<f);Ae(1,1);Te(2);a=ke()}else{Ae(0,u);Ae(1<<-o,0);a=ke()+Ee.call(Ie,n)}}if(n>0){c=a.length;a=i+(c<=n?"0."+Ee.call(Ie,n-c)+a:a.slice(0,c-n)+"."+a.slice(c-n))}else{a=i+a}return a}});var Le=1..toPrecision;F(F.P+F.F*(a(function(){return Le.call(1,undefined)!=="1"})||!a(function(){Le.call({})})),"Number",{toPrecision:function r(t){var e=xe(this,"Number#toPrecision: incorrect invocation!");return t===undefined?Le.call(e):Le.call(e,t)}});F(F.S,"Number",{EPSILON:Math.pow(2,-52)});var De=e.isFinite;F(F.S,"Number",{isFinite:function r(t){return typeof t=="number"&&De(t)}});var Ce=Math.floor;var We=function r(t){return!c(t)&&isFinite(t)&&Ce(t)===t};F(F.S,"Number",{isInteger:We});F(F.S,"Number",{isNaN:function r(t){return t!=t}});var Ge=Math.abs;F(F.S,"Number",{isSafeInteger:function r(t){return We(t)&&Ge(t)<=9007199254740991}});F(F.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});F(F.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});F(F.S+F.F*(Number.parseFloat!=ue),"Number",{parseFloat:ue});F(F.S+F.F*(Number.parseInt!=ie),"Number",{parseInt:ie});var Ue=Math.log1p||function r(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)};var ze=Math.sqrt;var Ve=Math.acosh;F(F.S+F.F*!(Ve&&Math.floor(Ve(Number.MAX_VALUE))==710&&Ve(Infinity)==Infinity),"Math",{acosh:function r(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:Ue(t-1+ze(t-1)*ze(t+1))}});var Be=Math.asinh;function He(r){return!isFinite(r=+r)||r==0?r:r<0?-He(-r):Math.log(r+Math.sqrt(r*r+1))}F(F.S+F.F*!(Be&&1/Be(0)>0),"Math",{asinh:He});var Ke=Math.atanh;F(F.S+F.F*!(Ke&&1/Ke(-0)<0),"Math",{atanh:function r(t){return(t=+t)==0?t:Math.log((1+t)/(1-t))/2}});var Ye=Math.sign||function r(t){return(t=+t)==0||t!=t?t:t<0?-1:1};F(F.S,"Math",{cbrt:function r(t){return Ye(t=+t)*Math.pow(Math.abs(t),1/3)}});F(F.S,"Math",{clz32:function r(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Je=Math.exp;F(F.S,"Math",{cosh:function r(t){return(Je(t=+t)+Je(-t))/2}});var $e=Math.expm1;var qe=!$e||$e(10)>22025.465794806718||$e(10)<22025.465794806718||$e(-2e-17)!=-2e-17?function r(t){return(t=+t)==0?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:$e;F(F.S+F.F*(qe!=Math.expm1),"Math",{expm1:qe});var Xe=Math.pow;var Ze=Xe(2,-52);var Qe=Xe(2,-23);var rn=Xe(2,127)*(2-Qe);var tn=Xe(2,-126);var en=function r(t){return t+1/Ze-1/Ze};var nn=Math.fround||function r(t){var e=Math.abs(t);var n=Ye(t);var i,a;if(e<tn)return n*en(e/tn/Qe)*tn*Qe;i=(1+Qe/Ze)*e;a=i-(i-e);if(a>rn||a!=a)return n*Infinity;return n*a};F(F.S,"Math",{fround:nn});var an=Math.abs;F(F.S,"Math",{hypot:function r(t,e){var n=0;var i=0;var a=arguments.length;var o=0;var u,f;while(i<a){u=an(arguments[i++]);if(o<u){f=o/u;n=n*f*f+1;o=u}else if(u>0){f=u/o;n+=f*f}else n+=u}return o===Infinity?Infinity:o*Math.sqrt(n)}});var on=Math.imul;F(F.S+F.F*a(function(){return on(4294967295,5)!=-5||on.length!=2}),"Math",{imul:function r(t,e){var n=65535;var i=+t;var a=+e;var o=n&i;var u=n&a;return 0|o*u+((n&i>>>16)*u+o*(n&a>>>16)<<16>>>0)}});F(F.S,"Math",{log10:function r(t){return Math.log(t)*Math.LOG10E}});F(F.S,"Math",{log1p:Ue});F(F.S,"Math",{log2:function r(t){return Math.log(t)/Math.LN2}});F(F.S,"Math",{sign:Ye});var un=Math.exp;F(F.S+F.F*a(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function r(t){return Math.abs(t=+t)<1?(qe(t)-qe(-t))/2:(un(t-1)-un(-t-1))*(Math.E/2)}});var fn=Math.exp;F(F.S,"Math",{tanh:function r(t){var e=qe(t=+t);var n=qe(-t);return e==Infinity?1:n==Infinity?-1:(e-n)/(fn(t)+fn(-t))}});F(F.S,"Math",{trunc:function r(t){return(t>0?Math.floor:Math.ceil)(t)}});var cn=String.fromCharCode;var sn=String.fromCodePoint;F(F.S+F.F*(!!sn&&sn.length!=1),"String",{fromCodePoint:function r(t){var e=[];var n=arguments.length;var i=0;var a;while(n>i){a=+arguments[i++];if(ir(a,1114111)!==a)throw RangeError(a+" is not a valid code point");e.push(a<65536?cn(a):cn(((a-=65536)>>10)+55296,a%1024+56320))}return e.join("")}});F(F.S,"String",{raw:function r(t){var e=q(t.raw);var n=tr(e.length);var i=arguments.length;var a=[];var o=0;while(n>o){a.push(String(e[o++]));if(o<i)a.push(String(arguments[o]))}return a.join("")}});re("trim",function(r){return function t(){return r(this,3)}});var ln=function(r){return function(t,e){var n=String($(t));var i=Q(e);var a=n.length;var o,u;if(i<0||i>=a)return r?"":undefined;o=n.charCodeAt(i);return o<55296||o>56319||i+1===a||(u=n.charCodeAt(i+1))<56320||u>57343?r?n.charAt(i):o:r?n.slice(i,i+2):(o-55296<<10)+(u-56320)+65536}};var vn={};var hn={};m(hn,C("iterator"),function(){return this});var pn=function(r,t,e){r.prototype=Pr(hn,{next:w(1,e)});U(r,t+" Iterator")};var dn=C("iterator");var yn=!([].keys&&"next"in[].keys());var gn="@@iterator";var bn="keys";var wn="values";var mn=function r(){return this};var Sn=function(r,t,e,n,i,a,o){pn(e,t,n);var u=function r(t){if(!yn&&t in l)return l[t];switch(t){case bn:return function r(){return new e(this,t)};case wn:return function r(){return new e(this,t)}}return function r(){return new e(this,t)}};var f=t+" Iterator";var c=i==wn;var s=false;var l=r.prototype;var v=l[dn]||l[gn]||i&&l[i];var h=v||u(i);var p=i?!c?h:u("entries"):undefined;var d=t=="Array"?l.entries||v:v;var y,g,b;if(d){b=_t(d.call(new r));if(b!==Object.prototype&&b.next){U(b,f,true);if(typeof b[dn]!="function")m(b,dn,mn)}}if(c&&v&&v.name!==wn){s=true;h=function r(){return v.call(this)}}if(yn||s||!l[dn]){m(l,dn,h)}vn[t]=h;vn[f]=mn;if(i){y={values:c?h:u(wn),keys:a?h:u(bn),entries:p};if(o)for(g in y){if(!(g in l))x(l,g,y[g])}else F(F.P+F.F*(yn||s),t,y)}return y};var _n=ln(true);Sn(String,"String",function(r){this._t=String(r);this._i=0},function(){var r=this._t;var t=this._i;var e;if(t>=r.length)return{value:undefined,done:true};e=_n(r,t);this._i+=e.length;return{value:e,done:false}});var On=ln(false);F(F.P,"String",{codePointAt:function r(t){return On(this,t)}});var xn=C("match");var En=function(r){var t;return c(r)&&((t=r[xn])!==undefined?!!t:Y(r)=="RegExp")};var Pn=function(r,t,e){if(En(t))throw TypeError("String#"+e+" doesn't accept regex!");return String($(r))};var jn=C("match");var Mn=function(r){var t=/./;try{"/./"[r](t)}catch(e){try{t[jn]=false;return!"/./"[r](t)}catch(r){}}return true};var Fn="endsWith";var In=""[Fn];F(F.P+F.F*Mn(Fn),"String",{endsWith:function r(t){var e=Pn(this,t,Fn);var n=arguments.length>1?arguments[1]:undefined;var i=tr(e.length);var a=n===undefined?i:Math.min(tr(n),i);var o=String(t);return In?In.call(e,o,a):e.slice(a-o.length,a)===o}});var An="includes";F(F.P+F.F*Mn(An),"String",{includes:function r(t){return!!~Pn(this,t,An).indexOf(t,arguments.length>1?arguments[1]:undefined)}});F(F.P,"String",{repeat:Ee});var Tn="startsWith";var kn=""[Tn];F(F.P+F.F*Mn(Tn),"String",{startsWith:function r(t){var e=Pn(this,t,Tn);var n=tr(Math.min(arguments.length>1?arguments[1]:undefined,e.length));var i=String(t);return kn?kn.call(e,i,n):e.slice(n,n+i.length)===i}});var Nn=/"/g;var Rn=function r(t,e,n,i){var a=String($(t));var o="<"+e;if(n!=="")o+=" "+n+'="'+String(i).replace(Nn,"&quot;")+'"';return o+">"+a+"</"+e+">"};var Ln=function(r,t){var e={};e[r]=t(Rn);F(F.P+F.F*a(function(){var t=""[r]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",e)};Ln("anchor",function(r){return function t(e){return r(this,"a","name",e)}});Ln("big",function(r){return function t(){return r(this,"big","","")}});Ln("blink",function(r){return function t(){return r(this,"blink","","")}});Ln("bold",function(r){return function t(){return r(this,"b","","")}});Ln("fixed",function(r){return function t(){return r(this,"tt","","")}});Ln("fontcolor",function(r){return function t(e){return r(this,"font","color",e)}});Ln("fontsize",function(r){return function t(e){return r(this,"font","size",e)}});Ln("italics",function(r){return function t(){return r(this,"i","","")}});Ln("link",function(r){return function t(e){return r(this,"a","href",e)}});Ln("small",function(r){return function t(){return r(this,"small","","")}});Ln("strike",function(r){return function t(){return r(this,"strike","","")}});Ln("sub",function(r){return function t(){return r(this,"sub","","")}});Ln("sup",function(r){return function t(){return r(this,"sup","","")}});F(F.S,"Date",{now:function r(){return(new Date).getTime()}});F(F.P+F.F*a(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function r(){return 1}})!==1}),"Date",{toJSON:function r(t){var e=wt(this);var n=d(e);return typeof n=="number"&&!isFinite(n)?null:e.toISOString()}});var Dn=Date.prototype.getTime;var Cn=Date.prototype.toISOString;var Wn=function r(t){return t>9?t:"0"+t};var Gn=a(function(){return Cn.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!a(function(){Cn.call(new Date(NaN))})?function r(){if(!isFinite(Dn.call(this)))throw RangeError("Invalid time value");var t=this;var e=t.getUTCFullYear();var n=t.getUTCMilliseconds();var i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+Wn(t.getUTCMonth()+1)+"-"+Wn(t.getUTCDate())+"T"+Wn(t.getUTCHours())+":"+Wn(t.getUTCMinutes())+":"+Wn(t.getUTCSeconds())+"."+(n>99?n:"0"+Wn(n))+"Z"}:Cn;F(F.P+F.F*(Date.prototype.toISOString!==Gn),"Date",{toISOString:Gn});var Un=Date.prototype;var zn="Invalid Date";var Vn="toString";var Bn=Un[Vn];var Hn=Un.getTime;if(new Date(NaN)+""!=zn){x(Un,Vn,function r(){var t=Hn.call(this);return t===t?Bn.call(this):zn})}var Kn="number";var Yn=function(r){if(r!=="string"&&r!==Kn&&r!=="default")throw TypeError("Incorrect hint");return d(s(this),r!=Kn)};var Jn=C("toPrimitive");var $n=Date.prototype;if(!(Jn in $n))m($n,Jn,Yn);F(F.S,"Array",{isArray:br});var qn=function(r,t,e,n){try{return n?t(s(e)[0],e[1]):t(e)}catch(t){var i=r["return"];if(i!==undefined)s(i.call(r));throw t}};var Xn=C("iterator");var Zn=Array.prototype;var Qn=function(r){return r!==undefined&&(vn.Array===r||Zn[Xn]===r)};var ri=function(r,t,e){if(t in r)b.f(r,t,w(0,e));else r[t]=e};var ti=C("iterator");var ei=u.getIteratorMethod=function(r){if(r!=undefined)return r[ti]||r["@@iterator"]||vn[Nt(r)]};var ni=C("iterator");var ii=false;try{var ai=[7][ni]();ai["return"]=function(){ii=true}}catch(r){}var oi=function(r,t){if(!t&&!ii)return false;var e=false;try{var n=[7];var i=n[ni]();i.next=function(){return{done:e=true}};n[ni]=function(){return i};r(n)}catch(r){}return e};F(F.S+F.F*!oi(function(r){}),"Array",{from:function r(t){var e=wt(t);var n=typeof this=="function"?this:Array;var i=arguments.length;var a=i>1?arguments[1]:undefined;var o=a!==undefined;var u=0;var f=ei(e);var c,s,l,v;if(o)a=P(a,i>2?arguments[2]:undefined,2);if(f!=undefined&&!(n==Array&&Qn(f))){for(v=f.call(e),s=new n;!(l=v.next()).done;u++){ri(s,u,o?qn(v,a,[l.value,u],true):l.value)}}else{c=tr(e.length);for(s=new n(c);c>u;u++){ri(s,u,o?a(e[u],u):e[u])}}s.length=u;return s}});F(F.S+F.F*a(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function r(){var t=0;var e=arguments.length;var n=new(typeof this=="function"?this:Array)(e);while(e>t){ri(n,t,arguments[t++])}n.length=e;return n}});var ui=function(r,t){return!!r&&a(function(){t?r.call(null,function(){},1):r.call(null)})};var fi=[].join;F(F.P+F.F*(J!=Object||!ui(fi)),"Array",{join:function r(t){return fi.call(q(this),t===undefined?",":t)}});var ci=[].slice;F(F.P+F.F*a(function(){if(Sr)ci.call(Sr)}),"Array",{slice:function r(t,e){var n=tr(this.length);var i=Y(this);e=e===undefined?n:e;if(i=="Array")return ci.call(this,t,e);var a=ir(t,n);var o=ir(e,n);var u=tr(o-a);var f=new Array(u);var c=0;for(;c<u;c++){f[c]=i=="String"?this.charAt(a+c):this[a+c]}return f}});var si=[].sort;var li=[1,2,3];F(F.P+F.F*(a(function(){li.sort(undefined)})||!a(function(){li.sort(null)})||!ui(si)),"Array",{sort:function r(t){return t===undefined?si.call(wt(this)):si.call(wt(this),E(t))}});var vi=C("species");var hi=function(r){var t;if(br(r)){t=r.constructor;if(typeof t=="function"&&(t===Array||br(t.prototype)))t=undefined;if(c(t)){t=t[vi];if(t===null)t=undefined}}return t===undefined?Array:t};var pi=function(r,t){return new(hi(r))(t)};var di=function(r,t){var e=r==1;var n=r==2;var i=r==3;var a=r==4;var o=r==6;var u=r==5||o;var f=t||pi;return function(t,c,s){var l=wt(t);var v=J(l);var h=P(c,s,3);var p=tr(v.length);var d=0;var y=e?f(t,p):n?f(t,0):undefined;var g,b;for(;p>d;d++){if(u||d in v){g=v[d];b=h(g,d,l);if(r){if(e)y[d]=b;else if(b)switch(r){case 3:return true;case 5:return g;case 6:return d;case 2:y.push(g)}else if(a)return false}}}return o?-1:i||a?a:y}};var yi=di(0);var gi=ui([].forEach,true);F(F.P+F.F*!gi,"Array",{forEach:function r(t){return yi(this,t,arguments[1])}});var bi=di(1);F(F.P+F.F*!ui([].map,true),"Array",{map:function r(t){return bi(this,t,arguments[1])}});var wi=di(2);F(F.P+F.F*!ui([].filter,true),"Array",{filter:function r(t){return wi(this,t,arguments[1])}});var mi=di(3);F(F.P+F.F*!ui([].some,true),"Array",{some:function r(t){return mi(this,t,arguments[1])}});var Si=di(4);F(F.P+F.F*!ui([].every,true),"Array",{every:function r(t){return Si(this,t,arguments[1])}});var _i=function(r,t,e,n,i){E(t);var a=wt(r);var o=J(a);var u=tr(a.length);var f=i?u-1:0;var c=i?-1:1;if(e<2)for(;;){if(f in o){n=o[f];f+=c;break}f+=c;if(i?f<0:u<=f){throw TypeError("Reduce of empty array with no initial value")}}for(;i?f>=0:u>f;f+=c){if(f in o){n=t(n,o[f],f,a)}}return n};F(F.P+F.F*!ui([].reduce,true),"Array",{reduce:function r(t){return _i(this,t,arguments.length,arguments[1],false)}});F(F.P+F.F*!ui([].reduceRight,true),"Array",{reduceRight:function r(t){return _i(this,t,arguments.length,arguments[1],true)}});var Oi=ar(false);var xi=[].indexOf;var Ei=!!xi&&1/[1].indexOf(1,-0)<0;F(F.P+F.F*(Ei||!ui(xi)),"Array",{indexOf:function r(t){return Ei?xi.apply(this,arguments)||0:Oi(this,t,arguments[1])}});var Pi=[].lastIndexOf;var ji=!!Pi&&1/[1].lastIndexOf(1,-0)<0;F(F.P+F.F*(ji||!ui(Pi)),"Array",{lastIndexOf:function r(t){if(ji)return Pi.apply(this,arguments)||0;var e=q(this);var n=tr(e.length);var i=n-1;if(arguments.length>1)i=Math.min(i,Q(arguments[1]));if(i<0)i=n+i;for(;i>=0;i--){if(i in e)if(e[i]===t)return i||0}return-1}});var Mi=[].copyWithin||function r(t,e){var n=wt(this);var i=tr(n.length);var a=ir(t,i);var o=ir(e,i);var u=arguments.length>2?arguments[2]:undefined;var f=Math.min((u===undefined?i:ir(u,i))-o,i-a);var c=1;if(o<a&&a<o+f){c=-1;o+=f-1;a+=f-1}while(f-- >0){if(o in n)n[a]=n[o];else delete n[a];a+=c;o+=c}return n};var Fi=C("unscopables");var Ii=Array.prototype;if(Ii[Fi]==undefined)m(Ii,Fi,{});var Ai=function(r){Ii[Fi][r]=true};F(F.P,"Array",{copyWithin:Mi});Ai("copyWithin");var Ti=function r(t){var e=wt(this);var n=tr(e.length);var i=arguments.length;var a=ir(i>1?arguments[1]:undefined,n);var o=i>2?arguments[2]:undefined;var u=o===undefined?n:ir(o,n);while(u>a){e[a++]=t}return e};F(F.P,"Array",{fill:Ti});Ai("fill");var ki=di(5);var Ni="find";var Ri=true;if(Ni in[])Array(1)[Ni](function(){Ri=false});F(F.P+F.F*Ri,"Array",{find:function r(t){return ki(this,t,arguments.length>1?arguments[1]:undefined)}});Ai(Ni);var Li=di(6);var Di="findIndex";var Ci=true;if(Di in[])Array(1)[Di](function(){Ci=false});F(F.P+F.F*Ci,"Array",{findIndex:function r(t){return Li(this,t,arguments.length>1?arguments[1]:undefined)}});Ai(Di);var Wi=C("species");var Gi=function(r){var t=e[r];if(o&&t&&!t[Wi])b.f(t,Wi,{configurable:true,get:function r(){return this}})};Gi("Array");var Ui=function(r,t){return{value:t,done:!!r}};var zi=Sn(Array,"Array",function(r,t){this._t=q(r);this._i=0;this._k=t},function(){var r=this._t;var t=this._k;var e=this._i++;if(!r||e>=r.length){this._t=undefined;return Ui(1)}if(t=="keys")return Ui(0,e);if(t=="values")return Ui(0,r[e]);return Ui(0,[e,r[e]])},"values");vn.Arguments=vn.Array;Ai("keys");Ai("values");Ai("entries");var Vi=function(){var r=s(this);var t="";if(r.global)t+="g";if(r.ignoreCase)t+="i";if(r.multiline)t+="m";if(r.unicode)t+="u";if(r.sticky)t+="y";return t};var Bi=b.f;var Hi=Fr.f;var Ki=e.RegExp;var Yi=Ki;var Ji=Ki.prototype;var $i=/a/g;var qi=/a/g;var Xi=new Ki($i)!==$i;if(o&&(!Xi||a(function(){qi[C("match")]=false;return Ki($i)!=$i||Ki(qi)==qi||Ki($i,"i")!="/a/i"}))){Ki=function r(t,e){var n=this instanceof Ki;var i=En(t);var a=e===undefined;return!n&&i&&t.constructor===Ki&&a?t:ce(Xi?new Yi(i&&!a?t.source:t,e):Yi((i=t instanceof Ki)?t.source:t,i&&a?Vi.call(t):e),n?this:Ji,Ki)};var Zi=function r(t){t in Ki||Bi(Ki,t,{configurable:true,get:function r(){return Yi[t]},set:function r(e){Yi[t]=e}})};for(var Qi=Hi(Yi),ra=0;Qi.length>ra;){Zi(Qi[ra++])}Ji.constructor=Ki;Ki.prototype=Ji;x(e,"RegExp",Ki)}Gi("RegExp");var ta=RegExp.prototype.exec;var ea=String.prototype.replace;var na=ta;var ia="lastIndex";var aa=function(){var r=/a/,t=/b*/g;ta.call(r,"a");ta.call(t,"a");return r[ia]!==0||t[ia]!==0}();var oa=/()??/.exec("")[1]!==undefined;var ua=aa||oa;if(ua){na=function r(t){var e=this;var n,i,a,o;if(oa){i=new RegExp("^"+e.source+"$(?!\\s)",Vi.call(e))}if(aa)n=e[ia];a=ta.call(e,t);if(aa&&a){e[ia]=e.global?a.index+a[0].length:n}if(oa&&a&&a.length>1){ea.call(a[0],i,function(){for(o=1;o<arguments.length-2;o++){if(arguments[o]===undefined)a[o]=undefined}})}return a}}var fa=na;F({target:"RegExp",proto:true,forced:fa!==/./.exec},{exec:fa});if(o&&/./g.flags!="g")b.f(RegExp.prototype,"flags",{configurable:true,get:Vi});var ca="toString";var sa=/./[ca];var la=function r(t){x(RegExp.prototype,ca,t,true)};if(a(function(){return sa.call({source:"a",flags:"b"})!="/a/b"})){la(function r(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?Vi.call(t):undefined)})}else if(sa.name!=ca){la(function r(){return sa.call(this)})}var va=ln(true);var ha=function(r,t,e){return t+(e?va(r,t).length:1)};var pa=RegExp.prototype.exec;var da=function(r,t){var e=r.exec;if(typeof e==="function"){var n=e.call(r,t);if(babelHelpers.typeof(n)!=="object"){throw new TypeError("RegExp exec method returned something other than an Object or null")}return n}if(Nt(r)!=="RegExp"){throw new TypeError("RegExp#exec called on incompatible receiver")}return pa.call(r,t)};var ya=C("species");var ga=!a(function(){var r=/./;r.exec=function(){var r=[];r.groups={a:"7"};return r};return"".replace(r,"$<a>")!=="7"});var ba=function(){var r=/(?:)/;var t=r.exec;r.exec=function(){return t.apply(this,arguments)};var e="ab".split(r);return e.length===2&&e[0]==="a"&&e[1]==="b"}();var wa=function(r,t,e){var n=C(r);var i=!a(function(){var t={};t[n]=function(){return 7};return""[r](t)!=7});var o=i?!a(function(){var t=false;var e=/a/;e.exec=function(){t=true;return null};if(r==="split"){e.constructor={};e.constructor[ya]=function(){return e}}e[n]("");return!t}):undefined;if(!i||!o||r==="replace"&&!ga||r==="split"&&!ba){var u=/./[n];var f=e($,n,""[r],function r(t,e,n,a,o){if(e.exec===fa){if(i&&!o){return{done:true,value:u.call(e,n,a)}}return{done:true,value:t.call(n,e,a)}}return{done:false}});var c=f[0];var s=f[1];x(String.prototype,r,c);m(RegExp.prototype,n,t==2?function(r,t){return s.call(r,this,t)}:function(r){return s.call(r,this)})}};wa("match",1,function(r,t,e,n){return[function e(n){var i=r(this);var a=n==undefined?undefined:n[t];return a!==undefined?a.call(n,i):new RegExp(n)[t](String(i))},function(r){var t=n(e,r,this);if(t.done)return t.value;var i=s(r);var a=String(this);if(!i.global)return da(i,a);var o=i.unicode;i.lastIndex=0;var u=[];var f=0;var c;while((c=da(i,a))!==null){var l=String(c[0]);u[f]=l;if(l==="")i.lastIndex=ha(a,tr(i.lastIndex),o);f++}return f===0?null:u}]});var ma=Math.max;var Sa=Math.min;var _a=Math.floor;var Oa=/\$([$&`']|\d\d?|<[^>]*>)/g;var xa=/\$([$&`']|\d\d?)/g;var Ea=function r(t){return t===undefined?t:String(t)};wa("replace",2,function(r,t,e,n){return[function n(i,a){var o=r(this);var u=i==undefined?undefined:i[t];return u!==undefined?u.call(i,o,a):e.call(String(o),i,a)},function(r,t){var a=n(e,r,this,t);if(a.done)return a.value;var o=s(r);var u=String(this);var f=typeof t==="function";if(!f)t=String(t);var c=o.global;if(c){var l=o.unicode;o.lastIndex=0}var v=[];while(true){var h=da(o,u);if(h===null)break;v.push(h);if(!c)break;var p=String(h[0]);if(p==="")o.lastIndex=ha(u,tr(o.lastIndex),l)}var d="";var y=0;for(var g=0;g<v.length;g++){h=v[g];var b=String(h[0]);var w=ma(Sa(Q(h.index),u.length),0);var m=[];for(var S=1;S<h.length;S++){m.push(Ea(h[S]))}var _=h.groups;if(f){var O=[b].concat(m,w,u);if(_!==undefined)O.push(_);var x=String(t.apply(undefined,O))}else{x=i(b,u,w,m,_,t)}if(w>=y){d+=u.slice(y,w)+x;y=w+b.length}}return d+u.slice(y)}];function i(r,t,n,i,a,o){var u=n+r.length;var f=i.length;var c=xa;if(a!==undefined){a=wt(a);c=Oa}return e.call(o,c,function(e,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return r;case"`":return t.slice(0,n);case"'":return t.slice(u);case"<":c=a[o.slice(1,-1)];break;default:var s=+o;if(s===0)return e;if(s>f){var l=_a(s/10);if(l===0)return e;if(l<=f)return i[l-1]===undefined?o.charAt(1):i[l-1]+o.charAt(1);return e}c=i[s-1]}return c===undefined?"":c})}});wa("search",1,function(r,t,e,n){return[function e(n){var i=r(this);var a=n==undefined?undefined:n[t];return a!==undefined?a.call(n,i):new RegExp(n)[t](String(i))},function(r){var t=n(e,r,this);if(t.done)return t.value;var i=s(r);var a=String(this);var o=i.lastIndex;if(!Mt(o,0))i.lastIndex=0;var u=da(i,a);if(!Mt(i.lastIndex,o))i.lastIndex=o;return u===null?-1:u.index}]});var Pa=C("species");var ja=function(r,t){var e=s(r).constructor;var n;return e===undefined||(n=s(e)[Pa])==undefined?t:E(n)};var Ma=Math.min;var Fa=[].push;var Ia="split";var Aa="length";var Ta="lastIndex";var ka=4294967295;var Na=!a(function(){});wa("split",2,function(r,t,e,n){var i;if("abbc"[Ia](/(b)*/)[1]=="c"||"test"[Ia](/(?:)/,-1)[Aa]!=4||"ab"[Ia](/(?:ab)*/)[Aa]!=2||"."[Ia](/(.?)(.?)/)[Aa]!=4||"."[Ia](/()()/)[Aa]>1||""[Ia](/.?/)[Aa]){i=function r(t,n){var i=String(this);if(t===undefined&&n===0)return[];if(!En(t))return e.call(i,t,n);var a=[];var o=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"");var u=0;var f=n===undefined?ka:n>>>0;var c=new RegExp(t.source,o+"g");var s,l,v;while(s=fa.call(c,i)){l=c[Ta];if(l>u){a.push(i.slice(u,s.index));if(s[Aa]>1&&s.index<i[Aa])Fa.apply(a,s.slice(1));v=s[0][Aa];u=l;if(a[Aa]>=f)break}if(c[Ta]===s.index)c[Ta]++}if(u===i[Aa]){if(v||!c.test(""))a.push("")}else a.push(i.slice(u));return a[Aa]>f?a.slice(0,f):a}}else if("0"[Ia](undefined,0)[Aa]){i=function r(t,n){return t===undefined&&n===0?[]:e.call(this,t,n)}}else{i=e}return[function e(n,a){var o=r(this);var u=n==undefined?undefined:n[t];return u!==undefined?u.call(n,o,a):i.call(String(o),n,a)},function(r,t){var a=n(i,r,this,t,i!==e);if(a.done)return a.value;var o=s(r);var u=String(this);var f=ja(o,RegExp);var c=o.unicode;var l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Na?"y":"g");var v=new f(Na?o:"^(?:"+o.source+")",l);var h=t===undefined?ka:t>>>0;if(h===0)return[];if(u.length===0)return da(v,u)===null?[u]:[];var p=0;var d=0;var y=[];while(d<u.length){v.lastIndex=Na?d:0;var g=da(v,Na?u:u.slice(d));var b;if(g===null||(b=Ma(tr(v.lastIndex+(Na?0:d)),u.length))===p){d=ha(u,d,c)}else{y.push(u.slice(p,d));if(y.length===h)return y;for(var w=1;w<=g.length-1;w++){y.push(g[w]);if(y.length===h)return y}d=p=b}}y.push(u.slice(p));return y}]});var Ra=function(r,t,e,n){if(!(r instanceof t)||n!==undefined&&n in r){throw TypeError(e+": incorrect invocation!")}return r};var La=t(function(r){var t={};var e={};var n=r.exports=function(r,n,i,a,o){var u=o?function(){return r}:ei(r);var f=P(i,a,n?2:1);var c=0;var l,v,h,p;if(typeof u!="function")throw TypeError(r+" is not iterable!");if(Qn(u))for(l=tr(r.length);l>c;c++){p=n?f(s(v=r[c])[0],v[1]):f(r[c]);if(p===t||p===e)return p}else for(h=u.call(r);!(v=h.next()).done;){p=qn(h,f,v.value,n);if(p===t||p===e)return p}};n.BREAK=t;n.RETURN=e});var Da=e.process;var Ca=e.setImmediate;var Wa=e.clearImmediate;var Ga=e.MessageChannel;var Ua=e.Dispatch;var za=0;var Va={};var Ba="onreadystatechange";var Ha,Ka,Ya;var Ja=function r(){var t=+this;if(Va.hasOwnProperty(t)){var e=Va[t];delete Va[t];e()}};var $a=function r(t){Ja.call(t.data)};if(!Ca||!Wa){Ca=function r(t){var e=[];var n=1;while(arguments.length>n){e.push(arguments[n++])}Va[++za]=function(){Lt(typeof t=="function"?t:Function(t),e)};Ha(za);return za};Wa=function r(t){delete Va[t]};if(Y(Da)=="process"){Ha=function r(t){Da.nextTick(P(Ja,t,1))}}else if(Ua&&Ua.now){Ha=function r(t){Ua.now(P(Ja,t,1))}}else if(Ga){Ka=new Ga;Ya=Ka.port2;Ka.port1.onmessage=$a;Ha=P(Ya.postMessage,Ya,1)}else if(e.addEventListener&&typeof postMessage=="function"&&!e.importScripts){Ha=function r(t){e.postMessage(t+"","*")};e.addEventListener("message",$a,false)}else if(Ba in h("script")){Ha=function r(t){Sr.appendChild(h("script"))[Ba]=function(){Sr.removeChild(this);Ja.call(t)}}}else{Ha=function r(t){setTimeout(P(Ja,t,1),0)}}}var qa={set:Ca,clear:Wa};var Xa=qa.set;var Za=e.MutationObserver||e.WebKitMutationObserver;var Qa=e.process;var ro=e.Promise;var to=Y(Qa)=="process";var eo=function(){var r,t,n;var i=function e(){var i,a;if(to&&(i=Qa.domain))i.exit();while(r){a=r.fn;r=r.next;try{a()}catch(e){if(r)n();else t=undefined;throw e}}t=undefined;if(i)i.enter()};if(to){n=function r(){Qa.nextTick(i)}}else if(Za&&!(e.navigator&&e.navigator.standalone)){var a=true;var o=document.createTextNode("");new Za(i).observe(o,{characterData:true});n=function r(){o.data=a=!a}}else if(ro&&ro.resolve){var u=ro.resolve(undefined);n=function r(){u.then(i)}}else{n=function r(){Xa.call(e,i)}}return function(e){var i={fn:e,next:undefined};if(t)t.next=i;if(!r){r=i;n()}t=i}};function no(r){var t,e;this.promise=new r(function(r,n){if(t!==undefined||e!==undefined)throw TypeError("Bad Promise constructor");t=r;e=n});this.resolve=E(t);this.reject=E(e)}var io=function(r){return new no(r)};var ao={f:io};var oo=function(r){try{return{e:false,v:r()}}catch(r){return{e:true,v:r}}};var uo=e.navigator;var fo=uo&&uo.userAgent||"";var co=function(r,t){s(r);if(c(t)&&t.constructor===r)return t;var e=ao.f(r);var n=e.resolve;n(t);return e.promise};var so=function(r,t,e){for(var n in t){x(r,n,t[n],e)}return r};var lo=qa.set;var vo=eo();var ho="Promise";var po=e.TypeError;var yo=e.process;var go=yo&&yo.versions;var bo=go&&go.v8||"";var wo=e[ho];var mo=Nt(yo)=="process";var So=function r(){};var _o,Oo,xo,Eo;var Po=Oo=ao.f;var jo=!!function(){try{var r=wo.resolve(1);var t=(r.constructor={})[C("species")]=function(r){r(So,So)};return(mo||typeof PromiseRejectionEvent=="function")&&r.then(So)instanceof t&&bo.indexOf("6.6")!==0&&fo.indexOf("Chrome/66")===-1}catch(r){}}();var Mo=function r(t){var e;return c(t)&&typeof(e=t.then)=="function"?e:false};var Fo=function r(t,e){if(t._n)return;t._n=true;var n=t._c;vo(function(){var r=t._v;var i=t._s==1;var a=0;var o=function e(n){var a=i?n.ok:n.fail;var o=n.resolve;var u=n.reject;var f=n.domain;var c,s,l;try{if(a){if(!i){if(t._h==2)To(t);t._h=1}if(a===true)c=r;else{if(f)f.enter();c=a(r);if(f){f.exit();l=true}}if(c===n.promise){u(po("Promise-chain cycle"))}else if(s=Mo(c)){s.call(c,o,u)}else o(c)}else u(r)}catch(r){if(f&&!l)f.exit();u(r)}};while(n.length>a){o(n[a++])}t._c=[];t._n=false;if(e&&!t._h)Io(t)})};var Io=function r(t){lo.call(e,function(){var r=t._v;var n=Ao(t);var i,a,o;if(n){i=oo(function(){if(mo){yo.emit("unhandledRejection",r,t)}else if(a=e.onunhandledrejection){a({promise:t,reason:r})}else if((o=e.console)&&o.error){o.error("Unhandled promise rejection",r)}});t._h=mo||Ao(t)?2:1}t._a=undefined;if(n&&i.e)throw i.v})};var Ao=function r(t){return t._h!==1&&(t._a||t._c).length===0};var To=function r(t){lo.call(e,function(){var r;if(mo){yo.emit("rejectionHandled",t)}else if(r=e.onrejectionhandled){r({promise:t,reason:t._v})}})};var ko=function r(t){var e=this;if(e._d)return;e._d=true;e=e._w||e;e._v=t;e._s=2;if(!e._a)e._a=e._c.slice();Fo(e,true)};var No=function r(t){var e=this;var n;if(e._d)return;e._d=true;e=e._w||e;try{if(e===t)throw po("Promise can't be resolved itself");if(n=Mo(t)){vo(function(){var i={_w:e,_d:false};try{n.call(t,P(r,i,1),P(ko,i,1))}catch(r){ko.call(i,r)}})}else{e._v=t;e._s=1;Fo(e,false)}}catch(r){ko.call({_w:e,_d:false},r)}};if(!jo){wo=function r(t){Ra(this,wo,ho,"_h");E(t);_o.call(this);try{t(P(No,this,1),P(ko,this,1))}catch(r){ko.call(this,r)}};_o=function r(t){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};_o.prototype=so(wo.prototype,{then:function r(t,e){var n=Po(ja(this,wo));n.ok=typeof t=="function"?t:true;n.fail=typeof e=="function"&&e;n.domain=mo?yo.domain:undefined;this._c.push(n);if(this._a)this._a.push(n);if(this._s)Fo(this,false);return n.promise},catch:function r(t){return this.then(undefined,t)}});xo=function r(){var t=new _o;this.promise=t;this.resolve=P(No,t,1);this.reject=P(ko,t,1)};ao.f=Po=function r(t){return t===wo||t===Eo?new xo(t):Oo(t)}}F(F.G+F.W+F.F*!jo,{Promise:wo});U(wo,ho);Gi(ho);Eo=u[ho];F(F.S+F.F*!jo,ho,{reject:function r(t){var e=Po(this);var n=e.reject;n(t);return e.promise}});F(F.S+F.F*(L||!jo),ho,{resolve:function r(t){return co(L&&this===Eo?wo:this,t)}});F(F.S+F.F*!(jo&&oi(function(r){wo.all(r)["catch"](So)})),ho,{all:function r(t){var e=this;var n=Po(e);var i=n.resolve;var a=n.reject;var o=oo(function(){var r=[];var n=0;var o=1;La(t,false,function(t){var u=n++;var f=false;r.push(undefined);o++;e.resolve(t).then(function(t){if(f)return;f=true;r[u]=t;--o||i(r)},a)});--o||i(r)});if(o.e)a(o.v);return n.promise},race:function r(t){var e=this;var n=Po(e);var i=n.reject;var a=oo(function(){La(t,false,function(r){e.resolve(r).then(n.resolve,i)})});if(a.e)i(a.v);return n.promise}});var Ro=function(r,t){if(!c(r)||r._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return r};var Lo=b.f;var Do=I.fastKey;var Co=o?"_s":"size";var Wo=function r(t,e){var n=Do(e);var i;if(n!=="F")return t._i[n];for(i=t._f;i;i=i.n){if(i.k==e)return i}};var Go={getConstructor:function r(t,e,n,i){var a=t(function(r,t){Ra(r,a,e,"_i");r._t=e;r._i=Pr(null);r._f=undefined;r._l=undefined;r[Co]=0;if(t!=undefined)La(t,n,r[i],r)});so(a.prototype,{clear:function r(){for(var t=Ro(this,e),n=t._i,i=t._f;i;i=i.n){i.r=true;if(i.p)i.p=i.p.n=undefined;delete n[i.i]}t._f=t._l=undefined;t[Co]=0},delete:function r(t){var n=Ro(this,e);var i=Wo(n,t);if(i){var a=i.n;var o=i.p;delete n._i[i.i];i.r=true;if(o)o.n=a;if(a)a.p=o;if(n._f==i)n._f=a;if(n._l==i)n._l=o;n[Co]--}return!!i},forEach:function r(t){Ro(this,e);var n=P(t,arguments.length>1?arguments[1]:undefined,3);var i;while(i=i?i.n:this._f){n(i.v,i.k,this);while(i&&i.r){i=i.p}}},has:function r(t){return!!Wo(Ro(this,e),t)}});if(o)Lo(a.prototype,"size",{get:function r(){return Ro(this,e)[Co]}});return a},def:function r(t,e,n){var i=Wo(t,e);var a,o;if(i){i.v=n}else{t._l=i={i:o=Do(e,true),k:e,v:n,p:a=t._l,n:undefined,r:false};if(!t._f)t._f=i;if(a)a.n=i;t[Co]++;if(o!=="F")t._i[o]=i}return t},getEntry:Wo,setStrong:function r(t,e,n){Sn(t,e,function(r,t){this._t=Ro(r,e);this._k=t;this._l=undefined},function(){var r=this;var t=r._k;var e=r._l;while(e&&e.r){e=e.p}if(!r._t||!(r._l=e=e?e.n:r._t._f)){r._t=undefined;return Ui(1)}if(t=="keys")return Ui(0,e.k);if(t=="values")return Ui(0,e.v);return Ui(0,[e.k,e.v])},n?"entries":"values",!n,true);Gi(e)}};var Uo=function(r,t,n,i,o,u){var f=e[r];var s=f;var l=o?"set":"add";var v=s&&s.prototype;var h={};var p=function r(t){var e=v[t];x(v,t,t=="delete"?function(r){return u&&!c(r)?false:e.call(this,r===0?0:r)}:t=="has"?function r(t){return u&&!c(t)?false:e.call(this,t===0?0:t)}:t=="get"?function r(t){return u&&!c(t)?undefined:e.call(this,t===0?0:t)}:t=="add"?function r(t){e.call(this,t===0?0:t);return this}:function r(t,n){e.call(this,t===0?0:t,n);return this})};if(typeof s!="function"||!(u||v.forEach&&!a(function(){(new s).entries().next()}))){s=i.getConstructor(t,r,o,l);so(s.prototype,n);I.NEED=true}else{var d=new s;var y=d[l](u?{}:-0,1)!=d;var g=a(function(){d.has(1)});var b=oi(function(r){new s(r)});var w=!u&&a(function(){var r=new s;var t=5;while(t--){r[l](t,t)}return!r.has(-0)});if(!b){s=t(function(t,e){Ra(t,s,r);var n=ce(new f,t,s);if(e!=undefined)La(e,o,n[l],n);return n});s.prototype=v;v.constructor=s}if(g||w){p("delete");p("has");o&&p("get")}if(w||y)p(l);if(u&&v.clear)delete v.clear}U(s,r);h[r]=s;F(F.G+F.W+F.F*(s!=f),h);if(!u)i.setStrong(s,r,o);return s};var zo="Map";var Vo=Uo(zo,function(r){return function t(){return r(this,arguments.length>0?arguments[0]:undefined)}},{get:function r(t){var e=Go.getEntry(Ro(this,zo),t);return e&&e.v},set:function r(t,e){return Go.def(Ro(this,zo),t===0?0:t,e)}},Go,true);var Bo="Set";var Ho=Uo(Bo,function(r){return function t(){return r(this,arguments.length>0?arguments[0]:undefined)}},{add:function r(t){return Go.def(Ro(this,Bo),t=t===0?0:t,t)}},Go);var Ko=I.getWeak;var Yo=di(5);var Jo=di(6);var $o=0;var qo=function r(t){return t._l||(t._l=new Xo)};var Xo=function r(){this.a=[]};var Zo=function r(t,e){return Yo(t.a,function(r){return r[0]===e})};Xo.prototype={get:function r(t){var e=Zo(this,t);if(e)return e[1]},has:function r(t){return!!Zo(this,t)},set:function r(t,e){var n=Zo(this,t);if(n)n[1]=e;else this.a.push([t,e])},delete:function r(t){var e=Jo(this.a,function(r){return r[0]===t});if(~e)this.a.splice(e,1);return!!~e}};var Qo={getConstructor:function r(t,e,n,a){var o=t(function(r,t){Ra(r,o,e,"_i");r._t=e;r._i=$o++;r._l=undefined;if(t!=undefined)La(t,n,r[a],r)});so(o.prototype,{delete:function r(t){if(!c(t))return false;var n=Ko(t);if(n===true)return qo(Ro(this,e))["delete"](t);return n&&i(n,this._i)&&delete n[this._i]},has:function r(t){if(!c(t))return false;var n=Ko(t);if(n===true)return qo(Ro(this,e)).has(t);return n&&i(n,this._i)}});return o},def:function r(t,e,n){var i=Ko(s(e),true);if(i===true)qo(t).set(e,n);else i[t._i]=n;return t},ufstore:qo};var ru=t(function(r){var t=di(0);var e="WeakMap";var n=I.getWeak;var i=Object.isExtensible;var o=Qo.ufstore;var u={};var f;var s=function r(t){return function r(){return t(this,arguments.length>0?arguments[0]:undefined)}};var l={get:function r(t){if(c(t)){var i=n(t);if(i===true)return o(Ro(this,e)).get(t);return i?i[this._i]:undefined}},set:function r(t,n){return Qo.def(Ro(this,e),t,n)}};var v=r.exports=Uo(e,s,l,Qo,true,true);if(a(function(){return(new v).set((Object.freeze||Object)(u),7).get(u)!=7})){f=Qo.getConstructor(s,e);jt(f.prototype,l);I.NEED=true;t(["delete","has","get","set"],function(r){var t=v.prototype;var e=t[r];x(t,r,function(t,n){if(c(t)&&!i(t)){if(!this._f)this._f=new f;var a=this._f[r](t,n);return r=="set"?this:a}return e.call(this,t,n)})})}});var tu="WeakSet";Uo(tu,function(r){return function t(){return r(this,arguments.length>0?arguments[0]:undefined)}},{add:function r(t){return Qo.def(Ro(this,tu),t,true)}},Qo,false,true);var eu=O("typed_array");var nu=O("view");var iu=!!(e.ArrayBuffer&&e.DataView);var au=iu;var ou=0;var uu=9;var fu;var cu="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(ou<uu){if(fu=e[cu[ou++]]){m(fu.prototype,eu,true);m(fu.prototype,nu,true)}else au=false}var su={ABV:iu,CONSTR:au,TYPED:eu,VIEW:nu};var lu=function(r){if(r===undefined)return 0;var t=Q(r);var e=tr(t);if(t!==e)throw RangeError("Wrong length!");return e};var vu=t(function(r,t){var n=Fr.f;var i=b.f;var u="ArrayBuffer";var f="DataView";var c="prototype";var s="Wrong length!";var l="Wrong index!";var v=e[u];var h=e[f];var p=e.Math;var d=e.RangeError;var y=e.Infinity;var g=v;var w=p.abs;var S=p.pow;var _=p.floor;var O=p.log;var x=p.LN2;var E="buffer";var P="byteLength";var j="byteOffset";var M=o?"_b":E;var F=o?"_l":P;var I=o?"_o":j;function A(r,t,e){var n=new Array(e);var i=e*8-t-1;var a=(1<<i)-1;var o=a>>1;var u=t===23?S(2,-24)-S(2,-77):0;var f=0;var c=r<0||r===0&&1/r<0?1:0;var s,l,v;r=w(r);if(r!=r||r===y){l=r!=r?1:0;s=a}else{s=_(O(r)/x);if(r*(v=S(2,-s))<1){s--;v*=2}if(s+o>=1){r+=u/v}else{r+=u*S(2,1-o)}if(r*v>=2){s++;v/=2}if(s+o>=a){l=0;s=a}else if(s+o>=1){l=(r*v-1)*S(2,t);s=s+o}else{l=r*S(2,o-1)*S(2,t);s=0}}for(;t>=8;n[f++]=l&255,l/=256,t-=8){}s=s<<t|l;i+=t;for(;i>0;n[f++]=s&255,s/=256,i-=8){}n[--f]|=c*128;return n}function T(r,t,e){var n=e*8-t-1;var i=(1<<n)-1;var a=i>>1;var o=n-7;var u=e-1;var f=r[u--];var c=f&127;var s;f>>=7;for(;o>0;c=c*256+r[u],u--,o-=8){}s=c&(1<<-o)-1;c>>=-o;o+=t;for(;o>0;s=s*256+r[u],u--,o-=8){}if(c===0){c=1-a}else if(c===i){return s?NaN:f?-y:y}else{s=s+S(2,t);c=c-a}return(f?-1:1)*s*S(2,c-t)}function k(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]}function N(r){return[r&255]}function R(r){return[r&255,r>>8&255]}function L(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]}function D(r){return A(r,52,8)}function C(r){return A(r,23,4)}function W(r,t,e){i(r[c],t,{get:function r(){return this[e]}})}function G(r,t,e,n){var i=+e;var a=lu(i);if(a+t>r[F])throw d(l);var o=r[M]._b;var u=a+r[I];var f=o.slice(u,u+t);return n?f:f.reverse()}function z(r,t,e,n,i,a){var o=+e;var u=lu(o);if(u+t>r[F])throw d(l);var f=r[M]._b;var c=u+r[I];var s=n(+i);for(var v=0;v<t;v++){f[c+v]=s[a?v:t-v-1]}}if(!su.ABV){v=function r(t){Ra(this,v,u);var e=lu(t);this._b=Ti.call(new Array(e),0);this[F]=e};h=function r(t,e,n){Ra(this,h,f);Ra(t,v,f);var i=t[F];var a=Q(e);if(a<0||a>i)throw d("Wrong offset!");n=n===undefined?i-a:tr(n);if(a+n>i)throw d(s);this[M]=t;this[I]=a;this[F]=n};if(o){W(v,P,"_l");W(h,E,"_b");W(h,P,"_l");W(h,j,"_o")}so(h[c],{getInt8:function r(t){return G(this,1,t)[0]<<24>>24},getUint8:function r(t){return G(this,1,t)[0]},getInt16:function r(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function r(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function r(t){return k(G(this,4,t,arguments[1]))},getUint32:function r(t){return k(G(this,4,t,arguments[1]))>>>0},getFloat32:function r(t){return T(G(this,4,t,arguments[1]),23,4)},getFloat64:function r(t){return T(G(this,8,t,arguments[1]),52,8)},setInt8:function r(t,e){z(this,1,t,N,e)},setUint8:function r(t,e){z(this,1,t,N,e)},setInt16:function r(t,e){z(this,2,t,R,e,arguments[2])},setUint16:function r(t,e){z(this,2,t,R,e,arguments[2])},setInt32:function r(t,e){z(this,4,t,L,e,arguments[2])},setUint32:function r(t,e){z(this,4,t,L,e,arguments[2])},setFloat32:function r(t,e){z(this,4,t,C,e,arguments[2])},setFloat64:function r(t,e){z(this,8,t,D,e,arguments[2])}})}else{if(!a(function(){v(1)})||!a(function(){new v(-1)})||a(function(){new v;new v(1.5);new v(NaN);return v.name!=u})){v=function r(t){Ra(this,v);return new g(lu(t))};var V=v[c]=g[c];for(var B=n(g),H=0,K;B.length>H;){if(!((K=B[H++])in v))m(v,K,g[K])}V.constructor=v}var Y=new h(new v(2));var J=h[c].setInt8;Y.setInt8(0,2147483648);Y.setInt8(1,2147483649);if(Y.getInt8(0)||!Y.getInt8(1))so(h[c],{setInt8:function r(t,e){J.call(this,t,e<<24>>24)},setUint8:function r(t,e){J.call(this,t,e<<24>>24)}},true)}U(v,u);U(h,f);m(h[c],su.VIEW,true);t[u]=v;t[f]=h});var hu=e.ArrayBuffer;var pu=vu.ArrayBuffer;var du=vu.DataView;var yu=su.ABV&&hu.isView;var gu=pu.prototype.slice;var bu=su.VIEW;var wu="ArrayBuffer";F(F.G+F.W+F.F*(hu!==pu),{ArrayBuffer:pu});F(F.S+F.F*!su.CONSTR,wu,{isView:function r(t){return yu&&yu(t)||c(t)&&bu in t}});F(F.P+F.U+F.F*a(function(){return!new pu(2).slice(1,undefined).byteLength}),wu,{slice:function r(t,e){if(gu!==undefined&&e===undefined)return gu.call(s(this),t);var n=s(this).byteLength;var i=ir(t,n);var a=ir(e===undefined?n:e,n);var o=new(ja(this,pu))(tr(a-i));var u=new du(this);var f=new du(o);var c=0;while(i<a){f.setUint8(c++,u.getUint8(i++))}return o}});Gi(wu);F(F.G+F.W+F.F*!su.ABV,{DataView:vu.DataView});var mu=t(function(r){if(o){var t=e;var n=a;var u=F;var f=su;var s=vu;var l=P;var v=Ra;var h=w;var p=m;var y=so;var g=Q;var S=tr;var _=lu;var x=ir;var E=d;var j=i;var M=Nt;var I=c;var A=wt;var T=Qn;var k=Pr;var N=_t;var R=Fr.f;var L=ei;var D=O;var W=C;var G=di;var U=ar;var z=ja;var V=zi;var B=vn;var H=oi;var K=Gi;var Y=Ti;var J=Mi;var $=b;var q=Cr;var X=$.f;var Z=q.f;var rr=t.RangeError;var er=t.TypeError;var nr=t.Uint8Array;var or="ArrayBuffer";var ur="Shared"+or;var fr="BYTES_PER_ELEMENT";var cr="prototype";var sr=Array[cr];var lr=s.ArrayBuffer;var vr=s.DataView;var hr=G(0);var pr=G(2);var dr=G(3);var yr=G(4);var gr=G(5);var br=G(6);var wr=U(true);var mr=U(false);var Sr=V.values;var _r=V.keys;var Or=V.entries;var xr=sr.lastIndexOf;var Er=sr.reduce;var jr=sr.reduceRight;var Mr=sr.join;var Ir=sr.sort;var Ar=sr.slice;var Tr=sr.toString;var kr=sr.toLocaleString;var Nr=W("iterator");var Rr=W("toStringTag");var Lr=D("typed_constructor");var Dr=D("def_constructor");var Wr=f.CONSTR;var Gr=f.TYPED;var Ur=f.VIEW;var zr="Wrong length!";var Vr=G(1,function(r,t){return Jr(z(r,r[Dr]),t)});var Br=n(function(){return new nr(new Uint16Array([1]).buffer)[0]===1});var Hr=!!nr&&!!nr[cr].set&&n(function(){new nr(1).set({})});var Kr=function r(t,e){var n=g(t);if(n<0||n%e)throw rr("Wrong offset!");return n};var Yr=function r(t){if(I(t)&&Gr in t)return t;throw er(t+" is not a typed array!")};var Jr=function r(t,e){if(!(I(t)&&Lr in t)){throw er("It is not a typed array constructor!")}return new t(e)};var $r=function r(t,e){return qr(z(t,t[Dr]),e)};var qr=function r(t,e){var n=0;var i=e.length;var a=Jr(t,i);while(i>n){a[n]=e[n++]}return a};var Xr=function r(t,e,n){X(t,e,{get:function r(){return this._d[n]}})};var Zr=function r(t){var e=A(t);var n=arguments.length;var i=n>1?arguments[1]:undefined;var a=i!==undefined;var o=L(e);var u,f,c,s,v,h;if(o!=undefined&&!T(o)){for(h=o.call(e),c=[],u=0;!(v=h.next()).done;u++){c.push(v.value)}e=c}if(a&&n>2)i=l(i,arguments[2],2);for(u=0,f=S(e.length),s=Jr(this,f);f>u;u++){s[u]=a?i(e[u],u):e[u]}return s};var Qr=function r(){var t=0;var e=arguments.length;var n=Jr(this,e);while(e>t){n[t]=arguments[t++]}return n};var rt=!!nr&&n(function(){kr.call(new nr(1))});var tt=function r(){return kr.apply(rt?Ar.call(Yr(this)):Yr(this),arguments)};var et={copyWithin:function r(t,e){return J.call(Yr(this),t,e,arguments.length>2?arguments[2]:undefined)},every:function r(t){return yr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},fill:function r(t){return Y.apply(Yr(this),arguments)},filter:function r(t){return $r(this,pr(Yr(this),t,arguments.length>1?arguments[1]:undefined))},find:function r(t){return gr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},findIndex:function r(t){return br(Yr(this),t,arguments.length>1?arguments[1]:undefined)},forEach:function r(t){hr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},indexOf:function r(t){return mr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},includes:function r(t){return wr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},join:function r(t){return Mr.apply(Yr(this),arguments)},lastIndexOf:function r(t){return xr.apply(Yr(this),arguments)},map:function r(t){return Vr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},reduce:function r(t){return Er.apply(Yr(this),arguments)},reduceRight:function r(t){return jr.apply(Yr(this),arguments)},reverse:function r(){var t=this;var e=Yr(t).length;var n=Math.floor(e/2);var i=0;var a;while(i<n){a=t[i];t[i++]=t[--e];t[e]=a}return t},some:function r(t){return dr(Yr(this),t,arguments.length>1?arguments[1]:undefined)},sort:function r(t){return Ir.call(Yr(this),t)},subarray:function r(t,e){var n=Yr(this);var i=n.length;var a=x(t,i);return new(z(n,n[Dr]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,S((e===undefined?i:x(e,i))-a))}};var nt=function r(t,e){return $r(this,Ar.call(Yr(this),t,e))};var it=function r(t){Yr(this);var e=Kr(arguments[1],1);var n=this.length;var i=A(t);var a=S(i.length);var o=0;if(a+e>n)throw rr(zr);while(o<a){this[e+o]=i[o++]}};var at={entries:function r(){return Or.call(Yr(this))},keys:function r(){return _r.call(Yr(this))},values:function r(){return Sr.call(Yr(this))}};var ot=function r(t,e){return I(t)&&t[Gr]&&babelHelpers.typeof(e)!="symbol"&&e in t&&String(+e)==String(e)};var ut=function r(t,e){return ot(t,e=E(e,true))?h(2,t[e]):Z(t,e)};var ft=function r(t,e,n){if(ot(t,e=E(e,true))&&I(n)&&j(n,"value")&&!j(n,"get")&&!j(n,"set")&&!n.configurable&&(!j(n,"writable")||n.writable)&&(!j(n,"enumerable")||n.enumerable)){t[e]=n.value;return t}return X(t,e,n)};if(!Wr){q.f=ut;$.f=ft}u(u.S+u.F*!Wr,"Object",{getOwnPropertyDescriptor:ut,defineProperty:ft});if(n(function(){Tr.call({})})){Tr=kr=function r(){return Mr.call(this)}}var ct=y({},et);y(ct,at);p(ct,Nr,at.values);y(ct,{slice:nt,set:it,constructor:function r(){},toString:Tr,toLocaleString:tt});Xr(ct,"buffer","b");Xr(ct,"byteOffset","o");Xr(ct,"byteLength","l");Xr(ct,"length","e");X(ct,Rr,{get:function r(){return this[Gr]}});r.exports=function(r,e,i,a){a=!!a;var o=r+(a?"Clamped":"")+"Array";var c="get"+r;var s="set"+r;var l=t[o];var h=l||{};var d=l&&N(l);var y=!l||!f.ABV;var g={};var b=l&&l[cr];var w=function r(t,n){var i=t._d;return i.v[c](n*e+i.o,Br)};var m=function r(t,n,i){var o=t._d;if(a)i=(i=Math.round(i))<0?0:i>255?255:i&255;o.v[s](n*e+o.o,i,Br)};var O=function r(t,e){X(t,e,{get:function r(){return w(this,e)},set:function r(t){return m(this,e,t)},enumerable:true})};if(y){l=i(function(r,t,n,i){v(r,l,o,"_d");var a=0;var u=0;var f,c,s,h;if(!I(t)){s=_(t);c=s*e;f=new lr(c)}else if(t instanceof lr||(h=M(t))==or||h==ur){f=t;u=Kr(n,e);var d=t.byteLength;if(i===undefined){if(d%e)throw rr(zr);c=d-u;if(c<0)throw rr(zr)}else{c=S(i)*e;if(c+u>d)throw rr(zr)}s=c/e}else if(Gr in t){return qr(l,t)}else{return Zr.call(l,t)}p(r,"_d",{b:f,o:u,l:c,e:s,v:new vr(f)});while(a<s){O(r,a++)}});b=l[cr]=k(ct);p(b,"constructor",l)}else if(!n(function(){l(1)})||!n(function(){new l(-1)})||!H(function(r){new l;new l(null);new l(1.5);new l(r)},true)){l=i(function(r,t,n,i){v(r,l,o);var a;if(!I(t))return new h(_(t));if(t instanceof lr||(a=M(t))==or||a==ur){return i!==undefined?new h(t,Kr(n,e),i):n!==undefined?new h(t,Kr(n,e)):new h(t)}if(Gr in t)return qr(l,t);return Zr.call(l,t)});hr(d!==Function.prototype?R(h).concat(R(d)):R(h),function(r){if(!(r in l))p(l,r,h[r])});l[cr]=b;b.constructor=l}var x=b[Nr];var E=!!x&&(x.name=="values"||x.name==undefined);var P=at.values;p(l,Lr,true);p(b,Gr,o);p(b,Ur,true);p(b,Dr,l);if(a?new l(1)[Rr]!=o:!(Rr in b)){X(b,Rr,{get:function r(){return o}})}g[o]=l;u(u.G+u.W+u.F*(l!=h),g);u(u.S,o,{BYTES_PER_ELEMENT:e});u(u.S+u.F*n(function(){h.of.call(l,1)}),o,{from:Zr,of:Qr});if(!(fr in b))p(b,fr,e);u(u.P,o,et);K(o);u(u.P+u.F*Hr,o,{set:it});u(u.P+u.F*!E,o,at);if(b.toString!=Tr)b.toString=Tr;u(u.P+u.F*n(function(){new l(1).slice()}),o,{slice:nt});u(u.P+u.F*(n(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!n(function(){b.toLocaleString.call([1,2])})),o,{toLocaleString:tt});B[o]=E?x:P;if(!E)p(b,Nr,P)}}else r.exports=function(){}});mu("Int8",1,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Uint8",1,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Uint8",1,function(r){return function t(e,n,i){return r(this,e,n,i)}},true);mu("Int16",2,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Uint16",2,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Int32",4,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Uint32",4,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Float32",4,function(r){return function t(e,n,i){return r(this,e,n,i)}});mu("Float64",8,function(r){return function t(e,n,i){return r(this,e,n,i)}});var Su=(e.Reflect||{}).apply;var _u=Function.apply;F(F.S+F.F*!a(function(){Su(function(){})}),"Reflect",{apply:function r(t,e,n){var i=E(t);var a=s(n);return Su?Su(i,e,a):_u.call(i,e,a)}});var Ou=(e.Reflect||{}).construct;var xu=a(function(){function r(){}return!(Ou(function(){},[],r)instanceof r)});var Eu=!a(function(){Ou(function(){})});F(F.S+F.F*(xu||Eu),"Reflect",{construct:function r(t,e){E(t);s(e);var n=arguments.length<3?t:E(arguments[2]);if(Eu&&!xu)return Ou(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];i.push.apply(i,e);return new(Gt.apply(t,i))}var a=n.prototype;var o=Pr(c(a)?a:Object.prototype);var u=Function.apply.call(t,o,e);return c(u)?u:o}});F(F.S+F.F*a(function(){Reflect.defineProperty(b.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function r(t,e,n){s(t);e=d(e,true);s(n);try{b.f(t,e,n);return true}catch(r){return false}}});var Pu=Cr.f;F(F.S,"Reflect",{deleteProperty:function r(t,e){var n=Pu(s(t),e);return n&&!n.configurable?false:delete t[e]}});var ju=function r(t){this._t=s(t);this._i=0;var e=this._k=[];var n;for(n in t){e.push(n)}};pn(ju,"Object",function(){var r=this;var t=r._k;var e;do{if(r._i>=t.length)return{value:undefined,done:true}}while(!((e=t[r._i++])in r._t));return{value:e,done:false}});F(F.S,"Reflect",{enumerate:function r(t){return new ju(t)}});function Mu(r,t){var e=arguments.length<3?r:arguments[2];var n,a;if(s(r)===e)return r[t];if(n=Cr.f(r,t))return i(n,"value")?n.value:n.get!==undefined?n.get.call(e):undefined;if(c(a=_t(r)))return Mu(a,t,e)}F(F.S,"Reflect",{get:Mu});F(F.S,"Reflect",{getOwnPropertyDescriptor:function r(t,e){return Cr.f(s(t),e)}});F(F.S,"Reflect",{getPrototypeOf:function r(t){return _t(s(t))}});F(F.S,"Reflect",{has:function r(t,e){return e in t}});var Fu=Object.isExtensible;F(F.S,"Reflect",{isExtensible:function r(t){s(t);return Fu?Fu(t):true}});var Iu=e.Reflect;var Au=Iu&&Iu.ownKeys||function r(t){var e=Fr.f(s(t));var n=pr.f;return n?e.concat(n(t)):e};F(F.S,"Reflect",{ownKeys:Au});var Tu=Object.preventExtensions;F(F.S,"Reflect",{preventExtensions:function r(t){s(t);try{if(Tu)Tu(t);return true}catch(r){return false}}});function ku(r,t,e){var n=arguments.length<4?r:arguments[3];var a=Cr.f(s(r),t);var o,u;if(!a){if(c(u=_t(r))){return ku(u,t,e,n)}a=w(0)}if(i(a,"value")){if(a.writable===false||!c(n))return false;if(o=Cr.f(n,t)){if(o.get||o.set||o.writable===false)return false;o.value=e;b.f(n,t,o)}else b.f(n,t,w(0,e));return true}return a.set===undefined?false:(a.set.call(n,e),true)}F(F.S,"Reflect",{set:ku});if(It)F(F.S,"Reflect",{setPrototypeOf:function r(t,e){It.check(t,e);try{It.set(t,e);return true}catch(r){return false}}});var Nu=ar(true);F(F.P,"Array",{includes:function r(t){return Nu(this,t,arguments.length>1?arguments[1]:undefined)}});Ai("includes");var Ru=C("isConcatSpreadable");function Lu(r,t,e,n,i,a,o,u){var f=i;var s=0;var l=o?P(o,u,3):false;var v,h;while(s<n){if(s in e){v=l?l(e[s],s,t):e[s];h=false;if(c(v)){h=v[Ru];h=h!==undefined?!!h:br(v)}if(h&&a>0){f=Lu(r,t,v,tr(v.length),f,a-1)-1}else{if(f>=9007199254740991)throw TypeError();r[f]=v}f++}s++}return f}var Du=Lu;F(F.P,"Array",{flatMap:function r(t){var e=wt(this);var n,i;E(t);n=tr(e.length);i=pi(e,0);Du(i,e,e,n,0,1,t,arguments[1]);return i}});Ai("flatMap");F(F.P,"Array",{flatten:function r(){var t=arguments[0];var e=wt(this);var n=tr(e.length);var i=pi(e,0);Du(i,e,e,n,0,t===undefined?1:Q(t));return i}});Ai("flatten");var Cu=ln(true);F(F.P,"String",{at:function r(t){return Cu(this,t)}});var Wu=function(r,t,e,n){var i=String($(r));var a=i.length;var o=e===undefined?" ":String(e);var u=tr(t);if(u<=a||o=="")return i;var f=u-a;var c=Ee.call(o,Math.ceil(f/o.length));if(c.length>f)c=c.slice(0,f);return n?c+i:i+c};F(F.P+F.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(fo),"String",{padStart:function r(t){return Wu(this,t,arguments.length>1?arguments[1]:undefined,true)}});F(F.P+F.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(fo),"String",{padEnd:function r(t){return Wu(this,t,arguments.length>1?arguments[1]:undefined,false)}});re("trimLeft",function(r){return function t(){return r(this,1)}},"trimStart");re("trimRight",function(r){return function t(){return r(this,2)}},"trimEnd");var Gu=RegExp.prototype;var Uu=function r(t,e){this._r=t;this._s=e};pn(Uu,"RegExp String",function r(){var t=this._r.exec(this._s);return{value:t,done:t===null}});F(F.P,"String",{matchAll:function r(t){$(this);if(!En(t))throw TypeError(t+" is not a regexp!");var e=String(this);var n="flags"in Gu?String(t.flags):Vi.call(t);var i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);i.lastIndex=tr(t.lastIndex);return new Uu(i,e)}});H("asyncIterator");H("observable");F(F.S,"Object",{getOwnPropertyDescriptors:function r(t){var e=q(t);var n=Cr.f;var i=Au(e);var a={};var o=0;var u,f;while(i.length>o){f=n(e,u=i[o++]);if(f!==undefined)ri(a,u,f)}return a}});var zu=yr.f;var Vu=function(r){return function(t){var e=q(t);var n=vr(e);var i=n.length;var a=0;var o=[];var u;while(i>a){if(zu.call(e,u=n[a++])){o.push(r?[u,e[u]]:e[u])}}return o}};var Bu=Vu(false);F(F.S,"Object",{values:function r(t){return Bu(t)}});var Hu=Vu(true);F(F.S,"Object",{entries:function r(t){return Hu(t)}});var Ku=!a(function(){var r=Math.random();__defineSetter__.call(null,r,function(){});delete e[r]});o&&F(F.P+Ku,"Object",{__defineGetter__:function r(t,e){b.f(wt(this),t,{get:E(e),enumerable:true,configurable:true})}});o&&F(F.P+Ku,"Object",{__defineSetter__:function r(t,e){b.f(wt(this),t,{set:E(e),enumerable:true,configurable:true})}});var Yu=Cr.f;o&&F(F.P+Ku,"Object",{__lookupGetter__:function r(t){var e=wt(this);var n=d(t,true);var i;do{if(i=Yu(e,n))return i.get}while(e=_t(e))}});var Ju=Cr.f;o&&F(F.P+Ku,"Object",{__lookupSetter__:function r(t){var e=wt(this);var n=d(t,true);var i;do{if(i=Ju(e,n))return i.set}while(e=_t(e))}});var $u=function(r,t){var e=[];La(r,false,e.push,e,t);return e};var qu=function(r){return function t(){if(Nt(this)!=r)throw TypeError(r+"#toJSON isn't generic");return $u(this)}};F(F.P+F.R,"Map",{toJSON:qu("Map")});F(F.P+F.R,"Set",{toJSON:qu("Set")});var Xu=function(r){F(F.S,r,{of:function r(){var t=arguments.length;var e=new Array(t);while(t--){e[t]=arguments[t]}return new this(e)}})};Xu("Map");Xu("Set");Xu("WeakMap");Xu("WeakSet");var Zu=function(r){F(F.S,r,{from:function r(t){var e=arguments[1];var n,i,a,o;E(this);n=e!==undefined;if(n)E(e);if(t==undefined)return new this;i=[];if(n){a=0;o=P(e,arguments[2],2);La(t,false,function(r){i.push(o(r,a++))})}else{La(t,false,i.push,i)}return new this(i)}})};Zu("Map");Zu("Set");Zu("WeakMap");Zu("WeakSet");F(F.G,{global:e});F(F.S,"System",{global:e});F(F.S,"Error",{isError:function r(t){return Y(t)==="Error"}});F(F.S,"Math",{clamp:function r(t,e,n){return Math.min(n,Math.max(e,t))}});F(F.S,"Math",{DEG_PER_RAD:Math.PI/180});var Qu=180/Math.PI;F(F.S,"Math",{degrees:function r(t){return t*Qu}});var rf=Math.scale||function r(t,e,n,i,a){if(arguments.length===0||t!=t||e!=e||n!=n||i!=i||a!=a)return NaN;if(t===Infinity||t===-Infinity)return t;return(t-e)*(a-i)/(n-e)+i};F(F.S,"Math",{fscale:function r(t,e,n,i,a){return nn(rf(t,e,n,i,a))}});F(F.S,"Math",{iaddh:function r(t,e,n,i){var a=t>>>0;var o=e>>>0;var u=n>>>0;return o+(i>>>0)+((a&u|(a|u)&~(a+u>>>0))>>>31)|0}});F(F.S,"Math",{isubh:function r(t,e,n,i){var a=t>>>0;var o=e>>>0;var u=n>>>0;return o-(i>>>0)-((~a&u|~(a^u)&a-u>>>0)>>>31)|0}});F(F.S,"Math",{imulh:function r(t,e){var n=65535;var i=+t;var a=+e;var o=i&n;var u=a&n;var f=i>>16;var c=a>>16;var s=(f*u>>>0)+(o*u>>>16);return f*c+(s>>16)+((o*c>>>0)+(s&n)>>16)}});F(F.S,"Math",{RAD_PER_DEG:180/Math.PI});var tf=Math.PI/180;F(F.S,"Math",{radians:function r(t){return t*tf}});F(F.S,"Math",{scale:rf});F(F.S,"Math",{umulh:function r(t,e){var n=65535;var i=+t;var a=+e;var o=i&n;var u=a&n;var f=i>>>16;var c=a>>>16;var s=(f*u>>>0)+(o*u>>>16);return f*c+(s>>>16)+((o*c>>>0)+(s&n)>>>16)}});F(F.S,"Math",{signbit:function r(t){return(t=+t)!=t?t:t==0?1/t==Infinity:t>0}});F(F.S,"Promise",{try:function r(t){var e=ao.f(this);var n=oo(t);(n.e?e.reject:e.resolve)(n.v);return e.promise}});var ef=D("metadata");var nf=ef.store||(ef.store=new ru);var af=function r(t,e,n){var i=nf.get(t);if(!i){if(!n)return undefined;nf.set(t,i=new Vo)}var a=i.get(e);if(!a){if(!n)return undefined;i.set(e,a=new Vo)}return a};var of=function r(t,e,n){var i=af(e,n,false);return i===undefined?false:i.has(t)};var uf=function r(t,e,n){var i=af(e,n,false);return i===undefined?undefined:i.get(t)};var ff=function r(t,e,n,i){af(n,i,true).set(t,e)};var cf=function r(t,e){var n=af(t,e,false);var i=[];if(n)n.forEach(function(r,t){i.push(t)});return i};var sf=function r(t){return t===undefined||babelHelpers.typeof(t)=="symbol"?t:String(t)};var lf=function r(t){F(F.S,"Reflect",t)};var vf={store:nf,map:af,has:of,get:uf,set:ff,keys:cf,key:sf,exp:lf};var hf=vf.key;var pf=vf.set;vf.exp({defineMetadata:function r(t,e,n,i){pf(t,e,s(n),hf(i))}});var df=vf.key;var yf=vf.map;var gf=vf.store;vf.exp({deleteMetadata:function r(t,e){var n=arguments.length<3?undefined:df(arguments[2]);var i=yf(s(e),n,false);if(i===undefined||!i["delete"](t))return false;if(i.size)return true;var a=gf.get(e);a["delete"](n);return!!a.size||gf["delete"](e)}});var bf=vf.has;var wf=vf.get;var mf=vf.key;var Sf=function r(t,e,n){var i=bf(t,e,n);if(i)return wf(t,e,n);var a=_t(e);return a!==null?r(t,a,n):undefined};vf.exp({getMetadata:function r(t,e){return Sf(t,s(e),arguments.length<3?undefined:mf(arguments[2]))}});var _f=vf.keys;var Of=vf.key;var xf=function r(t,e){var n=_f(t,e);var i=_t(t);if(i===null)return n;var a=r(i,e);return a.length?n.length?$u(new Ho(n.concat(a))):a:n};vf.exp({getMetadataKeys:function r(t){return xf(s(t),arguments.length<2?undefined:Of(arguments[1]))}});var Ef=vf.get;var Pf=vf.key;vf.exp({getOwnMetadata:function r(t,e){return Ef(t,s(e),arguments.length<3?undefined:Pf(arguments[2]))}});var jf=vf.keys;var Mf=vf.key;vf.exp({getOwnMetadataKeys:function r(t){return jf(s(t),arguments.length<2?undefined:Mf(arguments[1]))}});var Ff=vf.has;var If=vf.key;var Af=function r(t,e,n){var i=Ff(t,e,n);if(i)return true;var a=_t(e);return a!==null?r(t,a,n):false};vf.exp({hasMetadata:function r(t,e){return Af(t,s(e),arguments.length<3?undefined:If(arguments[2]))}});var Tf=vf.has;var kf=vf.key;vf.exp({hasOwnMetadata:function r(t,e){return Tf(t,s(e),arguments.length<3?undefined:kf(arguments[2]))}});var Nf=vf.key;var Rf=vf.set;vf.exp({metadata:function r(t,e){return function r(n,i){Rf(t,e,(i!==undefined?s:E)(n),Nf(i))}}});var Lf=eo();var Df=e.process;var Cf=Y(Df)=="process";F(F.G,{asap:function r(t){var e=Cf&&Df.domain;Lf(e?e.bind(t):t)}});var Wf=eo();var Gf=C("observable");var Uf=La.RETURN;var zf=function r(t){return t==null?undefined:E(t)};var Vf=function r(t){var e=t._c;if(e){t._c=undefined;e()}};var Bf=function r(t){return t._o===undefined};var Hf=function r(t){if(!Bf(t)){t._o=undefined;Vf(t)}};var Kf=function r(t,e){s(t);this._c=undefined;this._o=t;t=new Yf(this);try{var n=e(t);var i=n;if(n!=null){if(typeof n.unsubscribe==="function")n=function r(){i.unsubscribe()};else E(n);this._c=n}}catch(r){t.error(r);return}if(Bf(this))Vf(this)};Kf.prototype=so({},{unsubscribe:function r(){Hf(this)}});var Yf=function r(t){this._s=t};Yf.prototype=so({},{next:function r(t){var e=this._s;if(!Bf(e)){var n=e._o;try{var i=zf(n.next);if(i)return i.call(n,t)}catch(r){try{Hf(e)}finally{throw r}}}},error:function r(t){var e=this._s;if(Bf(e))throw t;var n=e._o;e._o=undefined;try{var i=zf(n.error);if(!i)throw t;t=i.call(n,t)}catch(r){try{Vf(e)}finally{throw r}}Vf(e);return t},complete:function r(t){var e=this._s;if(!Bf(e)){var n=e._o;e._o=undefined;try{var i=zf(n.complete);t=i?i.call(n,t):undefined}catch(r){try{Vf(e)}finally{throw r}}Vf(e);return t}}});var Jf=function r(t){Ra(this,Jf,"Observable","_f")._f=E(t)};so(Jf.prototype,{subscribe:function r(t){return new Kf(t,this._f)},forEach:function r(t){var n=this;return new(u.Promise||e.Promise)(function(r,e){E(t);var i=n.subscribe({next:function r(n){try{return t(n)}catch(r){e(r);i.unsubscribe()}},error:e,complete:r})})}});so(Jf,{from:function r(t){var e=typeof this==="function"?this:Jf;var n=zf(s(t)[Gf]);if(n){var i=s(n.call(t));return i.constructor===e?i:new e(function(r){return i.subscribe(r)})}return new e(function(r){var e=false;Wf(function(){if(!e){try{if(La(t,false,function(t){r.next(t);if(e)return Uf})===Uf)return}catch(t){if(e)throw t;r.error(t);return}r.complete()}});return function(){e=true}})},of:function r(){for(var t=0,e=arguments.length,n=new Array(e);t<e;){n[t]=arguments[t++]}return new(typeof this==="function"?this:Jf)(function(r){var t=false;Wf(function(){if(!t){for(var e=0;e<n.length;++e){r.next(n[e]);if(t)return}r.complete()}});return function(){t=true}})}});m(Jf.prototype,Gf,function(){return this});F(F.G,{Observable:Jf});Gi("Observable");var $f=[].slice;var qf=/MSIE .\./.test(fo);var Xf=function r(t){return function(r,e){var n=arguments.length>2;var i=n?$f.call(arguments,2):false;return t(n?function(){(typeof r=="function"?r:Function(r)).apply(this,i)}:r,e)}};F(F.G+F.B+F.F*qf,{setTimeout:Xf(e.setTimeout),setInterval:Xf(e.setInterval)});F(F.G+F.B,{setImmediate:qa.set,clearImmediate:qa.clear});var Zf=C("iterator");var Qf=C("toStringTag");var rc=vn.Array;var tc={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var ec=vr(tc),nc=0;nc<ec.length;nc++){var ic=ec[nc];var ac=tc[ic];var oc=e[ic];var uc=oc&&oc.prototype;var fc;if(uc){if(!uc[Zf])m(uc,Zf,rc);if(!uc[Qf])m(uc,Qf,ic);vn[ic]=rc;if(ac)for(fc in zi){if(!uc[fc])x(uc,fc,zi[fc],true)}}}if(window._main_core_polyfill){console.warn("main.core.polyfill is loaded more than once on this page")}window._main_core_polyfill=true})(this.window=this.window||{});(function(r){"use strict";if(!r.matches&&r.matchesSelector){r.matches=r.matchesSelector}if(!r.matches){r.matches=function(r){var t=document.querySelectorAll(r);var e=this;return Array.prototype.some.call(t,function(r){return r===e})}}})(Element.prototype);(function(){"use strict";if(!Element.prototype.closest){Object.defineProperty(Element.prototype,"closest",{enumerable:false,value:function(r){var t=this;while(t){if(t.matches(r)){return t}t=t.parentElement}return null}})}})();(function(r){"use strict";if(!window.DOMRect){window.DOMRect=function(){function r(t,e,n,i){babelHelpers.classCallCheck(this,r);this.x=t||0;this.y=e||0;this.width=n||0;this.height=i||0}babelHelpers.createClass(r,[{key:"toJSON",value:function r(){return{top:this.top,left:this.left,right:this.right,bottom:this.bottom,width:this.width,height:this.height,x:this.x,y:this.y}}},{key:"top",get:function r(){return this.y}},{key:"left",get:function r(){return this.x}},{key:"right",get:function r(){return this.x+this.width}},{key:"bottom",get:function r(){return this.y+this.height}}],[{key:"fromRect",value:function t(e){return new r(e.x,e.y,e.width,e.height)}}]);return r}()}})(this.window=this.window||{});
 



// file: /bitrix/js/main/polyfill/customevent/main.polyfill.customevent.js
(function(){"use strict";try{new window.CustomEvent("bx-test-custom-event",{bubbles:true,cancelable:true})}catch(t){var e=function(e,t){t=t||{};t.bubbles=!!t.bubbles;t.cancelable=!!t.cancelable;var n=document.createEvent("CustomEvent");n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);var u=n.preventDefault;n.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return true}});u.call(this)};return n};e.prototype=window.Event.prototype;window.CustomEvent=e}})();
 



// file: /bitrix/js/ui/vue/vendor/v2/dist/vue.bundle.js
(function(t){"use strict";var e=Object.freeze({});function n(t){return null==t}function r(t){return null!=t}function a(t){return!0===t}function o(t){return"string"==typeof t||"number"==typeof t||"symbol"==babelHelpers.typeof(t)||"boolean"==typeof t}function i(t){return null!==t&&"object"==babelHelpers.typeof(t)}var s=Object.prototype.toString;function c(t){return"[object Object]"===s.call(t)}function u(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function l(t){return r(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||c(t)&&t.toString===s?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function p(t,e){var n=Object.create(null),r=t.split(",");for(var a=0;a<r.length;a++){n[r[a]]=!0}return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var v=p("slot,component",!0),h=p("key,ref,slot,slot-scope,is");function m(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function g(t,e){return y.call(t,e)}function _(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var b=/-(\w)/g,$=_(function(t){return t.replace(b,function(t,e){return e?e.toUpperCase():""})}),C=_(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),w=/\B([A-Z])/g,k=_(function(t){return t.replace(w,"-$1").toLowerCase()});var x=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function A(t,e){e=e||0;var n=t.length-e;var r=new Array(n);for(;n--;){r[n]=t[n+e]}return r}function O(t,e){for(var n in e){t[n]=e[n]}return t}function S(t){var e={};for(var n=0;n<t.length;n++){t[n]&&O(e,t[n])}return e}function T(t,e,n){}var N=function t(e,n,r){return!1},E=function t(e){return e};function j(t,e){if(t===e)return!0;var n=i(t),r=i(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var a=Array.isArray(t),o=Array.isArray(e);if(a&&o)return t.length===e.length&&t.every(function(t,n){return j(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(a||o)return!1;{var s=Object.keys(t),c=Object.keys(e);return s.length===c.length&&s.every(function(n){return j(t[n],e[n])})}}catch(t){return!1}}function D(t,e){for(var n=0;n<t.length;n++){if(j(t[n],e))return n}return-1}function L(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var M="data-server-rendered",I=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"];var P={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:N,isReservedAttr:N,isUnknownElement:N,getTagNamespace:T,parsePlatformTagName:E,mustUseProp:N,async:!0,_lifecycleHooks:F};var R=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function B(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var U=new RegExp("[^".concat(R.source,".$_\\d]"));var V="__proto__"in{},z="undefined"!=typeof window,K="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,J=K&&WXEnvironment.platform.toLowerCase(),q=z&&window.navigator.userAgent.toLowerCase(),W=q&&/msie|trident/.test(q),Z=q&&q.indexOf("msie 9.0")>0,G=q&&q.indexOf("edge/")>0,X=(q&&q.indexOf("android"),q&&/iphone|ipad|ipod|ios/.test(q)||"ios"===J),Y=(q&&/chrome\/\d+/.test(q),q&&/phantomjs/.test(q),q&&q.match(/firefox\/(\d+)/)),Q={}.watch;var tt,et=!1;if(z)try{var nt={};Object.defineProperty(nt,"passive",{get:function t(){et=!0}}),window.addEventListener("test-passive",null,nt)}catch(e){}var rt=function t(){return void 0===tt&&(tt=!z&&!K&&"undefined"!=typeof global&&global.process&&"server"===global.process.env.VUE_ENV),tt},at=z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ot(t){return"function"==typeof t&&/native code/.test(t.toString())}var it="undefined"!=typeof Symbol&&ot(Symbol)&&"undefined"!=typeof Reflect&&ot(Reflect.ownKeys);var st;st="undefined"!=typeof Set&&ot(Set)?Set:function(){function t(){babelHelpers.classCallCheck(this,t);this.set=Object.create(null)}babelHelpers.createClass(t,[{key:"has",value:function t(e){return!0===this.set[e]}},{key:"add",value:function t(e){this.set[e]=!0}},{key:"clear",value:function t(){this.set=Object.create(null)}}]);return t}();var ct=T,ut=0;var lt=function(){function t(){babelHelpers.classCallCheck(this,t);this.id=ut++,this.subs=[]}babelHelpers.createClass(t,[{key:"addSub",value:function t(e){this.subs.push(e)}},{key:"removeSub",value:function t(e){m(this.subs,e)}},{key:"depend",value:function e(){t.target&&t.target.addDep(this)}},{key:"notify",value:function t(){var e=this.subs.slice();for(var n=0,r=e.length;n<r;n++){e[n].update()}}}]);return t}();lt.target=null;var ft=[];function dt(t){ft.push(t),lt.target=t}function pt(){ft.pop(),lt.target=ft[ft.length-1]}var vt=function(){function t(e,n,r,a,o,i,s,c){babelHelpers.classCallCheck(this,t);this.tag=e,this.data=n,this.children=r,this.text=a,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=c,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}babelHelpers.createClass(t,[{key:"child",get:function t(){return this.componentInstance}}]);return t}();var ht=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=new vt;return n.text=e,n.isComment=!0,n};function mt(t){return new vt(void 0,void 0,void 0,String(t))}function yt(t){var e=new vt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var gt=Array.prototype,_t=Object.create(gt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=gt[t];B(_t,t,function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++){r[a]=arguments[a]}var o=e.apply(this,r),i=this.__ob__;var s;switch(t){case"push":case"unshift":s=r;break;case"splice":s=r.slice(2)}return s&&i.observeArray(s),i.dep.notify(),o})});var bt=Object.getOwnPropertyNames(_t);var $t=!0;function Ct(t){$t=t}var wt=function(){function t(e){babelHelpers.classCallCheck(this,t);var n;this.value=e,this.dep=new lt,this.vmCount=0,B(e,"__ob__",this),Array.isArray(e)?(V?(n=_t,e.__proto__=n):function(t,e,n){for(var r=0,a=n.length;r<a;r++){var o=n[r];B(t,o,e[o])}}(e,_t,bt),this.observeArray(e)):this.walk(e)}babelHelpers.createClass(t,[{key:"walk",value:function t(e){var n=Object.keys(e);for(var r=0;r<n.length;r++){xt(e,n[r])}}},{key:"observeArray",value:function t(e){for(var n=0,r=e.length;n<r;n++){kt(e[n])}}}]);return t}();function kt(t,e){if(!i(t)||t instanceof vt)return;var n;return g(t,"__ob__")&&t.__ob__ instanceof wt?n=t.__ob__:$t&&!rt()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new wt(t)),e&&n&&n.vmCount++,n}function xt(t,e,n,r,a){var o=new lt,i=Object.getOwnPropertyDescriptor(t,e);if(i&&!1===i.configurable)return;var s=i&&i.get,c=i&&i.set;s&&!c||2!==arguments.length||(n=t[e]);var u=!a&&kt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function e(){var r=s?s.call(t):n;return lt.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(r)&&function t(e){for(var n,r=0,a=e.length;r<a;r++){(n=e[r])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&t(n)}}(r))),r},set:function e(r){var i=s?s.call(t):n;r===i||r!=r&&i!=i||s&&!c||(c?c.call(t,r):n=r,u=!a&&kt(r),o.notify())}})}function At(t,e,n){if(Array.isArray(t)&&u(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(xt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Ot(t,e){if(Array.isArray(t)&&u(e))return void t.splice(e,1);var n=t.__ob__;t._isVue||n&&n.vmCount||g(t,e)&&(delete t[e],n&&n.dep.notify())}var St=P.optionMergeStrategies;function Tt(t,e){if(!e)return t;var n,r,a;var o=it?Reflect.ownKeys(e):Object.keys(e);for(var i=0;i<o.length;i++){"__ob__"!==(n=o[i])&&(r=t[n],a=e[n],g(t,n)?r!==a&&c(r)&&c(a)&&Tt(r,a):At(t,n,a))}return t}function Nt(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,a="function"==typeof t?t.call(n,n):t;return r?Tt(r,a):a}:e?t?function(){return Tt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Et(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?function(t){var e=[];for(var n=0;n<t.length;n++){-1===e.indexOf(t[n])&&e.push(t[n])}return e}(n):n}function jt(t,e,n,r){var a=Object.create(t||null);return e?O(a,e):a}St.data=function(t,e,n){return n?Nt(t,e,n):e&&"function"!=typeof e?t:Nt(t,e)},F.forEach(function(t){St[t]=Et}),I.forEach(function(t){St[t+"s"]=jt}),St.watch=function(t,e,n,r){if(t===Q&&(t=void 0),e===Q&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var a={};O(a,t);for(var o in e){var i=a[o];var s=e[o];i&&!Array.isArray(i)&&(i=[i]),a[o]=i?i.concat(s):Array.isArray(s)?s:[s]}return a},St.props=St.methods=St.inject=St.computed=function(t,e,n,r){if(!t)return e;var a=Object.create(null);return O(a,t),e&&O(a,e),a},St.provide=Nt;var Dt=function t(e,n){return void 0===n?e:n};function Lt(t,e,n){if("function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(!n)return;var r={};var a,o,i;if(Array.isArray(n))for(a=n.length;a--;){"string"==typeof(o=n[a])&&(r[i=$(o)]={type:null})}else if(c(n))for(var s in n){o=n[s],r[i=$(s)]=c(o)?o:{type:o}}t.props=r}(e),function(t,e){var n=t.inject;if(!n)return;var r=t.inject={};if(Array.isArray(n))for(var a=0;a<n.length;a++){r[n[a]]={from:n[a]}}else if(c(n))for(var o in n){var i=n[o];r[o]=c(i)?O({from:o},i):{from:i}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(t=Lt(t,e.extends,n)),e.mixins))for(var r=0,a=e.mixins.length;r<a;r++){t=Lt(t,e.mixins[r],n)}var o={};var i;for(i in t){s(i)}for(i in e){g(t,i)||s(i)}function s(r){var a=St[r]||Dt;o[r]=a(t[r],e[r],n,r)}return o}function Mt(t,e,n,r){if("string"!=typeof n)return;var a=t[e];if(g(a,n))return a[n];var o=$(n);if(g(a,o))return a[o];var i=C(o);return g(a,i)?a[i]:a[n]||a[o]||a[i]}function It(t,e,n,r){var a=e[t],o=!g(n,t);var i=n[t];var s=Rt(Boolean,a.type);if(s>-1)if(o&&!g(a,"default"))i=!1;else if(""===i||i===k(t)){var c=Rt(String,a.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(t,e,n){if(!g(e,"default"))return;var r=e.default;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof r&&"Function"!==Ft(e.type)?r.call(t):r}(r,a,t);var u=$t;Ct(!0),kt(i),Ct(u)}return i}function Ft(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Pt(t,e){return Ft(t)===Ft(e)}function Rt(t,e){if(!Array.isArray(e))return Pt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++){if(Pt(e[n],t))return n}return-1}function Ht(t,e,n){dt();try{if(e){var r=e;for(;r=r.$parent;){var a=r.$options.errorCaptured;if(a)for(var o=0;o<a.length;o++){try{if(!1===a[o].call(r,t,e,n))return}catch(t){Ut(t,r,"errorCaptured hook")}}}}Ut(t,e,n)}finally{pt()}}function Bt(t,e,n,r,a){var o;try{(o=n?t.apply(e,n):t.call(e))&&!o._isVue&&l(o)&&!o._handled&&(o.catch(function(t){return Ht(t,r,a+" (Promise/async)")}),o._handled=!0)}catch(t){Ht(t,r,a)}return o}function Ut(t,e,n){if(P.errorHandler)try{return P.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Vt(e,null,"config.errorHandler")}Vt(t,e,n)}function Vt(t,e,n){if(!z&&!K||"undefined"==typeof console)throw t;console.error(t)}var zt=!1;var Kt=[];var Jt,qt=!1;function Wt(){qt=!1;var t=Kt.slice(0);Kt.length=0;for(var e=0;e<t.length;e++){t[e]()}}if("undefined"!=typeof Promise&&ot(Promise)){var Zt=Promise.resolve();Jt=function t(){Zt.then(Wt),X&&setTimeout(T)},zt=!0}else if(W||"undefined"==typeof MutationObserver||!ot(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Jt="undefined"!=typeof setImmediate&&ot(setImmediate)?function(){setImmediate(Wt)}:function(){setTimeout(Wt,0)};else{var Gt=1;var Xt=new MutationObserver(Wt),Yt=document.createTextNode(String(Gt));Xt.observe(Yt,{characterData:!0}),Jt=function t(){Gt=(Gt+1)%2,Yt.data=String(Gt)},zt=!0}function Qt(t,e){var n;if(Kt.push(function(){if(t)try{t.call(e)}catch(t){Ht(t,e,"nextTick")}else n&&n(e)}),qt||(qt=!0,Jt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var te=new st;function ee(t){!function t(e,n){var r,a;var o=Array.isArray(e);if(!o&&!i(e)||Object.isFrozen(e)||e instanceof vt)return;if(e.__ob__){var s=e.__ob__.dep.id;if(n.has(s))return;n.add(s)}if(o)for(r=e.length;r--;){t(e[r],n)}else for(a=Object.keys(e),r=a.length;r--;){t(e[a[r]],n)}}(t,te),te.clear()}var ne=_(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}});function re(t,e){function n(){var t=n.fns;if(!Array.isArray(t))return Bt(t,null,arguments,e,"v-on handler");{var r=t.slice();for(var a=0;a<r.length;a++){Bt(r[a],null,arguments,e,"v-on handler")}}}return n.fns=t,n}function ae(t,e,r,o,i,s){var c,u,l,f,d;for(c in t){u=l=t[c],f=e[c],d=ne(c),n(l)||(n(f)?(n(l.fns)&&(l=t[c]=re(l,s)),a(d.once)&&(l=t[c]=i(d.name,l,d.capture)),r(d.name,l,d.capture,d.passive,d.params)):l!==f&&(f.fns=l,t[c]=f))}for(c in e){n(t[c])&&o((d=ne(c)).name,e[c],d.capture)}}function oe(t,e,o){var i;t instanceof vt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function c(){o.apply(this,arguments),m(i.fns,c)}n(s)?i=re([c]):r(s.fns)&&a(s.merged)?(i=s).fns.push(c):i=re([s,c]),i.merged=!0,t[e]=i}function ie(t,e,n,a,o){if(r(e)){if(g(e,n))return t[n]=e[n],o||delete e[n],!0;if(g(e,a))return t[n]=e[a],o||delete e[a],!0}return!1}function se(t){return o(t)?[mt(t)]:Array.isArray(t)?function t(e,i){var s=[];var c,u,l,f;for(c=0;c<e.length;c++){n(u=e[c])||"boolean"==typeof u||(l=s.length-1,f=s[l],Array.isArray(u)?u.length>0&&(ce((u=t(u,"".concat(i||"","_").concat(c)))[0])&&ce(f)&&(s[l]=mt(f.text+u[0].text),u.shift()),s.push.apply(s,u)):o(u)?ce(f)?s[l]=mt(f.text+u):""!==u&&s.push(mt(u)):ce(u)&&ce(f)?s[l]=mt(f.text+u.text):(a(e._isVList)&&r(u.tag)&&n(u.key)&&r(i)&&(u.key="__vlist".concat(i,"_").concat(c,"__")),s.push(u)))}return s}(t):void 0}function ce(t){return r(t)&&r(t.text)&&!1===t.isComment}function ue(t,e){if(t){var n=Object.create(null),r=it?Reflect.ownKeys(t):Object.keys(t);for(var a=0;a<r.length;a++){var o=r[a];if("__ob__"===o)continue;var i=t[o].from;var s=e;for(;s;){if(s._provided&&g(s._provided,i)){n[o]=s._provided[i];break}s=s.$parent}if(!s&&"default"in t[o]){var c=t[o].default;n[o]="function"==typeof c?c.call(e):c}}return n}}function le(t,e){if(!t||!t.length)return{};var n={};for(var r=0,a=t.length;r<a;r++){var o=t[r],i=o.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,o.context!==e&&o.fnContext!==e||!i||null==i.slot)(n.default||(n.default=[])).push(o);else{var s=i.slot,c=n[s]||(n[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n){n[u].every(fe)&&delete n[u]}return n}function fe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function de(t,n,r){var a;var o=Object.keys(n).length>0,i=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(i&&r&&r!==e&&s===r.$key&&!o&&!r.$hasNormal)return r;a={};for(var c in t){t[c]&&"$"!==c[0]&&(a[c]=pe(n,c,t[c]))}}else a={};for(var u in n){u in a||(a[u]=ve(n,u))}return t&&Object.isExtensible(t)&&(t._normalized=a),B(a,"$stable",i),B(a,"$key",s),B(a,"$hasNormal",o),a}function pe(t,e,n){var r=function t(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==babelHelpers.typeof(e)&&!Array.isArray(e)?[e]:se(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function ve(t,e){return function(){return t[e]}}function he(t,e){var n,a,o,s,c;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),a=0,o=t.length;a<o;a++){n[a]=e(t[a],a)}else if("number"==typeof t)for(n=new Array(t),a=0;a<t;a++){n[a]=e(a+1,a)}else if(i(t))if(it&&t[Symbol.iterator]){n=[];var u=t[Symbol.iterator]();var l=u.next();for(;!l.done;){n.push(e(l.value,n.length)),l=u.next()}}else for(s=Object.keys(t),n=new Array(s.length),a=0,o=s.length;a<o;a++){c=s[a],n[a]=e(t[c],c,a)}return r(n)||(n=[]),n._isVList=!0,n}function me(t,e,n,r){var a=this.$scopedSlots[t];var o;a?(n=n||{},r&&(n=O(O({},r),n)),o=a(n)||e):o=this.$slots[t]||e;var i=n&&n.slot;return i?this.$createElement("template",{slot:i},o):o}function ye(t){return Mt(this.$options,"filters",t)||E}function ge(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function _e(t,e,n,r,a){var o=P.keyCodes[e]||n;return a&&r&&!P.keyCodes[e]?ge(a,r):o?ge(o,t):r?k(r)!==e:void 0}function be(t,e,n,r,a){if(n)if(i(n)){var o;Array.isArray(n)&&(n=S(n));var s=function i(s){if("class"===s||"style"===s||h(s))o=t;else{var c=t.attrs&&t.attrs.type;o=r||P.mustUseProp(e,c,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=$(s),l=k(s);if(!(u in o||l in o)&&(o[s]=n[s],a)){(t.on||(t.on={}))["update:".concat(s)]=function(t){n[s]=t}}};for(var c in n){s(c)}}return t}function $e(t,e){var n=this._staticTrees||(this._staticTrees=[]);var r=n[t];return r&&!e?r:(we(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__".concat(t),!1),r)}function Ce(t,e,n){return we(t,"__once__".concat(e).concat(n?"_".concat(n):""),!0),t}function we(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++){t[r]&&"string"!=typeof t[r]&&ke(t[r],"".concat(e,"_").concat(r),n)}else ke(t,e,n)}function ke(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function xe(t,e){if(e)if(c(e)){var n=t.on=t.on?O({},t.on):{};for(var r in e){var a=n[r],o=e[r];n[r]=a?[].concat(a,o):o}}return t}function Ae(t,e,n,r){e=e||{$stable:!n};for(var a=0;a<t.length;a++){var o=t[a];Array.isArray(o)?Ae(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Oe(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"==typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Se(t,e){return"string"==typeof t?e+t:t}function Te(t){t._o=Ce,t._n=d,t._s=f,t._l=he,t._t=me,t._q=j,t._i=D,t._m=$e,t._f=ye,t._k=_e,t._b=be,t._v=mt,t._e=ht,t._u=Ae,t._g=xe,t._d=Oe,t._p=Se}function Ne(t,n,r,o,i){var s=this;var c=i.options;var u;g(o,"_uid")?(u=Object.create(o))._original=o:(u=o,o=o._original);var l=a(c._compiled),f=!l;this.data=t,this.props=n,this.children=r,this.parent=o,this.listeners=t.on||e,this.injections=ue(c.inject,o),this.slots=function(){return s.$slots||de(t.scopedSlots,s.$slots=le(r,o)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function e(){return de(t.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=de(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,r){var a=Re(u,t,e,n,r,f);return a&&!Array.isArray(a)&&(a.fnScopeId=c._scopeId,a.fnContext=o),a}:this._c=function(t,e,n,r){return Re(u,t,e,n,r,f)}}function Ee(t,e,n,r,a){var o=yt(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function je(t,e){for(var n in e){t[$(n)]=e[n]}}Te(Ne.prototype);var De={init:function t(e,n){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var a=e;De.prepatch(a,a)}else{(e.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},a=t.data.inlineTemplate;r(a)&&(n.render=a.render,n.staticRenderFns=a.staticRenderFns);return new t.componentOptions.Ctor(n)}(e,Ze)).$mount(n?e.elm:void 0,n)}},prepatch:function t(n,r){var a=r.componentOptions;!function(t,n,r,a,o){var i=a.data.scopedSlots,s=t.$scopedSlots,c=!!(i&&!i.$stable||s!==e&&!s.$stable||i&&t.$scopedSlots.$key!==i.$key),u=!!(o||t.$options._renderChildren||c);t.$options._parentVnode=a,t.$vnode=a,t._vnode&&(t._vnode.parent=a);if(t.$options._renderChildren=o,t.$attrs=a.data.attrs||e,t.$listeners=r||e,n&&t.$options.props){Ct(!1);var l=t._props,f=t.$options._propKeys||[];for(var d=0;d<f.length;d++){var p=f[d],v=t.$options.props;l[p]=It(p,v,n,t)}Ct(!0),t.$options.propsData=n}r=r||e;var h=t.$options._parentListeners;t.$options._parentListeners=r,We(t,r,h),u&&(t.$slots=le(o,a.context),t.$forceUpdate())}(r.componentInstance=n.componentInstance,a.propsData,a.listeners,r,a.children)},insert:function t(e){var n=e.context,r=e.componentInstance;var a;r._isMounted||(r._isMounted=!0,Qe(r,"mounted")),e.data.keepAlive&&(n._isMounted?((a=r)._inactive=!1,en.push(a)):Ye(r,!0))},destroy:function t(e){var n=e.componentInstance;n._isDestroyed||(e.data.keepAlive?function t(e,n){if(n&&(e._directInactive=!0,Xe(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++){t(e.$children[r])}Qe(e,"deactivated")}}(n,!0):n.$destroy())}},Le=Object.keys(De);function Me(t,o,s,c,u){if(n(t))return;var f=s.$options._base;if(i(t)&&(t=f.extend(t)),"function"!=typeof t)return;var d;if(n(t.cid)&&void 0===(t=function(t,e){if(a(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var o=Be;o&&r(t.owners)&&-1===t.owners.indexOf(o)&&t.owners.push(o);if(a(t.loading)&&r(t.loadingComp))return t.loadingComp;if(o&&!r(t.owners)){var s=t.owners=[o];var c=!0,u=null,f=null;o.$on("hook:destroyed",function(){return m(s,o)});var d=function t(e){for(var n=0,r=s.length;n<r;n++){s[n].$forceUpdate()}e&&(s.length=0,null!==u&&(clearTimeout(u),u=null),null!==f&&(clearTimeout(f),f=null))},p=L(function(n){t.resolved=Ue(n,e),c?s.length=0:d(!0)}),v=L(function(e){r(t.errorComp)&&(t.error=!0,d(!0))}),h=t(p,v);return i(h)&&(l(h)?n(t.resolved)&&h.then(p,v):l(h.component)&&(h.component.then(p,v),r(h.error)&&(t.errorComp=Ue(h.error,e)),r(h.loading)&&(t.loadingComp=Ue(h.loading,e),0===h.delay?t.loading=!0:u=setTimeout(function(){u=null,n(t.resolved)&&n(t.error)&&(t.loading=!0,d(!1))},h.delay||200)),r(h.timeout)&&(f=setTimeout(function(){f=null,n(t.resolved)&&v(null)},h.timeout)))),c=!1,t.loading?t.loadingComp:t.resolved}}(d=t,f)))return function(t,e,n,r,a){var o=ht();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:a},o}(d,o,s,c,u);o=o||{},Cn(t),r(o.model)&&function(t,e){var n=t.model&&t.model.prop||"value",a=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),i=o[a],s=e.model.callback;r(i)?(Array.isArray(i)?-1===i.indexOf(s):i!==s)&&(o[a]=[s].concat(i)):o[a]=s}(t.options,o);var p=function(t,e,a){var o=e.options.props;if(n(o))return;var i={},s=t.attrs,c=t.props;if(r(s)||r(c))for(var u in o){var l=k(u);ie(i,c,u,l,!0)||ie(i,s,u,l,!1)}return i}(o,t);if(a(t.options.functional))return function(t,n,a,o,i){var s=t.options,c={},u=s.props;if(r(u))for(var l in u){c[l]=It(l,u,n||e)}else r(a.attrs)&&je(c,a.attrs),r(a.props)&&je(c,a.props);var f=new Ne(a,c,i,o,t),d=s.render.call(null,f._c,f);if(d instanceof vt)return Ee(d,a,f.parent,s);if(Array.isArray(d)){var p=se(d)||[],v=new Array(p.length);for(var h=0;h<p.length;h++){v[h]=Ee(p[h],a,f.parent,s)}return v}}(t,p,o,s,c);var v=o.on;if(o.on=o.nativeOn,a(t.options.abstract)){var h=o.slot;o={},h&&(o.slot=h)}!function(t){var e=t.hook||(t.hook={});for(var n=0;n<Le.length;n++){var r=Le[n],a=e[r],o=De[r];a===o||a&&a._merged||(e[r]=a?Ie(o,a):o)}}(o);var y=t.options.name||u;return new vt("vue-component-".concat(t.cid).concat(y?"-".concat(y):""),o,void 0,void 0,void 0,s,{Ctor:t,propsData:p,listeners:v,tag:u,children:c},d)}function Ie(t,e){var n=function n(r,a){t(r,a),e(r,a)};return n._merged=!0,n}var Fe=1,Pe=2;function Re(t,e,s,c,u,l){return(Array.isArray(s)||o(s))&&(u=c,c=s,s=void 0),a(l)&&(u=Pe),function(t,e,o,s,c){if(r(o)&&r(o.__ob__))return ht();r(o)&&r(o.is)&&(e=o.is);if(!e)return ht();Array.isArray(s)&&"function"==typeof s[0]&&((o=o||{}).scopedSlots={default:s[0]},s.length=0);c===Pe?s=se(s):c===Fe&&(s=function(t){for(var e=0;e<t.length;e++){if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t)}return t}(s));var u,l;if("string"==typeof e){var f;l=t.$vnode&&t.$vnode.ns||P.getTagNamespace(e),u=P.isReservedTag(e)?new vt(P.parsePlatformTagName(e),o,s,void 0,void 0,t):o&&o.pre||!r(f=Mt(t.$options,"components",e))?new vt(e,o,s,void 0,void 0,t):Me(f,o,t,s,e)}else u=Me(e,o,t,s);return Array.isArray(u)?u:r(u)?(r(l)&&function t(e,o,i){e.ns=o;"foreignObject"===e.tag&&(o=void 0,i=!0);if(r(e.children))for(var s=0,c=e.children.length;s<c;s++){var u=e.children[s];r(u.tag)&&(n(u.ns)||a(i)&&"svg"!==u.tag)&&t(u,o,i)}}(u,l),r(o)&&function(t){i(t.style)&&ee(t.style);i(t.class)&&ee(t.class)}(o),u):ht()}(t,e,s,c,u)}var He,Be=null;function Ue(t,e){return(t.__esModule||it&&"Module"===t[Symbol.toStringTag])&&(t=t.default),i(t)?e.extend(t):t}function Ve(t){return t.isComment&&t.asyncFactory}function ze(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||Ve(n)))return n}}function Ke(t,e){He.$on(t,e)}function Je(t,e){He.$off(t,e)}function qe(t,e){var n=He;return function r(){null!==e.apply(null,arguments)&&n.$off(t,r)}}function We(t,e,n){He=t,ae(e,n||{},Ke,Je,qe,t),He=void 0}var Ze=null;function Ge(t){var e=Ze;return Ze=t,function(){Ze=e}}function Xe(t){for(;t&&(t=t.$parent);){if(t._inactive)return!0}return!1}function Ye(t,e){if(e){if(t._directInactive=!1,Xe(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++){Ye(t.$children[n])}Qe(t,"activated")}}function Qe(t,e){dt();var n=t.$options[e],r="".concat(e," hook");if(n)for(var a=0,o=n.length;a<o;a++){Bt(n[a],t,null,t,r)}t._hasHookEvent&&t.$emit("hook:"+e),pt()}var tn=[],en=[];var nn={},rn=!1,an=!1,on=0;var sn=0,cn=Date.now;if(z&&!W){var un=window.performance;un&&"function"==typeof un.now&&cn()>document.createEvent("Event").timeStamp&&(cn=function t(){return un.now()})}function ln(){var t,e;for(sn=cn(),an=!0,tn.sort(function(t,e){return t.id-e.id}),on=0;on<tn.length;on++){(t=tn[on]).before&&t.before(),e=t.id,nn[e]=null,t.run()}var n=en.slice(),r=tn.slice();on=tn.length=en.length=0,nn={},rn=an=!1,function(t){for(var e=0;e<t.length;e++){t[e]._inactive=!0,Ye(t[e],!0)}}(n),function(t){var e=t.length;for(;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Qe(r,"updated")}}(r),at&&P.devtools&&at.emit("flush")}var fn=0;var dn=function(){function t(e,n,r,a,o){babelHelpers.classCallCheck(this,t);this.vm=e,o&&(e._watcher=this),e._watchers.push(this),a?(this.deep=!!a.deep,this.user=!!a.user,this.lazy=!!a.lazy,this.sync=!!a.sync,this.before=a.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++fn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new st,this.newDepIds=new st,this.expression="","function"==typeof n?this.getter=n:(this.getter=function(t){if(U.test(t))return;var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}(n),this.getter||(this.getter=T)),this.value=this.lazy?void 0:this.get()}babelHelpers.createClass(t,[{key:"get",value:function t(){var e;dt(this);var n=this.vm;try{e=this.getter.call(n,n)}catch(e){if(!this.user)throw e;Ht(e,n,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&ee(e),pt(),this.cleanupDeps()}return e}},{key:"addDep",value:function t(e){var n=e.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(e),this.depIds.has(n)||e.addSub(this))}},{key:"cleanupDeps",value:function t(){var e=this.deps.length;for(;e--;){var n=this.deps[e];this.newDepIds.has(n.id)||n.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0}},{key:"update",value:function t(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==nn[e]){if(nn[e]=!0,an){var n=tn.length-1;for(;n>on&&tn[n].id>t.id;){n--}tn.splice(n+1,0,t)}else tn.push(t);rn||(rn=!0,Qt(ln))}}(this)}},{key:"run",value:function t(){if(this.active){var e=this.get();if(e!==this.value||i(e)||this.deep){var n=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,n)}catch(t){Ht(t,this.vm,'callback for watcher "'.concat(this.expression,'"'))}else this.cb.call(this.vm,e,n)}}}},{key:"evaluate",value:function t(){this.value=this.get(),this.dirty=!1}},{key:"depend",value:function t(){var e=this.deps.length;for(;e--;){this.deps[e].depend()}}},{key:"teardown",value:function t(){if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);var e=this.deps.length;for(;e--;){this.deps[e].removeSub(this)}this.active=!1}}}]);return t}();var pn={enumerable:!0,configurable:!0,get:T,set:T};function vn(t,e,n){pn.get=function(){return this[e][n]},pn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,pn)}function hn(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props={},a=t.$options._propKeys=[];t.$parent&&Ct(!1);for(var o in e){a.push(o);var i=It(o,e,n,t);xt(r,o,i),o in t||vn(t,"_props",o)}Ct(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e){t[n]="function"!=typeof e[n]?T:x(e[n],t)}}(t,e.methods),e.data?function(t){var e=t.$options.data;c(e=t._data="function"==typeof e?function(t,e){dt();try{return t.call(e,e)}catch(t){return Ht(t,e,"data()"),{}}finally{pt()}}(e,t):e||{})||(e={});var n=Object.keys(e),r=t.$options.props;t.$options.methods;var a=n.length;for(;a--;){var o=n[a];r&&g(r,o)||H(o)||vn(t,"_data",o)}kt(e,!0)}(t):kt(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=rt();for(var a in e){var o=e[a],i="function"==typeof o?o:o.get;r||(n[a]=new dn(t,i||T,T,mn)),a in t||yn(t,a,o)}}(t,e.computed),e.watch&&e.watch!==Q&&function(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var a=0;a<r.length;a++){bn(t,n,r[a])}else bn(t,n,r)}}(t,e.watch)}var mn={lazy:!0};function yn(t,e,n){var r=!rt();"function"==typeof n?(pn.get=r?gn(e):_n(n),pn.set=T):(pn.get=n.get?r&&!1!==n.cache?gn(e):_n(n.get):T,pn.set=n.set||T),Object.defineProperty(t,e,pn)}function gn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),lt.target&&e.depend(),e.value}}function _n(t){return function(){return t.call(this,this)}}function bn(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}var $n=0;function Cn(t){var e=t.options;if(t.super){var n=Cn(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e;var n=t.options,r=t.sealedOptions;for(var a in n){n[a]!==r[a]&&(e||(e={}),e[a]=n[a])}return e}(t);r&&O(t.extendOptions,r),(e=t.options=Lt(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function wn(t){this._init(t)}function kn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,a=t._Ctor||(t._Ctor={});if(a[r])return a[r];var o=t.name||n.options.name,i=function t(e){this._init(e)};return(i.prototype=Object.create(n.prototype)).constructor=i,i.cid=e++,i.options=Lt(n.options,t),i.super=n,i.options.props&&function(t){var e=t.options.props;for(var n in e){vn(t.prototype,"_props",n)}}(i),i.options.computed&&function(t){var e=t.options.computed;for(var n in e){yn(t.prototype,n,e[n])}}(i),i.extend=n.extend,i.mixin=n.mixin,i.use=n.use,I.forEach(function(t){i[t]=n[t]}),o&&(i.options.components[o]=i),i.superOptions=n.options,i.extendOptions=t,i.sealedOptions=O({},i.options),a[r]=i,i}}function xn(t){return t&&(t.Ctor.options.name||t.tag)}function An(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:(n=t,"[object RegExp]"===s.call(n)&&t.test(e));var n}function On(t,e){var n=t.cache,r=t.keys,a=t._vnode;for(var o in n){var i=n[o];if(i){var s=xn(i.componentOptions);s&&!e(s)&&Sn(n,o,r,a)}}}function Sn(t,e,n,r){var a=t[e];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),t[e]=null,m(n,e)}!function(t){t.prototype._init=function(t){var n=this;n._uid=$n++,n._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var a=r.componentOptions;n.propsData=a.propsData,n._parentListeners=a.listeners,n._renderChildren=a.children,n._componentTag=a.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(n,t):n.$options=Lt(Cn(n.constructor),t||{},n),n._renderProxy=n,n._self=n,function(t){var e=t.$options;var n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;){n=n.$parent}n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(n),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&We(t,e)}(n),function(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,a=r&&r.context;t.$slots=le(n._renderChildren,a),t.$scopedSlots=e,t._c=function(e,n,r,a){return Re(t,e,n,r,a,!1)},t.$createElement=function(e,n,r,a){return Re(t,e,n,r,a,!0)};var o=r&&r.data;xt(t,"$attrs",o&&o.attrs||e,null,!0),xt(t,"$listeners",n._parentListeners||e,null,!0)}(n),Qe(n,"beforeCreate"),function(t){var e=ue(t.$options.inject,t);e&&(Ct(!1),Object.keys(e).forEach(function(n){xt(t,n,e[n])}),Ct(!0))}(n),hn(n),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(n),Qe(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}(wn),function(t){var e={get:function t(){return this._data}},n={get:function t(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=At,t.prototype.$delete=Ot,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return bn(r,t,e,n);(n=n||{}).user=!0;var a=new dn(r,t,e,n);if(n.immediate)try{e.call(r,a.value)}catch(t){Ht(t,r,'callback for immediate watcher "'.concat(a.expression,'"'))}return function(){a.teardown()}}}(wn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++){r.$on(t[a],n)}else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,a=t.length;r<a;r++){n.$off(t[r],e)}return n}var o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;var i,s=o.length;for(;s--;){if((i=o[s])===e||i.fn===e){o.splice(s,1);break}}return n},t.prototype.$emit=function(t){var e=this;var n=e._events[t];if(n){n=n.length>1?A(n):n;var r=A(arguments,1),a='event handler for "'.concat(t,'"');for(var o=0,i=n.length;o<i;o++){Bt(n[o],e,r,e,a)}}return e}}(wn),function(t){t.prototype._update=function(t,e){var n=this,r=n.$el,a=n._vnode,o=Ge(n);n._vnode=t,n.$el=a?n.__patch__(a,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(t._isBeingDestroyed)return;Qe(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||m(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;for(;n--;){t._watchers[n].teardown()}t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Qe(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}(wn),function(t){Te(t.prototype),t.prototype.$nextTick=function(t){return Qt(t,this)},t.prototype._render=function(){var t=this,e=t.$options,n=e.render,r=e._parentVnode;var a;r&&(t.$scopedSlots=de(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{Be=t,a=n.call(t._renderProxy,t.$createElement)}catch(n){Ht(n,t,"render"),a=t._vnode}finally{Be=null}return Array.isArray(a)&&1===a.length&&(a=a[0]),a instanceof vt||(a=ht()),a.parent=r,a}}(wn);var Tn=[String,RegExp,Array];var Nn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Tn,exclude:Tn,max:[String,Number]},created:function t(){this.cache=Object.create(null),this.keys=[]},destroyed:function t(){for(var e in this.cache){Sn(this.cache,e,this.keys)}},mounted:function t(){var e=this;this.$watch("include",function(t){On(e,function(e){return An(t,e)})}),this.$watch("exclude",function(t){On(e,function(e){return!An(t,e)})})},render:function t(){var e=this.$slots.default,n=ze(e),r=n&&n.componentOptions;if(r){var a=xn(r),o=this.include,i=this.exclude;if(o&&(!a||!An(o,a))||i&&a&&An(i,a))return n;var s=this.cache,c=this.keys,u=null==n.key?r.Ctor.cid+(r.tag?"::".concat(r.tag):""):n.key;s[u]?(n.componentInstance=s[u].componentInstance,m(c,u),c.push(u)):(s[u]=n,c.push(u),this.max&&c.length>parseInt(this.max)&&Sn(s,c[0],c,this._vnode)),n.data.keepAlive=!0}return n||e&&e[0]}}};!function(t){var e={get:function t(){return P}};Object.defineProperty(t,"config",e),t.util={warn:ct,extend:O,mergeOptions:Lt,defineReactive:xt},t.set=At,t.delete=Ot,t.nextTick=Qt,t.observable=function(t){return kt(t),t},t.options=Object.create(null),I.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,O(t.options.components,Nn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=A(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Lt(this.options,t),this}}(t),kn(t),function(t){I.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(wn),Object.defineProperty(wn.prototype,"$isServer",{get:rt}),Object.defineProperty(wn.prototype,"$ssrContext",{get:function t(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wn,"FunctionalRenderContext",{value:Ne}),wn.version="2.6.10";var En=p("style,class"),jn=p("input,textarea,option,select,progress"),Dn=function t(e,n,r){return"value"===r&&jn(e)&&"button"!==n||"selected"===r&&"option"===e||"checked"===r&&"input"===e||"muted"===r&&"video"===e},Ln=p("contenteditable,draggable,spellcheck"),Mn=p("events,caret,typing,plaintext-only"),In=function t(e,n){return Bn(n)||"false"===n?"false":"contenteditable"===e&&Mn(n)?n:"true"},Fn=p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Pn="http://www.w3.org/1999/xlink",Rn=function t(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Hn=function t(e){return Rn(e)?e.slice(6,e.length):""},Bn=function t(e){return null==e||!1===e};function Un(t){var e=t.data,n=t,a=t;for(;r(a.componentInstance);){(a=a.componentInstance._vnode)&&a.data&&(e=Vn(a.data,e))}for(;r(n=n.parent);){n&&n.data&&(e=Vn(e,n.data))}return function(t,e){if(r(t)||r(e))return zn(t,Kn(e));return""}(e.staticClass,e.class)}function Vn(t,e){return{staticClass:zn(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function zn(t,e){return t?e?t+" "+e:t:e||""}function Kn(t){return Array.isArray(t)?function(t){var e,n="";for(var a=0,o=t.length;a<o;a++){r(e=Kn(t[a]))&&""!==e&&(n&&(n+=" "),n+=e)}return n}(t):i(t)?function(t){var e="";for(var n in t){t[n]&&(e&&(e+=" "),e+=n)}return e}(t):"string"==typeof t?t:""}var Jn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},qn=p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Wn=p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Zn=function t(e){return qn(e)||Wn(e)};function Gn(t){return Wn(t)?"svg":"math"===t?"math":void 0}var Xn=Object.create(null);var Yn=p("text,number,password,search,email,tel,url");function Qn(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var tr=Object.freeze({createElement:function t(e,n){var r=document.createElement(e);return"select"!==e?r:(n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r)},createElementNS:function t(e,n){return document.createElementNS(Jn[e],n)},createTextNode:function t(e){return document.createTextNode(e)},createComment:function t(e){return document.createComment(e)},insertBefore:function t(e,n,r){e.insertBefore(n,r)},removeChild:function t(e,n){e.removeChild(n)},appendChild:function t(e,n){e.appendChild(n)},parentNode:function t(e){return e.parentNode},nextSibling:function t(e){return e.nextSibling},tagName:function t(e){return e.tagName},setTextContent:function t(e,n){e.textContent=n},setStyleScope:function t(e,n){e.setAttribute(n,"")}}),er={create:function t(e,n){nr(n)},update:function t(e,n){e.data.ref!==n.data.ref&&(nr(e,!0),nr(n))},destroy:function t(e){nr(e,!0)}};function nr(t,e){var n=t.data.ref;if(!r(n))return;var a=t.context,o=t.componentInstance||t.elm,i=a.$refs;e?Array.isArray(i[n])?m(i[n],o):i[n]===o&&(i[n]=void 0):t.data.refInFor?Array.isArray(i[n])?i[n].indexOf(o)<0&&i[n].push(o):i[n]=[o]:i[n]=o}var rr=new vt("",{},[]),ar=["create","activate","update","remove","destroy"];function or(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n;var a=r(n=t.data)&&r(n=n.attrs)&&n.type,o=r(n=e.data)&&r(n=n.attrs)&&n.type;return a===o||Yn(a)&&Yn(o)}(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&n(e.asyncFactory.error))}function ir(t,e,n){var a,o;var i={};for(a=e;a<=n;++a){r(o=t[a].key)&&(i[o]=a)}return i}var sr={create:cr,update:cr,destroy:function t(e){cr(e,rr)}};function cr(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n=t===rr,r=e===rr,a=lr(t.data.directives,t.context),o=lr(e.data.directives,e.context),i=[],s=[];var c,u,l;for(c in o){u=a[c],l=o[c],u?(l.oldValue=u.value,l.oldArg=u.arg,dr(l,"update",e,t),l.def&&l.def.componentUpdated&&s.push(l)):(dr(l,"bind",e,t),l.def&&l.def.inserted&&i.push(l))}if(i.length){var f=function n(){for(var r=0;r<i.length;r++){dr(i[r],"inserted",e,t)}};n?oe(e,"insert",f):f()}s.length&&oe(e,"postpatch",function(){for(var n=0;n<s.length;n++){dr(s[n],"componentUpdated",e,t)}});if(!n)for(c in a){o[c]||dr(a[c],"unbind",t,t,r)}}(t,e)}var ur=Object.create(null);function lr(t,e){var n=Object.create(null);if(!t)return n;var r,a;for(r=0;r<t.length;r++){(a=t[r]).modifiers||(a.modifiers=ur),n[fr(a)]=a,a.def=Mt(e.$options,"directives",a.name)}return n}function fr(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function dr(t,e,n,r,a){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,a)}catch(r){Ht(r,n.context,"directive ".concat(t.name," ").concat(e," hook"))}}var pr=[er,sr];function vr(t,e){var a=e.componentOptions;if(r(a)&&!1===a.Ctor.options.inheritAttrs)return;if(n(t.data.attrs)&&n(e.data.attrs))return;var o,i,s;var c=e.elm,u=t.data.attrs||{};var l=e.data.attrs||{};for(o in r(l.__ob__)&&(l=e.data.attrs=O({},l)),l){i=l[o],(s=u[o])!==i&&hr(c,o,i)}for(o in(W||G)&&l.value!==u.value&&hr(c,"value",l.value),u){n(l[o])&&(Rn(o)?c.removeAttributeNS(Pn,Hn(o)):Ln(o)||c.removeAttribute(o))}}function hr(t,e,n){t.tagName.indexOf("-")>-1?mr(t,e,n):Fn(e)?Bn(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ln(e)?t.setAttribute(e,In(e,n)):Rn(e)?Bn(n)?t.removeAttributeNS(Pn,Hn(e)):t.setAttributeNS(Pn,e,n):mr(t,e,n)}function mr(t,e,n){if(Bn(n))t.removeAttribute(e);else{if(W&&!Z&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function e(n){n.stopImmediatePropagation(),t.removeEventListener("input",e)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var yr={create:vr,update:vr};function gr(t,e){var a=e.elm,o=e.data,i=t.data;if(n(o.staticClass)&&n(o.class)&&(n(i)||n(i.staticClass)&&n(i.class)))return;var s=Un(e);var c=a._transitionClasses;r(c)&&(s=zn(s,Kn(c))),s!==a._prevClass&&(a.setAttribute("class",s),a._prevClass=s)}var _r={create:gr,update:gr};var br=/[\w).+\-_$\]]/;function $r(t){var e,n,r,a,o,i=!1,s=!1,c=!1,u=!1,l=0,f=0,d=0,p=0;for(r=0;r<t.length;r++){if(n=e,e=t.charCodeAt(r),i)39===e&&92!==n&&(i=!1);else if(s)34===e&&92!==n&&(s=!1);else if(c)96===e&&92!==n&&(c=!1);else if(u)47===e&&92!==n&&(u=!1);else if(124!==e||124===t.charCodeAt(r+1)||124===t.charCodeAt(r-1)||l||f||d){switch(e){case 34:s=!0;break;case 39:i=!0;break;case 96:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:f++;break;case 93:f--;break;case 123:l++;break;case 125:l--}if(47===e){var v=void 0,h=r-1;for(;h>=0&&" "===(v=t.charAt(h));h--){}v&&br.test(v)||(u=!0)}}else void 0===a?(p=r+1,a=t.slice(0,r).trim()):m()}function m(){(o||(o=[])).push(t.slice(p,r).trim()),p=r+1}if(void 0===a?a=t.slice(0,r).trim():0!==p&&m(),o)for(r=0;r<o.length;r++){a=Cr(a,o[r])}return a}function Cr(t,e){var n=e.indexOf("(");if(n<0)return'_f("'.concat(e,'")(').concat(t,")");{var r=e.slice(0,n),a=e.slice(n+1);return'_f("'.concat(r,'")(').concat(t).concat(")"!==a?","+a:a)}}function wr(t,e){console.error("[Vue compiler]: ".concat(t))}function kr(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function xr(t,e,n,r,a){(t.props||(t.props=[])).push(Lr({name:e,value:n,dynamic:a},r)),t.plain=!1}function Ar(t,e,n,r,a){(a?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(Lr({name:e,value:n,dynamic:a},r)),t.plain=!1}function Or(t,e,n,r){t.attrsMap[e]=n,t.attrsList.push(Lr({name:e,value:n},r))}function Sr(t,e,n,r,a,o,i,s){(t.directives||(t.directives=[])).push(Lr({name:e,rawName:n,value:r,arg:a,isDynamicArg:o,modifiers:i},s)),t.plain=!1}function Tr(t,e,n){return n?"_p(".concat(e,',"').concat(t,'")'):t+e}function Nr(t,n,r,a,o,i,s,c){var u;(a=a||e).right?c?n="(".concat(n,")==='click'?'contextmenu':(").concat(n,")"):"click"===n&&(n="contextmenu",delete a.right):a.middle&&(c?n="(".concat(n,")==='click'?'mouseup':(").concat(n,")"):"click"===n&&(n="mouseup")),a.capture&&(delete a.capture,n=Tr("!",n,c)),a.once&&(delete a.once,n=Tr("~",n,c)),a.passive&&(delete a.passive,n=Tr("&",n,c)),a.native?(delete a.native,u=t.nativeEvents||(t.nativeEvents={})):u=t.events||(t.events={});var l=Lr({value:r.trim(),dynamic:c},s);a!==e&&(l.modifiers=a);var f=u[n];Array.isArray(f)?o?f.unshift(l):f.push(l):u[n]=f?o?[l,f]:[f,l]:l,t.plain=!1}function Er(t,e,n){var r=jr(t,":"+e)||jr(t,"v-bind:"+e);if(null!=r)return $r(r);if(!1!==n){var a=jr(t,e);if(null!=a)return JSON.stringify(a)}}function jr(t,e,n){var r;if(null!=(r=t.attrsMap[e])){var a=t.attrsList;for(var o=0,i=a.length;o<i;o++){if(a[o].name===e){a.splice(o,1);break}}}return n&&delete t.attrsMap[e],r}function Dr(t,e){var n=t.attrsList;for(var r=0,a=n.length;r<a;r++){var o=n[r];if(e.test(o.name))return n.splice(r,1),o}}function Lr(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function Mr(t,e,n){var r=n||{},a=r.number,o=r.trim;var i="$$v";o&&(i="(typeof $$v === 'string'? $$v.trim(): $$v)"),a&&(i="_n(".concat(i,")"));var s=Ir(e,i);t.model={value:"(".concat(e,")"),expression:JSON.stringify(e),callback:"function ($$v) {".concat(s,"}")}}function Ir(t,e){var n=function(t){if(t=t.trim(),Fr=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Fr-1)return(Hr=t.lastIndexOf("."))>-1?{exp:t.slice(0,Hr),key:'"'+t.slice(Hr+1)+'"'}:{exp:t,key:null};Pr=t,Hr=Br=Ur=0;for(;!zr();){Kr(Rr=Vr())?qr(Rr):91===Rr&&Jr(Rr)}return{exp:t.slice(0,Br),key:t.slice(Br+1,Ur)}}(t);return null===n.key?"".concat(t,"=").concat(e):"$set(".concat(n.exp,", ").concat(n.key,", ").concat(e,")")}var Fr,Pr,Rr,Hr,Br,Ur;function Vr(){return Pr.charCodeAt(++Hr)}function zr(){return Hr>=Fr}function Kr(t){return 34===t||39===t}function Jr(t){var e=1;for(Br=Hr;!zr();){if(Kr(t=Vr()))qr(t);else if(91===t&&e++,93===t&&e--,0===e){Ur=Hr;break}}}function qr(t){var e=t;for(;!zr()&&(t=Vr())!==e;){}}var Wr="__r",Zr="__c";var Gr;function Xr(t,e,n){var r=Gr;return function a(){null!==e.apply(null,arguments)&&ta(t,a,n,r)}}var Yr=zt&&!(Y&&Number(Y[1])<=53);function Qr(t,e,n,r){if(Yr){var a=sn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=a||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Gr.addEventListener(t,e,et?{capture:n,passive:r}:n)}function ta(t,e,n,r){(r||Gr).removeEventListener(t,e._wrapper||e,n)}function ea(t,e){if(n(t.data.on)&&n(e.data.on))return;var a=e.data.on||{},o=t.data.on||{};Gr=e.elm,function(t){if(r(t[Wr])){var e=W?"change":"input";t[e]=[].concat(t[Wr],t[e]||[]),delete t[Wr]}r(t[Zr])&&(t.change=[].concat(t[Zr],t.change||[]),delete t[Zr])}(a),ae(a,o,Qr,ta,Xr,e.context),Gr=void 0}var na={create:ea,update:ea};var ra;function aa(t,e){if(n(t.data.domProps)&&n(e.data.domProps))return;var a,o;var i=e.elm,s=t.data.domProps||{};var c=e.data.domProps||{};for(a in r(c.__ob__)&&(c=e.data.domProps=O({},c)),s){a in c||(i[a]="")}for(a in c){if(o=c[a],"textContent"===a||"innerHTML"===a){if(e.children&&(e.children.length=0),o===s[a])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===a&&"PROGRESS"!==i.tagName){i._value=o;var u=n(o)?"":String(o);oa(i,u)&&(i.value=u)}else if("innerHTML"===a&&Wn(i.tagName)&&n(i.innerHTML)){(ra=ra||document.createElement("div")).innerHTML="<svg>".concat(o,"</svg>");var l=ra.firstChild;for(;i.firstChild;){i.removeChild(i.firstChild)}for(;l.firstChild;){i.appendChild(l.firstChild)}}else if(o!==s[a])try{i[a]=o}catch(t){}}}function oa(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,a=t._vModifiers;if(r(a)){if(a.number)return d(n)!==d(e);if(a.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var ia={create:aa,update:aa};var sa=_(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e});function ca(t){var e=ua(t.style);return t.staticStyle?O(t.staticStyle,e):e}function ua(t){return Array.isArray(t)?S(t):"string"==typeof t?sa(t):t}var la=/^--/,fa=/\s*!important$/,da=function t(e,n,r){if(la.test(n))e.style.setProperty(n,r);else if(fa.test(r))e.style.setProperty(k(n),r.replace(fa,""),"important");else{var a=ha(n);if(Array.isArray(r))for(var o=0,i=r.length;o<i;o++){e.style[a]=r[o]}else e.style[a]=r}},pa=["Webkit","Moz","ms"];var va;var ha=_(function(t){if(va=va||document.createElement("div").style,"filter"!==(t=$(t))&&t in va)return t;var e=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0;n<pa.length;n++){var r=pa[n]+e;if(r in va)return r}});function ma(t,e){var a=e.data,o=t.data;if(n(a.staticStyle)&&n(a.style)&&n(o.staticStyle)&&n(o.style))return;var i,s;var c=e.elm,u=o.staticStyle,l=o.normalizedStyle||o.style||{},f=u||l,d=ua(e.data.style)||{};e.data.normalizedStyle=r(d.__ob__)?O({},d):d;var p=function(t,e){var n={};var r;if(e){var a=t;for(;a.componentInstance;){(a=a.componentInstance._vnode)&&a.data&&(r=ca(a.data))&&O(n,r)}}(r=ca(t.data))&&O(n,r);var o=t;for(;o=o.parent;){o.data&&(r=ca(o.data))&&O(n,r)}return n}(e,!0);for(s in f){n(p[s])&&da(c,s,"")}for(s in p){(i=p[s])!==f[s]&&da(c,s,null==i?"":i)}}var ya={create:ma,update:ma};var ga=/\s+/;function _a(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ga).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" ".concat(t.getAttribute("class")||""," ");n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function ba(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ga).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" ".concat(t.getAttribute("class")||""," ");var r=" "+e+" ";for(;n.indexOf(r)>=0;){n=n.replace(r," ")}(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function $a(t){if(t){if("object"==babelHelpers.typeof(t)){var e={};return!1!==t.css&&O(e,Ca(t.name||"v")),O(e,t),e}return"string"==typeof t?Ca(t):void 0}}var Ca=_(function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}}),wa=z&&!Z,ka="transition",xa="animation";var Aa="transition",Oa="transitionend",Sa="animation",Ta="animationend";wa&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Aa="WebkitTransition",Oa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Sa="WebkitAnimation",Ta="webkitAnimationEnd"));var Na=z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Ea(t){Na(function(){Na(t)})}function ja(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),_a(t,e))}function Da(t,e){t._transitionClasses&&m(t._transitionClasses,e),ba(t,e)}function La(t,e,n){var r=Ia(t,e),a=r.type,o=r.timeout,i=r.propCount;if(!a)return n();var s=a===ka?Oa:Ta;var c=0;var u=function e(){t.removeEventListener(s,l),n()},l=function e(n){n.target===t&&++c>=i&&u()};setTimeout(function(){c<i&&u()},o+1),t.addEventListener(s,l)}var Ma=/\b(transform|all)(,|$)/;function Ia(t,e){var n=window.getComputedStyle(t),r=(n[Aa+"Delay"]||"").split(", "),a=(n[Aa+"Duration"]||"").split(", "),o=Fa(r,a),i=(n[Sa+"Delay"]||"").split(", "),s=(n[Sa+"Duration"]||"").split(", "),c=Fa(i,s);var u,l=0,f=0;return e===ka?o>0&&(u=ka,l=o,f=a.length):e===xa?c>0&&(u=xa,l=c,f=s.length):f=(u=(l=Math.max(o,c))>0?o>c?ka:xa:null)?u===ka?a.length:s.length:0,{type:u,timeout:l,propCount:f,hasTransform:u===ka&&Ma.test(n[Aa+"Property"])}}function Fa(t,e){for(;t.length<e.length;){t=t.concat(t)}return Math.max.apply(null,e.map(function(e,n){return Pa(e)+Pa(t[n])}))}function Pa(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ra(t,e){var a=t.elm;r(a._leaveCb)&&(a._leaveCb.cancelled=!0,a._leaveCb());var o=$a(t.data.transition);if(n(o))return;if(r(a._enterCb)||1!==a.nodeType)return;var s=o.css,c=o.type,u=o.enterClass,l=o.enterToClass,f=o.enterActiveClass,p=o.appearClass,v=o.appearToClass,h=o.appearActiveClass,m=o.beforeEnter,y=o.enter,g=o.afterEnter,_=o.enterCancelled,b=o.beforeAppear,$=o.appear,C=o.afterAppear,w=o.appearCancelled,k=o.duration;var x=Ze,A=Ze.$vnode;for(;A&&A.parent;){x=A.context,A=A.parent}var O=!x._isMounted||!t.isRootInsert;if(O&&!$&&""!==$)return;var S=O&&p?p:u,T=O&&h?h:f,N=O&&v?v:l,E=O&&b||m,j=O&&"function"==typeof $?$:y,D=O&&C||g,M=O&&w||_,I=d(i(k)?k.enter:k),F=!1!==s&&!Z,P=Ua(j),R=a._enterCb=L(function(){F&&(Da(a,N),Da(a,T)),R.cancelled?(F&&Da(a,S),M&&M(a)):D&&D(a),a._enterCb=null});t.data.show||oe(t,"insert",function(){var e=a.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),j&&j(a,R)}),E&&E(a),F&&(ja(a,S),ja(a,T),Ea(function(){Da(a,S),R.cancelled||(ja(a,N),P||(Ba(I)?setTimeout(R,I):La(a,c,R)))})),t.data.show&&(e&&e(),j&&j(a,R)),F||P||R()}function Ha(t,e){var a=t.elm;r(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var o=$a(t.data.transition);if(n(o)||1!==a.nodeType)return e();if(r(a._leaveCb))return;var s=o.css,c=o.type,u=o.leaveClass,l=o.leaveToClass,f=o.leaveActiveClass,p=o.beforeLeave,v=o.leave,h=o.afterLeave,m=o.leaveCancelled,y=o.delayLeave,g=o.duration,_=!1!==s&&!Z,b=Ua(v),$=d(i(g)?g.leave:g),C=a._leaveCb=L(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[t.key]=null),_&&(Da(a,l),Da(a,f)),C.cancelled?(_&&Da(a,u),m&&m(a)):(e(),h&&h(a)),a._leaveCb=null});function w(){C.cancelled||(!t.data.show&&a.parentNode&&((a.parentNode._pending||(a.parentNode._pending={}))[t.key]=t),p&&p(a),_&&(ja(a,u),ja(a,f),Ea(function(){Da(a,u),C.cancelled||(ja(a,l),b||(Ba($)?setTimeout(C,$):La(a,c,C)))})),v&&v(a,C),_||b||C())}y?y(w):w()}function Ba(t){return"number"==typeof t&&!isNaN(t)}function Ua(t){if(n(t))return!1;var e=t.fns;return r(e)?Ua(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Va(t,e){!0!==e.data.show&&Ra(e)}var za=function(t){var e,i;var s={},c=t.modules,u=t.nodeOps;for(e=0;e<ar.length;++e){for(s[ar[e]]=[],i=0;i<c.length;++i){r(c[i][ar[e]])&&s[ar[e]].push(c[i][ar[e]])}}function l(t){var e=u.parentNode(t);r(e)&&u.removeChild(e,t)}function f(t,e,n,o,i,c,l){if(r(t.elm)&&r(c)&&(t=c[l]=yt(t)),t.isRootInsert=!i,function(t,e,n,o){var i=t.data;if(r(i)){var c=r(t.componentInstance)&&i.keepAlive;if(r(i=i.hook)&&r(i=i.init)&&i(t,!1),r(t.componentInstance))return d(t,e),v(n,t.elm,o),a(c)&&function(t,e,n,a){var o,i=t;for(;i.componentInstance;){if(i=i.componentInstance._vnode,r(o=i.data)&&r(o=o.transition)){for(o=0;o<s.activate.length;++o){s.activate[o](rr,i)}e.push(i);break}}v(n,t.elm,a)}(t,e,n,o),!0}}(t,e,n,o))return;var f=t.data,p=t.children,m=t.tag;r(m)?(t.elm=t.ns?u.createElementNS(t.ns,m):u.createElement(m,t),g(t),h(t,p,e),r(f)&&y(t,e),v(n,t.elm,o)):a(t.isComment)?(t.elm=u.createComment(t.text),v(n,t.elm,o)):(t.elm=u.createTextNode(t.text),v(n,t.elm,o))}function d(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(y(t,e),g(t)):(nr(t),e.push(t))}function v(t,e,n){r(t)&&(r(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function h(t,e,n){if(Array.isArray(e))for(var r=0;r<e.length;++r){f(e[r],n,t.elm,null,!0,e,r)}else o(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;){t=t.componentInstance._vnode}return r(t.tag)}function y(t,n){for(var a=0;a<s.create.length;++a){s.create[a](rr,t)}r(e=t.data.hook)&&(r(e.create)&&e.create(rr,t),r(e.insert)&&n.push(t))}function g(t){var e;if(r(e=t.fnScopeId))u.setStyleScope(t.elm,e);else{var n=t;for(;n;){r(e=n.context)&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent}}r(e=Ze)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function _(t,e,n,r,a,o){for(;r<=a;++r){f(n[r],o,t,e,!1,n,r)}}function b(t){var e,n;var a=t.data;if(r(a))for(r(e=a.hook)&&r(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e){s.destroy[e](t)}if(r(e=t.children))for(n=0;n<t.children.length;++n){b(t.children[n])}}function $(t,e,n,a){for(;n<=a;++n){var o=e[n];r(o)&&(r(o.tag)?(C(o),b(o)):l(o.elm))}}function C(t,e){if(r(e)||r(t.data)){var n;var a=s.remove.length+1;for(r(e)?e.listeners+=a:e=function(t,e){function n(){0==--n.listeners&&l(t)}return n.listeners=e,n}(t.elm,a),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&C(n,e),n=0;n<s.remove.length;++n){s.remove[n](t,e)}r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else l(t.elm)}function w(t,e,n,a){for(var o=n;o<a;o++){var i=e[o];if(r(i)&&or(t,i))return o}}function k(t,e,o,i,c,l){if(t===e)return;r(e.elm)&&r(i)&&(e=i[c]=yt(e));var d=e.elm=t.elm;if(a(t.isAsyncPlaceholder))return void(r(e.asyncFactory.resolved)?O(t.elm,e,o):e.isAsyncPlaceholder=!0);if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))return void(e.componentInstance=t.componentInstance);var p;var v=e.data;r(v)&&r(p=v.hook)&&r(p=p.prepatch)&&p(t,e);var h=t.children,y=e.children;if(r(v)&&m(e)){for(p=0;p<s.update.length;++p){s.update[p](t,e)}r(p=v.hook)&&r(p=p.update)&&p(t,e)}n(e.text)?r(h)&&r(y)?h!==y&&function(t,e,a,o,i){var s,c,l,d,p=0,v=0,h=e.length-1,m=e[0],y=e[h],g=a.length-1,b=a[0],C=a[g];var x=!i;for(;p<=h&&v<=g;){n(m)?m=e[++p]:n(y)?y=e[--h]:or(m,b)?(k(m,b,o,a,v),m=e[++p],b=a[++v]):or(y,C)?(k(y,C,o,a,g),y=e[--h],C=a[--g]):or(m,C)?(k(m,C,o,a,g),x&&u.insertBefore(t,m.elm,u.nextSibling(y.elm)),m=e[++p],C=a[--g]):or(y,b)?(k(y,b,o,a,v),x&&u.insertBefore(t,y.elm,m.elm),y=e[--h],b=a[++v]):(n(s)&&(s=ir(e,p,h)),n(c=r(b.key)?s[b.key]:w(b,e,p,h))?f(b,o,t,m.elm,!1,a,v):or(l=e[c],b)?(k(l,b,o,a,v),e[c]=void 0,x&&u.insertBefore(t,l.elm,m.elm)):f(b,o,t,m.elm,!1,a,v),b=a[++v])}p>h?_(t,d=n(a[g+1])?null:a[g+1].elm,a,v,g,o):v>g&&$(0,e,p,h)}(d,h,y,o,l):r(y)?(r(t.text)&&u.setTextContent(d,""),_(d,null,y,0,y.length-1,o)):r(h)?$(0,h,0,h.length-1):r(t.text)&&u.setTextContent(d,""):t.text!==e.text&&u.setTextContent(d,e.text),r(v)&&r(p=v.hook)&&r(p=p.postpatch)&&p(t,e)}function x(t,e,n){if(a(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var o=0;o<e.length;++o){e[o].data.hook.insert(e[o])}}var A=p("attrs,class,staticClass,staticStyle,key");function O(t,e,n,o){var i;var s=e.tag,c=e.data,u=e.children;if(o=o||c&&c.pre,e.elm=t,a(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(i=c.hook)&&r(i=i.init)&&i(e,!0),r(i=e.componentInstance)))return d(e,n),!0;if(r(s)){if(r(u))if(t.hasChildNodes()){if(r(i=c)&&r(i=i.domProps)&&r(i=i.innerHTML)){if(i!==t.innerHTML)return!1}else{var l=!0,f=t.firstChild;for(var p=0;p<u.length;p++){if(!f||!O(f,u[p],n,o)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}}else h(e,u,n);if(r(c)){var v=!1;for(var m in c){if(!A(m)){v=!0,y(e,n);break}}!v&&c.class&&ee(c.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,o,i){if(n(e))return void(r(t)&&b(t));var c=!1;var l=[];if(n(t))c=!0,f(e,l);else{var d=r(t.nodeType);if(!d&&or(t,e))k(t,e,l,null,null,i);else{if(d){if(1===t.nodeType&&t.hasAttribute(M)&&(t.removeAttribute(M),o=!0),a(o)&&O(t,e,l))return x(e,l,!0),t;A=t,t=new vt(u.tagName(A).toLowerCase(),{},[],void 0,A)}var p=t.elm,v=u.parentNode(p);if(f(e,l,p._leaveCb?null:v,u.nextSibling(p)),r(e.parent)){var h=e.parent;var y=m(e);for(;h;){for(var g=0;g<s.destroy.length;++g){s.destroy[g](h)}if(h.elm=e.elm,y){for(var _=0;_<s.create.length;++_){s.create[_](rr,h)}var C=h.data.hook.insert;if(C.merged)for(var w=1;w<C.fns.length;w++){C.fns[w]()}}else nr(h);h=h.parent}}r(v)?$(0,[t],0,0):r(t.tag)&&b(t)}}var A;return x(e,l,c),e.elm}}({nodeOps:tr,modules:[yr,_r,na,ia,ya,z?{create:Va,activate:Va,remove:function t(e,n){!0!==e.data.show?Ha(e,n):n()}}:{}].concat(pr)});Z&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Ya(t,"input")});var Ka={inserted:function t(e,n,r,a){"select"===r.tag?(a.elm&&!a.elm._vOptions?oe(r,"postpatch",function(){Ka.componentUpdated(e,n,r)}):Ja(e,n,r.context),e._vOptions=[].map.call(e.options,Za)):("textarea"===r.tag||Yn(e.type))&&(e._vModifiers=n.modifiers,n.modifiers.lazy||(e.addEventListener("compositionstart",Ga),e.addEventListener("compositionend",Xa),e.addEventListener("change",Xa),Z&&(e.vmodel=!0)))},componentUpdated:function t(e,n,r){if("select"===r.tag){Ja(e,n,r.context);var a=e._vOptions,o=e._vOptions=[].map.call(e.options,Za);if(o.some(function(t,e){return!j(t,a[e])})){(e.multiple?n.value.some(function(t){return Wa(t,o)}):n.value!==n.oldValue&&Wa(n.value,o))&&Ya(e,"change")}}}};function Ja(t,e,n){qa(t,e,n),(W||G)&&setTimeout(function(){qa(t,e,n)},0)}function qa(t,e,n){var r=e.value,a=t.multiple;if(a&&!Array.isArray(r))return;var o,i;for(var s=0,c=t.options.length;s<c;s++){if(i=t.options[s],a)o=D(r,Za(i))>-1,i.selected!==o&&(i.selected=o);else if(j(Za(i),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s))}a||(t.selectedIndex=-1)}function Wa(t,e){return e.every(function(e){return!j(e,t)})}function Za(t){return"_value"in t?t._value:t.value}function Ga(t){t.target.composing=!0}function Xa(t){t.target.composing&&(t.target.composing=!1,Ya(t.target,"input"))}function Ya(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Qa(t){return!t.componentInstance||t.data&&t.data.transition?t:Qa(t.componentInstance._vnode)}var to={model:Ka,show:{bind:function t(e,n,r){var a=n.value;var o=(r=Qa(r)).data&&r.data.transition,i=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;a&&o?(r.data.show=!0,Ra(r,function(){e.style.display=i})):e.style.display=a?i:"none"},update:function t(e,n,r){var a=n.value,o=n.oldValue;if(!a==!o)return;(r=Qa(r)).data&&r.data.transition?(r.data.show=!0,a?Ra(r,function(){e.style.display=e.__vOriginalDisplay}):Ha(r,function(){e.style.display="none"})):e.style.display=a?e.__vOriginalDisplay:"none"},unbind:function t(e,n,r,a,o){o||(e.style.display=e.__vOriginalDisplay)}}};var eo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function no(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?no(ze(e.children)):t}function ro(t){var e={},n=t.$options;for(var r in n.propsData){e[r]=t[r]}var a=n._parentListeners;for(var o in a){e[$(o)]=a[o]}return e}function ao(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var oo=function t(e){return e.tag||Ve(e)},io=function t(e){return"show"===e.name};var so={name:"transition",props:eo,abstract:!0,render:function t(e){var n=this;var r=this.$slots.default;if(!r)return;if(!(r=r.filter(oo)).length)return;var a=this.mode,i=r[0];if(function(t){for(;t=t.parent;){if(t.data.transition)return!0}}(this.$vnode))return i;var s=no(i);if(!s)return i;if(this._leaving)return ao(e,i);var c="__transition-".concat(this._uid,"-");s.key=null==s.key?s.isComment?c+"comment":c+s.tag:o(s.key)?0===String(s.key).indexOf(c)?s.key:c+s.key:s.key;var u=(s.data||(s.data={})).transition=ro(this),l=this._vnode,f=no(l);if(s.data.directives&&s.data.directives.some(io)&&(s.data.show=!0),f&&f.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(s,f)&&!Ve(f)&&(!f.componentInstance||!f.componentInstance._vnode.isComment)){var d=f.data.transition=O({},u);if("out-in"===a)return this._leaving=!0,oe(d,"afterLeave",function(){n._leaving=!1,n.$forceUpdate()}),ao(e,i);if("in-out"===a){if(Ve(s))return l;var p;var v=function t(){p()};oe(u,"afterEnter",v),oe(u,"enterCancelled",v),oe(d,"delayLeave",function(t){p=t})}}return i}};var co=O({tag:String,moveClass:String},eo);function uo(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function lo(t){t.data.newPos=t.elm.getBoundingClientRect()}function fo(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,a=e.top-n.top;if(r||a){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(a,"px)"),o.transitionDuration="0s"}}delete co.mode;var po={Transition:so,TransitionGroup:{props:co,beforeMount:function t(){var e=this;var n=this._update;this._update=function(t,r){var a=Ge(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,a(),n.call(e,t,r)}},render:function t(e){var n=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),a=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],s=ro(this);for(var c=0;c<o.length;c++){var u=o[c];u.tag&&null!=u.key&&0!==String(u.key).indexOf("__vlist")&&(i.push(u),r[u.key]=u,(u.data||(u.data={})).transition=s)}if(a){var l=[],f=[];for(var d=0;d<a.length;d++){var p=a[d];p.data.transition=s,p.data.pos=p.elm.getBoundingClientRect(),r[p.key]?l.push(p):f.push(p)}this.kept=e(n,null,l),this.removed=f}return e(n,null,i)},updated:function t(){var e=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,n)&&(e.forEach(uo),e.forEach(lo),e.forEach(fo),this._reflow=document.body.offsetHeight,e.forEach(function(t){if(t.data.moved){var e=t.elm,r=e.style;ja(e,n),r.transform=r.WebkitTransform=r.transitionDuration="",e.addEventListener(Oa,e._moveCb=function t(r){r&&r.target!==e||r&&!/transform$/.test(r.propertyName)||(e.removeEventListener(Oa,t),e._moveCb=null,Da(e,n))})}}))},methods:{hasMove:function t(e,n){if(!wa)return!1;if(this._hasMove)return this._hasMove;var r=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(t){ba(r,t)}),_a(r,n),r.style.display="none",this.$el.appendChild(r);var a=Ia(r);return this.$el.removeChild(r),this._hasMove=a.hasTransform}}}};wn.config.mustUseProp=Dn,wn.config.isReservedTag=Zn,wn.config.isReservedAttr=En,wn.config.getTagNamespace=Gn,wn.config.isUnknownElement=function(t){if(!z)return!0;if(Zn(t))return!1;if(t=t.toLowerCase(),null!=Xn[t])return Xn[t];var e=document.createElement(t);return t.indexOf("-")>-1?Xn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Xn[t]=/HTMLUnknownElement/.test(e.toString())},O(wn.options.directives,to),O(wn.options.components,po),wn.prototype.__patch__=z?za:T,wn.prototype.$mount=function(t,e){return function(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=ht),Qe(t,"beforeMount"),r=function e(){t._update(t._render(),n)},new dn(t,r,T,{before:function e(){t._isMounted&&!t._isDestroyed&&Qe(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Qe(t,"mounted")),t}(this,t=t&&z?Qn(t):void 0,e)},z&&setTimeout(function(){P.devtools&&at&&at.emit("init",wn)},0);var vo=/\{\{((?:.|\r?\n)+?)\}\}/g,ho=/[-.*+?^${}()|[\]\/\\]/g,mo=_(function(t){var e=t[0].replace(ho,"\\$&"),n=t[1].replace(ho,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")});var yo={staticKeys:["staticClass"],transformNode:function t(e,n){n.warn;var r=jr(e,"class");r&&(e.staticClass=JSON.stringify(r));var a=Er(e,"class",!1);a&&(e.classBinding=a)},genData:function t(e){var n="";return e.staticClass&&(n+="staticClass:".concat(e.staticClass,",")),e.classBinding&&(n+="class:".concat(e.classBinding,",")),n}};var go={staticKeys:["staticStyle"],transformNode:function t(e,n){n.warn;var r=jr(e,"style");r&&(e.staticStyle=JSON.stringify(sa(r)));var a=Er(e,"style",!1);a&&(e.styleBinding=a)},genData:function t(e){var n="";return e.staticStyle&&(n+="staticStyle:".concat(e.staticStyle,",")),e.styleBinding&&(n+="style:(".concat(e.styleBinding,"),")),n}};var _o;var bo={decode:function t(e){return(_o=_o||document.createElement("div")).innerHTML=e,_o.textContent}};var $o=p("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Co=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),wo=p("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),ko=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,xo=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Ao="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(R.source,"]*"),Oo="((?:".concat(Ao,"\\:)?").concat(Ao,")"),So=new RegExp("^<".concat(Oo)),To=/^\s*(\/?)>/,No=new RegExp("^<\\/".concat(Oo,"[^>]*>")),Eo=/^<!DOCTYPE [^>]+>/i,jo=/^<!\--/,Do=/^<!\[/,Lo=p("script,style,textarea",!0),Mo={},Io={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Fo=/&(?:lt|gt|quot|amp|#39);/g,Po=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Ro=p("pre,textarea",!0),Ho=function t(e,n){return e&&Ro(e)&&"\n"===n[0]};function Bo(t,e){var n=e?Po:Fo;return t.replace(n,function(t){return Io[t]})}var Uo=/^@|^v-on:/,Vo=/^v-|^@|^:/,zo=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Ko=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Jo=/^\(|\)$/g,qo=/^\[.*\]$/,Wo=/:(.*)$/,Zo=/^:|^\.|^v-bind:/,Go=/\.[^.\]]+(?=[^\]]*$)/g,Xo=/^v-slot(:|$)|^#/,Yo=/[\r\n]/,Qo=/\s+/g,ti=_(bo.decode),ei="_empty_";var ni,ri,ai,oi,ii,si,ci,ui;function li(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:yi(e),rawAttrsMap:{},parent:n,children:[]}}function fi(t,e){ni=e.warn||wr,si=e.isPreTag||N,ci=e.mustUseProp||N,ui=e.getTagNamespace||N;e.isReservedTag;ai=kr(e.modules,"transformNode"),oi=kr(e.modules,"preTransformNode"),ii=kr(e.modules,"postTransformNode"),ri=e.delimiters;var n=[],r=!1!==e.preserveWhitespace,a=e.whitespace;var o,i,s=!1,c=!1;function u(t){if(l(t),s||t.processed||(t=di(t,e)),n.length||t===o||o.if&&(t.elseif||t.else)&&vi(o,{exp:t.elseif,block:t}),i&&!t.forbidden)if(t.elseif||t.else)!function(t,e){var n=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];t.pop()}}(e.children);n&&n.if&&vi(n,{exp:t.elseif,block:t})}(t,i);else{if(t.slotScope){var r=t.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[r]=t}i.children.push(t),t.parent=i}t.children=t.children.filter(function(t){return!t.slotScope}),l(t),t.pre&&(s=!1),si(t.tag)&&(c=!1);for(var a=0;a<ii.length;a++){ii[a](t,e)}}function l(t){if(!c){var e;for(;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;){t.children.pop()}}}return function(t,e){var n=[],r=e.expectHTML,a=e.isUnaryTag||N,o=e.canBeLeftOpenTag||N;var i,s,c=0;for(;t;){if(i=t,s&&Lo(s)){(function(){var n=0;var r=s.toLowerCase(),a=Mo[r]||(Mo[r]=new RegExp("([\\s\\S]*?)(</"+r+"[^>]*>)","i")),o=t.replace(a,function(t,a,o){return n=o.length,Lo(r)||"noscript"===r||(a=a.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Ho(r,a)&&(a=a.slice(1)),e.chars&&e.chars(a),""});c+=t.length-o.length,t=o,C(r,c-n,c)})()}else{var u=void 0,l=void 0,f=void 0,d=t.indexOf("<");if(0===d){if(jo.test(t)){var p=t.indexOf("--\x3e");if(p>=0){e.shouldKeepComment&&e.comment(t.substring(4,p),c,c+p+3),_(p+3);continue}}if(Do.test(t)){var v=t.indexOf("]>");if(v>=0){_(v+2);continue}}var h=t.match(Eo);if(h){_(h[0].length);continue}var m=t.match(No);if(m){var y=c;_(m[0].length),C(m[1],y,c);continue}var g=b();if(g){$(g),Ho(g.tagName,t)&&_(1);continue}}if(d>=0){for(l=t.slice(d);!(No.test(l)||So.test(l)||jo.test(l)||Do.test(l)||(f=l.indexOf("<",1))<0);){d+=f,l=t.slice(d)}u=t.substring(0,d)}d<0&&(u=t),u&&_(u.length),e.chars&&u&&e.chars(u,c-u.length,c)}if(t===i){e.chars&&e.chars(t);break}}function _(e){c+=e,t=t.substring(e)}function b(){var e=t.match(So);if(e){var n={tagName:e[1],attrs:[],start:c};var r,a;for(_(e[0].length);!(r=t.match(To))&&(a=t.match(xo)||t.match(ko));){a.start=c,_(a[0].length),a.end=c,n.attrs.push(a)}if(r)return n.unarySlash=r[1],_(r[0].length),n.end=c,n}}function $(t){var i=t.tagName,c=t.unarySlash;r&&("p"===s&&wo(i)&&C(s),o(i)&&s===i&&C(i));var u=a(i)||!!c,l=t.attrs.length,f=new Array(l);for(var d=0;d<l;d++){var p=t.attrs[d],v=p[3]||p[4]||p[5]||"",h="a"===i&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;f[d]={name:p[1],value:Bo(v,h)}}u||(n.push({tag:i,lowerCasedTag:i.toLowerCase(),attrs:f,start:t.start,end:t.end}),s=i),e.start&&e.start(i,f,u,t.start,t.end)}function C(t,r,a){var o,i;if(null==r&&(r=c),null==a&&(a=c),t)for(i=t.toLowerCase(),o=n.length-1;o>=0&&n[o].lowerCasedTag!==i;o--){}else o=0;if(o>=0){for(var u=n.length-1;u>=o;u--){e.end&&e.end(n[u].tag,r,a)}n.length=o,s=o&&n[o-1].tag}else"br"===i?e.start&&e.start(t,[],!0,r,a):"p"===i&&(e.start&&e.start(t,[],!1,r,a),e.end&&e.end(t,r,a))}C()}(t,{warn:ni,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function t(r,a,l,f,d){var p=i&&i.ns||ui(r);W&&"svg"===p&&(a=function(t){var e=[];for(var n=0;n<t.length;n++){var r=t[n];gi.test(r.name)||(r.name=r.name.replace(_i,""),e.push(r))}return e}(a));var v=li(r,a,i);var h;p&&(v.ns=p),"style"!==(h=v).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||rt()||(v.forbidden=!0);for(var m=0;m<oi.length;m++){v=oi[m](v,e)||v}s||(!function(t){null!=jr(t,"v-pre")&&(t.pre=!0)}(v),v.pre&&(s=!0)),si(v.tag)&&(c=!0),s?function(t){var e=t.attrsList,n=e.length;if(n){var r=t.attrs=new Array(n);for(var a=0;a<n;a++){r[a]={name:e[a].name,value:JSON.stringify(e[a].value)},null!=e[a].start&&(r[a].start=e[a].start,r[a].end=e[a].end)}}else t.pre||(t.plain=!0)}(v):v.processed||(pi(v),function(t){var e=jr(t,"v-if");if(e)t.if=e,vi(t,{exp:e,block:t});else{null!=jr(t,"v-else")&&(t.else=!0);var n=jr(t,"v-else-if");n&&(t.elseif=n)}}(v),function(t){null!=jr(t,"v-once")&&(t.once=!0)}(v)),o||(o=v),l?u(v):(i=v,n.push(v))},end:function t(e,r,a){var o=n[n.length-1];n.length-=1,i=n[n.length-1],u(o)},chars:function t(e,n,o){if(!i)return;if(W&&"textarea"===i.tag&&i.attrsMap.placeholder===e)return;var u=i.children;var l;if(e=c||e.trim()?"script"===(l=i).tag||"style"===l.tag?e:ti(e):u.length?a?"condense"===a&&Yo.test(e)?"":" ":r?" ":"":""){var f,d;c||"condense"!==a||(e=e.replace(Qo," ")),!s&&" "!==e&&(f=function(t,e){var n=e?mo(e):vo;if(!n.test(t))return;var r=[],a=[];var o,i,s,c=n.lastIndex=0;for(;o=n.exec(t);){(i=o.index)>c&&(a.push(s=t.slice(c,i)),r.push(JSON.stringify(s)));var u=$r(o[1].trim());r.push("_s(".concat(u,")")),a.push({"@binding":u}),c=i+o[0].length}return c<t.length&&(a.push(s=t.slice(c)),r.push(JSON.stringify(s))),{expression:r.join("+"),tokens:a}}(e,ri))?d={type:2,expression:f.expression,tokens:f.tokens,text:e}:" "===e&&u.length&&" "===u[u.length-1].text||(d={type:3,text:e}),d&&u.push(d)}},comment:function t(e,n,r){if(i){var a={type:3,text:e,isComment:!0};i.children.push(a)}}}),o}function di(t,e){var n;!function(t){var e=Er(t,"key");e&&(t.key=e)}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,function(t){var e=Er(t,"ref");e&&(t.ref=e,t.refInFor=function(t){var e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){var e;"template"===t.tag?(e=jr(t,"scope"),t.slotScope=e||jr(t,"slot-scope")):(e=jr(t,"slot-scope"))&&(t.slotScope=e);var n=Er(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||Ar(t,"slot",n,function(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}(t,"slot")));if("template"===t.tag){var r=Dr(t,Xo);if(r){var a=hi(r),o=a.name,i=a.dynamic;t.slotTarget=o,t.slotTargetDynamic=i,t.slotScope=r.value||ei}}else{var s=Dr(t,Xo);if(s){var c=t.scopedSlots||(t.scopedSlots={}),u=hi(s),l=u.name,f=u.dynamic,d=c[l]=li("template",[],t);d.slotTarget=l,d.slotTargetDynamic=f,d.children=t.children.filter(function(t){if(!t.slotScope)return t.parent=d,!0}),d.slotScope=s.value||ei,t.children=[],t.plain=!1}}}(t),"slot"===(n=t).tag&&(n.slotName=Er(n,"name")),function(t){var e;(e=Er(t,"is"))&&(t.component=e);null!=jr(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var r=0;r<ai.length;r++){t=ai[r](t,e)||t}return function(t){var e=t.attrsList;var n,r,a,o,i,s,c,u;for(n=0,r=e.length;n<r;n++){if(a=o=e[n].name,i=e[n].value,Vo.test(a)){if(t.hasBindings=!0,(s=mi(a.replace(Vo,"")))&&(a=a.replace(Go,"")),Zo.test(a))a=a.replace(Zo,""),i=$r(i),(u=qo.test(a))&&(a=a.slice(1,-1)),s&&(s.prop&&!u&&"innerHtml"===(a=$(a))&&(a="innerHTML"),s.camel&&!u&&(a=$(a)),s.sync&&(c=Ir(i,"$event"),u?Nr(t,'"update:"+('.concat(a,")"),c,null,!1,0,e[n],!0):(Nr(t,"update:".concat($(a)),c,null,!1,0,e[n]),k(a)!==$(a)&&Nr(t,"update:".concat(k(a)),c,null,!1,0,e[n])))),s&&s.prop||!t.component&&ci(t.tag,t.attrsMap.type,a)?xr(t,a,i,e[n],u):Ar(t,a,i,e[n],u);else if(Uo.test(a))a=a.replace(Uo,""),(u=qo.test(a))&&(a=a.slice(1,-1)),Nr(t,a,i,s,!1,0,e[n],u);else{var l=(a=a.replace(Vo,"")).match(Wo);var f=l&&l[1];u=!1,f&&(a=a.slice(0,-(f.length+1)),qo.test(f)&&(f=f.slice(1,-1),u=!0)),Sr(t,a,o,i,f,u,s,e[n])}}else Ar(t,a,JSON.stringify(i),e[n]),!t.component&&"muted"===a&&ci(t.tag,t.attrsMap.type,a)&&xr(t,a,"true",e[n])}}(t),t}function pi(t){var e;if(e=jr(t,"v-for")){var n=function(t){var e=t.match(zo);if(!e)return;var n={};n.for=e[2].trim();var r=e[1].trim().replace(Jo,""),a=r.match(Ko);a?(n.alias=r.replace(Ko,"").trim(),n.iterator1=a[1].trim(),a[2]&&(n.iterator2=a[2].trim())):n.alias=r;return n}(e);n&&O(t,n)}}function vi(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function hi(t){var e=t.name.replace(Xo,"");return e||"#"!==t.name[0]&&(e="default"),qo.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'.concat(e,'"'),dynamic:!1}}function mi(t){var e=t.match(Go);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}function yi(t){var e={};for(var n=0,r=t.length;n<r;n++){e[t[n].name]=t[n].value}return e}var gi=/^xmlns:NS\d+/,_i=/^NS\d+:/;function bi(t){return li(t.tag,t.attrsList.slice(),t.parent)}var $i=[yo,go,{preTransformNode:function t(e,n){if("input"===e.tag){var r=e.attrsMap;if(!r["v-model"])return;var a;if((r[":type"]||r["v-bind:type"])&&(a=Er(e,"type")),r.type||a||!r["v-bind"]||(a="(".concat(r["v-bind"],").type")),a){var o=jr(e,"v-if",!0),i=o?"&&(".concat(o,")"):"",s=null!=jr(e,"v-else",!0),c=jr(e,"v-else-if",!0),u=bi(e);pi(u),Or(u,"type","checkbox"),di(u,n),u.processed=!0,u.if="(".concat(a,")==='checkbox'")+i,vi(u,{exp:u.if,block:u});var l=bi(e);jr(l,"v-for",!0),Or(l,"type","radio"),di(l,n),vi(u,{exp:"(".concat(a,")==='radio'")+i,block:l});var f=bi(e);return jr(f,"v-for",!0),Or(f,":type",a),di(f,n),vi(u,{exp:o,block:f}),s?u.else=!0:c&&(u.elseif=c),u}}}}];var Ci={expectHTML:!0,modules:$i,directives:{model:function t(e,n,r){var a=n.value,o=n.modifiers,i=e.tag,s=e.attrsMap.type;if(e.component)return Mr(e,a,o),!1;if("select"===i)!function(t,e,n){var r="var $$selectedVal = ".concat('Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(n&&n.number?"_n(val)":"val","})"),";");r="".concat(r," ").concat(Ir(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),Nr(t,"change",r,null,!0)}(e,a,o);else if("input"===i&&"checkbox"===s)!function(t,e,n){var r=n&&n.number,a=Er(t,"value")||"null",o=Er(t,"true-value")||"true",i=Er(t,"false-value")||"false";xr(t,"checked","Array.isArray(".concat(e,")")+"?_i(".concat(e,",").concat(a,")>-1")+("true"===o?":(".concat(e,")"):":_q(".concat(e,",").concat(o,")"))),Nr(t,"change","var $$a=".concat(e,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(o,"):(").concat(i,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(r?"_n("+a+")":a,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(Ir(e,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(Ir(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(Ir(e,"$$c"),"}"),null,!0)}(e,a,o);else if("input"===i&&"radio"===s)!function(t,e,n){var r=n&&n.number;var a=Er(t,"value")||"null";xr(t,"checked","_q(".concat(e,",").concat(a=r?"_n(".concat(a,")"):a,")")),Nr(t,"change",Ir(e,a),null,!0)}(e,a,o);else if("input"===i||"textarea"===i)!function(t,e,n){var r=t.attrsMap.type,a=n||{},o=a.lazy,i=a.number,s=a.trim,c=!o&&"range"!==r,u=o?"change":"range"===r?Wr:"input";var l="$event.target.value";s&&(l="$event.target.value.trim()"),i&&(l="_n(".concat(l,")"));var f=Ir(e,l);c&&(f="if($event.target.composing)return;".concat(f)),xr(t,"value","(".concat(e,")")),Nr(t,u,f,null,!0),(s||i)&&Nr(t,"blur","$forceUpdate()")}(e,a,o);else if(!P.isReservedTag(i))return Mr(e,a,o),!1;return!0},text:function t(e,n){n.value&&xr(e,"textContent","_s(".concat(n.value,")"),n)},html:function t(e,n){n.value&&xr(e,"innerHTML","_s(".concat(n.value,")"),n)}},isPreTag:function t(e){return"pre"===e},isUnaryTag:$o,mustUseProp:Dn,canBeLeftOpenTag:Co,isReservedTag:Zn,getTagNamespace:Gn,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}($i)};var wi,ki;var xi=_(function(t){return p("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))});function Ai(t,e){t&&(wi=xi(e.staticKeys||""),ki=e.isReservedTag||N,function t(e){e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||v(t.tag)||!ki(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(wi)))}(e);if(1===e.type){if(!ki(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var n=0,r=e.children.length;n<r;n++){var a=e.children[n];t(a),a.static||(e.static=!1)}if(e.ifConditions)for(var o=1,i=e.ifConditions.length;o<i;o++){var s=e.ifConditions[o].block;t(s),s.static||(e.static=!1)}}}(t),function t(e,n){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=n),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var r=0,a=e.children.length;r<a;r++){t(e.children[r],n||!!e.for)}if(e.ifConditions)for(var o=1,i=e.ifConditions.length;o<i;o++){t(e.ifConditions[o].block,n)}}}(t,!1))}var Oi=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,Si=/\([^)]*?\);*$/,Ti=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Ni={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ei={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},ji=function t(e){return"if(".concat(e,")return null;")},Di={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:ji("$event.target !== $event.currentTarget"),ctrl:ji("!$event.ctrlKey"),shift:ji("!$event.shiftKey"),alt:ji("!$event.altKey"),meta:ji("!$event.metaKey"),left:ji("'button' in $event && $event.button !== 0"),middle:ji("'button' in $event && $event.button !== 1"),right:ji("'button' in $event && $event.button !== 2")};function Li(t,e){var n=e?"nativeOn:":"on:";var r="",a="";for(var o in t){var i=Mi(t[o]);t[o]&&t[o].dynamic?a+="".concat(o,",").concat(i,","):r+='"'.concat(o,'":').concat(i,",")}return r="{".concat(r.slice(0,-1),"}"),a?n+"_d(".concat(r,",[").concat(a.slice(0,-1),"])"):n+r}function Mi(t){if(!t)return"function(){}";if(Array.isArray(t))return"[".concat(t.map(function(t){return Mi(t)}).join(","),"]");var e=Ti.test(t.value),n=Oi.test(t.value),r=Ti.test(t.value.replace(Si,""));if(t.modifiers){var a="",o="";var i=[];for(var s in t.modifiers){if(Di[s])o+=Di[s],Ni[s]&&i.push(s);else if("exact"===s){(function(){var e=t.modifiers;o+=ji(["ctrl","shift","alt","meta"].filter(function(t){return!e[t]}).map(function(t){return"$event.".concat(t,"Key")}).join("||"))})()}else i.push(s)}return i.length&&(a+=function(t){return"if(!$event.type.indexOf('key')&&"+"".concat(t.map(Ii).join("&&"),")return null;")}(i)),o&&(a+=o),"function($event){".concat(a).concat(e?"return ".concat(t.value,"($event)"):n?"return (".concat(t.value,")($event)"):r?"return ".concat(t.value):t.value,"}")}return e||n?t.value:"function($event){".concat(r?"return ".concat(t.value):t.value,"}")}function Ii(t){var e=parseInt(t,10);if(e)return"$event.keyCode!==".concat(e);var n=Ni[t],r=Ei[t];return"_k($event.keyCode,"+"".concat(JSON.stringify(t),",")+"".concat(JSON.stringify(n),",")+"$event.key,"+"".concat(JSON.stringify(r))+")"}var Fi={on:function t(e,n){e.wrapListeners=function(t){return"_g(".concat(t,",").concat(n.value,")")}},bind:function t(e,n){e.wrapData=function(t){return"_b(".concat(t,",'").concat(e.tag,"',").concat(n.value,",").concat(n.modifiers&&n.modifiers.prop?"true":"false").concat(n.modifiers&&n.modifiers.sync?",true":"",")")}},cloak:T};var Pi=function t(e){babelHelpers.classCallCheck(this,t);this.options=e,this.warn=e.warn||wr,this.transforms=kr(e.modules,"transformCode"),this.dataGenFns=kr(e.modules,"genData"),this.directives=O(O({},Fi),e.directives);var n=e.isReservedTag||N;this.maybeComponent=function(t){return!!t.component||!n(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Ri(t,e){var n=new Pi(e);return{render:"with(this){return ".concat(t?Hi(t,n):'_c("div")',"}"),staticRenderFns:n.staticRenderFns}}function Hi(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Bi(t,e);if(t.once&&!t.onceProcessed)return Ui(t,e);if(t.for&&!t.forProcessed)return zi(t,e);if(t.if&&!t.ifProcessed)return Vi(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',r=Wi(t,e);var a="_t(".concat(n).concat(r?",".concat(r):"");var o=t.attrs||t.dynamicAttrs?Xi((t.attrs||[]).concat(t.dynamicAttrs||[]).map(function(t){return{name:$(t.name),value:t.value,dynamic:t.dynamic}})):null,i=t.attrsMap["v-bind"];!o&&!i||r||(a+=",null");o&&(a+=",".concat(o));i&&(a+="".concat(o?"":",null",",").concat(i));return a+")"}(t,e);{var n;if(t.component)n=function(t,e,n){var r=e.inlineTemplate?null:Wi(e,n,!0);return"_c(".concat(t,",").concat(Ki(e,n)).concat(r?",".concat(r):"",")")}(t.component,t,e);else{var r;(!t.plain||t.pre&&e.maybeComponent(t))&&(r=Ki(t,e));var a=t.inlineTemplate?null:Wi(t,e,!0);n="_c('".concat(t.tag,"'").concat(r?",".concat(r):"").concat(a?",".concat(a):"",")")}for(var o=0;o<e.transforms.length;o++){n=e.transforms[o](t,n)}return n}}return Wi(t,e)||"void 0"}function Bi(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return ".concat(Hi(t,e),"}")),e.pre=n,"_m(".concat(e.staticRenderFns.length-1).concat(t.staticInFor?",true":"",")")}function Ui(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Vi(t,e);if(t.staticInFor){var n="",r=t.parent;for(;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o(".concat(Hi(t,e),",").concat(e.onceId++,",").concat(n,")"):Hi(t,e)}return Bi(t,e)}function Vi(t,e,n,r){return t.ifProcessed=!0,function t(e,n,r,a){if(!e.length)return a||"_e()";var o=e.shift();return o.exp?"(".concat(o.exp,")?").concat(i(o.block),":").concat(t(e,n,r,a)):"".concat(i(o.block));function i(t){return r?r(t,n):t.once?Ui(t,n):Hi(t,n)}}(t.ifConditions.slice(),e,n,r)}function zi(t,e,n,r){var a=t.for,o=t.alias,i=t.iterator1?",".concat(t.iterator1):"",s=t.iterator2?",".concat(t.iterator2):"";return t.forProcessed=!0,"".concat(r||"_l","((").concat(a,"),")+"function(".concat(o).concat(i).concat(s,"){")+"return ".concat((n||Hi)(t,e))+"})"}function Ki(t,e){var n="{";var r=function(t,e){var n=t.directives;if(!n)return;var r,a,o,i,s="directives:[",c=!1;for(r=0,a=n.length;r<a;r++){o=n[r],i=!0;var u=e.directives[o.name];u&&(i=!!u(t,o,e.warn)),i&&(c=!0,s+='{name:"'.concat(o.name,'",rawName:"').concat(o.rawName,'"').concat(o.value?",value:(".concat(o.value,"),expression:").concat(JSON.stringify(o.value)):"").concat(o.arg?",arg:".concat(o.isDynamicArg?o.arg:'"'.concat(o.arg,'"')):"").concat(o.modifiers?",modifiers:".concat(JSON.stringify(o.modifiers)):"","},"))}if(c)return s.slice(0,-1)+"]"}(t,e);r&&(n+=r+","),t.key&&(n+="key:".concat(t.key,",")),t.ref&&(n+="ref:".concat(t.ref,",")),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'.concat(t.tag,'",'));for(var a=0;a<e.dataGenFns.length;a++){n+=e.dataGenFns[a](t)}if(t.attrs&&(n+="attrs:".concat(Xi(t.attrs),",")),t.props&&(n+="domProps:".concat(Xi(t.props),",")),t.events&&(n+="".concat(Li(t.events,!1),",")),t.nativeEvents&&(n+="".concat(Li(t.nativeEvents,!0),",")),t.slotTarget&&!t.slotScope&&(n+="slot:".concat(t.slotTarget,",")),t.scopedSlots&&(n+="".concat(function(t,e,n){var r=t.for||Object.keys(e).some(function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||Ji(n)}),a=!!t.if;if(!r){var o=t.parent;for(;o;){if(o.slotScope&&o.slotScope!==ei||o.for){r=!0;break}o.if&&(a=!0),o=o.parent}}var i=Object.keys(e).map(function(t){return qi(e[t],n)}).join(",");return"scopedSlots:_u([".concat(i,"]").concat(r?",null,true":"").concat(!r&&a?",null,false,".concat(function(t){var e=5381,n=t.length;for(;n;){e=33*e^t.charCodeAt(--n)}return e>>>0}(i)):"",")")}(t,t.scopedSlots,e),",")),t.model&&(n+="model:{value:".concat(t.model.value,",callback:").concat(t.model.callback,",expression:").concat(t.model.expression,"},")),t.inlineTemplate){var o=function(t,e){var n=t.children[0];if(n&&1===n.type){var r=Ri(n,e.options);return"inlineTemplate:{render:function(){".concat(r.render,"},staticRenderFns:[").concat(r.staticRenderFns.map(function(t){return"function(){".concat(t,"}")}).join(","),"]}")}}(t,e);o&&(n+="".concat(o,","))}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b(".concat(n,',"').concat(t.tag,'",').concat(Xi(t.dynamicAttrs),")")),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function Ji(t){return 1===t.type&&("slot"===t.tag||t.children.some(Ji))}function qi(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return Vi(t,e,qi,"null");if(t.for&&!t.forProcessed)return zi(t,e,qi);var r=t.slotScope===ei?"":String(t.slotScope),a="function(".concat(r,"){")+"return ".concat("template"===t.tag?t.if&&n?"(".concat(t.if,")?").concat(Wi(t,e)||"undefined",":undefined"):Wi(t,e)||"undefined":Hi(t,e),"}"),o=r?"":",proxy:true";return"{key:".concat(t.slotTarget||'"default"',",fn:").concat(a).concat(o,"}")}function Wi(t,e,n,r,a){var o=t.children;if(o.length){var i=o[0];if(1===o.length&&i.for&&"template"!==i.tag&&"slot"!==i.tag){var s=n?e.maybeComponent(i)?",1":",0":"";return"".concat((r||Hi)(i,e)).concat(s)}var c=n?function(t,e){var n=0;for(var r=0;r<t.length;r++){var a=t[r];if(1===a.type){if(Zi(a)||a.ifConditions&&a.ifConditions.some(function(t){return Zi(t.block)})){n=2;break}(e(a)||a.ifConditions&&a.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}(o,e.maybeComponent):0,u=a||Gi;return"[".concat(o.map(function(t){return u(t,e)}).join(","),"]").concat(c?",".concat(c):"")}}function Zi(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function Gi(t,e){return 1===t.type?Hi(t,e):3===t.type&&t.isComment?(r=t,"_e(".concat(JSON.stringify(r.text),")")):"_v(".concat(2===(n=t).type?n.expression:Yi(JSON.stringify(n.text)),")");var n,r}function Xi(t){var e="",n="";for(var r=0;r<t.length;r++){var a=t[r],o=Yi(a.value);a.dynamic?n+="".concat(a.name,",").concat(o,","):e+='"'.concat(a.name,'":').concat(o,",")}return e="{".concat(e.slice(0,-1),"}"),n?"_d(".concat(e,",[").concat(n.slice(0,-1),"])"):e}function Yi(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Qi(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),T}}function ts(t){var e=Object.create(null);return function(n,r,a){(r=O({},r)).warn;delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var i=t(n,r),s={},c=[];return s.render=Qi(i.render,c),s.staticRenderFns=i.staticRenderFns.map(function(t){return Qi(t,c)}),e[o]=s}}var es=(ns=function t(e,n){var r=fi(e.trim(),n);!1!==n.optimize&&Ai(r,n);var a=Ri(r,n);return{ast:r,render:a.render,staticRenderFns:a.staticRenderFns}},function(t){function e(e,n){var r=Object.create(t),a=[],o=[];if(n){n.modules&&(r.modules=(t.modules||[]).concat(n.modules)),n.directives&&(r.directives=O(Object.create(t.directives||null),n.directives));for(var i in n){"modules"!==i&&"directives"!==i&&(r[i]=n[i])}}r.warn=function(t,e,n){(n?o:a).push(t)};var s=ns(e.trim(),r);return s.errors=a,s.tips=o,s}return{compile:e,compileToFunctions:ts(e)}});var ns;var rs=es(Ci),as=rs.compile,os=rs.compileToFunctions;var is;function ss(t){return(is=is||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',is.innerHTML.indexOf("&#10;")>0}var cs=!!z&&ss(!1),us=!!z&&ss(!0),ls=_(function(t){var e=Qn(t);return e&&e.innerHTML}),fs=wn.prototype.$mount;wn.prototype.$mount=function(t,e){if((t=t&&Qn(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r){if("string"==typeof r)"#"===r.charAt(0)&&(r=ls(r));else{if(!r.nodeType)return this;r=r.innerHTML}}else t&&(r=function(t){if(t.outerHTML)return t.outerHTML;{var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}}(t));if(r){var a=os(r,{outputSourceRange:!1,shouldDecodeNewlines:cs,shouldDecodeNewlinesForHref:us,delimiters:n.delimiters,comments:n.comments},this),o=a.render,i=a.staticRenderFns;n.render=o,n.staticRenderFns=i}}return fs.call(this,t,e)},wn.compile=os;t.VueVendorV2=wn})(this.BX=this.BX||{});
 



// file: /bitrix/js/ui/vue/dist/vue.bitrix.bundle.js
(function(e,t,n){"use strict";var i=function(){function e(){babelHelpers.classCallCheck(this,e);this._components={};this._mutations={};this._clones={};this.event=new n.VueVendorV2({})}babelHelpers.createClass(e,[{key:"create",value:function e(t){return new n.VueVendorV2(t)}},{key:"component",value:function e(t,i){this._components[t]=Object.assign({},i);if(typeof this._clones[t]!=="undefined"){this._registerCloneComponent(t)}return n.VueVendorV2.component(t,this._getComponentParamsWithMutation(t,this._mutations[t]))}},{key:"mutateComponent",value:function e(t,n){var i=this;if(typeof this._mutations[t]==="undefined"){this._mutations[t]=[]}this._mutations[t].push(n);if(typeof this._components[t]!=="undefined"){this.component(t,this._components[t])}return function(){i._mutations[t]=i._mutations[t].filter(function(e){return e!==n})}}},{key:"cloneComponent",value:function e(t,n,i){if(typeof this._clones[n]==="undefined"){this._clones[n]={}}this._clones[n][t]={id:t,sourceId:n,mutations:i};if(typeof this._components[n]!=="undefined"){this._registerCloneComponent(n,t)}return true}},{key:"isComponent",value:function e(t){return typeof this._components[t]!=="undefined"}},{key:"extend",value:function e(t){return n.VueVendorV2.extend(t)}},{key:"nextTick",value:function e(t,i){return n.VueVendorV2.nextTick(t,i)}},{key:"set",value:function e(t,i,o){return n.VueVendorV2.set(t,i,o)}},{key:"delete",value:function e(t,i){return n.VueVendorV2.delete(t,i)}},{key:"directive",value:function e(t,i){return n.VueVendorV2.directive(t,i)}},{key:"filter",value:function e(t,i){return n.VueVendorV2.filter(t,i)}},{key:"use",value:function e(t){return n.VueVendorV2.use(t)}},{key:"mixin",value:function e(t){return n.VueVendorV2.mixin(t)}},{key:"observable",value:function e(t){return n.VueVendorV2.observable(t)}},{key:"compile",value:function e(t){return n.VueVendorV2.compile(t)}},{key:"version",value:function e(){return n.VueVendorV2.version}},{key:"getFilteredPhrases",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i={};if(!n&&typeof BX.message!=="undefined"){n=BX.message}for(var o in n){if(!n.hasOwnProperty(o)){continue}if(!o.startsWith(t)){continue}i[o]=n[o]}return Object.freeze(i)}},{key:"_getComponentParamsWithMutation",value:function e(t,n){var i=this;if(typeof this._components[t]==="undefined"){return null}var o=Object.assign({},this._components[t]);if(typeof n==="undefined"){return o}n.forEach(function(e){o=i._applyMutation(i._cloneObjectWithoutDuplicateFunction(o,e),e)});return o}},{key:"_registerCloneComponent",value:function e(t){var n=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o=[];if(i){if(typeof this._clones[t][i]!=="undefined"){o.push(this._clones[t][i])}}else{for(var r in this._clones[t]){if(!this._clones[t].hasOwnProperty(r)){continue}o.push(this._clones[t][r])}}o.forEach(function(e){var t=[];if(typeof n._mutations[e.sourceId]!=="undefined"){t=t.concat(n._mutations[e.sourceId])}t.push(e.mutations);var i=n._getComponentParamsWithMutation(e.sourceId,t);if(!i){return false}n.component(e.id,i)})}},{key:"_cloneObjectWithoutDuplicateFunction",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var o={};for(var r in t){if(!t.hasOwnProperty(r)){continue}if(typeof t[r]==="string"){o[r]=t[r]}else if(Object.prototype.toString.call(t[r])==="[object Array]"){o[r]=[].concat(t[r])}else if(babelHelpers.typeof(t[r])==="object"){if(t[r]===null){o[r]=null}else if(babelHelpers.typeof(n[r])==="object"){o[r]=this._cloneObjectWithoutDuplicateFunction(t[r],n[r],i+1)}else{o[r]=Object.assign({},t[r])}}else if(typeof t[r]==="function"){if(typeof n[r]!=="function"){o[r]=t[r]}else if(i>1){o["parent"+r[0].toUpperCase()+r.substr(1)]=t[r]}else{if(typeof o["methods"]==="undefined"){o["methods"]={}}o["methods"]["parent"+r[0].toUpperCase()+r.substr(1)]=t[r];if(typeof t["methods"]==="undefined"){t["methods"]={}}t["methods"]["parent"+r[0].toUpperCase()+r.substr(1)]=t[r]}}else if(typeof t[r]!=="undefined"){o[r]=t[r]}}return o}},{key:"_applyMutation",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=Object.assign({},t);for(var o in n){if(!n.hasOwnProperty(o)){continue}if(typeof n[o]==="string"){if(typeof i[o]==="string"){i[o]=n[o].replace("#PARENT_".concat(o.toUpperCase(),"#"),i[o])}else{i[o]=n[o].replace("#PARENT_".concat(o.toUpperCase(),"#"),"")}}else if(Object.prototype.toString.call(n[o])==="[object Array]"){i[o]=[].concat(n[o])}else if(babelHelpers.typeof(n[o])==="object"){if(babelHelpers.typeof(i[o])==="object"){i[o]=this._applyMutation(i[o],n[o])}else{i[o]=n[o]}}else{i[o]=n[o]}}return i}},{key:"testNode",value:function e(t,n){if(!n||babelHelpers.typeof(n)!=="object"){return true}var i,o,r;for(i in n){if(!n.hasOwnProperty(i)){continue}switch(i){case"tag":case"tagName":if(typeof n[i]==="string"){if(t.tagName.toUpperCase()!==n[i].toUpperCase()){return false}}else if(n[i]instanceof RegExp){if(!n[i].test(t.tagName)){return false}}break;case"class":case"className":if(typeof n[i]==="string"){if(!t.classList.contains(n[i].trim())){return false}}else if(n[i]instanceof RegExp){if(typeof t.className!=="string"||!n[i].test(t.className)){return false}}break;case"attr":case"attrs":case"attribute":if(typeof n[i]==="string"){if(!t.getAttribute(n[i])){return false}}else if(n[i]&&Object.prototype.toString.call(n[i])==="[object Array]"){for(o=0,r=n[i].length;o<r;o++){if(n[i][o]&&!t.getAttribute(n[i][o])){return false}}}else{for(o in n[i]){if(!n[i].hasOwnProperty(o)){continue}var s=t.getAttribute(o);if(typeof s!=="string"){return false}if(n[i][o]instanceof RegExp){if(!n[i][o].test(s)){return false}}else if(s!==""+n[i][o]){return false}}}break;case"property":case"props":if(typeof n[i]==="string"){if(!t[n[i]]){return false}}else if(n[i]&&Object.prototype.toString.call(n[i])=="[object Array]"){for(o=0,r=n[i].length;o<r;o++){if(n[i][o]&&!t[n[i][o]]){return false}}}else{for(o in n[i]){if(!n[i].hasOwnProperty(o)){continue}if(typeof n[i][o]==="string"){if(t[o]!=n[i][o]){return false}}else if(n[i][o]instanceof RegExp){if(typeof t[o]!=="string"||!n[i][o].test(t[o])){return false}}}}break}}return true}}]);return e}();var o=new i;e.VueVendor=n.VueVendorV2;e.Vue=o})(this.BX=this.BX||{},window,BX);
 



// file: /bitrix/js/pull/protobuf/protobuf.js
(function(global,undefined){"use strict";(function e(t,r,i){function n(e){var i=r[e];if(!i)t[e][0].call(i=r[e]={exports:{}},n,i,i.exports);return i.exports}var s=global.protobuf=n(i[0])})({1:[function(e,t,r){"use strict";t.exports=i;function i(e,t){var r=new Array(arguments.length-1),i=0,n=2,s=true;while(n<arguments.length)r[i++]=arguments[n++];return new Promise(function n(o,f){r[i]=function e(t){if(s){s=false;if(t)f(t);else{var r=new Array(arguments.length-1),i=0;while(i<r.length)r[i++]=arguments[i];o.apply(null,r)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;f(e)}}})}},{}],2:[function(e,t,r){"use strict";var i=r;i.length=function e(t){var r=t.length;if(!r)return 0;var i=0;while(--r%4>1&&t.charAt(r)==="=")++i;return Math.ceil(t.length*3)/4-i};var n=new Array(64);var s=new Array(123);for(var o=0;o<64;)s[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;i.encode=function e(t,r,i){var s=null,o=[];var f=0,a=0,u;while(r<i){var l=t[r++];switch(a){case 0:o[f++]=n[l>>2];u=(l&3)<<4;a=1;break;case 1:o[f++]=n[u|l>>4];u=(l&15)<<2;a=2;break;case 2:o[f++]=n[u|l>>6];o[f++]=n[l&63];a=0;break}if(f>8191){(s||(s=[])).push(String.fromCharCode.apply(String,o));f=0}}if(a){o[f++]=n[u];o[f++]=61;if(a===1)o[f++]=61}if(s){if(f)s.push(String.fromCharCode.apply(String,o.slice(0,f)));return s.join("")}return String.fromCharCode.apply(String,o.slice(0,f))};var f="invalid encoding";i.decode=function e(t,r,i){var n=i;var o=0,a;for(var u=0;u<t.length;){var l=t.charCodeAt(u++);if(l===61&&o>1)break;if((l=s[l])===undefined)throw Error(f);switch(o){case 0:a=l;o=1;break;case 1:r[i++]=a<<2|(l&48)>>4;a=l;o=2;break;case 2:r[i++]=(a&15)<<4|(l&60)>>2;a=l;o=3;break;case 3:r[i++]=(a&3)<<6|l;o=0;break}}if(o===1)throw Error(f);return i-n};i.test=function e(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},{}],3:[function(e,t,r){"use strict";t.exports=i;function i(e,t){if(typeof e==="string"){t=e;e=undefined}var r=[];function n(e){if(typeof e!=="string"){var t=s();if(i.verbose)console.log("codegen: "+t);t="return "+t;if(e){var o=Object.keys(e),f=new Array(o.length+1),a=new Array(o.length),u=0;while(u<o.length){f[u]=o[u];a[u]=e[o[u++]]}f[u]=t;return Function.apply(null,f).apply(null,a)}return Function(t)()}var l=new Array(arguments.length-1),c=0;while(c<l.length)l[c]=arguments[++c];c=0;e=e.replace(/%([%dfijs])/g,function e(t,r){var i=l[c++];switch(r){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"});if(c!==l.length)throw Error("parameter count mismatch");r.push(e);return n}function s(i){return"function "+(i||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}n.toString=s;return n}i.verbose=false},{}],4:[function(e,t,r){"use strict";t.exports=i;function i(){this._listeners={}}i.prototype.on=function e(t,r,i){(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:i||this});return this};i.prototype.off=function e(t,r){if(t===undefined)this._listeners={};else{if(r===undefined)this._listeners[t]=[];else{var i=this._listeners[t];for(var n=0;n<i.length;)if(i[n].fn===r)i.splice(n,1);else++n}}return this};i.prototype.emit=function e(t){var r=this._listeners[t];if(r){var i=[],n=1;for(;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}},{}],5:[function(e,t,r){"use strict";t.exports=o;var i=e(1),n=e(7);var s=n("fs");function o(e,t,r){if(typeof t==="function"){r=t;t={}}else if(!t)t={};if(!r)return i(o,this,e,t);if(!t.xhr&&s&&s.readFile)return s.readFile(e,function i(n,s){return n&&typeof XMLHttpRequest!=="undefined"?o.xhr(e,t,r):n?r(n):r(null,t.binary?s:s.toString("utf8"))});return o.xhr(e,t,r)}o.xhr=function e(t,r,i){var n=new XMLHttpRequest;n.onreadystatechange=function e(){if(n.readyState!==4)return undefined;if(n.status!==0&&n.status!==200)return i(Error("status "+n.status));if(r.binary){var t=n.response;if(!t){t=[];for(var s=0;s<n.responseText.length;++s)t.push(n.responseText.charCodeAt(s)&255)}return i(null,typeof Uint8Array!=="undefined"?new Uint8Array(t):t)}return i(null,n.responseText)};if(r.binary){if("overrideMimeType"in n)n.overrideMimeType("text/plain; charset=x-user-defined");n.responseType="arraybuffer"}n.open("GET",t);n.send()}},{1:1,7:7}],6:[function(e,t,r){"use strict";t.exports=i(i);function i(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=r[3]===128;function n(e,i,n){t[0]=e;i[n]=r[0];i[n+1]=r[1];i[n+2]=r[2];i[n+3]=r[3]}function s(e,i,n){t[0]=e;i[n]=r[3];i[n+1]=r[2];i[n+2]=r[1];i[n+3]=r[0]}e.writeFloatLE=i?n:s;e.writeFloatBE=i?s:n;function o(e,i){r[0]=e[i];r[1]=e[i+1];r[2]=e[i+2];r[3]=e[i+3];return t[0]}function f(e,i){r[3]=e[i];r[2]=e[i+1];r[1]=e[i+2];r[0]=e[i+3];return t[0]}e.readFloatLE=i?o:f;e.readFloatBE=i?f:o})();else(function(){function t(e,t,r,i){var n=t<0?1:0;if(n)t=-t;if(t===0)e(1/t>0?0:2147483648,r,i);else if(isNaN(t))e(2143289344,r,i);else if(t>3.4028234663852886e38)e((n<<31|2139095040)>>>0,r,i);else if(t<1.1754943508222875e-38)e((n<<31|Math.round(t/1.401298464324817e-45))>>>0,r,i);else{var s=Math.floor(Math.log(t)/Math.LN2),o=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((n<<31|s+127<<23|o)>>>0,r,i)}}e.writeFloatLE=t.bind(null,n);e.writeFloatBE=t.bind(null,s);function r(e,t,r){var i=e(t,r),n=(i>>31)*2+1,s=i>>>23&255,o=i&8388607;return s===255?o?NaN:n*Infinity:s===0?n*1.401298464324817e-45*o:n*Math.pow(2,s-150)*(o+8388608)}e.readFloatLE=r.bind(null,o);e.readFloatBE=r.bind(null,f)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=r[7]===128;function n(e,i,n){t[0]=e;i[n]=r[0];i[n+1]=r[1];i[n+2]=r[2];i[n+3]=r[3];i[n+4]=r[4];i[n+5]=r[5];i[n+6]=r[6];i[n+7]=r[7]}function s(e,i,n){t[0]=e;i[n]=r[7];i[n+1]=r[6];i[n+2]=r[5];i[n+3]=r[4];i[n+4]=r[3];i[n+5]=r[2];i[n+6]=r[1];i[n+7]=r[0]}e.writeDoubleLE=i?n:s;e.writeDoubleBE=i?s:n;function o(e,i){r[0]=e[i];r[1]=e[i+1];r[2]=e[i+2];r[3]=e[i+3];r[4]=e[i+4];r[5]=e[i+5];r[6]=e[i+6];r[7]=e[i+7];return t[0]}function f(e,i){r[7]=e[i];r[6]=e[i+1];r[5]=e[i+2];r[4]=e[i+3];r[3]=e[i+4];r[2]=e[i+5];r[1]=e[i+6];r[0]=e[i+7];return t[0]}e.readDoubleLE=i?o:f;e.readDoubleBE=i?f:o})();else(function(){function t(e,t,r,i,n,s){var o=i<0?1:0;if(o)i=-i;if(i===0){e(0,n,s+t);e(1/i>0?0:2147483648,n,s+r)}else if(isNaN(i)){e(0,n,s+t);e(2146959360,n,s+r)}else if(i>1.7976931348623157e308){e(0,n,s+t);e((o<<31|2146435072)>>>0,n,s+r)}else{var f;if(i<2.2250738585072014e-308){f=i/5e-324;e(f>>>0,n,s+t);e((o<<31|f/4294967296)>>>0,n,s+r)}else{var a=Math.floor(Math.log(i)/Math.LN2);if(a===1024)a=1023;f=i*Math.pow(2,-a);e(f*4503599627370496>>>0,n,s+t);e((o<<31|a+1023<<20|f*1048576&1048575)>>>0,n,s+r)}}}e.writeDoubleLE=t.bind(null,n,0,4);e.writeDoubleBE=t.bind(null,s,4,0);function r(e,t,r,i,n){var s=e(i,n+t),o=e(i,n+r);var f=(o>>31)*2+1,a=o>>>20&2047,u=4294967296*(o&1048575)+s;return a===2047?u?NaN:f*Infinity:a===0?f*5e-324*u:f*Math.pow(2,a-1075)*(u+4503599627370496)}e.readDoubleLE=r.bind(null,o,0,4);e.readDoubleBE=r.bind(null,f,4,0)})();return e}function n(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function s(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function f(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}},{}],7:[function(require,module,exports){"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},{}],8:[function(e,t,r){"use strict";var i=r;var n=i.isAbsolute=function e(t){return/^(?:\/|\w+:)/.test(t)};var s=i.normalize=function e(t){t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=t.split("/"),i=n(t),s="";if(i)s=r.shift()+"/";for(var o=0;o<r.length;){if(r[o]===".."){if(o>0&&r[o-1]!=="..")r.splice(--o,2);else if(i)r.splice(o,1);else++o}else if(r[o]===".")r.splice(o,1);else++o}return s+r.join("/")};i.resolve=function e(t,r,i){if(!i)r=s(r);if(n(r))return r;if(!i)t=s(t);return(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?s(t+"/"+r):r}},{}],9:[function(e,t,r){"use strict";t.exports=i;function i(e,t,r){var i=r||8192;var n=i>>>1;var s=null;var o=i;return function r(f){if(f<1||f>n)return e(f);if(o+f>i){s=e(i);o=0}var a=t.call(s,o,o+=f);if(o&7)o=(o|7)+1;return a}}},{}],10:[function(e,t,r){"use strict";var i=r;i.length=function e(t){var r=0,i=0;for(var n=0;n<t.length;++n){i=t.charCodeAt(n);if(i<128)r+=1;else if(i<2048)r+=2;else if((i&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320){++n;r+=4}else r+=3}return r};i.read=function e(t,r,i){var n=i-r;if(n<1)return"";var s=null,o=[],f=0,a;while(r<i){a=t[r++];if(a<128)o[f++]=a;else if(a>191&&a<224)o[f++]=(a&31)<<6|t[r++]&63;else if(a>239&&a<365){a=((a&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536;o[f++]=55296+(a>>10);o[f++]=56320+(a&1023)}else o[f++]=(a&15)<<12|(t[r++]&63)<<6|t[r++]&63;if(f>8191){(s||(s=[])).push(String.fromCharCode.apply(String,o));f=0}}if(s){if(f)s.push(String.fromCharCode.apply(String,o.slice(0,f)));return s.join("")}return String.fromCharCode.apply(String,o.slice(0,f))};i.write=function e(t,r,i){var n=i,s,o;for(var f=0;f<t.length;++f){s=t.charCodeAt(f);if(s<128){r[i++]=s}else if(s<2048){r[i++]=s>>6|192;r[i++]=s&63|128}else if((s&64512)===55296&&((o=t.charCodeAt(f+1))&64512)===56320){s=65536+((s&1023)<<10)+(o&1023);++f;r[i++]=s>>18|240;r[i++]=s>>12&63|128;r[i++]=s>>6&63|128;r[i++]=s&63|128}else{r[i++]=s>>12|224;r[i++]=s>>6&63|128;r[i++]=s&63|128}}return i-n}},{}],11:[function(e,t,r){"use strict";t.exports=n;var i=/\/|\./;function n(e,t){if(!i.test(e)){e="google/protobuf/"+e+".proto";t={nested:{google:{nested:{protobuf:{nested:t}}}}}}n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var s;n("duration",{Duration:s={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});n("timestamp",{Timestamp:s});n("empty",{Empty:{fields:{}}});n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});n.get=function e(t){return n[t]||null}},{}],12:[function(e,t,r){"use strict";var i=r;var n=e(15),s=e(37);function o(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(d%s){",i);for(var s=t.resolvedType.values,o=Object.keys(s),f=0;f<o.length;++f){if(t.repeated&&s[o[f]]===t.typeDefault)e("default:");e("case%j:",o[f])("case %i:",s[o[f]])("m%s=%j",i,s[o[f]])("break")}e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,r,i)}else{var a=false;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":a=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,a)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,a?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i);break}}return e}i.fromObject=function e(t){var r=t.fieldsArray;var i=s.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return i("return new this.ctor");i("var m=new this.ctor");for(var f=0;f<r.length;++f){var a=r[f].resolve(),u=s.safeProp(a.name);if(a.map){i("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u);o(i,a,f,u+"[ks[i]]")("}")("}")}else if(a.repeated){i("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u);o(i,a,f,u+"[i]")("}")("}")}else{if(!(a.resolvedType instanceof n))i("if(d%s!=null){",u);o(i,a,f,u);if(!(a.resolvedType instanceof n))i("}")}}return i("return m")};function f(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n)e("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,r,i,i);else e("d%s=types[%i].toObject(m%s,o)",i,r,i)}else{var s=false;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":s=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,s?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i);break}}return e}i.toObject=function e(t){var r=t.fieldsArray.slice().sort(s.compareFieldsById);if(!r.length)return s.codegen()("return {}");var i=s.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}");var o=[],a=[],u=[],l=0;for(;l<r.length;++l)if(!r[l].partOf)(r[l].resolve().repeated?o:r[l].map?a:u).push(r[l]);if(o.length){i("if(o.arrays||o.defaults){");for(l=0;l<o.length;++l)i("d%s=[]",s.safeProp(o[l].name));i("}")}if(a.length){i("if(o.objects||o.defaults){");for(l=0;l<a.length;++l)i("d%s={}",s.safeProp(a[l].name));i("}")}if(u.length){i("if(o.defaults){");for(l=0;l<u.length;++l){var c=u[l],p=s.safeProp(c.name);if(c.resolvedType instanceof n)i("d%s=o.enums===String?%j:%j",p,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",p)("}else")("d%s=o.longs===String?%j:%i",p,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes)i("d%s=o.bytes===String?%j:%s",p,String.fromCharCode.apply(String,c.typeDefault),"["+Array.prototype.slice.call(c.typeDefault).join(",")+"]");else i("d%s=%j",p,c.typeDefault)}i("}")}var h=false;for(l=0;l<r.length;++l){var c=r[l],d=t._fieldsArray.indexOf(c),p=s.safeProp(c.name);if(c.map){if(!h){h=true;i("var ks2")}i("if(m%s&&(ks2=Object.keys(m%s)).length){",p,p)("d%s={}",p)("for(var j=0;j<ks2.length;++j){");f(i,c,d,p+"[ks2[j]]")("}")}else if(c.repeated){i("if(m%s&&m%s.length){",p,p)("d%s=[]",p)("for(var j=0;j<m%s.length;++j){",p);f(i,c,d,p+"[j]")("}")}else{i("if(m%s!=null&&m.hasOwnProperty(%j)){",p,c.name);f(i,c,d,p);if(c.partOf)i("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)}i("}")}return i("return d")}},{15:15,37:37}],13:[function(e,t,r){"use strict";t.exports=f;var i=e(15),n=e(36),s=e(37);function o(e){return"missing required '"+e.name+"'"}function f(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");if(e.group)t("if((t&7)===4)")("break");t("switch(t>>>3){");var r=0;for(;r<e.fieldsArray.length;++r){var f=e._fieldsArray[r].resolve(),a=f.resolvedType instanceof i?"int32":f.type,u="m"+s.safeProp(f.name);t("case %i:",f.id);if(f.map){t("r.skip().pos++")("if(%s===util.emptyObject)",u)("%s={}",u)("k=r.%s()",f.keyType)("r.pos++");if(n.long[f.keyType]!==undefined){if(n.basic[a]===undefined)t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',u,r);else t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',u,a)}else{if(n.basic[a]===undefined)t("%s[k]=types[%i].decode(r,r.uint32())",u,r);else t("%s[k]=r.%s()",u,a)}}else if(f.repeated){t("if(!(%s&&%s.length))",u,u)("%s=[]",u);if(n.packed[a]!==undefined)t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,a)("}else");if(n.basic[a]===undefined)t(f.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r);else t("%s.push(r.%s())",u,a)}else if(n.basic[a]===undefined)t(f.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r);else t("%s=r.%s()",u,a);t("break")}t("default:")("r.skipType(t&7)")("break")("}")("}");for(r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];if(l.required)t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",o(l))}return t("return m")}},{15:15,36:36,37:37}],14:[function(e,t,r){"use strict";t.exports=f;var i=e(15),n=e(36),s=e(37);function o(e,t,r,i){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,i,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,i,(t.id<<3|2)>>>0)}function f(e){var t=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()");var r,f;var a=e.fieldsArray.slice().sort(s.compareFieldsById);for(var r=0;r<a.length;++r){var u=a[r].resolve(),l=e._fieldsArray.indexOf(u),c=u.resolvedType instanceof i?"int32":u.type,p=n.basic[c];f="m"+s.safeProp(u.name);if(u.map){t("if(%s!=null&&m.hasOwnProperty(%j)){",f,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",f)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|n.mapKey[u.keyType],u.keyType);if(p===undefined)t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,f);else t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,c,f);t("}")("}")}else if(u.repeated){t("if(%s!=null&&%s.length){",f,f);if(u.packed&&n.packed[c]!==undefined){t("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",f)("w.%s(%s[i])",c,f)("w.ldelim()")}else{t("for(var i=0;i<%s.length;++i)",f);if(p===undefined)o(t,u,l,f+"[i]");else t("w.uint32(%i).%s(%s[i])",(u.id<<3|p)>>>0,c,f)}t("}")}else{if(u.optional)t("if(%s!=null&&m.hasOwnProperty(%j))",f,u.name);if(p===undefined)o(t,u,l,f);else t("w.uint32(%i).%s(%s)",(u.id<<3|p)>>>0,c,f)}}return t("return w")}},{15:15,36:36,37:37}],15:[function(e,t,r){"use strict";t.exports=o;var i=e(24);((o.prototype=Object.create(i.prototype)).constructor=o).className="Enum";var n=e(23),s=e(37);function o(e,t,r,n,s){i.call(this,e,r);if(t&&typeof t!=="object")throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=n;this.comments=s||{};this.reserved=undefined;if(t)for(var o=Object.keys(t),f=0;f<o.length;++f)if(typeof t[o[f]]==="number")this.valuesById[this.values[o[f]]=t[o[f]]]=o[f]}o.fromJSON=function e(t,r){var i=new o(t,r.values,r.options,r.comment,r.comments);i.reserved=r.reserved;return i};o.prototype.toJSON=function e(t){var r=t?Boolean(t.keepComments):false;return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",r?this.comment:undefined,"comments",r?this.comments:undefined])};o.prototype.add=function e(t,r,i){if(!s.isString(t))throw TypeError("name must be a string");if(!s.isInteger(r))throw TypeError("id must be an integer");if(this.values[t]!==undefined)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[r]!==undefined){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[t]=r}else this.valuesById[this.values[t]=r]=t;this.comments[t]=i||null;return this};o.prototype.remove=function e(t){if(!s.isString(t))throw TypeError("name must be a string");var r=this.values[t];if(r==null)throw Error("name '"+t+"' does not exist in "+this);delete this.valuesById[r];delete this.values[t];delete this.comments[t];return this};o.prototype.isReservedId=function e(t){return n.isReservedId(this.reserved,t)};o.prototype.isReservedName=function e(t){return n.isReservedName(this.reserved,t)}},{23:23,24:24,37:37}],16:[function(e,t,r){"use strict";t.exports=u;var i=e(24);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var n=e(15),s=e(36),o=e(37);var f;var a=/^required|optional|repeated$/;u.fromJSON=function e(t,r){return new u(t,r.id,r.type,r.rule,r.extend,r.options,r.comment)};function u(e,t,r,n,f,u,l){if(o.isObject(n)){l=f;u=n;n=f=undefined}else if(o.isObject(f)){l=u;u=f;f=undefined}i.call(this,e,u);if(!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(n!==undefined&&!a.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(f!==undefined&&!o.isString(f))throw TypeError("extend must be a string");this.rule=n&&n!=="optional"?n:undefined;this.type=r;this.id=t;this.extend=f||undefined;this.required=n==="required";this.optional=!this.required;this.repeated=n==="repeated";this.map=false;this.message=null;this.partOf=null;this.typeDefault=null;this.defaultValue=null;this.long=o.Long?s.long[r]!==undefined:false;this.bytes=r==="bytes";this.resolvedType=null;this.extensionField=null;this.declaringField=null;this._packed=null;this.comment=l}Object.defineProperty(u.prototype,"packed",{get:function(){if(this._packed===null)this._packed=this.getOption("packed")!==false;return this._packed}});u.prototype.setOption=function e(t,r,n){if(t==="packed")this._packed=null;return i.prototype.setOption.call(this,t,r,n)};u.prototype.toJSON=function e(t){var r=t?Boolean(t.keepComments):false;return o.toObject(["rule",this.rule!=="optional"&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:undefined])};u.prototype.resolve=function e(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type);if(this.resolvedType instanceof f)this.typeDefault=null;else this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]}if(this.options&&this.options["default"]!=null){this.typeDefault=this.options["default"];if(this.resolvedType instanceof n&&typeof this.typeDefault==="string")this.typeDefault=this.resolvedType.values[this.typeDefault]}if(this.options){if(this.options.packed===true||this.options.packed!==undefined&&this.resolvedType&&!(this.resolvedType instanceof n))delete this.options.packed;if(!Object.keys(this.options).length)this.options=undefined}if(this.long){this.typeDefault=o.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u");if(Object.freeze)Object.freeze(this.typeDefault)}else if(this.bytes&&typeof this.typeDefault==="string"){var t;if(o.base64.test(this.typeDefault))o.base64.decode(this.typeDefault,t=o.newBuffer(o.base64.length(this.typeDefault)),0);else o.utf8.write(this.typeDefault,t=o.newBuffer(o.utf8.length(this.typeDefault)),0);this.typeDefault=t}if(this.map)this.defaultValue=o.emptyObject;else if(this.repeated)this.defaultValue=o.emptyArray;else this.defaultValue=this.typeDefault;if(this.parent instanceof f)this.parent.ctor.prototype[this.name]=this.defaultValue;return i.prototype.resolve.call(this)};u.d=function e(t,r,i,n){if(typeof r==="function")r=o.decorateType(r).name;else if(r&&typeof r==="object")r=o.decorateEnum(r).name;return function e(s,f){o.decorateType(s.constructor).add(new u(f,t,r,i,{default:n}))}};u._configure=function e(t){f=t}},{15:15,24:24,36:36,37:37}],17:[function(e,t,r){"use strict";var i=t.exports=e(18);i.build="light";function n(e,t,r){if(typeof t==="function"){r=t;t=new i.Root}else if(!t)t=new i.Root;return t.load(e,r)}i.load=n;function s(e,t){if(!t)t=new i.Root;return t.loadSync(e)}i.loadSync=s;i.encoder=e(14);i.decoder=e(13);i.verifier=e(40);i.converter=e(12);i.ReflectionObject=e(24);i.Namespace=e(23);i.Root=e(29);i.Enum=e(15);i.Type=e(35);i.Field=e(16);i.OneOf=e(25);i.MapField=e(20);i.Service=e(33);i.Method=e(22);i.Message=e(21);i.wrappers=e(41);i.types=e(36);i.util=e(37);i.ReflectionObject._configure(i.Root);i.Namespace._configure(i.Type,i.Service);i.Root._configure(i.Type);i.Field._configure(i.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(e,t,r){"use strict";var i=r;i.build="minimal";i.Writer=e(42);i.BufferWriter=e(43);i.Reader=e(27);i.BufferReader=e(28);i.util=e(39);i.rpc=e(31);i.roots=e(30);i.configure=n;function n(){i.Reader._configure(i.BufferReader);i.util._configure()}i.Writer._configure(i.BufferWriter);n()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(e,t,r){"use strict";var i=t.exports=e(17);i.build="full";i.tokenize=e(34);i.parse=e(26);i.common=e(11);i.Root._configure(i.Type,i.parse,i.common)},{11:11,17:17,26:26,34:34}],20:[function(e,t,r){"use strict";t.exports=o;var i=e(16);((o.prototype=Object.create(i.prototype)).constructor=o).className="MapField";var n=e(36),s=e(37);function o(e,t,r,n,o,f){i.call(this,e,t,n,undefined,undefined,o,f);if(!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r;this.resolvedKeyType=null;this.map=true}o.fromJSON=function e(t,r){return new o(t,r.id,r.keyType,r.type,r.options,r.comment)};o.prototype.toJSON=function e(t){var r=t?Boolean(t.keepComments):false;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:undefined])};o.prototype.resolve=function e(){if(this.resolved)return this;if(n.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)};o.d=function e(t,r,i){if(typeof i==="function")i=s.decorateType(i).name;else if(i&&typeof i==="object")i=s.decorateEnum(i).name;return function e(n,f){s.decorateType(n.constructor).add(new o(f,t,r,i))}}},{16:16,36:36,37:37}],21:[function(e,t,r){"use strict";t.exports=n;var i=e(39);function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}n.create=function e(t){return this.$type.create(t)};n.encode=function e(t,r){return this.$type.encode(t,r)};n.encodeDelimited=function e(t,r){return this.$type.encodeDelimited(t,r)};n.decode=function e(t){return this.$type.decode(t)};n.decodeDelimited=function e(t){return this.$type.decodeDelimited(t)};n.verify=function e(t){return this.$type.verify(t)};n.fromObject=function e(t){return this.$type.fromObject(t)};n.toObject=function e(t,r){return this.$type.toObject(t,r)};n.prototype.toJSON=function e(){return this.$type.toObject(this,i.toJSONOptions)}},{39:39}],22:[function(e,t,r){"use strict";t.exports=s;var i=e(24);((s.prototype=Object.create(i.prototype)).constructor=s).className="Method";var n=e(37);function s(e,t,r,s,o,f,a,u){if(n.isObject(o)){a=o;o=f=undefined}else if(n.isObject(f)){a=f;f=undefined}if(!(t===undefined||n.isString(t)))throw TypeError("type must be a string");if(!n.isString(r))throw TypeError("requestType must be a string");if(!n.isString(s))throw TypeError("responseType must be a string");i.call(this,e,a);this.type=t||"rpc";this.requestType=r;this.requestStream=o?true:undefined;this.responseType=s;this.responseStream=f?true:undefined;this.resolvedRequestType=null;this.resolvedResponseType=null;this.comment=u}s.fromJSON=function e(t,r){return new s(t,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment)};s.prototype.toJSON=function e(t){var r=t?Boolean(t.keepComments):false;return n.toObject(["type",this.type!=="rpc"&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:undefined])};s.prototype.resolve=function e(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return i.prototype.resolve.call(this)}},{24:24,37:37}],23:[function(e,t,r){"use strict";t.exports=l;var i=e(24);((l.prototype=Object.create(i.prototype)).constructor=l).className="Namespace";var n=e(15),s=e(16),o=e(37);var f,a;l.fromJSON=function e(t,r){return new l(t,r.options).addJSON(r.nested)};function u(e,t){if(!(e&&e.length))return undefined;var r={};for(var i=0;i<e.length;++i)r[e[i].name]=e[i].toJSON(t);return r}l.arrayToJSON=u;l.isReservedId=function e(t,r){if(t)for(var i=0;i<t.length;++i)if(typeof t[i]!=="string"&&t[i][0]<=r&&t[i][1]>=r)return true;return false};l.isReservedName=function e(t,r){if(t)for(var i=0;i<t.length;++i)if(t[i]===r)return true;return false};function l(e,t){i.call(this,e,t);this.nested=undefined;this._nestedArray=null}function c(e){e._nestedArray=null;return e}Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=o.toArray(this.nested))}});l.prototype.toJSON=function e(t){return o.toObject(["options",this.options,"nested",u(this.nestedArray,t)])};l.prototype.addJSON=function e(t){var r=this;if(t){for(var i=Object.keys(t),o=0,u;o<i.length;++o){u=t[i[o]];r.add((u.fields!==undefined?f.fromJSON:u.values!==undefined?n.fromJSON:u.methods!==undefined?a.fromJSON:u.id!==undefined?s.fromJSON:l.fromJSON)(i[o],u))}}return this};l.prototype.get=function e(t){return this.nested&&this.nested[t]||null};l.prototype.getEnum=function e(t){if(this.nested&&this.nested[t]instanceof n)return this.nested[t].values;throw Error("no such enum: "+t)};l.prototype.add=function e(t){if(!(t instanceof s&&t.extend!==undefined||t instanceof f||t instanceof n||t instanceof a||t instanceof l))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var r=this.get(t.name);if(r){if(r instanceof l&&t instanceof l&&!(r instanceof f||r instanceof a)){var i=r.nestedArray;for(var o=0;o<i.length;++o)t.add(i[o]);this.remove(r);if(!this.nested)this.nested={};t.setOptions(r.options,true)}else throw Error("duplicate name '"+t.name+"' in "+this)}}this.nested[t.name]=t;t.onAdd(this);return c(this)};l.prototype.remove=function e(t){if(!(t instanceof i))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);delete this.nested[t.name];if(!Object.keys(this.nested).length)this.nested=undefined;t.onRemove(this);return c(this)};l.prototype.define=function e(t,r){if(o.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&t[0]==="")throw Error("path must be relative");var i=this;while(t.length>0){var n=t.shift();if(i.nested&&i.nested[n]){i=i.nested[n];if(!(i instanceof l))throw Error("path conflicts with non-namespace objects")}else i.add(i=new l(n))}if(r)i.addJSON(r);return i};l.prototype.resolveAll=function e(){var t=this.nestedArray,r=0;while(r<t.length)if(t[r]instanceof l)t[r++].resolveAll();else t[r++].resolve();return this.resolve()};l.prototype.lookup=function e(t,r,i){if(typeof r==="boolean"){i=r;r=undefined}else if(r&&!Array.isArray(r))r=[r];if(o.isString(t)&&t.length){if(t===".")return this.root;t=t.split(".")}else if(!t.length)return this;if(t[0]==="")return this.root.lookup(t.slice(1),r);var n=this.get(t[0]);if(n){if(t.length===1){if(!r||r.indexOf(n.constructor)>-1)return n}else if(n instanceof l&&(n=n.lookup(t.slice(1),r,true)))return n}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof l&&(n=this._nestedArray[s].lookup(t,r,true)))return n;if(this.parent===null||i)return null;return this.parent.lookup(t,r)};l.prototype.lookupType=function e(t){var r=this.lookup(t,[f]);if(!r)throw Error("no such type: "+t);return r};l.prototype.lookupEnum=function e(t){var r=this.lookup(t,[n]);if(!r)throw Error("no such Enum '"+t+"' in "+this);return r};l.prototype.lookupTypeOrEnum=function e(t){var r=this.lookup(t,[f,n]);if(!r)throw Error("no such Type or Enum '"+t+"' in "+this);return r};l.prototype.lookupService=function e(t){var r=this.lookup(t,[a]);if(!r)throw Error("no such Service '"+t+"' in "+this);return r};l._configure=function(e,t){f=e;a=t}},{15:15,16:16,24:24,37:37}],24:[function(e,t,r){"use strict";t.exports=s;s.className="ReflectionObject";var i=e(37);var n;function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t;this.name=e;this.parent=null;this.resolved=false;this.comment=null;this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){var e=this;while(e.parent!==null)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t){e.unshift(t.name);t=t.parent}return e.join(".")}}});s.prototype.toJSON=function e(){throw Error()};s.prototype.onAdd=function e(t){if(this.parent&&this.parent!==t)this.parent.remove(this);this.parent=t;this.resolved=false;var r=t.root;if(r instanceof n)r._handleAdd(this)};s.prototype.onRemove=function e(t){var r=t.root;if(r instanceof n)r._handleRemove(this);this.parent=null;this.resolved=false};s.prototype.resolve=function e(){if(this.resolved)return this;if(this.root instanceof n)this.resolved=true;return this};s.prototype.getOption=function e(t){if(this.options)return this.options[t];return undefined};s.prototype.setOption=function e(t,r,i){if(!i||!this.options||this.options[t]===undefined)(this.options||(this.options={}))[t]=r;return this};s.prototype.setOptions=function e(t,r){if(t)for(var i=Object.keys(t),n=0;n<i.length;++n)this.setOption(i[n],t[i[n]],r);return this};s.prototype.toString=function e(){var t=this.constructor.className,r=this.fullName;if(r.length)return t+" "+r;return t};s._configure=function(e){n=e}},{37:37}],25:[function(e,t,r){"use strict";t.exports=o;var i=e(24);((o.prototype=Object.create(i.prototype)).constructor=o).className="OneOf";var n=e(16),s=e(37);function o(e,t,r,n){if(!Array.isArray(t)){r=t;t=undefined}i.call(this,e,r);if(!(t===undefined||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[];this.fieldsArray=[];this.comment=n}o.fromJSON=function e(t,r){return new o(t,r.oneof,r.options,r.comment)};o.prototype.toJSON=function e(t){var r=t?Boolean(t.keepComments):false;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:undefined])};function f(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)if(!e.fieldsArray[t].parent)e.parent.add(e.fieldsArray[t])}o.prototype.add=function e(t){if(!(t instanceof n))throw TypeError("field must be a Field");if(t.parent&&t.parent!==this.parent)t.parent.remove(t);this.oneof.push(t.name);this.fieldsArray.push(t);t.partOf=this;f(this);return this};o.prototype.remove=function e(t){if(!(t instanceof n))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(t);if(r<0)throw Error(t+" is not a member of "+this);this.fieldsArray.splice(r,1);r=this.oneof.indexOf(t.name);if(r>-1)this.oneof.splice(r,1);t.partOf=null;return this};o.prototype.onAdd=function e(t){i.prototype.onAdd.call(this,t);var r=this;for(var n=0;n<this.oneof.length;++n){var s=t.get(this.oneof[n]);if(s&&!s.partOf){s.partOf=r;r.fieldsArray.push(s)}}f(this)};o.prototype.onRemove=function e(t){for(var r=0,n;r<this.fieldsArray.length;++r)if((n=this.fieldsArray[r]).parent)n.parent.remove(n);i.prototype.onRemove.call(this,t)};o.d=function e(){var t=new Array(arguments.length),r=0;while(r<arguments.length)t[r]=arguments[r++];return function e(r,i){s.decorateType(r.constructor).add(new o(i,t));Object.defineProperty(r,i,{get:s.oneOfGetter(t),set:s.oneOfSetter(t)})}}},{16:16,24:24,37:37}],26:[function(e,t,r){"use strict";t.exports=A;A.filename=null;A.defaults={keepCase:false};var i=e(34),n=e(29),s=e(35),o=e(16),f=e(20),a=e(25),u=e(15),l=e(33),c=e(22),p=e(36),h=e(37);var d=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,v=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,k=/^[a-zA-Z_][a-zA-Z_0-9]*$/,O=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,j=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function A(e,t,r){if(!(t instanceof n)){r=t;t=new n}if(!r)r=A.defaults;var x=i(e,r.alternateCommentMode||false),S=x.next,_=x.push,T=x.peek,N=x.skip,E=x.cmnt;var B=true,I,R,D,F,L=false;var J=t;var $=r.keepCase?function(e){return e}:h.camelCase;function P(e,t,r){var i=A.filename;if(!r)A.filename=null;return Error("illegal "+(t||"token")+" '"+e+"' ("+(i?i+", ":"")+"line "+x.line+")")}function C(){var e=[],t;do{if((t=S())!=='"'&&t!=="'")throw P(t);e.push(S());N(t);t=T()}while(t==='"'||t==="'");return e.join("")}function q(e){var t=S();switch(t){case"'":case'"':_(t);return C();case"true":case"TRUE":return true;case"false":case"FALSE":return false}try{return V(t,true)}catch(r){if(e&&O.test(t))return t;throw P(t,"value")}}function z(e,t){var r,i;do{if(t&&((r=T())==='"'||r==="'"))e.push(C());else e.push([i=M(S()),N("to",true)?M(S()):i])}while(N(",",true));N(";")}function V(e,t){var r=1;if(e.charAt(0)==="-"){r=-1;e=e.substring(1)}switch(e){case"inf":case"INF":case"Inf":return r*Infinity;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(d.test(e))return r*parseInt(e,10);if(m.test(e))return r*parseInt(e,16);if(g.test(e))return r*parseInt(e,8);if(w.test(e))return r*parseFloat(e);throw P(e,"number",t)}function M(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&e.charAt(0)==="-")throw P(e,"id");if(y.test(e))return parseInt(e,10);if(v.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw P(e,"id")}function U(){if(I!==undefined)throw P("package");I=S();if(!O.test(I))throw P(I,"name");J=J.define(I);N(";")}function H(){var e=T();var t;switch(e){case"weak":t=D||(D=[]);S();break;case"public":S();default:t=R||(R=[]);break}e=C();N(";");t.push(e)}function Z(){N("=");F=C();L=F==="proto3";if(!L&&F!=="proto2")throw P(F,"syntax");N(";")}function W(e,t){switch(t){case"option":ie(e,t);N(";");return true;case"message":G(e,t);return true;case"enum":te(e,t);return true;case"service":fe(e,t);return true;case"extend":ue(e,t);return true}return false}function K(e,t,r){var i=x.line;if(e){e.comment=E();e.filename=A.filename}if(N("{",true)){var n;while((n=S())!=="}")t(n);N(";",true)}else{if(r)r();N(";");if(e&&typeof e.comment!=="string")e.comment=E(i)}}function G(e,t){if(!k.test(t=S()))throw P(t,"type name");var r=new s(t);K(r,function e(t){if(W(r,t))return;switch(t){case"map":Y(r,t);break;case"required":case"optional":case"repeated":X(r,t);break;case"oneof":ee(r,t);break;case"extensions":z(r.extensions||(r.extensions=[]));break;case"reserved":z(r.reserved||(r.reserved=[]),true);break;default:if(!L||!O.test(t))throw P(t);_(t);X(r,"optional");break}});e.add(r)}function X(e,t,r){var i=S();if(i==="group"){Q(e,t);return}if(!O.test(i))throw P(i,"type");var n=S();if(!k.test(n))throw P(n,"name");n=$(n);N("=");var s=new o(n,M(S()),i,t,r);K(s,function e(t){if(t==="option"){ie(s,t);N(";")}else throw P(t)},function e(){oe(s)});e.add(s);if(!L&&s.repeated&&(p.packed[i]!==undefined||p.basic[i]===undefined))s.setOption("packed",false,true)}function Q(e,t){var r=S();if(!k.test(r))throw P(r,"name");var i=h.lcFirst(r);if(r===i)r=h.ucFirst(r);N("=");var n=M(S());var f=new s(r);f.group=true;var a=new o(i,n,r,t);a.filename=A.filename;K(f,function e(t){switch(t){case"option":ie(f,t);N(";");break;case"required":case"optional":case"repeated":X(f,t);break;default:throw P(t)}});e.add(f).add(a)}function Y(e){N("<");var t=S();if(p.mapKey[t]===undefined)throw P(t,"type");N(",");var r=S();if(!O.test(r))throw P(r,"type");N(">");var i=S();if(!k.test(i))throw P(i,"name");N("=");var n=new f($(i),M(S()),t,r);K(n,function e(t){if(t==="option"){ie(n,t);N(";")}else throw P(t)},function e(){oe(n)});e.add(n)}function ee(e,t){if(!k.test(t=S()))throw P(t,"name");var r=new a($(t));K(r,function e(t){if(t==="option"){ie(r,t);N(";")}else{_(t);X(r,"optional")}});e.add(r)}function te(e,t){if(!k.test(t=S()))throw P(t,"name");var r=new u(t);K(r,function e(t){switch(t){case"option":ie(r,t);N(";");break;case"reserved":z(r.reserved||(r.reserved=[]),true);break;default:re(r,t)}});e.add(r)}function re(e,t){if(!k.test(t))throw P(t,"name");N("=");var r=M(S(),true),i={};K(i,function e(t){if(t==="option"){ie(i,t);N(";")}else throw P(t)},function e(){oe(i)});e.add(t,r,i.comment)}function ie(e,t){var r=N("(",true);if(!O.test(t=S()))throw P(t,"name");var i=t;if(r){N(")");i="("+i+")";t=T();if(j.test(t)){i+=t;S()}}N("=");ne(e,i)}function ne(e,t){if(N("{",true)){do{if(!k.test(le=S()))throw P(le,"name");if(T()==="{")ne(e,t+"."+le);else{N(":");if(T()==="{")ne(e,t+"."+le);else se(e,t+"."+le,q(true))}}while(!N("}",true))}else se(e,t,q(true))}function se(e,t,r){if(e.setOption)e.setOption(t,r)}function oe(e){if(N("[",true)){do{ie(e,"option")}while(N(",",true));N("]")}return e}function fe(e,t){if(!k.test(t=S()))throw P(t,"service name");var r=new l(t);K(r,function e(t){if(W(r,t))return;if(t==="rpc")ae(r,t);else throw P(t)});e.add(r)}function ae(e,t){var r=t;if(!k.test(t=S()))throw P(t,"name");var i=t,n,s,o,f;N("(");if(N("stream",true))s=true;if(!O.test(t=S()))throw P(t);n=t;N(")");N("returns");N("(");if(N("stream",true))f=true;if(!O.test(t=S()))throw P(t);o=t;N(")");var a=new c(i,r,n,o,s,f);K(a,function e(t){if(t==="option"){ie(a,t);N(";")}else throw P(t)});e.add(a)}function ue(e,t){if(!O.test(t=S()))throw P(t,"reference");var r=t;K(null,function t(i){switch(i){case"required":case"repeated":case"optional":X(e,i,r);break;default:if(!L||!O.test(i))throw P(i);_(i);X(e,"optional",r);break}})}var le;while((le=S())!==null){switch(le){case"package":if(!B)throw P(le);U();break;case"import":if(!B)throw P(le);H();break;case"syntax":if(!B)throw P(le);Z();break;case"option":if(!B)throw P(le);ie(J,le);N(";");break;default:if(W(J,le)){B=false;continue}throw P(le)}}A.filename=null;return{package:I,imports:R,weakImports:D,syntax:F,root:t}}},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(e,t,r){"use strict";t.exports=a;var i=e(39);var n;var s=i.LongBits,o=i.utf8;function f(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function a(e){this.buf=e;this.pos=0;this.len=e.length}var u=typeof Uint8Array!=="undefined"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")};a.create=i.Buffer?function e(t){return(a.create=function e(t){return i.Buffer.isBuffer(t)?new n(t):u(t)})(t)}:u;a.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice;a.prototype.uint32=function e(){var t=4294967295;return function e(){t=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len){this.pos=this.len;throw f(this,10)}return t}}();a.prototype.int32=function e(){return this.uint32()|0};a.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function l(){var e=new s(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw f(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw f(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}a.prototype.bool=function e(){return this.uint32()!==0};function c(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}a.prototype.fixed32=function e(){if(this.pos+4>this.len)throw f(this,4);return c(this.buf,this.pos+=4)};a.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw f(this,4);return c(this.buf,this.pos+=4)|0};function p(){if(this.pos+8>this.len)throw f(this,8);return new s(c(this.buf,this.pos+=4),c(this.buf,this.pos+=4))}a.prototype.float=function e(){if(this.pos+4>this.len)throw f(this,4);var t=i.float.readFloatLE(this.buf,this.pos);this.pos+=4;return t};a.prototype.double=function e(){if(this.pos+8>this.len)throw f(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return t};a.prototype.bytes=function e(){var t=this.uint32(),r=this.pos,i=this.pos+t;if(i>this.len)throw f(this,t);this.pos+=t;if(Array.isArray(this.buf))return this.buf.slice(r,i);return r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};a.prototype.string=function e(){var t=this.bytes();return o.read(t,0,t.length)};a.prototype.skip=function e(t){if(typeof t==="number"){if(this.pos+t>this.len)throw f(this,t);this.pos+=t}else{do{if(this.pos>=this.len)throw f(this)}while(this.buf[this.pos++]&128)}return this};a.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:do{if((e=this.uint32()&7)===4)break;this.skipType(e)}while(true);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};a._configure=function(e){n=e;var t=i.Long?"toLong":"toNumber";i.merge(a.prototype,{int64:function e(){return l.call(this)[t](false)},uint64:function e(){return l.call(this)[t](true)},sint64:function e(){return l.call(this).zzDecode()[t](false)},fixed64:function e(){return p.call(this)[t](true)},sfixed64:function e(){return p.call(this)[t](false)}})}},{39:39}],28:[function(e,t,r){"use strict";t.exports=s;var i=e(27);(s.prototype=Object.create(i.prototype)).constructor=s;var n=e(39);function s(e){i.call(this,e)}if(n.Buffer)s.prototype._slice=n.Buffer.prototype.slice;s.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},{27:27,39:39}],29:[function(e,t,r){"use strict";t.exports=c;var i=e(23);((c.prototype=Object.create(i.prototype)).constructor=c).className="Root";var n=e(16),s=e(15),o=e(25),f=e(37);var a,u,l;function c(e){i.call(this,"",e);this.deferred=[];this.files=[]}c.fromJSON=function e(t,r){if(!r)r=new c;if(t.options)r.setOptions(t.options);return r.addJSON(t.nested)};c.prototype.resolvePath=f.path.resolve;function p(){}c.prototype.load=function e(t,r,i){if(typeof r==="function"){i=r;r=undefined}var n=this;if(!i)return f.asPromise(e,n,t,r);var s=i===p;function o(e,t){if(!i)return;var r=i;i=null;if(s)throw e;r(e,t)}function a(e,t){try{if(f.isString(t)&&t.charAt(0)==="{")t=JSON.parse(t);if(!f.isString(t))n.setOptions(t.options).addJSON(t.nested);else{u.filename=e;var i=u(t,n,r),a,l=0;if(i.imports)for(;l<i.imports.length;++l)if(a=n.resolvePath(e,i.imports[l]))c(a);if(i.weakImports)for(l=0;l<i.weakImports.length;++l)if(a=n.resolvePath(e,i.weakImports[l]))c(a,true)}}catch(e){o(e)}if(!s&&!h)o(null,n)}function c(e,t){var r=e.lastIndexOf("google/protobuf/");if(r>-1){var u=e.substring(r);if(u in l)e=u}if(n.files.indexOf(e)>-1)return;n.files.push(e);if(e in l){if(s)a(e,l[e]);else{++h;setTimeout(function(){--h;a(e,l[e])})}return}if(s){var c;try{c=f.fs.readFileSync(e).toString("utf8")}catch(e){if(!t)o(e);return}a(e,c)}else{++h;f.fetch(e,function(r,s){--h;if(!i)return;if(r){if(!t)o(r);else if(!h)o(null,n);return}a(e,s)})}}var h=0;if(f.isString(t))t=[t];for(var d=0,y;d<t.length;++d)if(y=n.resolvePath("",t[d]))c(y);if(s)return n;if(!h)o(null,n);return undefined};c.prototype.loadSync=function e(t,r){if(!f.isNode)throw Error("not supported");return this.load(t,r,p)};c.prototype.resolveAll=function e(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return i.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function d(e,t){var r=t.parent.lookup(t.extend);if(r){var i=new n(t.fullName,t.id,t.type,t.rule,undefined,t.options);i.declaringField=t;t.extensionField=i;r.add(i);return true}return false}c.prototype._handleAdd=function e(t){if(t instanceof n){if(t.extend!==undefined&&!t.extensionField)if(!d(this,t))this.deferred.push(t)}else if(t instanceof s){if(h.test(t.name))t.parent[t.name]=t.values}else if(!(t instanceof o)){if(t instanceof a)for(var r=0;r<this.deferred.length;)if(d(this,this.deferred[r]))this.deferred.splice(r,1);else++r;for(var i=0;i<t.nestedArray.length;++i)this._handleAdd(t._nestedArray[i]);if(h.test(t.name))t.parent[t.name]=t}};c.prototype._handleRemove=function e(t){if(t instanceof n){if(t.extend!==undefined){if(t.extensionField){t.extensionField.parent.remove(t.extensionField);t.extensionField=null}else{var r=this.deferred.indexOf(t);if(r>-1)this.deferred.splice(r,1)}}}else if(t instanceof s){if(h.test(t.name))delete t.parent[t.name]}else if(t instanceof i){for(var o=0;o<t.nestedArray.length;++o)this._handleRemove(t._nestedArray[o]);if(h.test(t.name))delete t.parent[t.name]}};c._configure=function(e,t,r){a=e;u=t;l=r}},{15:15,16:16,23:23,25:25,37:37}],30:[function(e,t,r){"use strict";t.exports={}},{}],31:[function(e,t,r){"use strict";var i=r;i.Service=e(32)},{32:32}],32:[function(e,t,r){"use strict";t.exports=n;var i=e(39);(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n;function n(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}n.prototype.rpcCall=function e(t,r,n,s,o){if(!s)throw TypeError("request must be specified");var f=this;if(!o)return i.asPromise(e,f,t,r,n,s);if(!f.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return undefined}try{return f.rpcImpl(t,r[f.requestDelimited?"encodeDelimited":"encode"](s).finish(),function e(r,i){if(r){f.emit("error",r,t);return o(r)}if(i===null){f.end(true);return undefined}if(!(i instanceof n)){try{i=n[f.responseDelimited?"decodeDelimited":"decode"](i)}catch(r){f.emit("error",r,t);return o(r)}}f.emit("data",i,t);return o(null,i)})}catch(e){f.emit("error",e,t);setTimeout(function(){o(e)},0);return undefined}};n.prototype.end=function e(t){if(this.rpcImpl){if(!t)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},{39:39}],33:[function(e,t,r){"use strict";t.exports=f;var i=e(23);((f.prototype=Object.create(i.prototype)).constructor=f).className="Service";var n=e(22),s=e(37),o=e(31);function f(e,t){i.call(this,e,t);this.methods={};this._methodsArray=null}f.fromJSON=function e(t,r){var i=new f(t,r.options);if(r.methods)for(var s=Object.keys(r.methods),o=0;o<s.length;++o)i.add(n.fromJSON(s[o],r.methods[s[o]]));if(r.nested)i.addJSON(r.nested);i.comment=r.comment;return i};f.prototype.toJSON=function e(t){var r=i.prototype.toJSON.call(this,t);var n=t?Boolean(t.keepComments):false;return s.toObject(["options",r&&r.options||undefined,"methods",i.arrayToJSON(this.methodsArray,t)||{},"nested",r&&r.nested||undefined,"comment",n?this.comment:undefined])};Object.defineProperty(f.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function a(e){e._methodsArray=null;return e}f.prototype.get=function e(t){return this.methods[t]||i.prototype.get.call(this,t)};f.prototype.resolveAll=function e(){var t=this.methodsArray;for(var r=0;r<t.length;++r)t[r].resolve();return i.prototype.resolve.call(this)};f.prototype.add=function e(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof n){this.methods[t.name]=t;t.parent=this;return a(this)}return i.prototype.add.call(this,t)};f.prototype.remove=function e(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);delete this.methods[t.name];t.parent=null;return a(this)}return i.prototype.remove.call(this,t)};f.prototype.create=function e(t,r,i){var n=new o.Service(t,r,i);for(var f=0,a;f<this.methodsArray.length;++f){var u=s.lcFirst((a=this._methodsArray[f]).resolve().name).replace(/[^$\w_]/g,"");n[u]=s.codegen(["r","c"],s.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:a,q:a.resolvedRequestType.ctor,s:a.resolvedResponseType.ctor})}return n}},{22:22,23:23,31:31,37:37}],34:[function(e,t,r){"use strict";t.exports=h;var i=/[\s{}=;:[\],'"()<>]/g,n=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g;var o=/^ *[*/]+ */,f=/^\s*\*?\/*/,a=/\n/g,u=/\s/,l=/\\(.?)/g;var c={0:"\0",r:"\r",n:"\n",t:"\t"};function p(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}})}h.unescape=p;function h(e,t){e=e.toString();var r=0,l=e.length,c=1,h=null,d=null,y=0,m=false;var v=[];var g=null;function b(e){return Error("illegal "+e+" (line "+c+")")}function w(){var t=g==="'"?s:n;t.lastIndex=r-1;var i=t.exec(e);if(!i)throw b("string");r=t.lastIndex;S(g);g=null;return p(i[1])}function k(t){return e.charAt(t)}function O(r,i){h=e.charAt(r++);y=c;m=false;var n;if(t){n=2}else{n=3}var s=r-n,u;do{if(--s<0||(u=e.charAt(s))==="\n"){m=true;break}}while(u===" "||u==="\t");var l=e.substring(r,i).split(a);for(var p=0;p<l.length;++p)l[p]=l[p].replace(t?f:o,"").trim();d=l.join("\n").trim()}function j(t){var r=A(t);var i=e.substring(t,r);var n=/^\s*\/{1,2}/.test(i);return n}function A(e){var t=e;while(t<l&&k(t)!=="\n"){t++}return t}function x(){if(v.length>0)return v.shift();if(g)return w();var n,s,o,f,a;do{if(r===l)return null;n=false;while(u.test(o=k(r))){if(o==="\n")++c;if(++r===l)return null}if(k(r)==="/"){if(++r===l){throw b("comment")}if(k(r)==="/"){if(!t){a=k(f=r+1)==="/";while(k(++r)!=="\n"){if(r===l){return null}}++r;if(a){O(f,r-1)}++c;n=true}else{f=r;a=false;if(j(r)){a=true;do{r=A(r);if(r===l){break}r++}while(j(r))}else{r=Math.min(l,A(r)+1)}if(a){O(f,r)}c++;n=true}}else if((o=k(r))==="*"){f=r+1;a=t||k(f)==="*";do{if(o==="\n"){++c}if(++r===l){throw b("comment")}s=o;o=k(r)}while(s!=="*"||o!=="/");++r;if(a){O(f,r-2)}n=true}else{return"/"}}}while(n);var p=r;i.lastIndex=0;var h=i.test(k(p++));if(!h)while(p<l&&!i.test(k(p)))++p;var d=e.substring(r,r=p);if(d==='"'||d==="'")g=d;return d}function S(e){v.push(e)}function _(){if(!v.length){var e=x();if(e===null)return null;S(e)}return v[0]}function T(e,t){var r=_(),i=r===e;if(i){x();return true}if(!t)throw b("token '"+r+"', '"+e+"' expected");return false}function N(e){var r=null;if(e===undefined){if(y===c-1&&(t||h==="*"||m)){r=d}}else{if(y<e){_()}if(y===e&&!m&&(t||h==="/")){r=d}}return r}return Object.defineProperty({next:x,peek:_,push:S,skip:T,cmnt:N},"line",{get:function(){return c}})}},{}],35:[function(e,t,r){"use strict";t.exports=g;var i=e(23);((g.prototype=Object.create(i.prototype)).constructor=g).className="Type";var n=e(15),s=e(25),o=e(16),f=e(20),a=e(33),u=e(21),l=e(27),c=e(42),p=e(37),h=e(14),d=e(13),y=e(40),m=e(12),v=e(41);function g(e,t){i.call(this,e,t);this.fields={};this.oneofs=undefined;this.extensions=undefined;this.reserved=undefined;this.group=undefined;this._fieldsById=null;this._fieldsArray=null;this._oneofsArray=null;this._ctor=null}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],i=r.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(e){var t=e.prototype;if(!(t instanceof u)){(e.prototype=new u).constructor=e;p.merge(e.prototype,t)}e.$type=e.prototype.$type=this;p.merge(e,u,true);this._ctor=e;var r=0;for(;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var i={};for(r=0;r<this.oneofsArray.length;++r)i[this._oneofsArray[r].resolve().name]={get:p.oneOfGetter(this._oneofsArray[r].oneof),set:p.oneOfSetter(this._oneofsArray[r].oneof)};if(r)Object.defineProperties(e.prototype,i)}}});g.generateConstructor=function e(t){var r=p.codegen(["p"],t.name);for(var i=0,n;i<t.fieldsArray.length;++i)if((n=t._fieldsArray[i]).map)r("this%s={}",p.safeProp(n.name));else if(n.repeated)r("this%s=[]",p.safeProp(n.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function b(e){e._fieldsById=e._fieldsArray=e._oneofsArray=null;delete e.encode;delete e.decode;delete e.verify;return e}g.fromJSON=function e(t,r){var u=new g(t,r.options);u.extensions=r.extensions;u.reserved=r.reserved;var l=Object.keys(r.fields),c=0;for(;c<l.length;++c)u.add((typeof r.fields[l[c]].keyType!=="undefined"?f.fromJSON:o.fromJSON)(l[c],r.fields[l[c]]));if(r.oneofs)for(l=Object.keys(r.oneofs),c=0;c<l.length;++c)u.add(s.fromJSON(l[c],r.oneofs[l[c]]));if(r.nested)for(l=Object.keys(r.nested),c=0;c<l.length;++c){var p=r.nested[l[c]];u.add((p.id!==undefined?o.fromJSON:p.fields!==undefined?g.fromJSON:p.values!==undefined?n.fromJSON:p.methods!==undefined?a.fromJSON:i.fromJSON)(l[c],p))}if(r.extensions&&r.extensions.length)u.extensions=r.extensions;if(r.reserved&&r.reserved.length)u.reserved=r.reserved;if(r.group)u.group=true;if(r.comment)u.comment=r.comment;return u};g.prototype.toJSON=function e(t){var r=i.prototype.toJSON.call(this,t);var n=t?Boolean(t.keepComments):false;return p.toObject(["options",r&&r.options||undefined,"oneofs",i.arrayToJSON(this.oneofsArray,t),"fields",i.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",r&&r.nested||undefined,"comment",n?this.comment:undefined])};g.prototype.resolveAll=function e(){var t=this.fieldsArray,r=0;while(r<t.length)t[r++].resolve();var n=this.oneofsArray;r=0;while(r<n.length)n[r++].resolve();return i.prototype.resolveAll.call(this)};g.prototype.get=function e(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null};g.prototype.add=function e(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&t.extend===undefined){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);if(t.parent)t.parent.remove(t);this.fields[t.name]=t;t.message=this;t.onAdd(this);return b(this)}if(t instanceof s){if(!this.oneofs)this.oneofs={};this.oneofs[t.name]=t;t.onAdd(this);return b(this)}return i.prototype.add.call(this,t)};g.prototype.remove=function e(t){if(t instanceof o&&t.extend===undefined){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);delete this.fields[t.name];t.parent=null;t.onRemove(this);return b(this)}if(t instanceof s){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);delete this.oneofs[t.name];t.parent=null;t.onRemove(this);return b(this)}return i.prototype.remove.call(this,t)};g.prototype.isReservedId=function e(t){return i.isReservedId(this.reserved,t)};g.prototype.isReservedName=function e(t){return i.isReservedName(this.reserved,t)};g.prototype.create=function e(t){return new this.ctor(t)};g.prototype.setup=function e(){var t=this.fullName,r=[];for(var i=0;i<this.fieldsArray.length;++i)r.push(this._fieldsArray[i].resolve().resolvedType);this.encode=h(this)({Writer:c,types:r,util:p});this.decode=d(this)({Reader:l,types:r,util:p});this.verify=y(this)({types:r,util:p});this.fromObject=m.fromObject(this)({types:r,util:p});this.toObject=m.toObject(this)({types:r,util:p});var n=v[t];if(n){var s=Object.create(this);s.fromObject=this.fromObject;this.fromObject=n.fromObject.bind(s);s.toObject=this.toObject;this.toObject=n.toObject.bind(s)}return this};g.prototype.encode=function e(t,r){return this.setup().encode(t,r)};g.prototype.encodeDelimited=function e(t,r){return this.encode(t,r&&r.len?r.fork():r).ldelim()};g.prototype.decode=function e(t,r){return this.setup().decode(t,r)};g.prototype.decodeDelimited=function e(t){if(!(t instanceof l))t=l.create(t);return this.decode(t,t.uint32())};g.prototype.verify=function e(t){return this.setup().verify(t)};g.prototype.fromObject=function e(t){return this.setup().fromObject(t)};g.prototype.toObject=function e(t,r){return this.setup().toObject(t,r)};g.d=function e(t){return function e(r){p.decorateType(r,t)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(e,t,r){"use strict";var i=r;var n=e(37);var s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,i={};t|=0;while(r<e.length)i[s[r+t]]=e[r++];return i}i.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);i.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,false,"",n.emptyArray,null]);i.long=o([0,0,0,1,1],7);i.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2);i.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(e,t,r){"use strict";var i=t.exports=e(39);var n=e(30);var s,o;i.codegen=e(3);i.fetch=e(5);i.path=e(8);i.fs=i.inquire("fs");i.toArray=function e(t){if(t){var r=Object.keys(t),i=new Array(r.length),n=0;while(n<r.length)i[n]=t[r[n++]];return i}return[]};i.toObject=function e(t){var r={},i=0;while(i<t.length){var n=t[i++],s=t[i++];if(s!==undefined)r[n]=s}return r};var f=/\\/g,a=/"/g;i.isReserved=function e(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)};i.safeProp=function e(t){if(!/^[$\w_]+$/.test(t)||i.isReserved(t))return'["'+t.replace(f,"\\\\").replace(a,'\\"')+'"]';return"."+t};i.ucFirst=function e(t){return t.charAt(0).toUpperCase()+t.substring(1)};var u=/_([a-z])/g;i.camelCase=function e(t){return t.substring(0,1)+t.substring(1).replace(u,function(e,t){return t.toUpperCase()})};i.compareFieldsById=function e(t,r){return t.id-r.id};i.decorateType=function t(r,n){if(r.$type){if(n&&r.$type.name!==n){i.decorateRoot.remove(r.$type);r.$type.name=n;i.decorateRoot.add(r.$type)}return r.$type}if(!s)s=e(35);var o=new s(n||r.name);i.decorateRoot.add(o);o.ctor=r;Object.defineProperty(r,"$type",{value:o,enumerable:false});Object.defineProperty(r.prototype,"$type",{value:o,enumerable:false});return o};var l=0;i.decorateEnum=function t(r){if(r.$type)return r.$type;if(!o)o=e(15);var n=new o("Enum"+l++,r);i.decorateRoot.add(n);Object.defineProperty(r,"$type",{value:n,enumerable:false});return n};Object.defineProperty(i,"decorateRoot",{get:function(){return n["decorated"]||(n["decorated"]=new(e(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(e,t,r){"use strict";t.exports=n;var i=e(39);function n(e,t){this.lo=e>>>0;this.hi=t>>>0}var s=n.zero=new n(0,0);s.toNumber=function(){return 0};s.zzEncode=s.zzDecode=function(){return this};s.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function e(t){if(t===0)return s;var r=t<0;if(r)t=-t;var i=t>>>0,o=(t-i)/4294967296>>>0;if(r){o=~o>>>0;i=~i>>>0;if(++i>4294967295){i=0;if(++o>4294967295)o=0}}return new n(i,o)};n.from=function e(t){if(typeof t==="number")return n.fromNumber(t);if(i.isString(t)){if(i.Long)t=i.Long.fromString(t);else return n.fromNumber(parseInt(t,10))}return t.low||t.high?new n(t.low>>>0,t.high>>>0):s};n.prototype.toNumber=function e(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;if(!r)i=i+1>>>0;return-(r+i*4294967296)}return this.lo+this.hi*4294967296};n.prototype.toLong=function e(t){return i.Long?new i.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var f=String.prototype.charCodeAt;n.fromHash=function e(t){if(t===o)return s;return new n((f.call(t,0)|f.call(t,1)<<8|f.call(t,2)<<16|f.call(t,3)<<24)>>>0,(f.call(t,4)|f.call(t,5)<<8|f.call(t,6)<<16|f.call(t,7)<<24)>>>0)};n.prototype.toHash=function e(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};n.prototype.zzEncode=function e(){var t=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0;this.lo=(this.lo<<1^t)>>>0;return this};n.prototype.zzDecode=function e(){var t=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0;this.hi=(this.hi>>>1^t)>>>0;return this};n.prototype.length=function e(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}},{39:39}],39:[function(e,t,r){"use strict";var i=r;i.asPromise=e(1);i.base64=e(2);i.EventEmitter=e(4);i.float=e(6);i.inquire=e(7);i.utf8=e(10);i.pool=e(9);i.LongBits=e(38);i.emptyArray=Object.freeze?Object.freeze([]):[];i.emptyObject=Object.freeze?Object.freeze({}):{};i.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node);i.isInteger=Number.isInteger||function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t};i.isString=function e(t){return typeof t==="string"||t instanceof String};i.isObject=function e(t){return t&&typeof t==="object"};i.isset=i.isSet=function e(t,r){var i=t[r];if(i!=null&&t.hasOwnProperty(r))return typeof i!=="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0;return false};i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();i._Buffer_from=null;i._Buffer_allocUnsafe=null;i.newBuffer=function e(t){return typeof t==="number"?i.Buffer?i._Buffer_allocUnsafe(t):new i.Array(t):i.Buffer?i._Buffer_from(t):typeof Uint8Array==="undefined"?t:new Uint8Array(t)};i.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;i.Long=global.dcodeIO&&global.dcodeIO.Long||i.inquire("long");i.key2Re=/^true|false|0|1$/;i.key32Re=/^-?(?:0|[1-9][0-9]*)$/;i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;i.longToHash=function e(t){return t?i.LongBits.from(t).toHash():i.LongBits.zeroHash};i.longFromHash=function e(t,r){var n=i.LongBits.fromHash(t);if(i.Long)return i.Long.fromBits(n.lo,n.hi,r);return n.toNumber(Boolean(r))};function n(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)if(e[i[n]]===undefined||!r)e[i[n]]=t[i[n]];return e}i.merge=n;i.lcFirst=function e(t){return t.charAt(0).toLowerCase()+t.substring(1)};function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,t);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(r)n(this,r)}(t.prototype=Object.create(Error.prototype)).constructor=t;Object.defineProperty(t.prototype,"name",{get:function(){return e}});t.prototype.toString=function e(){return this.name+": "+this.message};return t}i.newError=s;i.ProtocolError=s("ProtocolError");i.oneOfGetter=function e(t){var r={};for(var i=0;i<t.length;++i)r[t[i]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==undefined&&this[e[t]]!==null)return e[t]}};i.oneOfSetter=function e(t){return function(e){for(var r=0;r<t.length;++r)if(t[r]!==e)delete this[t[r]]}};i.toJSONOptions={longs:String,enums:String,bytes:String,json:true};i._configure=function(){var e=i.Buffer;if(!e){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=e.from!==Uint8Array.from&&e.from||function t(r,i){return new e(r,i)};i._Buffer_allocUnsafe=e.allocUnsafe||function t(r){return new e(r)}}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(e,t,r){"use strict";t.exports=a;var i=e(15),n=e(37);function s(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(%s){",n)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),f=0;f<o.length;++f)e("case %i:",t.resolvedType.values[o[f]]);e("break")("}")}else{e("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",t.name+".")("}")}}else{switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",n)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',n)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',n)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",n)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",s(t,"buffer"));break}}return e}function f(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"));break}return e}function a(e){var t=n.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected");var r=e.oneofsArray,i={};if(r.length)t("var p={}");for(var a=0;a<e.fieldsArray.length;++a){var u=e._fieldsArray[a].resolve(),l="m"+n.safeProp(u.name);if(u.optional)t("if(%s!=null&&m.hasOwnProperty(%j)){",l,u.name);if(u.map){t("if(!util.isObject(%s))",l)("return%j",s(u,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){");f(t,u,"k[i]");o(t,u,a,l+"[k[i]]")("}")}else if(u.repeated){t("if(!Array.isArray(%s))",l)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",l);o(t,u,a,l+"[i]")("}")}else{if(u.partOf){var c=n.safeProp(u.partOf.name);if(i[u.partOf.name]===1)t("if(p%s===1)",c)("return%j",u.partOf.name+": multiple values");i[u.partOf.name]=1;t("p%s=1",c)}o(t,u,a,l)}if(u.optional)t("}")}return t("return null")}},{15:15,37:37}],41:[function(e,t,r){"use strict";var i=r;var n=e(21);i[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var r=e["@type"].charAt(0)==="."?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+r,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var r=e.type_url.substring(e.type_url.lastIndexOf("/")+1);var i=this.lookup(r);if(i)e=i.decode(e.value)}if(!(e instanceof this.ctor)&&e instanceof n){var s=e.$type.toObject(e,t);s["@type"]=e.$type.fullName;return s}return this.toObject(e,t)}}},{21:21}],42:[function(e,t,r){"use strict";t.exports=c;var i=e(39);var n;var s=i.LongBits,o=i.base64,f=i.utf8;function a(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function u(){}function l(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function c(){this.len=0;this.head=new a(u,0,0);this.tail=this.head;this.states=null}c.create=i.Buffer?function e(){return(c.create=function e(){return new n})()}:function e(){return new c};c.alloc=function e(t){return new i.Array(t)};if(i.Array!==Array)c.alloc=i.pool(c.alloc,i.Array.prototype.subarray);c.prototype._push=function e(t,r,i){this.tail=this.tail.next=new a(t,r,i);this.len+=r;return this};function p(e,t,r){t[r]=e&255}function h(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function d(e,t){this.len=e;this.next=undefined;this.val=t}d.prototype=Object.create(a.prototype);d.prototype.fn=h;c.prototype.uint32=function e(t){this.len+=(this.tail=this.tail.next=new d((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len;return this};c.prototype.int32=function e(t){return t<0?this._push(y,10,s.fromNumber(t)):this.uint32(t)};c.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function y(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}c.prototype.uint64=function e(t){var r=s.from(t);return this._push(y,r.length(),r)};c.prototype.int64=c.prototype.uint64;c.prototype.sint64=function e(t){var r=s.from(t).zzEncode();return this._push(y,r.length(),r)};c.prototype.bool=function e(t){return this._push(p,1,t?1:0)};function m(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}c.prototype.fixed32=function e(t){return this._push(m,4,t>>>0)};c.prototype.sfixed32=c.prototype.fixed32;c.prototype.fixed64=function e(t){var r=s.from(t);return this._push(m,4,r.lo)._push(m,4,r.hi)};c.prototype.sfixed64=c.prototype.fixed64;c.prototype.float=function e(t){return this._push(i.float.writeFloatLE,4,t)};c.prototype.double=function e(t){return this._push(i.float.writeDoubleLE,8,t)};var v=i.Array.prototype.set?function e(t,r,i){r.set(t,i)}:function e(t,r,i){for(var n=0;n<t.length;++n)r[i+n]=t[n]};c.prototype.bytes=function e(t){var r=t.length>>>0;if(!r)return this._push(p,1,0);if(i.isString(t)){var n=c.alloc(r=o.length(t));o.decode(t,n,0);t=n}return this.uint32(r)._push(v,r,t)};c.prototype.string=function e(t){var r=f.length(t);return r?this.uint32(r)._push(f.write,r,t):this._push(p,1,0)};c.prototype.fork=function e(){this.states=new l(this);this.head=this.tail=new a(u,0,0);this.len=0;return this};c.prototype.reset=function e(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new a(u,0,0);this.len=0}return this};c.prototype.ldelim=function e(){var t=this.head,r=this.tail,i=this.len;this.reset().uint32(i);if(i){this.tail.next=t.next;this.tail=r;this.len+=i}return this};c.prototype.finish=function e(){var t=this.head.next,r=this.constructor.alloc(this.len),i=0;while(t){t.fn(t.val,r,i);i+=t.len;t=t.next}return r};c._configure=function(e){n=e}},{39:39}],43:[function(e,t,r){"use strict";t.exports=o;var i=e(42);(o.prototype=Object.create(i.prototype)).constructor=o;var n=e(39);var s=n.Buffer;function o(){i.call(this)}o.alloc=function e(t){return(o.alloc=n._Buffer_allocUnsafe)(t)};var f=s&&s.prototype instanceof Uint8Array&&s.prototype.set.name==="set"?function e(t,r,i){r.set(t,i)}:function e(t,r,i){if(t.copy)t.copy(r,i,0,t.length);else for(var n=0;n<t.length;)r[i++]=t[n++]};o.prototype.bytes=function e(t){if(n.isString(t))t=n._Buffer_from(t,"base64");var r=t.length>>>0;this.uint32(r);if(r)this._push(f,r,t);return this};function a(e,t,r){if(e.length<40)n.utf8.write(e,t,r);else t.utf8Write(e,r)}o.prototype.string=function e(t){var r=s.byteLength(t);this.uint32(r);if(r)this._push(a,r,t);return this}},{39:39,42:42}]},{},[19])})(typeof window==="object"&&window||typeof self==="object"&&self||this);
 



// file: /bitrix/js/pull/protobuf/model.js
(function(e){"use strict";var n=e.Reader,t=e.Writer,r=e.util;var s=e.roots["push-server"]||(e.roots["push-server"]={});s.RequestBatch=function(){function e(e){this.requests=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.requests=r.emptyArray;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.requests!=null&&n.requests.length)for(var i=0;i<n.requests.length;++i)s.Request.encode(n.requests[i],r.uint32(10).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.RequestBatch;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.requests&&o.requests.length))o.requests=[];o.requests.push(s.Request.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o};return e}();s.Request=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.incomingMessages=null;e.prototype.channelStats=null;e.prototype.serverStats=null;var i;Object.defineProperty(e.prototype,"command",{get:r.oneOfGetter(i=["incomingMessages","channelStats","serverStats"]),set:r.oneOfSetter(i)});e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.incomingMessages!=null&&n.hasOwnProperty("incomingMessages"))s.IncomingMessagesRequest.encode(n.incomingMessages,r.uint32(10).fork()).ldelim();if(n.channelStats!=null&&n.hasOwnProperty("channelStats"))s.ChannelStatsRequest.encode(n.channelStats,r.uint32(18).fork()).ldelim();if(n.serverStats!=null&&n.hasOwnProperty("serverStats"))s.ServerStatsRequest.encode(n.serverStats,r.uint32(26).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.Request;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.incomingMessages=s.IncomingMessagesRequest.decode(t,t.uint32());break;case 2:o.channelStats=s.ChannelStatsRequest.decode(t,t.uint32());break;case 3:o.serverStats=s.ServerStatsRequest.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o};return e}();s.IncomingMessagesRequest=function(){function e(e){this.messages=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.messages=r.emptyArray;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.messages!=null&&n.messages.length)for(var i=0;i<n.messages.length;++i)s.IncomingMessage.encode(n.messages[i],r.uint32(10).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.IncomingMessagesRequest;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.messages&&o.messages.length))o.messages=[];o.messages.push(s.IncomingMessage.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o};return e}();s.IncomingMessage=function(){function e(e){this.receivers=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.receivers=r.emptyArray;e.prototype.sender=null;e.prototype.body="";e.prototype.expiry=0;e.prototype.type="";e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.receivers!=null&&n.receivers.length)for(var i=0;i<n.receivers.length;++i)s.Receiver.encode(n.receivers[i],r.uint32(10).fork()).ldelim();if(n.sender!=null&&n.hasOwnProperty("sender"))s.Sender.encode(n.sender,r.uint32(18).fork()).ldelim();if(n.body!=null&&n.hasOwnProperty("body"))r.uint32(26).string(n.body);if(n.expiry!=null&&n.hasOwnProperty("expiry"))r.uint32(32).uint32(n.expiry);if(n.type!=null&&n.hasOwnProperty("type"))r.uint32(42).string(n.type);return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.IncomingMessage;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.receivers&&o.receivers.length))o.receivers=[];o.receivers.push(s.Receiver.decode(t,t.uint32()));break;case 2:o.sender=s.Sender.decode(t,t.uint32());break;case 3:o.body=t.string();break;case 4:o.expiry=t.uint32();break;case 5:o.type=t.string();break;default:t.skipType(a&7);break}}return o};return e}();s.ChannelStatsRequest=function(){function e(e){this.channels=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.channels=r.emptyArray;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.channels!=null&&n.channels.length)for(var i=0;i<n.channels.length;++i)s.ChannelId.encode(n.channels[i],r.uint32(10).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.ChannelStatsRequest;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.channels&&o.channels.length))o.channels=[];o.channels.push(s.ChannelId.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o};return e}();s.ChannelId=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.id=r.newBuffer([]);e.prototype.isPrivate=false;e.prototype.signature=r.newBuffer([]);e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.id!=null&&n.hasOwnProperty("id"))r.uint32(10).bytes(n.id);if(n.isPrivate!=null&&n.hasOwnProperty("isPrivate"))r.uint32(16).bool(n.isPrivate);if(n.signature!=null&&n.hasOwnProperty("signature"))r.uint32(26).bytes(n.signature);return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.ChannelId;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.id=t.bytes();break;case 2:o.isPrivate=t.bool();break;case 3:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o};return e}();s.ServerStatsRequest=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.ServerStatsRequest;while(t.pos<i){var a=t.uint32();switch(a>>>3){default:t.skipType(a&7);break}}return o};return e}();s.Sender=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.type=0;e.prototype.id=r.newBuffer([]);e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.type!=null&&n.hasOwnProperty("type"))r.uint32(8).int32(n.type);if(n.id!=null&&n.hasOwnProperty("id"))r.uint32(18).bytes(n.id);return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.Sender;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.type=t.int32();break;case 2:o.id=t.bytes();break;default:t.skipType(a&7);break}}return o};return e}();s.SenderType=function(){var e={},n=Object.create(e);n[e[0]="UNKNOWN"]=0;n[e[1]="CLIENT"]=1;n[e[2]="BACKEND"]=2;return n}();s.Receiver=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.id=r.newBuffer([]);e.prototype.isPrivate=false;e.prototype.signature=r.newBuffer([]);e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.id!=null&&n.hasOwnProperty("id"))r.uint32(10).bytes(n.id);if(n.isPrivate!=null&&n.hasOwnProperty("isPrivate"))r.uint32(16).bool(n.isPrivate);if(n.signature!=null&&n.hasOwnProperty("signature"))r.uint32(26).bytes(n.signature);return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.Receiver;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.id=t.bytes();break;case 2:o.isPrivate=t.bool();break;case 3:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o};return e}();s.ResponseBatch=function(){function e(e){this.responses=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.responses=r.emptyArray;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.responses!=null&&n.responses.length)for(var i=0;i<n.responses.length;++i)s.Response.encode(n.responses[i],r.uint32(10).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.ResponseBatch;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.responses&&o.responses.length))o.responses=[];o.responses.push(s.Response.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o};return e}();s.Response=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.outgoingMessages=null;e.prototype.channelStats=null;e.prototype.serverStats=null;var i;Object.defineProperty(e.prototype,"command",{get:r.oneOfGetter(i=["outgoingMessages","channelStats","serverStats"]),set:r.oneOfSetter(i)});e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.outgoingMessages!=null&&n.hasOwnProperty("outgoingMessages"))s.OutgoingMessagesResponse.encode(n.outgoingMessages,r.uint32(10).fork()).ldelim();if(n.channelStats!=null&&n.hasOwnProperty("channelStats"))s.ChannelStatsResponse.encode(n.channelStats,r.uint32(18).fork()).ldelim();if(n.serverStats!=null&&n.hasOwnProperty("serverStats"))s.JsonResponse.encode(n.serverStats,r.uint32(26).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.Response;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.outgoingMessages=s.OutgoingMessagesResponse.decode(t,t.uint32());break;case 2:o.channelStats=s.ChannelStatsResponse.decode(t,t.uint32());break;case 3:o.serverStats=s.JsonResponse.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o};return e}();s.OutgoingMessagesResponse=function(){function e(e){this.messages=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.messages=r.emptyArray;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.messages!=null&&n.messages.length)for(var i=0;i<n.messages.length;++i)s.OutgoingMessage.encode(n.messages[i],r.uint32(10).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.OutgoingMessagesResponse;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.messages&&o.messages.length))o.messages=[];o.messages.push(s.OutgoingMessage.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o};return e}();s.OutgoingMessage=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.id=r.newBuffer([]);e.prototype.body="";e.prototype.expiry=0;e.prototype.created=0;e.prototype.sender=null;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.id!=null&&n.hasOwnProperty("id"))r.uint32(10).bytes(n.id);if(n.body!=null&&n.hasOwnProperty("body"))r.uint32(18).string(n.body);if(n.expiry!=null&&n.hasOwnProperty("expiry"))r.uint32(24).uint32(n.expiry);if(n.created!=null&&n.hasOwnProperty("created"))r.uint32(37).fixed32(n.created);if(n.sender!=null&&n.hasOwnProperty("sender"))s.Sender.encode(n.sender,r.uint32(42).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.OutgoingMessage;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.id=t.bytes();break;case 2:o.body=t.string();break;case 3:o.expiry=t.uint32();break;case 4:o.created=t.fixed32();break;case 5:o.sender=s.Sender.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o};return e}();s.ChannelStatsResponse=function(){function e(e){this.channels=[];if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.channels=r.emptyArray;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.channels!=null&&n.channels.length)for(var i=0;i<n.channels.length;++i)s.ChannelStats.encode(n.channels[i],r.uint32(10).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.ChannelStatsResponse;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:if(!(o.channels&&o.channels.length))o.channels=[];o.channels.push(s.ChannelStats.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o};return e}();s.ChannelStats=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.id=r.newBuffer([]);e.prototype.isPrivate=false;e.prototype.isOnline=false;e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.id!=null&&n.hasOwnProperty("id"))r.uint32(10).bytes(n.id);if(n.isPrivate!=null&&n.hasOwnProperty("isPrivate"))r.uint32(16).bool(n.isPrivate);if(n.isOnline!=null&&n.hasOwnProperty("isOnline"))r.uint32(24).bool(n.isOnline);return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.ChannelStats;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.id=t.bytes();break;case 2:o.isPrivate=t.bool();break;case 3:o.isOnline=t.bool();break;default:t.skipType(a&7);break}}return o};return e}();s.JsonResponse=function(){function e(e){if(e)for(var n=Object.keys(e),t=0;t<n.length;++t)if(e[n[t]]!=null)this[n[t]]=e[n[t]]}e.prototype.json="";e.create=function n(t){return new e(t)};e.encode=function e(n,r){if(!r)r=t.create();if(n.json!=null&&n.hasOwnProperty("json"))r.uint32(10).string(n.json);return r};e.decode=function e(t,r){if(!(t instanceof n))t=n.create(t);var i=r===undefined?t.len:t.pos+r,o=new s.JsonResponse;while(t.pos<i){var a=t.uint32();switch(a>>>3){case 1:o.json=t.string();break;default:t.skipType(a&7);break}}return o};return e}();return s})(protobuf);



// file: /bitrix/js/main/core/core_promise.js
(function(t){if(!t.BX){t.BX={}}var e=t.BX;e.Promise=function(t,e){this.state=null;this.value=null;this.reason=null;this.next=null;this.ctx=e||this;this.onFulfilled=[];this.onRejected=[]};e.Promise.prototype.fulfill=function(t){this.checkState();this.value=t;this.state=true;this.execute()};e.Promise.prototype.reject=function(t){this.checkState();this.reason=t;this.state=false;this.execute()};e.Promise.prototype.then=function(t,i){if(typeof t=="function"||t instanceof Function){this.onFulfilled.push(t)}if(typeof i=="function"||i instanceof Function){this.onRejected.push(i)}if(this.next===null){this.next=new e.Promise(null,this.ctx)}if(this.state!==null){this.execute()}return this.next};e.Promise.prototype.catch=function(t){if(typeof t=="function"||t instanceof Function){this.onRejected.push(t)}if(this.next===null){this.next=new e.Promise(null,this.ctx)}if(this.state!==null){this.execute()}return this.next};e.Promise.prototype.setAutoResolve=function(t,e){this.timer=setTimeout(function(){if(this.state===null){this[t?"fulfill":"reject"]()}}.bind(this),e||15)};e.Promise.prototype.cancelAutoResolve=function(){clearTimeout(this.timer)};e.Promise.prototype.resolve=function(t){var e=this;if(this===t){this.reject(new TypeError("Promise cannot fulfill or reject itself"))}else if(t&&t.toString()==="[object BX.Promise]"){t.then(function(t){e.fulfill(t)},function(t){e.reject(t)})}else{this.fulfill(t)}};e.Promise.prototype.toString=function(){return"[object BX.Promise]"};e.Promise.prototype.execute=function(){if(this.state===null){return}var i=undefined;var n=undefined;var o=undefined;var s;if(this.state===true){if(this.onFulfilled.length){try{for(s=0;s<this.onFulfilled.length;s++){o=this.onFulfilled[s].apply(this.ctx,[this.value]);if(typeof o!="undefined"){i=o}}}catch(i){if("console"in t){console.dir(i)}if(typeof e.debug!=="undefined"){e.debug(i)}n=i}}else{i=this.value}}else if(this.state===false){if(this.onRejected.length){try{for(s=0;s<this.onRejected.length;s++){o=this.onRejected[s].apply(this.ctx,[this.reason]);if(typeof o!="undefined"){i=o}}}catch(i){if("console"in t){console.dir(i)}if(typeof e.debug!=="undefined"){e.debug(i)}n=i}}else{n=this.reason}}if(this.next!==null){if(typeof n!="undefined"){this.next.reject(n)}else if(typeof i!="undefined"){this.next.resolve(i)}}};e.Promise.prototype.checkState=function(){if(this.state!==null){throw new Error("You can not do fulfill() or reject() multiple times")}}})(window);
 



// file: /bitrix/js/rest/client/rest.client.js
"use strict";(function(){if(!window.BX){window.BX={}}else if(window.BX.RestClient){return}var e=window.BX;e.RestClient=function(e){e=e||{};this.endpoint=e.endpoint||"/rest";this.queryParams=e.queryParams||"";this.cors=e.cors===true};e.RestClient.prototype.callMethod=function(e,t,r,i,s){return n({method:e,data:t,callback:r,sendCallback:i,logTag:s,endpoint:this.endpoint,queryParams:this.queryParams,cors:this.cors})};e.RestClient.prototype.callBatch=function(e,t,i,s,o){var a=r.isArray(e)?[]:{};var u=0;var f=function(e){n.batch(e,t,i,s,this.endpoint,this.queryParams,this.cors,o)}.bind(this);for(var l in e){var c=null,p=null;if(!!e[l]&&e.hasOwnProperty(l)){if(r.isArray(e[l])){c=e[l][0];p=e[l][1]}else if(!!e[l].method){c=e[l].method;p=e[l].params}if(!!c){u++;a[l]=[c,p]}}}if(u>0){var d=function(e){return function(t){a[e]=a[e][0]+"?"+t;if(--u<=0)f(a)}};for(var h in a){if(a.hasOwnProperty(h)){n.prepareData(a[h][1],"",d(h))}}}};e.RestClient.prototype.setEndpoint=function(e){this.endpoint=e};e.RestClient.prototype.enableCorsRequest=function(e){this.cors=e===true};e.RestClient.prototype.setQueryParams=function(e){this.queryParams=e};if(typeof e.namespace!=="undefined"){var t=new e.RestClient;if(typeof e.rest=="undefined"){e.rest={}}e.rest.callMethod=function(e,r,n,i,s){return t.callMethod(e,r,n,i,s)};e.rest.callBatch=function(e,r,n,i,s){return t.callBatch(e,r,n,i,s)}}var r={isArray:function(e){return e&&Object.prototype.toString.call(e)=="[object Array]"},isFunction:function(e){return e===null?false:typeof e=="function"||e instanceof Function},isString:function(e){return e===""?true:e?typeof e=="string"||e instanceof String:false},isDomNode:function(e){return e&&typeof e=="object"&&"nodeType"in e},isDate:function(e){return e&&Object.prototype.toString.call(e)=="[object Date]"},buildQueryString:function(e){var t="";for(var r in e){if(!e.hasOwnProperty(r)){continue}var n=e[r];if(this.isArray(n)){n.forEach(function(e,n){t+=encodeURIComponent(r+"["+n+"]")+"="+encodeURIComponent(e)+"&"})}else{t+=encodeURIComponent(r)+"="+encodeURIComponent(n)+"&"}}if(t.length>0){t=t.substr(0,t.length-1)}return t},clone:function(e,t){var r,n,i;if(t!==false)t=true;if(e===null)return null;if(this.isDomNode(e)){r=e.cloneNode(t)}else if(typeof e=="object"){if(this.isArray(e)){r=[];for(n=0,i=e.length;n<i;n++){if(typeof e[n]=="object"&&t)r[n]=this.clone(e[n],t);else r[n]=e[n]}}else{r={};if(e.constructor){if(this.isDate(e))r=new Date(e);else r=new e.constructor}for(n in e){if(typeof e[n]=="object"&&t)r[n]=this.clone(e[n],t);else r[n]=e[n]}}}else{r=e}return r}};var n=function(t){var s=!!t.callback&&r.isFunction(t.callback);var o=typeof e.Promise==="undefined"||s?null:new e.Promise;var a=t.sendCallback||function(){};var u=t.withoutRestoringCsrf||false;var f=n.xhr();var l=t.endpoint+"/"+n.escape(t.method)+".json"+(t.logTag?"?logTag="+t.logTag:"");f.open("POST",l);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(t.cors){f.withCredentials=true}var c=false;f.onprogress=function(){};f.ontimeout=function(){};f.timeout=0;f.onload=function(){if(c)return;f.onload=function(){};var r=n.isSuccess(f);var a=f.status;if(r){var l=f.responseText;if(l.length>0){try{l=JSON.parse(l)}catch(e){r=false}}if(a==401){if(l.sessid&&!u){e.message({bitrix_sessid:l.sessid});console.warn("BX.rest: your csrf-token has expired, send query with a new token");t.withoutRestoringCsrf=true;if(!s){t.callback=function(e){if(e.error()){o.reject(e)}else{o.fulfill(e)}}}n(t);return true}}else if(a==0){l={result:{},error:"ERROR_NETWORK",error_description:"A network error occurred while the request was being executed."}}else{if(a==200){if(l.length<=0){l={result:{}}}}else if(l.length<=0){l={result:{},error:"BLANK_ANSWER_WITH_ERROR_CODE",error_description:"Blank answer with error http code: "+a}}}}f=null;if(r){var p=new i(l,t,a);if(s){t.callback.apply(window,[p])}else{if(p.error()){o.reject(p)}else{o.fulfill(p)}}}else{var p=new i({error:"ERROR_UNEXPECTED_ANSWER",error_description:"Server returned an unexpected response.",ex:{}},t,0);if(s){t.callback.apply(window,[p])}else{o.reject(p)}}};f.onerror=function(e){var r=new i({error:"ERROR_NETWORK",error_description:"A network error occurred while the request was being executed.",ex:e},t,0);if(s){t.callback.apply(window,[r])}else{o.reject(r)}};var p="";if(t.queryParams){p=r.buildQueryString(t.queryParams)}else if(typeof e.bitrix_sessid!=="undefined"){p="sessid="+e.bitrix_sessid()}if(typeof t.start!=="undefined"){p+="&start="+parseInt(t.start)}if(!!t.data){n.prepareData(t.data,"",function(e){p+="&"+e;f.send(p);a(f)})}else{f.send(p);a(f)}return s||!o?f:o};n.batch=function(e,t,s,o,a,u,f,l){return n({method:"batch",data:{halt:!!s?1:0,cmd:e},callback:function(n,s,o){if(!!t){var l=n.error();var c=n.data();var p=r.isArray(e)?[]:{};for(var d in e){if(!!e[d]&&e.hasOwnProperty(d)){if(r.isString(e[d])){var h=e[d].split("?")}else{h=[r.isArray(e[d])?e[d][0]:e[d].method,r.isArray(e[d])?e[d][1]:e[d].data]}if(c&&(typeof c.result[d]!=="undefined"||typeof c.result_error[d]!=="undefined")){p[d]=new i({result:typeof c.result[d]!=="undefined"?c.result[d]:{},error:c.result_error[d]||undefined,total:c.result_total[d],time:c.result_time[d],next:c.result_next[d]},{method:h[0],data:h[1],callback:t,endpoint:a,queryParams:u,cors:f},n.status)}else if(l){p[d]=new i({result:{},error:l.ex,total:0},{method:h[0],data:h[1],callback:t,endpoint:a,queryParams:u,cors:f},n.status)}}}t.apply(window,[p])}},sendCallback:o,endpoint:a,queryParams:u,cors:f,logTag:l})};n.xhr=function(){return new XMLHttpRequest};n.escape=function(e){return encodeURIComponent(e)};n.prepareData=function(e,t,i){var s="",o=[];if(r.isString(e)||e===null){i.call(document,e||"")}else{for(var u in e){if(!e.hasOwnProperty(u)){continue}var f=n.escape(u);if(t)f=t+"["+f+"]";if(typeof e[u]==="object"){o.push([f,e[u]])}else{if(s.length>0){s+="&"}if(typeof e[u]==="boolean"){s+=f+"="+(e[u]?1:0)}else{s+=f+"="+n.escape(e[u])}}}var l=o.length;if(l>0){var c=function(e){s+=(!!e?"&":"")+e;if(--l<=0){i.call(document,s)}};var p=l;for(var u=0;u<p;u++){if(r.isDomNode(o[u][1])){if(o[u][1].tagName.toUpperCase()==="INPUT"&&o[u][1].type==="file"){if(a.canUse()){a(o[u][1],function(e){return function(t){if(r.isArray(t)&&t.length>0){c(e+"[0]="+n.escape(t[0])+"&"+e+"[1]="+n.escape(t[1]))}else{c(e+"=")}}}(o[u][0]))}}else if(typeof o[u][1].value!=="undefined"){c(o[u][0]+"="+n.escape(o[u][1].value))}else{c("")}}else if(r.isDate(o[u][1])){c(o[u][0]+"="+n.escape(o[u][1].toJSON()))}else if(r.isArray(o[u][1])&&o[u][1].length<=0){c(o[u][0]+"=")}else{n.prepareData(o[u][1],o[u][0],c)}}}else{i.call(document,s)}}};n.isSuccess=function(e){return typeof e.status==="undefined"||e.status>=200&&e.status<300||e.status===304||e.status>=400&&e.status<500||e.status===1223||e.status===0};var i=function(e,t,n){this.answer=e;this.query=r.clone(t);this.status=n;if(typeof this.answer.next!=="undefined"){this.answer.next=parseInt(this.answer.next)}if(typeof this.answer.error!=="undefined"){this.answer.ex=new s(this.status,typeof this.answer.error==="string"?this.answer:this.answer.error)}};i.prototype.data=function(){return this.answer.result};i.prototype.time=function(){return this.answer.time};i.prototype.error=function(){return this.answer.ex};i.prototype.error_description=function(){return this.answer.error_description};i.prototype.more=function(){return!isNaN(this.answer.next)};i.prototype.total=function(){return parseInt(this.answer.total)};i.prototype.next=function(e){if(this.more()){this.query.start=this.answer.next;if(!!e&&r.isFunction(e)){this.query.callback=e}return n(this.query)}return false};var s=function(e,t){this.status=e;this.ex=t};s.prototype.getError=function(){return this.ex};s.prototype.getStatus=function(){return this.status};s.prototype.toString=function(){return this.ex.error+(!!this.ex.error_description?": "+this.ex.error_description:"")+" ("+this.status+")"};var o=function(e){var t=new Uint8Array(e);var r="";if(typeof t.forEach==="function"){t.forEach(function(e){r+=String.fromCharCode(e)})}else{var n=t.length;for(var i=0;i<n;i+=1){r+=String.fromCharCode(t[i])}}return btoa(r)};var a=function(e,t){if(a.canUse()){var r=e.files,n=0,i=e.multiple?[]:null;for(var s=0,u;u=r[s];s++){var f=new window.FileReader;f.BXFILENAME=r[s].name;f.onload=function(e){e=e||window.event;var r=[this.BXFILENAME,o(e.target.result)];if(i===null)i=r;else i.push(r);if(--n<=0){t(i)}};f.readAsArrayBuffer(u)}n=s;if(n<=0){t(i)}}};a.canUse=function(){return!!window.FileReader}})();
 



// file: /bitrix/js/pull/client/pull.client.js
(function(){if(!window.BX){window.BX={}}else if(window.BX.PullClient){return}var e=window.BX;var t=window.protobuf;var n=19;var o=60;var i=30*60;var s=24*60*60;var r=6e4;var c="bx-pull-session";var a=20;var u={WebSocket:"webSocket",LongPolling:"longPolling"};var l={Online:"online",Offline:"offline",Connecting:"connect"};var h={Unknown:0,Client:1,Backend:2};var f={Server:"server",Client:"client",Online:"online",Status:"status",Revision:"revision"};var d={NORMAL_CLOSURE:1e3,SERVER_DIE:1001,CONFIG_REPLACED:3e3,CHANNEL_EXPIRED:3001,SERVER_RESTARTED:3002,CONFIG_EXPIRED:3003,MANUAL:3004};var p={CHANNEL_EXPIRE:"CHANNEL_EXPIRE",CONFIG_EXPIRE:"CONFIG_EXPIRE",SERVER_RESTART:"SERVER_RESTART"};var g={Shared:"shared",Personal:"personal"};var m=t.roots["push-server"]["Response"];var y=t.roots["push-server"]["ResponseBatch"];var b=t.roots["push-server"]["Request"];var v=t.roots["push-server"]["RequestBatch"];var S=t.roots["push-server"]["IncomingMessagesRequest"];var k=t.roots["push-server"]["IncomingMessage"];var I=t.roots["push-server"]["Receiver"];var E=function(t){t=t||{};if(t.restApplication){if(typeof t.configGetMethod==="undefined"){t.configGetMethod="pull.application.config.get"}if(typeof t.skipCheckRevision==="undefined"){t.skipCheckRevision=true}if(typeof t.restApplication==="string"){t.siteId=t.restApplication}t.serverEnabled=true}var n=this;this.context="master";this.guestMode=t.guestMode?t.guestMode:typeof e.message!=="undefined"&&e.message.pull_guest_mode?e.message.pull_guest_mode==="Y":false;this.guestUserId=t.guestUserId?t.guestUserId:typeof e.message!=="undefined"&&e.message.pull_guest_user_id?parseInt(e.message.pull_guest_user_id,10):0;if(this.guestMode&&this.guestUserId){this.userId=this.guestUserId}else{this.userId=t.userId?t.userId:typeof e.message!=="undefined"&&e.message.USER_ID?e.message.USER_ID:0}this.siteId=t.siteId?t.siteId:typeof e.message!=="undefined"&&e.message.SITE_ID?e.message.SITE_ID:"none";this.restClient=typeof t.restClient!=="undefined"?t.restClient:new e.RestClient(this.getRestClientOptions());this.enabled=typeof t.serverEnabled!=="undefined"?t.serverEnabled==="Y"||t.serverEnabled===true:typeof e.message!=="undefined"&&e.message.pull_server_enabled==="Y";this.unloading=false;this.starting=false;this.debug=false;this.connectionAttempt=0;this.connectionType="";this.reconnectTimeout=null;this.restoreWebSocketTimeout=null;this.configGetMethod=typeof t.configGetMethod!=="string"?"pull.config.get":t.configGetMethod;this.skipStorageInit=t.skipStorageInit===true;this.skipCheckRevision=t.skipCheckRevision===true;this._subscribers={};this.watchTagsQueue={};this.watchUpdateInterval=174e4;this.watchForceUpdateInterval=5e3;if(typeof t.configTimestamp!=="undefined"){this.configTimestamp=t.configTimestamp}else if(typeof e.message!=="undefined"&&e.message.pull_config_timestamp){this.configTimestamp=e.message.pull_config_timestamp}else{this.configTimestamp=0}this.session={mid:null,tag:null,time:null,history:{},messageCount:0};this._connectors={webSocket:null,longPolling:null};Object.defineProperty(this,"connector",{get:function(){return n._connectors[n.connectionType]}});this.isSecure=document.location.href.indexOf("https")===0;this.config=null;this.storage=null;if(this.userId&&!this.skipStorageInit){this.storage=new L({userId:this.userId,siteId:this.siteId})}this.sharedConfig=new C({onWebSocketBlockChanged:this.onWebSocketBlockChanged.bind(this),storage:this.storage});this.channelManager=new R({restClient:this.restClient});this.notificationPopup=null;this.checkInterval=null;this.offlineTimeout=null;this.isManualDisconnect=false};E.prototype.subscribe=function(e){if(!e){console.error(O.getDateForLog()+": Pull.subscribe: params for subscribe function is invalid. ");return function(){}}if(!O.isPlainObject(e)){return this.attachCommandHandler(e)}e=e||{};e.type=e.type||f.Server;e.command=e.command||null;if(e.type==f.Server||e.type==f.Client){if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]={}}if(typeof this._subscribers[e.type][e.moduleId]==="undefined"){this._subscribers[e.type][e.moduleId]={callbacks:[],commands:{}}}if(e.command){if(typeof this._subscribers[e.type][e.moduleId]["commands"][e.command]==="undefined"){this._subscribers[e.type][e.moduleId]["commands"][e.command]=[]}this._subscribers[e.type][e.moduleId]["commands"][e.command].push(e.callback);return function(){this._subscribers[e.type][e.moduleId]["commands"][e.command]=this._subscribers[e.type][e.moduleId]["commands"][e.command].filter(function(t){return t!==e.callback})}.bind(this)}else{this._subscribers[e.type][e.moduleId]["callbacks"].push(e.callback);return function(){this._subscribers[e.type][e.moduleId]["callbacks"]=this._subscribers[e.type][e.moduleId]["callbacks"].filter(function(t){return t!==e.callback})}.bind(this)}}else{if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]=[]}this._subscribers[e.type].push(e.callback);return function(){this._subscribers[e.type]=this._subscribers[e.type].filter(function(t){return t!==e.callback})}.bind(this)}};E.prototype.attachCommandHandler=function(e){if(typeof e.getModuleId!=="function"||typeof e.getModuleId()!=="string"){console.error(O.getDateForLog()+": Pull.attachCommandHandler: result of handler.getModuleId() is not a string.");return function(){}}var t=f.Server;if(typeof e.getSubscriptionType==="function"){t=e.getSubscriptionType()}this.subscribe({type:t,moduleId:e.getModuleId(),callback:function(t){var n=null;if(typeof e.getMap==="function"){var o=e.getMap();if(o&&typeof o==="object"){if(typeof o[t.command]==="function"){n=o[t.command].bind(e)}else if(typeof o[t.command]==="string"&&typeof e[o[t.command]]==="function"){n=e[o[t.command]].bind(e)}}}if(!n){var i="handle"+t.command.charAt(0).toUpperCase()+t.command.slice(1);if(typeof e[i]==="function"){n=e[i].bind(e)}}if(n){if(this.debug&&this.context!=="master"){console.warn(O.getDateForLog()+": Pull.attachCommandHandler: receive command",t)}n(t.params,t.extra,t.command)}}.bind(this)})};E.prototype.emit=function(e){e=e||{};if(e.type==f.Server||e.type==f.Client){if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]={}}if(typeof this._subscribers[e.type][e.moduleId]==="undefined"){this._subscribers[e.type][e.moduleId]={callbacks:[],commands:{}}}if(this._subscribers[e.type][e.moduleId]["callbacks"].length>0){this._subscribers[e.type][e.moduleId]["callbacks"].forEach(function(t){t(e.data,{type:e.type,moduleId:e.moduleId})})}if(this._subscribers[e.type][e.moduleId]["commands"][e.data.command]&&this._subscribers[e.type][e.moduleId]["commands"][e.data.command].length>0){this._subscribers[e.type][e.moduleId]["commands"][e.data.command].forEach(function(t){t(e.data.params,e.data.extra,e.data.command,{type:e.type,moduleId:e.moduleId})})}return true}else{if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]=[]}if(this._subscribers[e.type].length<=0){return true}this._subscribers[e.type].forEach(function(t){t(e.data,{type:e.type})});return true}};E.prototype.init=function(){this._connectors.webSocket=new _({parent:this,onOpen:this.onWebSocketOpen.bind(this),onMessage:this.parseResponse.bind(this),onDisconnect:this.onWebSocketDisconnect.bind(this),onError:this.onWebSocketError.bind(this)});this._connectors.longPolling=new T({parent:this,onOpen:this.onLongPollingOpen.bind(this),onMessage:this.parseResponse.bind(this),onDisconnect:this.onLongPollingDisconnect.bind(this),onError:this.onLongPollingError.bind(this)});this.connectionType=this.isWebSocketAllowed()?u.WebSocket:u.LongPolling;window.addEventListener("beforeunload",this.onBeforeUnload.bind(this));window.addEventListener("offline",this.onOffline.bind(this));window.addEventListener("online",this.onOnline.bind(this));if(e&&e.addCustomEvent){e.addCustomEvent("BXLinkOpened",this.connect.bind(this))}if(e&&e.desktop){e.desktop.addCustomEvent("BXLoginSuccess",function(){this.restart(1e3,"Desktop login")}.bind(this))}};E.prototype.start=function(t){if(this.starting||this.isConnected()){return}if(!this.userId&&typeof e.message!=="undefined"&&e.message.USER_ID){this.userId=e.message.USER_ID;if(!this.storage){this.storage=new L({userId:this.userId,siteId:this.siteId})}}if(this.siteId==="none"&&typeof e.message!=="undefined"&&e.message.SITE_ID){this.siteId=e.message.SITE_ID}var n=new e.Promise;var o=false;if(O.isPlainObject(t)){if(typeof t.skipReconnectToLastSession!=="undefined"){o=!!t.skipReconnectToLastSession;delete t.skipReconnectToLastSession}this.config=t}if(!this.enabled){n.reject({ex:{error:"PULL_DISABLED",error_description:"Push & Pull server is disabled"}});return n}var i=this;var s=(new Date).getTime();var r;if(!o&&this.storage){r=this.storage.get(c)}if(O.isPlainObject(r)&&r.hasOwnProperty("ttl")&&r.ttl>=s){this.session.mid=r.mid}this.starting=true;this.loadConfig().catch(function(e){i.starting=false;i.sendPullStatus(l.Offline);i.stopCheckConfig();console.error(O.getDateForLog()+": Pull: could not read push-server config. ",e);n.reject(e)}).then(function(e){i.setConfig(e);i.init();i.connect();i.updateWatch();i.startCheckConfig();n.resolve(true)});return n};E.prototype.getRestClientOptions=function(){var e={};if(this.guestMode&&this.guestUserId!==0){e.queryParams={pull_guest_id:this.guestUserId}}return e};E.prototype.setLastMessageId=function(e){this.session.mid=e};E.prototype.setPublicIds=function(e){return this.channelManager.setPublicIds(e)};E.prototype.sendMessage=function(e,t,n,o,i){return this.sendMessageBatch([{users:e,moduleId:t,command:n,params:o,expiry:i}])};E.prototype.sendMessageBatch=function(e){if(!this.isPublishingEnabled()){console.error("Client publishing is not supported or is disabled");return false}var t=[];var n={};for(var o=0;o<e.length;o++){for(var i=0;i<e[o].users.length;i++){n[e[o].users[i]]=true}}this.channelManager.getPublicIds(Object.keys(n)).then(function(n){e.forEach(function(e){var o={module_id:e.moduleId,command:e.command,params:e.params};var i=k.create({receivers:this.createMessageReceivers(e.users,n),body:JSON.stringify(o),expiry:e.expiry||0});t.push(i)},this);var o=v.create({requests:[{incomingMessages:{messages:t}}]});var i=v.encode(o).finish();return this.connector.send(i)}.bind(this))};E.prototype.createMessageReceivers=function(e,t){var n=[];for(var o=0;o<e.length;o++){var i=e[o];if(!t[i]||!t[i].publicId){throw new Error("Could not determine public id for user "+i)}n.push(I.create({id:this.encodeId(t[i].publicId),signature:this.encodeId(t[i].signature)}))}return n};E.prototype.restart=function(t,n){var o=this;this.disconnect(t,n);if(this.storage){this.storage.remove("bx-pull-config")}this.config=null;this.loadConfig().catch(function(t){console.error(O.getDateForLog()+": Pull: could not read push-server config",t);o.sendPullStatus(l.Offline);clearTimeout(o.reconnectTimeout);if(t.status==401||t.status==403){o.stopCheckConfig();if(e&&e.onCustomEvent){e.onCustomEvent(window,"onPullError",["AUTHORIZE_ERROR"])}}}).then(function(e){o.setConfig(e);o.connect();o.updateWatch();o.startCheckConfig()})};E.prototype.loadConfig=function(){var t=new e.Promise;if(!this.config){this.config={api:{},channels:{},server:{timeShift:0},clientId:null};var n;if(this.storage){n=this.storage.get("bx-pull-config")}if(this.isConfigActual(n)&&this.checkRevision(n.api.revision_web)){t.resolve(n);return t}else if(this.storage){this.storage.remove("bx-pull-config")}}else if(this.isConfigActual(this.config)&&this.checkRevision(this.config.api.revision_web)){t.resolve(this.config);return t}else{this.config={api:{},channels:{},server:{timeShift:0},clientId:null}}this.restClient.callBatch({serverTime:["server.time"],configGet:[this.configGetMethod,{CACHE:"N"}]},function(e){if(!e){t.reject(new Error("Network error while getting new config"));return false}var n=0;if(e.serverTime&&!e.serverTime.error()){n=Math.floor((O.getTimestamp()-new Date(e.serverTime.data()).getTime())/1e3)}if(e.configGet.error()){var o=e.configGet.error();if(o.getError().error=="AUTHORIZE_ERROR"||o.getError().error=="WRONG_AUTH_TYPE"){o.status=403}t.reject(o)}else if(e.configGet){var i=e.configGet.data();i.server.timeShift=n;t.resolve(i)}},false,false,"pull.config");return t};E.prototype.isConfigActual=function(e){if(!O.isPlainObject(e)){return false}if(e.server.config_timestamp<this.configTimestamp){return false}var t=new Date;var n=Object.keys(e.channels).length;if(n===0){return false}for(var o in e.channels){if(!e.channels.hasOwnProperty(o)){continue}var i=e.channels[o];var s=new Date(i.end);if(s<t){return false}}return true};E.prototype.startCheckConfig=function(){if(this.checkInterval){clearInterval(this.checkInterval)}this.checkInterval=setInterval(this.checkConfig.bind(this),r)};E.prototype.stopCheckConfig=function(){if(this.checkInterval){clearInterval(this.checkInterval)}this.checkInterval=null};E.prototype.checkConfig=function(){if(this.isConfigActual(this.config)){if(!this.checkRevision(this.config.api.revision_web)){return false}}else{console.log(O.getDateForLog()+": Stale config detected. Restarting");this.restart(d.CONFIG_EXPIRED,"Config update required")}};E.prototype.setConfig=function(e){for(var t in e){if(e.hasOwnProperty(t)&&this.config.hasOwnProperty(t)){this.config[t]=e[t]}}if(this.storage){this.storage.set("bx-pull-config",e)}};E.prototype.isWebSocketSupported=function(){return typeof window.WebSocket!=="undefined"};E.prototype.isWebSocketAllowed=function(){if(this.sharedConfig.isWebSocketBlocked()){return false}return this.isWebSocketEnabled()};E.prototype.isWebSocketEnabled=function(){if(!this.isWebSocketSupported()){return false}return this.config&&this.config.server&&this.config.server.websocket_enabled===true};E.prototype.isPublishingSupported=function(){return this.getServerVersion()>3};E.prototype.isPublishingEnabled=function(){if(!this.isPublishingSupported()){return false}return this.config&&this.config.server&&this.config.server.publish_enabled===true};E.prototype.isProtobufSupported=function(){return this.getServerVersion()>3&&!O.browser.IsIe()};E.prototype.isSharedMode=function(){return this.getServerMode()==g.Shared};E.prototype.disconnect=function(e,t){if(this.connector){this.isManualDisconnect=true;this.connector.disconnect(e,t)}};E.prototype.stop=function(e,t){this.disconnect(e,t);this.stopCheckConfig()};E.prototype.reconnect=function(e,t,n){this.disconnect(e,t);n=n||1;this.scheduleReconnect(n)};E.prototype.restoreWebSocketConnection=function(){if(this.connectionType==u.WebSocket){return true}this._connectors.webSocket.connect()};E.prototype.scheduleReconnect=function(e){if(!this.enabled)return false;if(!e){if(this.connectionAttempt>3&&this.connectionType===u.WebSocket){this.sharedConfig.setWebSocketBlocked(true);this.connectionType=u.LongPolling;this.connectionAttempt=1;e=1}else{e=this.getConnectionAttemptDelay(this.connectionAttempt)}}if(this.reconnectTimeout){clearTimeout(this.reconnectTimeout)}console.log(O.getDateForLog()+": Pull: scheduling reconnection in "+e+" seconds; attempt # "+this.connectionAttempt);this.reconnectTimeout=setTimeout(this.connect.bind(this),e*1e3)};E.prototype.scheduleRestoreWebSocketConnection=function(){console.log(O.getDateForLog()+": Pull: scheduling restoration of websocket connection in "+i+" seconds");var e=this;if(this.restoreWebSocketTimeout){return}this.restoreWebSocketTimeout=setTimeout(function(){e.restoreWebSocketTimeout=0;e.restoreWebSocketConnection()},i*1e3)};E.prototype.connect=function(){if(!this.enabled||this.connector.connected){return false}if(this.reconnectTimeout){clearTimeout(this.reconnectTimeout)}this.sendPullStatus(l.Connecting);this.connectionAttempt++;this.connector.connect()};E.prototype.parseResponse=function(e){var t;var n=this.extractMessages(e);var o=[];if(n.length===0){this.session.mid=null;return}for(var i=0;i<n.length;i++){var s=n[i];this.session.mid=s.mid||null;this.session.tag=s.tag||null;this.session.time=s.time||null;o.push(s.text);if(!this.session.history[s.text.module_id]){this.session.history[s.text.module_id]={}}if(!this.session.history[s.text.module_id][s.text.command]){this.session.history[s.text.module_id][s.text.command]=0}this.session.history[s.text.module_id][s.text.command]++;this.session.messageCount++}this.broadcastMessages(o)};E.prototype.extractMessages=function(e){if(e instanceof ArrayBuffer){return this.extractProtobufMessages(e)}else if(O.isNotEmptyString(e)){return this.extractPlainTextMessages(e)}};E.prototype.extractProtobufMessages=function(e){var t=[];try{var n=y.decode(new Uint8Array(e));for(var o=0;o<n.responses.length;o++){var i=n.responses[o];if(i.command!="outgoingMessages"){continue}var s=n.responses[o].outgoingMessages.messages;for(var r=0;r<s.length;r++){var c=s[r];var a;try{a=JSON.parse(c.body)}catch(e){console.error(O.getDateForLog()+": Pull: Could not parse message body",e);continue}if(!a.extra){a.extra={}}a.extra.sender={type:c.sender.type};if(c.sender.id instanceof Uint8Array){a.extra.sender.id=this.decodeId(c.sender.id)}var u={mid:this.decodeId(c.id),text:a};t.push(u)}}}catch(e){console.error(O.getDateForLog()+": Pull: Could not parse message",e)}return t};E.prototype.extractPlainTextMessages=function(e){var t=[];var n=e.match(/#!NGINXNMS!#(.*?)#!NGINXNME!#/gm);if(n===null){text="\n========= PULL ERROR ===========\n"+"Error type: parseResponse error parsing message\n"+"\n"+"Data string: "+e+"\n"+"================================\n\n";console.warn(text);return t}for(var o=0;o<n.length;o++){n[o]=n[o].substring(12,n[o].length-12);if(n[o].length<=0){continue}try{var i=JSON.parse(n[o])}catch(e){continue}t.push(i)}return t};E.prototype.decodeId=function(e){if(!(e instanceof Uint8Array)){throw new Error("encodedId should be an instance of Uint8Array")}var t="";for(var n=0;n<e.length;n++){var o=e[n].toString(16);if(o.length===1){t+="0"}t+=o}return t};E.prototype.encodeId=function(e){if(!e){return new Uint8Array}var t=[];for(var n=0;n<e.length;n+=2){t.push(parseInt(e.substr(n,2),16))}return new Uint8Array(t)};E.prototype.broadcastMessages=function(t){t.forEach(function(t){var n=t.module_id=t.module_id.toLowerCase();var o=t.command;if(!t.extra){t.extra={}}if(t.extra.server_time_unix){t.extra.server_time_ago=(O.getTimestamp()-t.extra.server_time_unix*1e3)/1e3-(this.config.server.timeShift?this.config.server.timeShift:0);t.extra.server_time_ago=t.extra.server_time_ago>0?t.extra.server_time_ago:0}this.logMessage(t);try{if(t.extra.sender&&t.extra.sender.type===h.Client){if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullClientEvent-"+n,[o,t.params,t.extra],true);e.onCustomEvent(window,"onPullClientEvent",[n,o,t.params,t.extra],true)}this.emit({type:f.Client,moduleId:n,data:{command:o,params:O.clone(t.params),extra:O.clone(t.extra)}})}else if(n==="pull"){this.handleInternalPullEvent(o,t)}else if(n=="online"){if(t.extra.server_time_ago<240){if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullOnlineEvent",[o,t.params,t.extra],true)}this.emit({type:f.Online,data:{command:o,params:O.clone(t.params),extra:O.clone(t.extra)}})}}else{if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullEvent-"+n,[o,t.params,t.extra],true);e.onCustomEvent(window,"onPullEvent",[n,o,t.params,t.extra],true)}this.emit({type:f.Server,moduleId:n,data:{command:o,params:O.clone(t.params),extra:O.clone(t.extra)}})}}catch(n){if(typeof console=="object"){console.warn("\n========= PULL ERROR ===========\n"+"Error type: broadcastMessages execute error\n"+"Error event: ",n,"\n"+"Message: ",t,"\n"+"================================\n");if(typeof e.debug!=="undefined"){e.debug(n)}}}if(t.extra&&t.extra.revision_web){this.checkRevision(t.extra.revision_web)}},this)};E.prototype.logMessage=function(e){if(!this.debug){return}if(e.extra.sender&&e.extra.sender.type===h.Client){console.info("onPullClientEvent-"+e.module_id,e.command,e.params,e.extra)}else if(e.moduleId=="online"){console.info("onPullOnlineEvent",e.command,e.params,e.extra)}else{console.info("onPullEvent",e.module_id,e.command,e.params,e.extra)}};E.prototype.onLongPollingOpen=function(){this.unloading=false;this.starting=false;this.connectionAttempt=0;this.isManualDisconnect=false;this.sendPullStatus(l.Online);if(this.offlineTimeout){clearTimeout(this.offlineTimeout);this.offlineTimeout=null}console.log(O.getDateForLog()+": Pull: Long polling connection with push-server opened");if(this.isWebSocketEnabled()){this.scheduleRestoreWebSocketConnection()}};E.prototype.onWebSocketBlockChanged=function(e){var t=e.isWebSocketBlocked;if(t&&this.connectionType===u.WebSocket&&!this.isConnected()){clearTimeout(this.reconnectTimeout);this.connectionAttempt=0;this.connectionType=u.LongPolling;this.scheduleReconnect(1)}else if(!t&&this.connectionType===u.LongPolling){clearTimeout(this.reconnectTimeout);clearTimeout(this.restoreWebSocketTimeout);this.connectionAttempt=0;this.connectionType=u.WebSocket;this.scheduleReconnect(1)}};E.prototype.onWebSocketOpen=function(){this.unloading=false;this.starting=false;this.connectionAttempt=0;this.isManualDisconnect=false;this.sendPullStatus(l.Online);this.sharedConfig.setWebSocketBlocked(false);if(this.connectionType==u.LongPolling){this.connectionType=u.WebSocket;this._connectors.longPolling.disconnect()}if(this.offlineTimeout){clearTimeout(this.offlineTimeout);this.offlineTimeout=null}console.log(O.getDateForLog()+": Pull: Websocket connection with push-server opened")};E.prototype.onWebSocketDisconnect=function(e){if(this.connectionType===u.WebSocket){if(e.code!=d.CONFIG_EXPIRED&&e.code!=d.CHANNEL_EXPIRED&&e.code!=d.CONFIG_REPLACED){this.sendPullStatus(l.Offline)}else{this.offlineTimeout=setTimeout(function(){this.sendPullStatus(l.Offline)}.bind(this),5e3)}}if(!e){e={}}console.log(O.getDateForLog()+": Pull: Websocket connection with push-server closed. Code: "+e.code+", reason: "+e.reason);if(!this.isManualDisconnect){this.scheduleReconnect()}this.isManualDisconnect=false};E.prototype.onWebSocketError=function(e){this.starting=false;if(this.connectionType===u.WebSocket){this.sendPullStatus(l.Offline)}console.error(O.getDateForLog()+": Pull: WebSocket connection error",e);this.scheduleReconnect()};E.prototype.onLongPollingDisconnect=function(e){if(this.connectionType===u.LongPolling){if(e.code!=d.CONFIG_EXPIRED&&e.code!=d.CHANNEL_EXPIRED&&e.code!=d.CONFIG_REPLACED){this.sendPullStatus(l.Offline)}else{this.offlineTimeout=setTimeout(function(){this.sendPullStatus(l.Offline)}.bind(this),5500)}}if(!e){e={}}console.log(O.getDateForLog()+": Pull: Long polling connection with push-server closed. Code: "+e.code+", reason: "+e.reason);if(!this.isManualDisconnect){this.scheduleReconnect()}this.isManualDisconnect=false};E.prototype.onLongPollingError=function(e){this.starting=false;if(this.connectionType===u.LongPolling){this.sendPullStatus(l.Offline)}console.error(O.getDateForLog()+": Pull: Long polling connection error",e);this.scheduleReconnect()};E.prototype.isConnected=function(){return this.connector?this.connector.connected:false};E.prototype.onBeforeUnload=function(){this.unloading=true;var e=O.clone(this.session);e.ttl=(new Date).getTime()+a*1e3;if(this.storage){this.storage.set(c,JSON.stringify(e),a)}this.reconnect(d.NORMAL_CLOSURE,"onbeforeunload",15)};E.prototype.onOffline=function(){this.disconnect("1000","offline")};E.prototype.onOnline=function(){this.connect()};E.prototype.handleInternalPullEvent=function(e,t){switch(e.toUpperCase()){case p.CHANNEL_EXPIRE:{if(t.params.action=="reconnect"){this.config.channels[t.params.channel.type]=t.params.new_channel;console.info("Pull: new config for "+t.params.channel.type+" channel set:\n",this.config.channels[t.params.channel.type]);this.reconnect(d.CONFIG_REPLACED,"config was replaced")}else{this.restart(d.CHANNEL_EXPIRED,"channel expired")}break}case p.CONFIG_EXPIRE:{this.restart(d.CONFIG_EXPIRED,"config expired");break}case p.SERVER_RESTART:{this.reconnect(d.SERVER_RESTARTED,"server was restarted",15);break}default:}};E.prototype.checkRevision=function(t){if(this.skipCheckRevision){return true}t=parseInt(t);if(t>0&&t!=n){this.enabled=false;if(typeof e.message!=="undefined"){this.showNotification(e.message("PULL_OLD_REVISION"))}this.disconnect(d.NORMAL_CLOSURE,"check_revision");if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullRevisionUp",[t,n])}this.emit({type:f.Revision,data:{server:t,client:n}});console.log(O.getDateForLog()+": Pull revision changed from "+n+" to "+t+". Reload required");return false}return true};E.prototype.showNotification=function(t){var n=this;if(this.notificationPopup||typeof e.PopupWindow==="undefined")return;this.notificationPopup=new e.PopupWindow("bx-notifier-popup-confirm",null,{zIndex:200,autoHide:false,closeByEsc:false,overlay:true,content:e.create("div",{props:{className:"bx-messenger-confirm"},html:t}),buttons:[new e.PopupWindowButton({text:e.message("JS_CORE_WINDOW_CLOSE"),className:"popup-window-button-decline",events:{click:function(e){n.notificationPopup.close()}}})],events:{onPopupClose:function(){this.destroy()},onPopupDestroy:function(){n.notificationPopup=null}}});this.notificationPopup.show()};E.prototype.getRevision=function(){return this.config&&this.config.api?this.config.api.revision_web:null};E.prototype.getServerVersion=function(){return this.config&&this.config.server?this.config.server.version:0};E.prototype.getServerMode=function(){return this.config&&this.config.server?this.config.server.mode:null};E.prototype.getConfig=function(){return this.config};E.prototype.getDebugInfo=function(){if(!console||!console.info||!JSON||!JSON.stringify)return false;var e;if(this.config&&this.config.channels&&this.config.channels.private){e="ChannelID: "+this.config.channels.private.id+"\n"+"ChannelDie: "+this.config.channels.private.end+"\n"+"ChannelDieShared: "+this.config.channels.shared.end}else{e="Config error: config is not loaded"}var t=JSON.stringify(this.watchTagsQueue);var n="\n========= PULL DEBUG ===========\n"+"UserId: "+this.userId+" "+(this.userId>0?"":"(guest)")+"\n"+(this.guestMode&&this.guestUserId!==0?"Guest userId: "+this.guestUserId+"\n":"")+"Browser online: "+(navigator.onLine?"Y":"N")+"\n"+"Connect: "+(this.isConnected()?"Y":"N")+"\n"+"WebSocket support: "+(this.isWebSocketSupported()?"Y":"N")+"\n"+"WebSocket connect: "+(this._connectors.webSocket&&this._connectors.webSocket.connected?"Y":"N")+"\n"+"WebSocket mode: "+(this._connectors.webSocket&&this._connectors.webSocket.socket?this._connectors.webSocket.socket.url.search("binaryMode=true")!=-1?"protobuf":"text":"-")+"\n"+"Try connect: "+(this.reconnectTimeout?"Y":"N")+"\n"+"Try number: "+this.connectionAttempt+"\n"+"\n"+"Path: "+(this.connector?this.connector.path:"-")+"\n"+e+"\n"+"\n"+"Last message: "+(this.session.mid>0?this.session.mid:"-")+"\n"+"Session history: "+JSON.stringify(this.session.history)+"\n"+"Watch tags: "+(t=="{}"?"-":t)+"\n"+"================================\n";return console.info(n)};E.prototype.capturePullEvent=function(e){if(e===undefined){e=true}this.debug=e};E.prototype.getConnectionPath=function(e){var t;switch(e){case u.WebSocket:t=this.isSecure?this.config.server.websocket_secure:this.config.server.websocket;break;case u.LongPolling:t=this.isSecure?this.config.server.long_pooling_secure:this.config.server.long_polling;break;default:throw new Error("Unknown connection type "+e)}if(!O.isNotEmptyString(t)){return false}var o=[];["private","shared"].forEach(function(e){if(typeof this.config.channels[e]!=="undefined"){o.push(this.config.channels[e].id)}},this);if(o.length===0){return false}var i={CHANNEL_ID:o.join("/")};if(this.isProtobufSupported()){i.binaryMode="true"}if(this.isSharedMode()){if(!this.config.clientId){throw new Error("Push-server is in shared mode, but clientId is not set")}i.clientId=this.config.clientId}if(this.session.mid){i.mid=this.session.mid}if(this.session.tag){i.tag=this.session.tag}if(this.session.time){i.time=this.session.time}i.revision=n;return t+"?"+O.buildQueryString(i)};E.prototype.getPublicationPath=function(){var e=this.isSecure?this.config.server.publish_secure:this.config.server.publish;if(!e){return""}var t=[];for(var n in this.config.channels){if(!this.config.channels.hasOwnProperty(n)){continue}t.push(this.config.channels[n].id)}var o={CHANNEL_ID:t.join("/")};return e+"?"+O.buildQueryString(o)};E.prototype.getConnectionAttemptDelay=function(e){var t;if(e<1){t=.5}else if(e<3){t=15}else if(e<5){t=45}else if(e<10){t=600}else{t=3600}return t+t*Math.random()*.2};E.prototype.sendPullStatus=function(t){if(this.unloading){return}if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullStatus",[t])}this.emit({type:f.Status,data:{status:t}})};E.prototype.extendWatch=function(e,t){if(!e||this.watchTagsQueue[e]){return false}this.watchTagsQueue[e]=true;if(t){this.updateWatch(t)}};E.prototype.updateWatch=function(e){clearTimeout(this.watchUpdateTimeout);this.watchUpdateTimeout=setTimeout(function(){var e=Object.keys(this.watchTagsQueue);if(e.length>0){this.restClient.callMethod("pull.watch.extend",{tags:e},function(e){if(e.error()){this.updateWatch();return false}var t=e.data();for(var n in t){if(t.hasOwnProperty(n)&&!t[n]){this.clearWatch(n)}}this.updateWatch()}.bind(this))}else{this.updateWatch()}}.bind(this),e?this.watchForceUpdateInterval:this.watchUpdateInterval)};E.prototype.clearWatch=function(e){delete this.watchTagsQueue[e]};E.prototype.setPrivateVar=function(){};E.prototype.returnPrivateVar=function(){};E.prototype.expireConfig=function(){};E.prototype.updateChannelID=function(){};E.prototype.tryConnect=function(){};E.prototype.tryConnectDelay=function(){};E.prototype.tryConnectSet=function(){};E.prototype.updateState=function(){};E.prototype.setUpdateStateStepCount=function(){};E.prototype.supportWebSocket=function(){return this.isWebSocketSupported()};E.prototype.isWebSoketConnected=function(){return this.isConnected()&&this.connectionType==u.WebSocket};E.prototype.getPullServerStatus=function(){return this.isConnected()};E.prototype.closeConfirm=function(){if(this.notificationPopup){this.notificationPopup.destroy()}};var C=function(e){e=e||{};this.storage=e.storage||new L;this.ttl=24*60*60;this.lsKeys={websocketBlocked:"bx-pull-websocket-blocked"};this.callbacks={onWebSocketBlockChanged:O.isFunction(e.onWebSocketBlockChanged)?e.onWebSocketBlockChanged:function(){}};if(this.storage){window.addEventListener("storage",this.onLocalStorageSet.bind(this))}};C.prototype.onLocalStorageSet=function(e){if(this.storage.compareKey(e.key,this.lsKeys.websocketBlocked)&&e.newValue!=e.oldValue){this.callbacks.onWebSocketBlockChanged({isWebSocketBlocked:this.isWebSocketBlocked()})}};C.prototype.isWebSocketBlocked=function(){if(!this.storage){return false}return this.storage.get(this.lsKeys.websocketBlocked,0)>O.getTimestamp()};C.prototype.setWebSocketBlocked=function(e){if(!this.storage){return false}this.storage.set(this.lsKeys.websocketBlocked,e?O.getTimestamp()+this.ttl:0)};var w=function(e,t){var n=function(){};n.prototype=t.prototype;e.prototype=new n;e.prototype.constructor=e;e.superclass=t.prototype;if(t.prototype.constructor==Object.prototype.constructor){t.prototype.constructor=t}};var P=function(e){this.parent=e.parent;this.callbacks={onOpen:O.isFunction(e.onOpen)?e.onOpen:function(){},onDisconnect:O.isFunction(e.onDisconnect)?e.onDisconnect:function(){},onError:O.isFunction(e.onError)?e.onError:function(){},onMessage:O.isFunction(e.onMessage)?e.onMessage:function(){}};this._connected=false;this.connectionType="";this.disconnectCode="";this.disconnectReason="";Object.defineProperty(this,"connected",{get:function(){return this._connected},set:function(e){if(e==this._connected)return;this._connected=e;if(this._connected){this.callbacks.onOpen()}else{this.callbacks.onDisconnect({code:this.disconnectCode,reason:this.disconnectReason})}}});Object.defineProperty(this,"path",{get:function(){return this.parent.getConnectionPath(this.connectionType)}})};var _=function(e){_.superclass.constructor.apply(this,arguments);this.connectionType=u.WebSocket;this.socket=null;this.onSocketOpenHandler=this.onSocketOpen.bind(this);this.onSocketCloseHandler=this.onSocketClose.bind(this);this.onSocketErrorHandler=this.onSocketError.bind(this);this.onSocketMessageHandler=this.onSocketMessage.bind(this)};w(_,P);_.prototype.connect=function(){if(this.socket){if(this.socket.readyState===1){return true}else{this.socket.removeEventListener("open",this.onSocketOpenHandler);this.socket.removeEventListener("close",this.onSocketCloseHandler);this.socket.removeEventListener("error",this.onSocketErrorHandler);this.socket.removeEventListener("message",this.onSocketMessageHandler);this.socket.close();this.socket=null}}this.createSocket()};_.prototype.disconnect=function(e,t){if(this.socket!==null){this.socket.removeEventListener("open",this.onSocketOpenHandler);this.socket.removeEventListener("close",this.onSocketCloseHandler);this.socket.removeEventListener("error",this.onSocketErrorHandler);this.socket.removeEventListener("message",this.onSocketMessageHandler);this.socket.close(e,t)}this.socket=null;this.disconnectCode=e;this.disconnectReason=t;this.connected=false};_.prototype.createSocket=function(){if(this.socket){throw new Error("Socket already exists")}if(!this.path){throw new Error("Websocket connection path is not defined")}this.socket=new WebSocket(this.path);this.socket.binaryType="arraybuffer";this.socket.addEventListener("open",this.onSocketOpenHandler);this.socket.addEventListener("close",this.onSocketCloseHandler);this.socket.addEventListener("error",this.onSocketErrorHandler);this.socket.addEventListener("message",this.onSocketMessageHandler)};_.prototype.send=function(e){if(!this.socket||this.socket.readyState!==1){console.error(O.getDateForLog()+": Pull: WebSocket is not connected");return false}this.socket.send(e)};_.prototype.onSocketOpen=function(){this.connected=true};_.prototype.onSocketClose=function(e){this.socket=null;this.disconnectCode=e.code;this.disconnectReason=e.reason;this.connected=false};_.prototype.onSocketError=function(e){this.callbacks.onError(e)};_.prototype.onSocketMessage=function(e){this.callbacks.onMessage(e.data)};_.prototype.destroy=function(){if(this.socket){this.socket.close();this.socket=null}};var T=function(e){T.superclass.constructor.apply(this,arguments);this.active=false;this.connectionType=u.LongPolling;this.requestTimeout=null;this.failureTimeout=null;this.xhr=this.createXhr();this.requestAborted=false};w(T,P);T.prototype.createXhr=function(){var e=new XMLHttpRequest;if(this.parent.isProtobufSupported()){e.responseType="arraybuffer"}e.addEventListener("readystatechange",this.onXhrReadyStateChange.bind(this));return e};T.prototype.connect=function(){this.active=true;this.performRequest()};T.prototype.disconnect=function(e,t){this.active=false;if(this.failureTimeout){clearTimeout(this.failureTimeout);this.failureTimeout=null}if(this.requestTimeout){clearTimeout(this.requestTimeout);this.requestTimeout=null}if(this.xhr){this.requestAborted=true;this.xhr.abort()}this.disconnectCode=e;this.disconnectReason=t;this.connected=false};T.prototype.performRequest=function(){var e=this;if(!this.active)return;if(!this.path){throw new Error("Long polling connection path is not defined")}if(this.xhr.readyState!==0&&this.xhr.readyState!==4){return}clearTimeout(this.failureTimeout);clearTimeout(this.requestTimeout);this.failureTimeout=setTimeout(function(){e.connected=true},5e3);this.requestTimeout=setTimeout(this.onRequestTimeout.bind(this),o*1e3);this.xhr.open("GET",this.path);this.xhr.send()};T.prototype.onRequestTimeout=function(){this.requestAborted=true;this.xhr.abort();this.performRequest()};T.prototype.onXhrReadyStateChange=function(e){if(this.xhr.readyState===4){if(!this.requestAborted||this.xhr.status==200){this.onResponse(this.xhr.response)}this.requestAborted=false}};T.prototype.send=function(e){var t=this.parent.getPublicationPath();if(!t){console.error(O.getDateForLog()+": Pull: publication path is empty");return false}var n=new XMLHttpRequest;n.open("POST",t);n.send(e)};T.prototype.onResponse=function(e){if(this.failureTimeout){clearTimeout(this.failureTimeout);this.failureTimeout=0}if(this.requestTimeout){clearTimeout(this.requestTimeout);this.requestTimeout=0}if(this.xhr.status==200){this.connected=true;if(O.isNotEmptyString(e)||e instanceof ArrayBuffer){this.callbacks.onMessage(e)}else{this.parent.session.mid=null}this.performRequest()}else if(this.xhr.status==304){this.connected=true;if(this.xhr.getResponseHeader("Expires")==="Thu, 01 Jan 1973 11:11:01 GMT"){var t=this.xhr.getResponseHeader("Last-Message-Id");if(O.isNotEmptyString(t)){this.parent.setLastMessageId(t)}}this.performRequest()}else{this.callbacks.onError("Could not connect to the server");this.connected=false}};var R=function(t){this.publicIds={};this.restClient=typeof t.restClient!=="undefined"?t.restClient:e.rest};R.prototype.getPublicIds=function(t){var n=new e.Promise;var o={};var i=new Date;var s=[];for(var r=0;r<t.length;r++){var c=t[r];if(this.publicIds[c]&&this.publicIds[c]["end"]>i){o[c]=this.publicIds[c]}else{s.push(c)}}if(s.length===0){n.resolve(o);return n}this.restClient.callMethod("pull.channel.public.list",{users:s},function(e){if(e.error()){n.resolve({});return n}var t=e.data();this.setPublicIds(O.objectValues(t));s.forEach(function(t){e[t]=this.publicIds[t]},this);n.resolve(e)}.bind(this));return n};R.prototype.setPublicIds=function(e){for(var t=0;t<e.length;t++){var n=e[t];var o=n.user_id;this.publicIds[o]={userId:o,publicId:n.public_id,signature:n.signature,start:new Date(n.start),end:new Date(n.end)}}};var L=function(t){t=t||{};this.userId=t.userId?t.userId:typeof e.message!=="undefined"&&e.message.USER_ID?e.message.USER_ID:0;this.siteId=t.siteId?t.siteId:typeof e.message!=="undefined"&&e.message.SITE_ID?e.message.SITE_ID:"none"};L.prototype.set=function(e,t){if(typeof window.localStorage==="undefined"){return false}if(typeof t!="string"){if(t){t=JSON.stringify(t)}}return window.localStorage.setItem(this.getKey(e),t)};L.prototype.get=function(e,t){if(typeof window.localStorage==="undefined"){return t||null}var n=window.localStorage.getItem(this.getKey(e));if(n===null){return t||null}return JSON.parse(n)};L.prototype.remove=function(e){if(typeof window.localStorage==="undefined"){return false}return window.localStorage.removeItem(this.getKey(e))};L.prototype.getKey=function(e){return"bx-pull-"+this.userId+"-"+this.siteId+"-"+e};L.prototype.compareKey=function(e,t){return e===this.getKey(t)};var O={browser:{IsChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")!=-1},IsFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")!=-1},IsIe:function(){return navigator.userAgent.match(/(Trident\/|MSIE\/)/)!==null}},getTimestamp:function(){return(new Date).getTime()},errorsToString:function(e){if(!this.isArray(e)){return""}else{return e.reduce(function(e,t){if(e!=""){e+="; "}return e+t.code+": "+t.message},"")}},isString:function(e){return e===""?true:e?typeof e=="string"||e instanceof String:false},isArray:function(e){return e&&Object.prototype.toString.call(e)=="[object Array]"},isFunction:function(e){return e===null?false:typeof e=="function"||e instanceof Function},isDomNode:function(e){return e&&typeof e=="object"&&"nodeType"in e},isDate:function(e){return e&&Object.prototype.toString.call(e)=="[object Date]"},isPlainObject:function(e){if(!e||typeof e!=="object"||e.nodeType){return false}var t=Object.prototype.hasOwnProperty;try{if(e.constructor&&!t.call(e,"constructor")&&!t.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var n;for(n in e){}return typeof n==="undefined"||t.call(e,n)},isNotEmptyString:function(e){return this.isString(e)?e.length>0:false},buildQueryString:function(e){var t="";for(var n in e){if(!e.hasOwnProperty(n)){continue}var o=e[n];if(O.isArray(o)){o.forEach(function(e,o){t+=encodeURIComponent(n+"["+o+"]")+"="+encodeURIComponent(e)+"&"})}else{t+=encodeURIComponent(n)+"="+encodeURIComponent(o)+"&"}}if(t.length>0){t=t.substr(0,t.length-1)}return t},objectValues:function e(t){var n=[];for(var o in t){if(t.hasOwnProperty(o)&&t.propertyIsEnumerable(o)){n.push(t[o])}}return n},clone:function(e,t){var n,o,i;if(t!==false)t=true;if(e===null)return null;if(this.isDomNode(e)){n=e.cloneNode(t)}else if(typeof e=="object"){if(this.isArray(e)){n=[];for(o=0,i=e.length;o<i;o++){if(typeof e[o]=="object"&&t)n[o]=this.clone(e[o],t);else n[o]=e[o]}}else{n={};if(e.constructor){if(this.isDate(e))n=new Date(e);else n=new e.constructor}for(o in e){if(!e.hasOwnProperty(o)){continue}if(typeof e[o]=="object"&&t)n[o]=this.clone(e[o],t);else n[o]=e[o]}}}else{n=e}return n},getDateForLog:function(){var e=new Date;return e.getFullYear()+"-"+O.lpad(e.getMonth(),2,"0")+"-"+O.lpad(e.getDate(),2,"0")+" "+O.lpad(e.getHours(),2,"0")+":"+O.lpad(e.getMinutes(),2,"0")},lpad:function(e,t,n){e=e.toString();n=n||" ";if(e.length>t){return e}var o="";for(var i=0;i<t-e.length;i++){o+=n}return o+e}};if(typeof e.namespace!=="undefined"&&typeof e.PULL==="undefined"){e.PULL=new E}e.PullClient=E;e.PullClient.PullStatus=l;e.PullClient.SubscriptionType=f;e.PullClient.CloseReasons=d})();
 



// file: /bitrix/js/pull/components/status/dist/status.bundle.js
(function(t,s,i){"use strict";s.Vue.component("bx-pull-status",{props:{canReconnect:{default:false}},data:function t(){return{status:i.PullClient.PullStatus.Online,showed:null}},created:function t(){var s=this;this.isMac=navigator.userAgent.toLowerCase().includes("macintosh");this.setStatusTimeout=null;this.hideTimeout=null;this.pullUnSubscribe=function(){};if(typeof this.$root.$bitrixPullClient!=="undefined"){if(this.$root.$bitrixPullClient){this.subscribe(this.$root.$bitrixPullClient)}else{this.$root.$on("onBitrixPullClientInited",function(){s.subscribe(s.$root.$bitrixPullClient)})}}else if(typeof BX.PULL!=="undefined"){this.subscribe(BX.PULL)}window.component=this},beforeDestroy:function t(){this.pullUnSubscribe()},methods:{subscribe:function t(s){var e=this;this.pullUnSubscribe=s.subscribe({type:i.PullClient.SubscriptionType.Status,callback:function t(s){return e.statusChange(s.status)}})},reconnect:function t(){if(this.canReconnect){this.$emit("reconnect")}else{location.reload()}},statusChange:function t(s){var e=this;clearTimeout(this.setStatusTimeout);if(this.status===s){return false}var l=[i.PullClient.PullStatus.Online,i.PullClient.PullStatus.Offline,i.PullClient.PullStatus.Connecting];if(l.indexOf(s)<0){return false}var n=500;if(s===i.PullClient.PullStatus.Connecting){n=5e3}else if(s===i.PullClient.PullStatus.Offline){n=2e3}this.setStatusTimeout=setTimeout(function(){e.status=s;e.showed=true},n);return true}},watch:{status:function t(){var s=this;clearTimeout(this.hideTimeout);if(this.status==i.PullClient.PullStatus.Online){clearTimeout(this.hideTimeout);this.hideTimeout=setTimeout(function(){return s.showed=false},4e3)}}},computed:{connectionClass:function t(){var s="";if(this.showed===true){s="bx-pull-status-show"}else if(this.showed===false){s="bx-pull-status-hide"}if(this.status===i.PullClient.PullStatus.Online){s+=" bx-pull-status-online"}else if(this.status===i.PullClient.PullStatus.Offline){s+=" bx-pull-status-offline"}else if(this.status===i.PullClient.PullStatus.Connecting){s+=" bx-pull-status-connecting"}return s},connectionText:function t(){var s="";if(this.status===i.PullClient.PullStatus.Online){s=this.localize.BX_PULL_STATUS_ONLINE}else if(this.status===i.PullClient.PullStatus.Offline){s=this.localize.BX_PULL_STATUS_OFFLINE}else if(this.status===i.PullClient.PullStatus.Connecting){s=this.localize.BX_PULL_STATUS_CONNECTING}return s},button:function t(){var s="";var i="";if(this.canReconnect){i=this.localize.BX_PULL_STATUS_BUTTON_RECONNECT}else{s=this.isMac?"&#8984;+R":"Ctrl+R";i=this.localize.BX_PULL_STATUS_BUTTON_RELOAD}return{title:i,key:s}},localize:function t(){return s.Vue.getFilteredPhrases("BX_PULL_STATUS_",this.$root.$bitrixMessages)}},template:'\n\t\t<div :class="[\'bx-pull-status\', connectionClass]">\n\t\t\t<div class="bx-pull-status-wrap">\n\t\t\t\t<span class="bx-pull-status-text">{{connectionText}}</span>\n\t\t\t\t<span class="bx-pull-status-button" @click="reconnect">\n\t\t\t\t\t<span class="bx-pull-status-button-title">{{button.title}}</span>\n\t\t\t\t\t<span class="bx-pull-status-button-key" v-html="button.key"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX);
 



// file: /bitrix/js/main/polyfill/intersectionobserver/js/intersectionobserver.js
(function(t,e){"use strict";if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype){if(!("isIntersecting"in t.IntersectionObserverEntry.prototype)){Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}})}return}var r=[];function n(t){this.time=t.time;this.target=t.target;this.rootBounds=t.rootBounds;this.boundingClientRect=t.boundingClientRect;this.intersectionRect=t.intersectionRect||f();this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect;var r=e.width*e.height;var n=this.intersectionRect;var i=n.width*n.height;if(r){this.intersectionRatio=i/r}else{this.intersectionRatio=this.isIntersecting?1:0}}function i(t,e){var r=e||{};if(typeof t!=="function"){throw new Error("callback must be a function")}if(r.root&&r.root.nodeType!==1){throw new Error("root must be an Element")}this._checkForIntersections=s(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=t;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(r.rootMargin);this.thresholds=this._initThresholds(r.threshold);this.root=r.root||null;this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}i.prototype.THROTTLE_TIMEOUT=100;i.prototype.POLL_INTERVAL=null;i.prototype.USE_MUTATION_OBSERVER=true;i.prototype.observe=function(t){var e=this._observationTargets.some(function(e){return e.element===t});if(e){return}if(!(t&&t.nodeType===1)){throw new Error("target must be an Element")}this._registerInstance();this._observationTargets.push({element:t,entry:null});this._monitorIntersections();this._checkForIntersections()};i.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!==t});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance()}};i.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};i.prototype.takeRecords=function(){var t=this._queuedEntries.slice();this._queuedEntries=[];return t};i.prototype._initThresholds=function(t){var e=t||[0];if(!Array.isArray(e)){e=[e]}return e.sort().filter(function(t,e,r){if(typeof t!=="number"||isNaN(t)||t<0||t>1){throw new Error("threshold must be a number between 0 and 1 inclusively")}return t!==r[e-1]})};i.prototype._parseRootMargin=function(t){var e=t||"0px";var r=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e){throw new Error("rootMargin must be specified in pixels or percent")}return{value:parseFloat(e[1]),unit:e[2]}});r[1]=r[1]||r[0];r[2]=r[2]||r[0];r[3]=r[3]||r[1];return r};i.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL){this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL)}else{h(t,"resize",this._checkForIntersections,true);h(e,"scroll",this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&"MutationObserver"in t){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(e,{attributes:true,childList:true,characterData:true,subtree:true})}}}};i.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;c(t,"resize",this._checkForIntersections,true);c(e,"scroll",this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null}}};i.prototype._checkForIntersections=function(){var t=this._rootIsInDom();var e=t?this._getRootRect():f();this._observationTargets.forEach(function(r){var i=r.element;var s=u(i);var h=this._rootContainsTarget(i);var c=r.entry;var a=t&&h&&this._computeTargetAndRootIntersection(i,e);var f=r.entry=new n({time:o(),target:i,boundingClientRect:s,rootBounds:e,intersectionRect:a});if(!c){this._queuedEntries.push(f)}else if(t&&h){if(this._hasCrossedThreshold(c,f)){this._queuedEntries.push(f)}}else{if(c&&c.isIntersecting){this._queuedEntries.push(f)}}},this);if(this._queuedEntries.length){this._callback(this.takeRecords(),this)}};i.prototype._computeTargetAndRootIntersection=function(r,n){if(t.getComputedStyle(r).display==="none"){return}var i=u(r);var o=p(r);var s=false;while(!s){var h=null;var c=o.nodeType===1?t.getComputedStyle(o):{};if(c.display=="none"){return}if(o===this.root||o===e){s=true;h=n}else{if(o!=e.body&&o!=e.documentElement&&c.overflow!="visible"){h=u(o)}}if(h){i=a(h,i);if(!i){break}}o=p(o)}return i};i.prototype._getRootRect=function(){var t;if(this.root){t=u(this.root)}else{var r=e.documentElement;var n=e.body;t={top:0,left:0,right:r.clientWidth||n.clientWidth,width:r.clientWidth||n.clientWidth,bottom:r.clientHeight||n.clientHeight,height:r.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)};i.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,r){return e.unit==="px"?e.value:e.value*(r%2?t.width:t.height)/100});var r={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};r.width=r.right-r.left;r.height=r.bottom-r.top;return r};i.prototype._hasCrossedThreshold=function(t,e){var r=t&&t.isIntersecting?t.intersectionRatio||0:-1;var n=e.isIntersecting?e.intersectionRatio||0:-1;if(r===n){return}for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==r||o==n||o<r!==o<n){return true}}};i.prototype._rootIsInDom=function(){return!this.root||l(e,this.root)};i.prototype._rootContainsTarget=function(t){return l(this.root||e,t)};i.prototype._registerInstance=function(){if(r.indexOf(this)<0){r.push(this)}};i.prototype._unregisterInstance=function(){var t=r.indexOf(this);if(t!==-1){r.splice(t,1)}};function o(){return t.performance&&performance.now&&performance.now()}function s(t,e){var r=null;return function(){if(!r){r=setTimeout(function(){t();r=null},e)}}}function h(t,e,r,n){if(typeof t.addEventListener=="function"){t.addEventListener(e,r,n||false)}else if(typeof t.attachEvent==="function"){t.attachEvent("on"+e,r)}}function c(t,e,r,n){if(typeof t.removeEventListener==="function"){t.removeEventListener(e,r,n||false)}else if(typeof t.detatchEvent==="function"){t.detatchEvent("on"+e,r)}}function a(t,e){var r=Math.max(t.top,e.top);var n=Math.min(t.bottom,e.bottom);var i=Math.max(t.left,e.left);var o=Math.min(t.right,e.right);var s=o-i;var h=n-r;return s>=0&&h>=0&&{top:r,bottom:n,left:i,right:o,width:s,height:h}}function u(t){var e;try{e=t.getBoundingClientRect()}catch(t){}if(!e){return f()}if(!(e.width&&e.height)){e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}}return e}function f(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t,e){var r=e;while(r){if(r===t){return true}r=p(r)}return false}function p(t){var e=t.parentNode;if(e&&e.nodeType==11&&e.host){return e.host}return e}t.IntersectionObserver=i;t.IntersectionObserverEntry=n})(window,document);



// file: /bitrix/js/ui/vue/directives/lazyload/dist/lazyload.bundle.js
(function(a,s){"use strict";var l="bx-lazyload-watch";var e="bx-lazyload-loading";var t="bx-lazyload-success";var o="bx-lazyload-error";var c="bx-lazyload-hidden";var r="data:image/svg+xml,%3Csvg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'%3E%3C/svg%3E";var i=null;var d=function a(s,r){var d=s.dataset.lazyloadSuccessClass?s.dataset.lazyloadSuccessClass.split(" "):[];delete s.dataset.lazyloadSuccessClass;d=[t].concat(babelHelpers.toConsumableArray(d));var n=s.dataset.lazyloadErrorClass?s.dataset.lazyloadErrorClass.split(" "):[];delete s.dataset.lazyloadErrorClass;n=[o].concat(babelHelpers.toConsumableArray(n));s.classList.add(e);var f=new Image;f.src=s.dataset.lazyloadSrc;if(!s.dataset.lazyloadHiddenSrc){s.dataset.lazyloadHiddenSrc=s.src}f.onload=function(){var a;if(s.classList.contains(c)){return false}if(s.dataset.lazyloadSrc){s.src=s.dataset.lazyloadSrc}s.classList.remove(e);(a=s.classList).add.apply(a,babelHelpers.toConsumableArray(d));if(typeof s.lazyloadCallback==="function"){s.lazyloadCallback({element:s,state:"success"});delete s.lazyloadCallback}};f.onerror=function(){var a;if(s.classList.contains(c)){return false}s.classList.remove(e);(a=s.classList).add.apply(a,babelHelpers.toConsumableArray(n));s.title="";s.alt="";if(typeof s.lazyloadCallback==="function"){s.lazyloadCallback({element:s,state:"error"});delete s.lazyloadCallback}};if(typeof s.dataset.lazyloadDontHide!=="undefined"){s.classList.remove(l);delete s.dataset.lazyloadDontHide;if(i){i.unobserve(s)}}};if(typeof window.IntersectionObserver!=="undefined"){i=new IntersectionObserver(function(a,s){a.forEach(function(a){var s=a.target;if(a.isIntersecting){if(s.classList.contains(c)){if(s.dataset.lazyloadSrc){s.src=s.dataset.lazyloadSrc}s.classList.remove(c)}else if(s.classList.contains(l)){return true}else{s.classList.add(l);d(s)}}else{if(s.classList.contains(c)||!s.classList.contains(l)){return true}if(s.dataset.lazyloadHiddenSrc){s.src=s.dataset.lazyloadHiddenSrc}s.classList.remove(e);s.classList.add(c)}})},{threshold:[0,1]})}s.Vue.directive("bx-lazyload",{bind:function a(s,l){if(babelHelpers.typeof(l.value)==="object"&&typeof l.value.callback==="function"){s.lazyloadCallback=l.value.callback}if(!s.src||s.src===location.href.replace(location.hash,"")){s.src=r}if(i){i.observe(s)}else{d(s)}},componentUpdated:function a(s){if(!s.classList.contains(t)&&!s.classList.contains(o)&&!s.classList.contains(l)&&!s.classList.contains(e)){s.classList.add(e)}else if((s.classList.contains(t)||s.classList.contains(o))&&s.dataset.lazyloadSrc&&s.dataset.lazyloadSrc!==s.src){if(!s.dataset.lazyloadSrc.startsWith("http")){var c=document.createElement("a");c.href=s.dataset.lazyloadSrc;if(c.href===s.src){return}}d(s)}},unbind:function a(s){if(i){i.unobserve(s)}}})})(this.window=this.window||{},BX);
 



// file: /bitrix/js/ui/dexie/dist/dexie.bitrix.bundle.js
(function(e){"use strict";var n=Object.keys;var t=Array.isArray;var r=typeof self!=="undefined"?self:typeof window!=="undefined"?window:global;function i(e,t){if(babelHelpers.typeof(t)!=="object")return e;n(t).forEach(function(n){e[n]=t[n]});return e}var o=Object.getPrototypeOf;var u={}.hasOwnProperty;function a(e,n){return u.call(e,n)}function s(e,t){if(typeof t==="function")t=t(o(e));if(babelHelpers.typeof(t)!=="object")return;n(t).forEach(function(n){f(e,n,t[n])})}var c=Object.defineProperty;function f(e,n,t,r){c(e,n,i(t&&a(t,"get")&&typeof t.get==="function"?{get:t.get,set:t.set,configurable:true}:{value:t,configurable:true,writable:true},r))}function l(e){return{from:function n(t){e.prototype=Object.create(t.prototype);f(e.prototype,"constructor",e);return{extend:s.bind(null,e.prototype)}}}}var h=Object.getOwnPropertyDescriptor;function d(e,n){var t=h(e,n),r;return t||(r=o(e))&&d(r,n)}var v=[].slice;function p(e,n,t){return v.call(e,n,t)}function y(e,n){return n(e)}function m(e){if(!e)throw new Error("Assertion Failed")}function g(e){if(r.setImmediate)setImmediate(e);else setTimeout(e,0)}function b(e,n){return e.reduce(function(e,t,r){var i=n(t,r);if(i)e[i[0]]=i[1];return e},{})}function w(e,n){return function(){try{e.apply(this,arguments)}catch(e){n(e)}}}function _(e,n,t){try{e.apply(null,t)}catch(e){n&&n(e)}}function k(e,n){if(a(e,n))return e[n];if(!n)return e;if(typeof n!=="string"){var t=[];for(var r=0,i=n.length;r<i;++r){var o=k(e,n[r]);t.push(o)}return t}var u=n.indexOf(".");if(u!==-1){var s=e[n.substr(0,u)];return s===undefined?undefined:k(s,n.substr(u+1))}return undefined}function x(e,n,t){if(!e||n===undefined)return;if("isFrozen"in Object&&Object.isFrozen(e))return;if(typeof n!=="string"&&"length"in n){m(typeof t!=="string"&&"length"in t);for(var r=0,i=n.length;r<i;++r){x(e,n[r],t[r])}}else{var o=n.indexOf(".");if(o!==-1){var u=n.substr(0,o);var a=n.substr(o+1);if(a===""){if(t===undefined)delete e[u];else e[u]=t}else{var s=e[u];if(!s)s=e[u]={};x(s,a,t)}}else{if(t===undefined)delete e[n];else e[n]=t}}}function P(e,n){if(typeof n==="string")x(e,n,undefined);else if("length"in n)[].map.call(n,function(n){x(e,n,undefined)})}function j(e){var n={};for(var t in e){if(a(e,t))n[t]=e[t]}return n}var E=[].concat;function S(e){return E.apply([],e)}var O="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(S([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return r[e]}).map(function(e){return r[e]});function A(e){if(!e||babelHelpers.typeof(e)!=="object")return e;var n;if(t(e)){n=[];for(var r=0,i=e.length;r<i;++r){n.push(A(e[r]))}}else if(O.indexOf(e.constructor)>=0){n=e}else{n=e.constructor?Object.create(e.constructor.prototype):{};for(var o in e){if(a(e,o)){n[o]=A(e[o])}}}return n}function I(e,t,r,i){r=r||{};i=i||"";n(e).forEach(function(n){if(!a(t,n))r[i+n]=undefined;else{var o=e[n],u=t[n];if(babelHelpers.typeof(o)==="object"&&babelHelpers.typeof(u)==="object"&&o&&u&&""+o.constructor===""+u.constructor)I(o,u,r,i+n+".");else if(o!==u)r[i+n]=t[n]}});n(t).forEach(function(n){if(!a(e,n)){r[i+n]=t[n]}});return r}var D=typeof Symbol!=="undefined"&&Symbol.iterator;var C=D?function(e){var n;return e!=null&&(n=e[D])&&n.apply(e)}:function(){return null};var K={};function T(e){var n,r,i,o;if(arguments.length===1){if(t(e))return e.slice();if(this===K&&typeof e==="string")return[e];if(o=C(e)){r=[];while(i=o.next(),!i.done){r.push(i.value)}return r}if(e==null)return[e];n=e.length;if(typeof n==="number"){r=new Array(n);while(n--){r[n]=e[n]}return r}return[e]}n=arguments.length;r=new Array(n);while(n--){r[n]=arguments[n]}return r}var B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(e,n){B=e;M=n}var M=function e(){return true};var N=!new Error("").stack;function q(){if(N)try{throw new Error}catch(e){return e}return new Error}function R(e,n){var t=e.stack;if(!t)return"";n=n||0;if(t.indexOf(e.name)===0)n+=(e.name+e.message).split("\n").length;return t.split("\n").slice(n).filter(M).map(function(e){return"\n"+e}).join("")}function U(e,n){return function(){console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+R(q(),1));return n.apply(this,arguments)}}var H=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var z=H.concat(V);var L={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function W(e,n){this._e=q();this.name=e;this.message=n}l(W).from(Error).extend({stack:{get:function e(){return this._stack||(this._stack=this.name+": "+this.message+R(this._e,2))}},toString:function e(){return this.name+": "+this.message}});function Q(e,n){return e+". Errors: "+n.map(function(e){return e.toString()}).filter(function(e,n,t){return t.indexOf(e)===n}).join("\n")}function G(e,n,t,r){this._e=q();this.failures=n;this.failedKeys=r;this.successCount=t}l(G).from(W);function J(e,n){this._e=q();this.name="BulkError";this.failures=n;this.message=Q(e,n)}l(J).from(W);var X=z.reduce(function(e,n){return e[n]=n+"Error",e},{});var Y=W;var $=z.reduce(function(e,n){var t=n+"Error";function r(e,r){this._e=q();this.name=t;if(!e){this.message=L[n]||t;this.inner=null}else if(typeof e==="string"){this.message=e;this.inner=r||null}else if(babelHelpers.typeof(e)==="object"){this.message=e.name+" "+e.message;this.inner=e}}l(r).from(Y);e[n]=r;return e},{});$.Syntax=SyntaxError;$.Type=TypeError;$.Range=RangeError;var Z=V.reduce(function(e,n){e[n+"Error"]=$[n];return e},{});function ee(e,n){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Z[e.name])return e;var t=new Z[e.name](n||e.message,e);if("stack"in e){f(t,"stack",{get:function e(){return this.inner.stack}})}return t}var ne=z.reduce(function(e,n){if(["Syntax","Type","Range"].indexOf(n)===-1)e[n+"Error"]=$[n];return e},{});ne.ModifyError=G;ne.DexieError=W;ne.BulkError=J;function te(){}function re(e){return e}function ie(e,n){if(e==null||e===re)return n;return function(t){return n(e(t))}}function oe(e,n){return function(){e.apply(this,arguments);n.apply(this,arguments)}}function ue(e,n){if(e===te)return n;return function(){var t=e.apply(this,arguments);if(t!==undefined)arguments[0]=t;var r=this.onsuccess,i=this.onerror;this.onsuccess=null;this.onerror=null;var o=n.apply(this,arguments);if(r)this.onsuccess=this.onsuccess?oe(r,this.onsuccess):r;if(i)this.onerror=this.onerror?oe(i,this.onerror):i;return o!==undefined?o:t}}function ae(e,n){if(e===te)return n;return function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null;n.apply(this,arguments);if(t)this.onsuccess=this.onsuccess?oe(t,this.onsuccess):t;if(r)this.onerror=this.onerror?oe(r,this.onerror):r}}function se(e,n){if(e===te)return n;return function(t){var r=e.apply(this,arguments);i(t,r);var o=this.onsuccess,u=this.onerror;this.onsuccess=null;this.onerror=null;var a=n.apply(this,arguments);if(o)this.onsuccess=this.onsuccess?oe(o,this.onsuccess):o;if(u)this.onerror=this.onerror?oe(u,this.onerror):u;return r===undefined?a===undefined?undefined:a:i(r,a)}}function ce(e,n){if(e===te)return n;return function(){if(n.apply(this,arguments)===false)return false;return e.apply(this,arguments)}}function fe(e,n){if(e===te)return n;return function(){var t=e.apply(this,arguments);if(t&&typeof t.then==="function"){var r=this,i=arguments.length,o=new Array(i);while(i--){o[i]=arguments[i]}return t.then(function(){return n.apply(r,o)})}return n.apply(this,arguments)}}var le={};var he=100;var de=20;var ve=7;var pe=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(n){var e=r.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}();var ye=pe[0];var me=pe[1];var ge=pe[2];var be=me&&me.then;var we=ye&&ye.constructor;var _e=pe[3];var ke=!!ge;var xe=false;var Pe=ge?function(){ge.then(Qe)}:r.setImmediate?setImmediate.bind(null,Qe):r.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Qe();e=null}).observe(e,{attributes:true});e.setAttribute("i","1")}:function(){setTimeout(Qe,0)};var je=function e(n,t){Te.push([n,t]);if(Se){Pe();Se=false}};var Ee=true;var Se=true;var Oe=[];var Ae=[];var Ie=null;var De=re;var Ce={id:"global",global:true,ref:0,unhandleds:[],onunhandled:kn,pgp:false,env:{},finalize:function e(){this.unhandleds.forEach(function(e){try{kn(e[0],e[1])}catch(e){}})}};var Ke=Ce;var Te=[];var Be=0;var Fe=[];function Me(e){if(babelHelpers.typeof(this)!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=te;this._lib=false;var n=this._PSD=Ke;if(B){this._stackHolder=q();this._prev=null;this._numPrev=0}if(typeof e!=="function"){if(e!==le)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(this._state===false)Ue(this,this._value);return}this._state=null;this._value=null;++n.ref;Re(this,e)}var Ne={get:function e(){var n=Ke,t=an;function r(e,r){var i=this;var o=!n.global&&(n!==Ke||t!==an);if(o)ln();var u=new Me(function(t,u){Ve(i,new qe(bn(e,n,o),bn(r,n,o),t,u,n))});B&&We(u,this);return u}r.prototype=le;return r},set:function e(n){f(this,"then",n&&n.prototype===le?Ne:{get:function e(){return n},set:Ne.set})}};s(Me.prototype,{then:Ne,_then:function e(n,t){Ve(this,new qe(null,null,n,t,Ke))},catch:function e(n){if(arguments.length===1)return this.then(null,n);var t=arguments[0],r=arguments[1];return typeof t==="function"?this.then(null,function(e){return e instanceof t?r(e):en(e)}):this.then(null,function(e){return e&&e.name===t?r(e):en(e)})},finally:function e(n){return this.then(function(e){n();return e},function(e){n();return en(e)})},stack:{get:function e(){if(this._stack)return this._stack;try{xe=true;var n=Le(this,[],de);var t=n.join("\nFrom previous: ");if(this._state!==null)this._stack=t;return t}finally{xe=false}}},timeout:function e(n,t){var r=this;return n<Infinity?new Me(function(e,i){var o=setTimeout(function(){return i(new $.Timeout(t))},n);r.then(e,i).finally(clearTimeout.bind(null,o))}):this}});if(typeof Symbol!=="undefined"&&Symbol.toStringTag)f(Me.prototype,Symbol.toStringTag,"Promise");Ce.env=yn();function qe(e,n,t,r,i){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof n==="function"?n:null;this.resolve=t;this.reject=r;this.psd=i}s(Me,{all:function e(){var n=T.apply(null,arguments).map(hn);return new Me(function(e,t){if(n.length===0)e([]);var r=n.length;n.forEach(function(i,o){return Me.resolve(i).then(function(t){n[o]=t;if(!--r)e(n)},t)})})},resolve:function e(n){if(n instanceof Me)return n;if(n&&typeof n.then==="function")return new Me(function(e,t){n.then(e,t)});var t=new Me(le,true,n);We(t,Ie);return t},reject:en,race:function e(){var n=T.apply(null,arguments).map(hn);return new Me(function(e,t){n.map(function(n){return Me.resolve(n).then(e,t)})})},PSD:{get:function e(){return Ke},set:function e(n){return Ke=n}},newPSD:cn,usePSD:mn,scheduler:{get:function e(){return je},set:function e(n){je=n}},rejectionMapper:{get:function e(){return De},set:function e(n){De=n}},follow:function e(n,t){return new Me(function(e,r){return cn(function(e,t){var r=Ke;r.unhandleds=[];r.onunhandled=t;r.finalize=oe(function(){var n=this;Ye(function(){n.unhandleds.length===0?e():t(n.unhandleds[0])})},r.finalize);n()},t,e,r)})}});function Re(e,n){try{n(function(n){if(e._state!==null)return;if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var t=e._lib&&Ge();if(n&&typeof n.then==="function"){Re(e,function(e,t){n instanceof Me?n._then(e,t):n.then(e,t)})}else{e._state=true;e._value=n;He(e)}if(t)Je()},Ue.bind(null,e))}catch(n){Ue(e,n)}}function Ue(e,n){Ae.push(n);if(!e||e._state!==null)return;var t=e._lib&&Ge();n=De(n);e._state=false;e._value=n;B&&n!==null&&babelHelpers.typeof(n)==="object"&&!n._promise&&_(function(){var t=d(n,"stack");n._promise=e;f(n,"stack",{get:function r(){return xe?t&&(t.get?t.get.apply(n):t.value):e.stack}})});$e(e);He(e);if(t)Je()}function He(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t){Ve(e,n[t])}var i=e._PSD;--i.ref||i.finalize();if(Be===0){++Be;je(function(){if(--Be===0)Xe()},[])}}function Ve(e,n){if(e._state===null){e._listeners.push(n);return}var t=e._state?n.onFulfilled:n.onRejected;if(t===null){return(e._state?n.resolve:n.reject)(e._value)}++n.psd.ref;++Be;je(ze,[t,e,n])}function ze(e,n,t){try{Ie=n;var r,i=n._value;if(n._state){r=e(i)}else{if(Ae.length)Ae=[];r=e(i);if(Ae.indexOf(i)===-1)Ze(n)}t.resolve(r)}catch(e){t.reject(e)}finally{Ie=null;if(--Be===0)Xe();--t.psd.ref||t.psd.finalize()}}function Le(e,n,t){if(n.length===t)return n;var r="";if(e._state===false){var i=e._value,o,u;if(i!=null){o=i.name||"Error";u=i.message||i;r=R(i,0)}else{o=i;u=""}n.push(o+(u?": "+u:"")+r)}if(B){r=R(e._stackHolder,2);if(r&&n.indexOf(r)===-1)n.push(r);if(e._prev)Le(e._prev,n,t)}return n}function We(e,n){var t=n?n._numPrev+1:0;if(t<he){e._prev=n;e._numPrev=t}}function Qe(){Ge()&&Je()}function Ge(){var e=Ee;Ee=false;Se=false;return e}function Je(){var e,n,t;do{while(Te.length>0){e=Te;Te=[];t=e.length;for(n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}}}while(Te.length>0);Ee=true;Se=true}function Xe(){var e=Oe;Oe=[];e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});var n=Fe.slice(0);var t=n.length;while(t){n[--t]()}}function Ye(e){function n(){e();Fe.splice(Fe.indexOf(n),1)}Fe.push(n);++Be;je(function(){if(--Be===0)Xe()},[])}function $e(e){if(!Oe.some(function(n){return n._value===e._value}))Oe.push(e)}function Ze(e){var n=Oe.length;while(n){if(Oe[--n]._value===e._value){Oe.splice(n,1);return}}}function en(e){return new Me(le,false,e)}function nn(e,n){var t=Ke;return function(){var r=Ge(),i=Ke;try{pn(t,true);return e.apply(this,arguments)}catch(e){n&&n(e)}finally{pn(i,false);if(r)Je()}}}var tn={awaits:0,echoes:0,id:0};var rn=0;var on=[];var un=0;var an=0;var sn=0;function cn(e,n,t,r){var o=Ke,u=Object.create(o);u.parent=o;u.ref=0;u.global=false;u.id=++sn;var a=Ce.env;u.env=ke?{Promise:Me,PromiseProp:{value:Me,configurable:true,writable:true},all:Me.all,race:Me.race,resolve:Me.resolve,reject:Me.reject,nthen:wn(a.nthen,u),gthen:wn(a.gthen,u)}:{};if(n)i(u,n);++o.ref;u.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=mn(u,e,t,r);if(u.ref===0)u.finalize();return s}function fn(){if(!tn.id)tn.id=++rn;++tn.awaits;tn.echoes+=ve;return tn.id}function ln(e){if(!tn.awaits||e&&e!==tn.id)return;if(--tn.awaits===0)tn.id=0;tn.echoes=tn.awaits*ve}function hn(e){if(tn.echoes&&e&&e.constructor===we){fn();return e.then(function(e){ln();return e},function(e){ln();return xn(e)})}return e}function dn(e){++an;if(!tn.echoes||--tn.echoes===0){tn.echoes=tn.id=0}on.push(Ke);pn(e,true)}function vn(){var e=on[on.length-1];on.pop();pn(e,false)}function pn(e,n){var t=Ke;if(n?tn.echoes&&(!un++||e!==Ke):un&&(!--un||e!==Ke)){gn(n?dn.bind(null,e):vn)}if(e===Ke)return;Ke=e;if(t===Ce)Ce.env=yn();if(ke){var i=Ce.env.Promise;var o=e.env;me.then=o.nthen;i.prototype.then=o.gthen;if(t.global||e.global){Object.defineProperty(r,"Promise",o.PromiseProp);i.all=o.all;i.race=o.race;i.resolve=o.resolve;i.reject=o.reject}}}function yn(){var e=r.Promise;return ke?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:me.then,gthen:e.prototype.then}:{}}function mn(e,n,t,r,i){var o=Ke;try{pn(e,true);return n(t,r,i)}finally{pn(o,false)}}function gn(e){be.call(ye,e)}function bn(e,n,t){return typeof e!=="function"?e:function(){var r=Ke;if(t)fn();pn(n,true);try{return e.apply(this,arguments)}finally{pn(r,false)}}}function wn(e,n){return function(t,r){return e.call(this,bn(t,n,false),bn(r,n,false))}}var _n="unhandledrejection";function kn(e,n){var t;try{t=n.onuncatched(e)}catch(e){}if(t!==false)try{var o,u={promise:n,reason:e};if(r.document&&document.createEvent){o=document.createEvent("Event");o.initEvent(_n,true,true);i(o,u)}else if(r.CustomEvent){o=new CustomEvent(_n,{detail:u});i(o,u)}if(o&&r.dispatchEvent){dispatchEvent(o);if(!r.PromiseRejectionEvent&&r.onunhandledrejection)try{r.onunhandledrejection(o)}catch(e){}}if(!o.defaultPrevented){console.warn("Unhandled rejection: "+(e.stack||e))}}catch(e){}}var xn=Me.reject;function Pn(e){var r={};var i=function n(t,i){if(i){var o=arguments.length,u=new Array(o-1);while(--o){u[o-1]=arguments[o]}r[t].subscribe.apply(null,u);return e}else if(typeof t==="string"){return r[t]}};i.addEventType=a;for(var o=1,u=arguments.length;o<u;++o){a(arguments[o])}return i;function a(e,n,t){if(babelHelpers.typeof(e)==="object")return s(e);if(!n)n=ce;if(!t)t=te;var o={subscribers:[],fire:t,subscribe:function e(t){if(o.subscribers.indexOf(t)===-1){o.subscribers.push(t);o.fire=n(o.fire,t)}},unsubscribe:function e(r){o.subscribers=o.subscribers.filter(function(e){return e!==r});o.fire=o.subscribers.reduce(n,t)}};r[e]=i[e]=o;return o}function s(e){n(e).forEach(function(n){var r=e[n];if(t(r)){a(n,e[n][0],e[n][1])}else if(r==="asap"){var i=a(n,re,function e(){var n=arguments.length,t=new Array(n);while(n--){t[n]=arguments[n]}i.subscribers.forEach(function(e){g(function n(){e.apply(null,t)})})})}else throw new $.InvalidArgument("Invalid event config")})}}var jn="2.0.4";var En=String.fromCharCode(65535);var Sn=function(){try{IDBKeyRange.only([[]]);return[[]]}catch(e){return En}}();var On=-Infinity;var An="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";var In="String expected.";var Dn=[];var Cn=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent);var Kn=Cn;var Tn=Cn;var Bn=function e(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)};var Fn;F(B,Bn);function Mn(e,o){var u=Mn.dependencies;var c=i({addons:Mn.addons,autoOpen:true,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},o);var l=c.addons,h=c.autoOpen,d=c.indexedDB,v=c.IDBKeyRange;var g=this._dbSchema={};var P=[];var E=[];var O={};var D=null;var C=null;var F=false;var M=null;var N=false;var R="readonly",H="readwrite";var V=this;var z,L=new Me(function(e){z=e}),W,Q=new Me(function(e,n){W=n});var X=true;var Y=!!Jn(d),Z;function ee(){V.on("versionchange",function(e){if(e.newVersion>0)console.warn("Another connection wants to upgrade database '"+V.name+"'. Closing db now to resume the upgrade.");else console.warn("Another connection wants to delete database '"+V.name+"'. Closing db now to resume the delete request.");V.close()});V.on("blocked",function(e){if(!e.newVersion||e.newVersion<e.oldVersion)console.warn("Dexie.delete('"+V.name+"') was blocked");else console.warn("Upgrade '"+V.name+"' blocked by other connection holding version "+e.oldVersion/10)})}this.version=function(e){if(D||F)throw new $.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=P.filter(function(n){return n._cfg.version===e})[0];if(n)return n;n=new ne(e);P.push(n);P.sort(Se);X=false;return n};function ne(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null};this.stores({})}i(ne.prototype,{stores:function e(t){this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,t):t;var r={};P.forEach(function(e){i(r,e._cfg.storesSource)});var o=this._cfg.dbschema={};this._parseStoresSpec(r,o);g=V._dbSchema=o;Ae([O,V,xe.prototype]);Oe([O,V,xe.prototype,this._cfg.tables],n(o),o);E=n(o);return this},upgrade:function e(n){this._cfg.contentUpgrade=n;return this},_parseStoresSpec:function e(t,r){n(t).forEach(function(e){if(t[e]!==null){var n={};var i=De(t[e]);var o=i.shift();if(o.multi)throw new $.Schema("Primary key cannot be multi-valued");if(o.keyPath)x(n,o.keyPath,o.auto?0:o.keyPath);i.forEach(function(e){if(e.auto)throw new $.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new $.Schema("Index must have a name and cannot be an empty string");x(n,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")});r[e]=new Qn(e,o,i,n)}})}});function oe(e,t,r){var i=V._createTransaction(H,E,g);i.create(t);i._completion.catch(r);var o=i._reject.bind(i);cn(function(){Ke.trans=i;if(e===0){n(g).forEach(function(e){he(t,e,g[e].primKey,g[e].indexes)});Me.follow(function(){return V.on.populate.fire(i)}).catch(o)}else ce(e,i,t).catch(o)})}function ce(e,n,t){var r=[];var i=P.filter(function(n){return n._cfg.version===e})[0];if(!i)throw new $.Upgrade("Dexie specification of currently installed DB version is missing");g=V._dbSchema=i._cfg.dbschema;var o=false;var u=P.filter(function(n){return n._cfg.version>e});u.forEach(function(e){r.push(function(){var r=g;var i=e._cfg.dbschema;Ve(r,t);Ve(i,t);g=V._dbSchema=i;var u=le(r,i);u.add.forEach(function(e){he(t,e[0],e[1].primKey,e[1].indexes)});u.change.forEach(function(e){if(e.recreate){throw new $.Upgrade("Not yet support for changing primary key")}else{var n=t.objectStore(e.name);e.add.forEach(function(e){pe(n,e)});e.change.forEach(function(e){n.deleteIndex(e.name);pe(n,e)});e.del.forEach(function(e){n.deleteIndex(e)})}});if(e._cfg.contentUpgrade){o=true;return Me.follow(function(){e._cfg.contentUpgrade(n)})}});r.push(function(n){if(!o||!Kn){var t=e._cfg.dbschema;ve(t,n)}})});function a(){return r.length?Me.resolve(r.shift()(n.idbtrans)).then(a):Me.resolve()}return a().then(function(){de(g,t)})}function le(e,n){var t={del:[],add:[],change:[]};for(var r in e){if(!n[r])t.del.push(r)}for(r in n){var i=e[r],o=n[r];if(!i){t.add.push([r,o])}else{var u={name:r,def:o,recreate:false,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src){u.recreate=true;t.change.push(u)}else{var a=i.idxByName;var s=o.idxByName;for(var c in a){if(!s[c])u.del.push(c)}for(c in s){var f=a[c],l=s[c];if(!f)u.add.push(l);else if(f.src!==l.src)u.change.push(l)}if(u.del.length>0||u.add.length>0||u.change.length>0){t.change.push(u)}}}}return t}function he(e,n,t,r){var i=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});r.forEach(function(e){pe(i,e)});return i}function de(e,t){n(e).forEach(function(n){if(!t.db.objectStoreNames.contains(n)){he(t,n,e[n].primKey,e[n].indexes)}})}function ve(e,n){for(var t=0;t<n.db.objectStoreNames.length;++t){var r=n.db.objectStoreNames[t];if(e[r]==null){n.db.deleteObjectStore(r)}}}function pe(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}this._allTables=O;this._createTransaction=function(e,n,t,r){return new xe(e,n,t,r)};function ye(e,n,t){if(!N&&!Ke.letThrough){if(!F){if(!h)return xn(new $.DatabaseClosed);V.open().catch(te)}return L.then(function(){return ye(e,n,t)})}else{var r=V._createTransaction(e,n,g);try{r.create()}catch(e){return xn(e)}return r._promise(e,function(e,n){return cn(function(){Ke.trans=r;return t(e,n,r)})}).then(function(e){return r._completion.then(function(){return e})})}}this._whenReady=function(e){return N||Ke.letThrough?e():new Me(function(e,n){if(!F){if(!h){n(new $.DatabaseClosed);return}V.open().catch(te)}L.then(e,n)}).then(e)};this.verno=0;this.open=function(){if(F||D)return L.then(function(){return C?xn(C):V});B&&(Q._stackHolder=q());F=true;C=null;N=false;var n=z,t=null;return Me.race([Q,new Me(function(n,r){if(!d)throw new $.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL "+"(not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=X?d.open(e):d.open(e,Math.round(V.verno*10));if(!i)throw new $.MissingAPI("IndexedDB API not available");i.onerror=Un(r);i.onblocked=nn(ze);i.onupgradeneeded=nn(function(n){t=i.transaction;if(X&&!V._allowEmptyDB){i.onerror=zn;t.abort();i.result.close();var o=d.deleteDatabase(e);o.onsuccess=o.onerror=nn(function(){r(new $.NoSuchDatabase("Database "+e+" doesnt exist"))})}else{t.onerror=Un(r);var u=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;oe(u/10,t,r,i)}},r);i.onsuccess=nn(function(){t=null;D=i.result;Dn.push(V);if(X)He();else if(D.objectStoreNames.length>0){try{Ve(g,D.transaction(Gn(D.objectStoreNames),R))}catch(e){}}D.onversionchange=nn(function(e){V._vcFired=true;V.on("versionchange").fire(e)});if(!Y&&e!=="__dbnames"){Fn.dbnames.put({name:e}).catch(te)}n()},r)})]).then(function(){M=[];return Me.resolve(Mn.vip(V.on.ready.fire)).then(function e(){if(M.length>0){var n=M.reduce(fe,te);M=[];return Me.resolve(Mn.vip(n)).then(e)}})}).finally(function(){M=null}).then(function(){F=false;return V}).catch(function(e){try{t&&t.abort()}catch(e){}F=false;V.close();C=e;return xn(C)}).finally(function(){N=true;n()})};this.close=function(){var e=Dn.indexOf(V);if(e>=0)Dn.splice(e,1);if(D){try{D.close()}catch(e){}D=null}h=false;C=new $.DatabaseClosed;if(F)W(C);L=new Me(function(e){z=e});Q=new Me(function(e,n){W=n})};this.delete=function(){var n=arguments.length>0;return new Me(function(t,r){if(n)throw new $.InvalidArgument("Arguments not allowed in db.delete()");if(F){L.then(i)}else{i()}function i(){V.close();var n=d.deleteDatabase(e);n.onsuccess=nn(function(){if(!Y){Fn.dbnames.delete(e).catch(te)}t()});n.onerror=Un(r);n.onblocked=ze}})};this.backendDB=function(){return D};this.isOpen=function(){return D!==null};this.hasBeenClosed=function(){return C&&C instanceof $.DatabaseClosed};this.hasFailed=function(){return C!==null};this.dynamicallyOpened=function(){return X};this.name=e;s(this,{tables:{get:function e(){return n(O).map(function(e){return O[e]})}}});this.on=Pn(this,"populate","blocked","versionchange",{ready:[fe,te]});this.on.ready.subscribe=y(this.on.ready.subscribe,function(e){return function(n,t){Mn.vip(function(){if(N){if(!C)Me.resolve().then(n);if(t)e(n)}else if(M){M.push(n);if(t)e(n)}else{e(n);if(!t)e(function e(){V.on.ready.unsubscribe(n);V.on.ready.unsubscribe(e)})}})}});this.transaction=function(){var e=me.apply(this,arguments);return this._transaction.apply(this,e)};function me(e,n,t){var r=arguments.length;if(r<2)throw new $.InvalidArgument("Too few arguments");var i=new Array(r-1);while(--r){i[r-1]=arguments[r]}t=i.pop();var o=S(i);return[e,o,t]}this._transaction=function(e,n,t){var r=Ke.trans;if(!r||r.db!==V||e.indexOf("!")!==-1)r=null;var i=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{var o=n.map(function(e){var n=e instanceof ge?e.name:e;if(typeof n!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n});if(e=="r"||e==R)e=R;else if(e=="rw"||e==H)e=H;else throw new $.InvalidArgument("Invalid transaction mode: "+e);if(r){if(r.mode===R&&e===H){if(i){r=null}else throw new $.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")}if(r){o.forEach(function(e){if(r&&r.storeNames.indexOf(e)===-1){if(i){r=null}else throw new $.SubTransaction("Table "+e+" not included in parent transaction.")}})}if(i&&r&&!r.active){r=null}}}catch(e){return r?r._promise(null,function(n,t){t(e)}):xn(e)}return r?r._promise(e,u,"lock"):Ke.trans?mn(Ke.transless,function(){return V._whenReady(u)}):V._whenReady(u);function u(){return Me.resolve().then(function(){var n=Ke.transless||Ke;var i=V._createTransaction(e,o,g,r);var u={trans:i,transless:n};if(r){i.idbtrans=r.idbtrans}else{i.create()}if(t.constructor===_e){fn()}var a;var s=Me.follow(function(){a=t.call(i,i);if(a){if(a.constructor===we){var e=ln.bind(null,null);a.then(e,e)}else if(typeof a.next==="function"&&typeof a.throw==="function"){a=Ln(a)}}},u);return(a&&typeof a.then==="function"?Me.resolve(a).then(function(e){return i.active?e:xn(new $.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return a})).then(function(e){if(r)i._resolve();return i._completion.then(function(){return e})}).catch(function(e){i._reject(e);return xn(e)})})}};this.table=function(e){if(!a(O,e)){throw new $.InvalidTable("Table "+e+" does not exist")}return O[e]};function ge(e,n,t){this.name=e;this.schema=n;this._tx=t;this.hook=O[e]?O[e].hook:Pn(null,{creating:[ue,te],reading:[ie,re],updating:[se,te],deleting:[ae,te]})}function be(e,n,t){return(t?Vn:Un)(function(t){e.push(t);n&&n()})}function ke(e,n,t,r,i){return new Me(function(o,u){var a=t.length,s=a-1;if(a===0)return o();if(!r){for(var c=0;c<a;++c){var f=e.delete(t[c]);f.onerror=Un(u);if(c===s)f.onsuccess=nn(function(){return o()})}}else{var l,h=Vn(u),d=Rn(null);_(function(){for(var r=0;r<a;++r){l={onsuccess:null,onerror:null};var u=t[r];i.call(l,u[0],u[1],n);var c=e.delete(u[0]);c._hookCtx=l;c.onerror=h;if(r===s)c.onsuccess=Rn(o);else c.onsuccess=d}},function(e){l.onerror&&l.onerror(e);throw e})}})}s(ge.prototype,{_trans:function e(n,t,r){var i=this._tx||Ke.trans;return i&&i.db===V?i===Ke.trans?i._promise(n,t,r):cn(function(){return i._promise(n,t,r)},{trans:i,transless:Ke.transless||Ke}):ye(n,[this.name],t)},_idbstore:function e(n,t,r){var i=this.name;function o(e,n,r){if(r.storeNames.indexOf(i)===-1)throw new $.NotFound("Table"+i+" not part of transaction");return t(e,n,r.idbtrans.objectStore(i),r)}return this._trans(n,o,r)},get:function e(n,t){if(n&&n.constructor===Object)return this.where(n).first(t);var r=this;return this._idbstore(R,function(e,t,i){var o=i.get(n);o.onerror=Un(t);o.onsuccess=nn(function(){e(r.hook.reading.fire(o.result))},t)}).then(t)},where:function e(r){if(typeof r==="string")return new Pe(this,r);if(t(r))return new Pe(this,"["+r.join("+")+"]");var i=n(r);if(i.length===1)return this.where(i[0]).equals(r[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&i.every(function(n){return e.keyPath.indexOf(n)>=0})&&e.keyPath.every(function(e){return i.indexOf(e)>=0})})[0];if(o&&Sn!==En)return this.where(o.name).equals(o.keyPath.map(function(e){return r[e]}));if(!o)console.warn("The query "+JSON.stringify(r)+" on "+this.name+" would benefit of a "+("compound index ["+i.join("+")+"]"));var u=this.schema.idxByName;var a=i.reduce(function(e,n){return[e[0]||u[n],e[0]||!u[n]?Ue(e[1],function(e){return""+k(e,n)==""+r[n]}):e[1]]},[null,null]);var s=a[0];return s?this.where(s.name).equals(r[s.keyPath]).filter(a[1]):o?this.filter(a[1]):this.where(i).equals("")},count:function e(n){return this.toCollection().count(n)},offset:function e(n){return this.toCollection().offset(n)},limit:function e(n){return this.toCollection().limit(n)},reverse:function e(){return this.toCollection().reverse()},filter:function e(n){return this.toCollection().and(n)},each:function e(n){return this.toCollection().each(n)},toArray:function e(n){return this.toCollection().toArray(n)},orderBy:function e(n){return new je(new Pe(this,t(n)?"["+n.join("+")+"]":n))},toCollection:function e(){return new je(new Pe(this))},mapToClass:function e(n,t){this.schema.mappedClass=n;var r=Object.create(n.prototype);if(t){qn(r,t)}this.schema.instanceTemplate=r;var i=function e(t){if(!t)return t;var r=Object.create(n.prototype);for(var i in t){if(a(t,i))try{r[i]=t[i]}catch(e){}}return r};if(this.schema.readHook){this.hook.reading.unsubscribe(this.schema.readHook)}this.schema.readHook=i;this.hook("reading",i);return n},defineClass:function e(n){return this.mapToClass(Mn.defineClass(n),n)},bulkDelete:function e(n){if(this.hook.deleting.fire===te){return this._idbstore(H,function(e,t,r,i){e(ke(r,i,n,false,te))})}else{return this.where(":id").anyOf(n).delete().then(function(){})}},bulkPut:function e(n,t){var r=this;return this._idbstore(H,function(e,i,o){if(!o.keyPath&&!r.schema.primKey.auto&&!t)throw new $.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new $.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==n.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");if(n.length===0)return e();var u=function n(t){if(s.length===0)e(t);else i(new J(r.name+".bulkPut(): "+s.length+" of "+f+" operations failed",s))};var a,s=[],c,f=n.length,l=r;if(r.hook.creating.fire===te&&r.hook.updating.fire===te){c=be(s);for(var h=0,d=n.length;h<d;++h){a=t?o.put(n[h],t[h]):o.put(n[h]);a.onerror=c}a.onerror=be(s,u);a.onsuccess=Hn(u)}else{var v=t||o.keyPath&&n.map(function(e){return k(e,o.keyPath)});var p=v&&b(v,function(e,t){return e!=null&&[e,n[t]]});var y=!v?l.bulkAdd(n):l.where(":id").anyOf(v.filter(function(e){return e!=null})).modify(function(){this.value=p[this.primKey];p[this.primKey]=null}).catch(G,function(e){s=e.failures}).then(function(){var e=[],r=t&&[];for(var i=v.length-1;i>=0;--i){var o=v[i];if(o==null||p[o]){e.push(n[i]);t&&r.push(o);if(o!=null)p[o]=null}}e.reverse();t&&r.reverse();return l.bulkAdd(e,r)}).then(function(e){var n=v[v.length-1];return n!=null?n:e});y.then(u).catch(J,function(e){s=s.concat(e.failures);u()}).catch(i)}},"locked")},bulkAdd:function e(n,t){var r=this,i=this.hook.creating.fire;return this._idbstore(H,function(e,o,u,a){if(!u.keyPath&&!r.schema.primKey.auto&&!t)throw new $.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&t)throw new $.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==n.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");if(n.length===0)return e();function s(n){if(f.length===0)e(n);else o(new J(r.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var c,f=[],l,h,d=n.length;if(i!==te){var v=u.keyPath,p;l=be(f,null,true);h=Rn(null);_(function(){for(var e=0,r=n.length;e<r;++e){p={onerror:null,onsuccess:null};var o=t&&t[e];var s=n[e],f=t?o:v?k(s,v):undefined,d=i.call(p,f,s,a);if(f==null&&d!=null){if(v){s=A(s);x(s,v,d)}else{o=d}}c=o!=null?u.add(s,o):u.add(s);c._hookCtx=p;if(e<r-1){c.onerror=l;if(p.onsuccess)c.onsuccess=h}}},function(e){p.onerror&&p.onerror(e);throw e});c.onerror=be(f,s,true);c.onsuccess=Rn(s)}else{l=be(f);for(var y=0,m=n.length;y<m;++y){c=t?u.add(n[y],t[y]):u.add(n[y]);c.onerror=l}c.onerror=be(f,s);c.onsuccess=Hn(s)}})},add:function e(n,t){var r=this.hook.creating.fire;return this._idbstore(H,function(e,i,o,u){var a={onsuccess:null,onerror:null};if(r!==te){var s=t!=null?t:o.keyPath?k(n,o.keyPath):undefined;var c=r.call(a,s,n,u);if(s==null&&c!=null){if(o.keyPath)x(n,o.keyPath,c);else t=c}}try{var f=t!=null?o.add(n,t):o.add(n);f._hookCtx=a;f.onerror=Vn(i);f.onsuccess=Rn(function(t){var r=o.keyPath;if(r)x(n,r,t);e(t)})}catch(e){if(a.onerror)a.onerror(e);throw e}})},put:function e(n,t){var r=this;var i=this.hook.creating.fire,o=this.hook.updating.fire;if(i!==te||o!==te){var u=this.schema.primKey.keyPath;var a=t!==undefined?t:u&&k(n,u);if(a==null)return this.add(n);n=A(n);return this._trans(H,function(){return r.where(":id").equals(a).modify(function(){this.value=n}).then(function(e){return e===0?r.add(n,t):a})},"locked")}else{return this._idbstore(H,function(e,r,i){var o=t!==undefined?i.put(n,t):i.put(n);o.onerror=Un(r);o.onsuccess=nn(function(t){var r=i.keyPath;if(r)x(n,r,t.target.result);e(o.result)})})}},delete:function e(n){if(this.hook.deleting.subscribers.length){return this.where(":id").equals(n).delete()}else{return this._idbstore(H,function(e,t,r){var i=r.delete(n);i.onerror=Un(t);i.onsuccess=nn(function(){e(i.result)})})}},clear:function e(){if(this.hook.deleting.subscribers.length){return this.toCollection().delete()}else{return this._idbstore(H,function(e,n,t){var r=t.clear();r.onerror=Un(n);r.onsuccess=nn(function(){e(r.result)})})}},update:function e(r,i){if(babelHelpers.typeof(i)!=="object"||t(i))throw new $.InvalidArgument("Modifications must be an object.");if(babelHelpers.typeof(r)==="object"&&!t(r)){n(i).forEach(function(e){x(r,e,i[e])});var o=k(r,this.schema.primKey.keyPath);if(o===undefined)return xn(new $.InvalidArgument("Given object does not contain its primary key"));return this.where(":id").equals(o).modify(i)}else{return this.where(":id").equals(r).modify(i)}}});function xe(e,n,t,r){var i=this;this.db=V;this.mode=e;this.storeNames=n;this.idbtrans=null;this.on=Pn(this,"complete","error","abort");this.parent=r||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new Me(function(e,n){i._resolve=e;i._reject=n});this._completion.then(function(){i.active=false;i.on.complete.fire()},function(e){var n=i.active;i.active=false;i.on.error.fire(e);i.parent?i.parent._reject(e):n&&i.idbtrans&&i.idbtrans.abort();return xn(e)})}s(xe.prototype,{_lock:function e(){m(!Ke.global);++this._reculock;if(this._reculock===1&&!Ke.global)Ke.lockOwnerFor=this;return this},_unlock:function e(){m(!Ke.global);if(--this._reculock===0){if(!Ke.global)Ke.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var n=this._blockedFuncs.shift();try{mn(n[1],n[0])}catch(e){}}}return this},_locked:function e(){return this._reculock&&Ke.lockOwnerFor!==this},create:function e(n){var t=this;if(!this.mode)return this;m(!this.idbtrans);if(!n&&!D){switch(C&&C.name){case"DatabaseClosedError":throw new $.DatabaseClosed(C);case"MissingAPIError":throw new $.MissingAPI(C.message,C);default:throw new $.OpenFailed(C)}}if(!this.active)throw new $.TransactionInactive;m(this._completion._state===null);n=this.idbtrans=n||D.transaction(Gn(this.storeNames),this.mode);n.onerror=nn(function(e){zn(e);t._reject(n.error)});n.onabort=nn(function(e){zn(e);t.active&&t._reject(new $.Abort(n.error));t.active=false;t.on("abort").fire(e)});n.oncomplete=nn(function(){t.active=false;t._resolve()});return this},_promise:function e(n,t,r){var i=this;if(n===H&&this.mode!==H)return xn(new $.ReadOnly("Transaction is readonly"));if(!this.active)return xn(new $.TransactionInactive);if(this._locked()){return new Me(function(e,o){i._blockedFuncs.push([function(){i._promise(n,t,r).then(e,o)},Ke])})}else if(r){return cn(function(){var e=new Me(function(e,n){i._lock();var r=t(e,n,i);if(r&&r.then)r.then(e,n)});e.finally(function(){return i._unlock()});e._lib=true;return e})}else{var o=new Me(function(e,n){var r=t(e,n,i);if(r&&r.then)r.then(e,n)});o._lib=true;return o}},_root:function e(){return this.parent?this.parent._root():this},waitFor:function e(n){var t=this._root();n=Me.resolve(n);if(t._waitingFor){t._waitingFor=t._waitingFor.then(function(){return n})}else{t._waitingFor=n;t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function e(){++t._spinCount;while(t._waitingQueue.length){t._waitingQueue.shift()()}if(t._waitingFor)r.get(-Infinity).onsuccess=e})()}var i=t._waitingFor;return new Me(function(e,r){n.then(function(n){return t._waitingQueue.push(nn(e.bind(null,n)))},function(e){return t._waitingQueue.push(nn(r.bind(null,e)))}).finally(function(){if(t._waitingFor===i){t._waitingFor=null}})})},abort:function e(){this.active&&this._reject(new $.Abort);this.active=false},tables:{get:U("Transaction.tables",function(){return O})},table:function e(n){var e=V.table(n);return new ge(n,e.schema,this)}});function Pe(e,n,t){this._ctx={table:e,index:n===":id"?null:n,or:t}}s(Pe.prototype,function(){function e(e,n,t){var r=e instanceof Pe?new je(e):e;r._ctx.error=t?new t(n):new TypeError(n);return r}function n(e){return new je(e,function(){return v.only("")}).limit(0)}function t(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function i(e,n,t,r,i,o){var u=Math.min(e.length,r.length);var a=-1;for(var s=0;s<u;++s){var c=n[s];if(c!==r[s]){if(i(e[s],t[s])<0)return e.substr(0,s)+t[s]+t.substr(s+1);if(i(e[s],r[s])<0)return e.substr(0,s)+r[s]+t.substr(s+1);if(a>=0)return e.substr(0,a)+n[a]+t.substr(a+1);return null}if(i(e[s],c)<0)a=s}if(u<r.length&&o==="next")return e+t.substr(e.length);if(u<e.length&&o==="prev")return e.substr(0,t.length);return a<0?null:e.substr(0,a)+r[a]+t.substr(a+1)}function o(n,o,u,a){var s,c,f,l,h,d,p,y=u.length;if(!u.every(function(e){return typeof e==="string"})){return e(n,In)}function m(e){s=t(e);c=r(e);f=e==="next"?qe:Re;var n=u.map(function(e){return{lower:c(e),upper:s(e)}}).sort(function(e,n){return f(e.lower,n.lower)});l=n.map(function(e){return e.upper});h=n.map(function(e){return e.lower});d=e;p=e==="next"?"":a}m("next");var g=new je(n,function(){return v.bound(l[0],h[y-1]+a)});g._ondirectionchange=function(e){m(e)};var b=0;g._addAlgorithm(function(e,n,t){var r=e.key;if(typeof r!=="string")return false;var u=c(r);if(o(u,h,b)){return true}else{var a=null;for(var s=b;s<y;++s){var v=i(r,u,l[s],h[s],f,d);if(v===null&&a===null)b=s+1;else if(a===null||f(a,v)>0){a=v}}if(a!==null){n(function(){e.continue(a+p)})}else{n(t)}return false}});return g}return{between:function t(r,i,o,u){o=o!==false;u=u===true;try{if(Ce(r,i)>0||Ce(r,i)===0&&(o||u)&&!(o&&u))return n(this);return new je(this,function(){return v.bound(r,i,!o,!u)})}catch(n){return e(this,An)}},equals:function e(n){return new je(this,function(){return v.only(n)})},above:function e(n){return new je(this,function(){return v.lowerBound(n,true)})},aboveOrEqual:function e(n){return new je(this,function(){return v.lowerBound(n)})},below:function e(n){return new je(this,function(){return v.upperBound(n,true)})},belowOrEqual:function e(n){return new je(this,function(){return v.upperBound(n)})},startsWith:function n(t){if(typeof t!=="string")return e(this,In);return this.between(t,t+En,true,true)},startsWithIgnoreCase:function e(n){if(n==="")return this.startsWith(n);return o(this,function(e,n){return e.indexOf(n[0])===0},[n],En)},equalsIgnoreCase:function e(n){return o(this,function(e,n){return e===n[0]},[n],"")},anyOfIgnoreCase:function e(){var t=T.apply(K,arguments);if(t.length===0)return n(this);return o(this,function(e,n){return n.indexOf(e)!==-1},t,"")},startsWithAnyOfIgnoreCase:function e(){var t=T.apply(K,arguments);if(t.length===0)return n(this);return o(this,function(e,n){return n.some(function(n){return e.indexOf(n)===0})},t,En)},anyOf:function t(){var r=T.apply(K,arguments);var i=Fe;try{r.sort(i)}catch(n){return e(this,An)}if(r.length===0)return n(this);var o=new je(this,function(){return v.bound(r[0],r[r.length-1])});o._ondirectionchange=function(e){i=e==="next"?Fe:Ne;r.sort(i)};var u=0;o._addAlgorithm(function(e,n,t){var o=e.key;while(i(o,r[u])>0){++u;if(u===r.length){n(t);return false}}if(i(o,r[u])===0){return true}else{n(function(){e.continue(r[u])});return false}});return o},notEqual:function e(n){return this.inAnyRange([[On,n],[n,Sn]],{includeLowers:false,includeUppers:false})},noneOf:function n(){var t=T.apply(K,arguments);if(t.length===0)return new je(this);try{t.sort(Fe)}catch(n){return e(this,An)}var r=t.reduce(function(e,n){return e?e.concat([[e[e.length-1][1],n]]):[[On,n]]},null);r.push([t[t.length-1],Sn]);return this.inAnyRange(r,{includeLowers:false,includeUppers:false})},inAnyRange:function t(r,i){if(r.length===0)return n(this);if(!r.every(function(e){return e[0]!==undefined&&e[1]!==undefined&&Fe(e[0],e[1])<=0})){return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$.InvalidArgument)}var o=!i||i.includeLowers!==false;var u=i&&i.includeUppers===true;function a(e,n){for(var t=0,r=e.length;t<r;++t){var i=e[t];if(Ce(n[0],i[1])<0&&Ce(n[1],i[0])>0){i[0]=Te(i[0],n[0]);i[1]=Be(i[1],n[1]);break}}if(t===r)e.push(n);return e}var s=Fe;function c(e,n){return s(e[0],n[0])}var f;try{f=r.reduce(a,[]);f.sort(c)}catch(n){return e(this,An)}var l=0;var h=u?function(e){return Fe(e,f[l][1])>0}:function(e){return Fe(e,f[l][1])>=0};var d=o?function(e){return Ne(e,f[l][0])>0}:function(e){return Ne(e,f[l][0])>=0};function p(e){return!h(e)&&!d(e)}var y=h;var m=new je(this,function(){return v.bound(f[0][0],f[f.length-1][1],!o,!u)});m._ondirectionchange=function(e){if(e==="next"){y=h;s=Fe}else{y=d;s=Ne}f.sort(c)};m._addAlgorithm(function(e,n,t){var r=e.key;while(y(r)){++l;if(l===f.length){n(t);return false}}if(p(r)){return true}else if(Ce(r,f[l][1])===0||Ce(r,f[l][0])===0){return false}else{n(function(){if(s===Fe)e.continue(f[l][0]);else e.continue(f[l][1])});return false}});return m},startsWithAnyOf:function t(){var r=T.apply(K,arguments);if(!r.every(function(e){return typeof e==="string"})){return e(this,"startsWithAnyOf() only works with strings")}if(r.length===0)return n(this);return this.inAnyRange(r.map(function(e){return[e,e+En]}))}}});function je(e,n){var t=null,r=null;if(n)try{t=n()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:t,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:Infinity,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function Ee(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}s(je.prototype,function(){function e(e,n){e.filter=Ue(e.filter,n)}function t(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return Ue(r(),n())}:n;e.justLimit=t&&!r}function r(e,n){e.isMatch=Ue(e.isMatch,n)}function o(e,n){if(e.isPrimKey)return n;var t=e.table.schema.idxByName[e.index];if(!t)throw new $.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return n.index(t.name)}function u(e,n){var t=o(e,n);return e.keysOnly&&"openKeyCursor"in t?t.openKeyCursor(e.range||null,e.dir+e.unique):t.openCursor(e.range||null,e.dir+e.unique)}function s(e,n,t,r,i){var o=e.replayFilter?Ue(e.filter,e.replayFilter()):e.filter;if(!e.or){Ie(u(e,i),Ue(e.algorithm,o),n,t,r,!e.keysOnly&&e.valueMapper)}else(function(){var s={};var c=0;function f(){if(++c===2)t()}function l(e,t,i){if(!o||o(t,i,f,r)){var u=t.primaryKey;var c=""+u;if(c==="[object ArrayBuffer]")c=""+new Uint8Array(u);if(!a(s,c)){s[c]=true;n(e,t,i)}}}e.or._iterate(l,f,r,i);Ie(u(e,i),e.algorithm,l,f,r,!e.keysOnly&&e.valueMapper)})()}return{_read:function e(n,t){var r=this._ctx;return r.error?r.table._trans(null,xn.bind(null,r.error)):r.table._idbstore(R,n).then(t)},_write:function e(n){var t=this._ctx;return t.error?t.table._trans(null,xn.bind(null,t.error)):t.table._idbstore(H,n,"locked")},_addAlgorithm:function e(n){var t=this._ctx;t.algorithm=Ue(t.algorithm,n)},_iterate:function e(n,t,r,i){return s(this._ctx,n,t,r,i)},clone:function e(n){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);if(n)i(r,n);t._ctx=r;return t},raw:function e(){this._ctx.valueMapper=null;return this},each:function e(n){var t=this._ctx;return this._read(function(e,r,i){s(t,n,e,r,i)})},count:function e(n){var t=this._ctx;if(Ee(t,true)){return this._read(function(e,n,r){var i=o(t,r);var u=t.range?i.count(t.range):i.count();u.onerror=Un(n);u.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},n)}else{var e=0;return this._read(function(n,r,i){s(t,function(){++e;return false},function(){n(e)},r,i)},n)}},sortBy:function e(n,t){var r=n.split(".").reverse(),i=r[0],o=r.length-1;function u(e,n){if(n)return u(e[r[n]],n-1);return e[i]}var a=this._ctx.dir==="next"?1:-1;function s(e,n){var t=u(e,o),r=u(n,o);return t<r?-a:t>r?a:0}return this.toArray(function(e){return e.sort(s)}).then(t)},toArray:function e(n){var t=this._ctx;return this._read(function(e,n,r){if(Z&&t.dir==="next"&&Ee(t,true)&&t.limit>0){var i=t.table.hook.reading.fire;var u=o(t,r);var a=t.limit<Infinity?u.getAll(t.range,t.limit):u.getAll(t.range);a.onerror=Un(n);a.onsuccess=i===re?Hn(e):Hn(function(t){try{e(t.map(i))}catch(e){n(e)}})}else{var c=[];s(t,function(e){c.push(e)},function n(){e(c)},n,r)}},n)},offset:function e(n){var r=this._ctx;if(n<=0)return this;r.offset+=n;if(Ee(r)){t(r,function(){var e=n;return function(n,t){if(e===0)return true;if(e===1){--e;return false}t(function(){n.advance(e);e=0});return false}})}else{t(r,function(){var e=n;return function(){return--e<0}})}return this},limit:function e(n){this._ctx.limit=Math.min(this._ctx.limit,n);t(this._ctx,function(){var e=n;return function(n,t,r){if(--e<=0)t(r);return e>=0}},true);return this},until:function n(t,r){e(this._ctx,function(e,n,i){if(t(e.value)){n(i);return r}else{return true}});return this},first:function e(n){return this.limit(1).toArray(function(e){return e[0]}).then(n)},last:function e(n){return this.reverse().first(n)},filter:function n(t){e(this._ctx,function(e){return t(e.value)});r(this._ctx,t);return this},and:function e(n){return this.filter(n)},or:function e(n){return new Pe(this._ctx.table,n,this)},reverse:function e(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this},desc:function e(){return this.reverse()},eachKey:function e(n){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each(function(e,t){n(t.key,t)})},eachUniqueKey:function e(n){this._ctx.unique="unique";return this.eachKey(n)},eachPrimaryKey:function e(n){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each(function(e,t){n(t.primaryKey,t)})},keys:function e(n){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,n){r.push(n.key)}).then(function(){return r}).then(n)},primaryKeys:function e(n){var t=this._ctx;if(Z&&t.dir==="next"&&Ee(t,true)&&t.limit>0){return this._read(function(e,n,r){var i=o(t,r);var u=t.limit<Infinity?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);u.onerror=Un(n);u.onsuccess=Hn(e)}).then(n)}t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,n){r.push(n.primaryKey)}).then(function(){return r}).then(n)},uniqueKeys:function e(n){this._ctx.unique="unique";return this.keys(n)},firstKey:function e(n){return this.limit(1).keys(function(e){return e[0]}).then(n)},lastKey:function e(n){return this.reverse().firstKey(n)},distinct:function n(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var i={};e(this._ctx,function(e){var n=e.primaryKey.toString();var t=a(i,n);i[n]=true;return!t});return this},modify:function e(t){var r=this,o=this._ctx,u=o.table.hook,s=u.updating.fire,c=u.deleting.fire;return this._write(function(e,o,u,f){var l;if(typeof t==="function"){if(s===te&&c===te){l=t}else{l=function e(r){var i=A(r);if(t.call(this,r,this)===false)return false;if(!a(this,"value")){c.call(this,this.primKey,r,f)}else{var o=I(i,this.value);var u=s.call(this,o,this.primKey,i,f);if(u){r=this.value;n(u).forEach(function(e){x(r,e,u[e])})}}}}}else if(s===te){var h=n(t);var d=h.length;l=function e(n){var r=false;for(var i=0;i<d;++i){var o=h[i],u=t[o];if(k(n,o)!==u){x(n,o,u);r=true}}return r}}else{var v=t;t=j(v);l=function e(r){var o=false;var u=s.call(this,t,this.primKey,A(r),f);if(u)i(t,u);n(t).forEach(function(e){var n=t[e];if(k(r,e)!==n){x(r,e,n);o=true}});if(u)t=j(v);return o}}var p=0;var y=0;var m=false;var g=[];var b=[];var w=null;function P(e,n){w=n.primaryKey;var t={primKey:n.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){g.push(e);b.push(t.primKey);S();return true}if(l.call(t,e,t)!==false){var i=!a(t,"value");++p;_(function(){var e=i?n.delete():n.update(t.value);e._hookCtx=t;e.onerror=Vn(r);e.onsuccess=Rn(function(){++y;S()})},r)}else if(t.onsuccess){t.onsuccess(t.value)}}function E(e){if(e){g.push(e);b.push(w)}return o(new G("Error modifying one or more objects",g,y,b))}function S(){if(m&&y+g.length===p){if(g.length>0)E();else e(y)}}r.clone().raw()._iterate(P,function(){m=true;S()},E,u)})},delete:function e(){var n=this;var t=this._ctx,r=t.range,i=t.table.hook.deleting.fire,o=i!==te;if(!o&&Ee(t)&&(t.isPrimKey&&!Tn||!r)){return this._write(function(e,n,t){var i=Un(n),o=r?t.count(r):t.count();o.onerror=i;o.onsuccess=function(){var u=o.result;_(function(){var n=r?t.delete(r):t.clear();n.onerror=i;n.onsuccess=function(){return e(u)}},function(e){return n(e)})}})}var u=o?2e3:1e4;return this._write(function(e,r,a,s){var c=0;var f=n.clone({keysOnly:!t.isMatch&&!o}).distinct().limit(u).raw();var l=[];var h=function e(){return f.each(o?function(e,n){l.push([n.primaryKey,n.value])}:function(e,n){l.push(n.primaryKey)}).then(function(){o?l.sort(function(e,n){return Fe(e[0],n[0])}):l.sort(Fe);return ke(a,s,l,o,i)}).then(function(){var n=l.length;c+=n;l=[];return n<u?c:e()})};e(h())})}}});function Se(e,n){return e._cfg.version-n._cfg.version}function Oe(e,n,t){n.forEach(function(n){var r=t[n];e.forEach(function(e){if(!(n in e)){if(e===xe.prototype||e instanceof xe){f(e,n,{get:function e(){return this.table(n)}})}else{e[n]=new ge(n,r)}}})})}function Ae(e){e.forEach(function(e){for(var n in e){if(e[n]instanceof ge)delete e[n]}})}function Ie(e,n,t,r,i,o){var u=o?function(e,n,r){return t(o(e),n,r)}:t;var a=nn(u,i);if(!e.onerror)e.onerror=Un(i);if(n){e.onsuccess=w(function t(){var o=e.result;if(o){var u=function e(){o.continue()};if(n(o,function(e){u=e},r,i))a(o.value,o,function(e){u=e});u()}else{r()}},i)}else{e.onsuccess=w(function n(){var t=e.result;if(t){var i=function e(){t.continue()};a(t.value,t,function(e){i=e});i()}else{r()}},i)}}function De(e){var n=[];e.split(",").forEach(function(e){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,"");var i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;n.push(new Wn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),t(i),/\./.test(e)))});return n}function Ce(e,n){return d.cmp(e,n)}function Te(e,n){return Ce(e,n)<0?e:n}function Be(e,n){return Ce(e,n)>0?e:n}function Fe(e,n){return d.cmp(e,n)}function Ne(e,n){return d.cmp(n,e)}function qe(e,n){return e<n?-1:e===n?0:1}function Re(e,n){return e>n?-1:e===n?0:1}function Ue(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}function He(){V.verno=D.version/10;V._dbSchema=g={};E=p(D.objectStoreNames,0);if(E.length===0)return;var e=D.transaction(Gn(E),"readonly");E.forEach(function(n){var t=e.objectStore(n),r=t.keyPath,i=r&&typeof r==="string"&&r.indexOf(".")!==-1;var o=new Wn(r,r||"",false,false,!!t.autoIncrement,r&&typeof r!=="string",i);var u=[];for(var a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);r=s.keyPath;i=r&&typeof r==="string"&&r.indexOf(".")!==-1;var c=new Wn(s.name,r,!!s.unique,!!s.multiEntry,false,r&&typeof r!=="string",i);u.push(c)}g[n]=new Qn(n,o,u,{})});Oe([O],n(g),g)}function Ve(e,n){var t=n.db.objectStoreNames;for(var i=0;i<t.length;++i){var o=t[i];var u=n.objectStore(o);Z="getAll"in u;for(var a=0;a<u.indexNames.length;++a){var s=u.indexNames[a];var c=u.index(s).keyPath;var f=typeof c==="string"?c:"["+p(c).join("+")+"]";if(e[o]){var l=e[o].idxByName[f];if(l)l.name=s}}}if(/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604){Z=false}}function ze(e){V.on("blocked").fire(e);Dn.filter(function(e){return e.name===V.name&&e!==V&&!e._vcFired}).map(function(n){return n.on("versionchange").fire(e)})}i(this,{Collection:je,Table:ge,Transaction:xe,Version:ne,WhereClause:Pe});ee();l.forEach(function(e){e(V)})}function Nn(e){if(typeof e==="function"){return new e}else if(t(e)){return[Nn(e[0])]}else if(e&&babelHelpers.typeof(e)==="object"){var n={};qn(n,e);return n}else{return e}}function qn(e,t){n(t).forEach(function(n){var r=Nn(t[n]);e[n]=r});return e}function Rn(e){return nn(function(n){var t=n.target,r=t._hookCtx,i=r.value||t.result,o=r&&r.onsuccess;o&&o(i);e&&e(i)},e)}function Un(e){return nn(function(n){zn(n);e(n.target.error);return false})}function Hn(e){return nn(function(n){e(n.target.result)})}function Vn(e){return nn(function(n){var t=n.target,r=t.error,i=t._hookCtx,o=i&&i.onerror;o&&o(r);zn(n);e(r);return false})}function zn(e){if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault()}function Ln(e){var n=function n(t){return e.next(t)},r=function n(t){return e.throw(t)},i=u(n),o=u(r);function u(e){return function(n){var r=e(n),u=r.value;return r.done?u:!u||typeof u.then!=="function"?t(u)?Me.all(u).then(i,o):i(u):u.then(i,o)}}return u(n)()}function Wn(e,n,t,r,i,o,u){this.name=e;this.keyPath=n;this.unique=t;this.multi=r;this.auto=i;this.compound=o;this.dotted=u;var a=typeof n==="string"?n:n&&"["+[].join.call(n,"+")+"]";this.src=(t?"&":"")+(r?"*":"")+(i?"++":"")+a}function Qn(e,n,t,r){this.name=e;this.primKey=n||new Wn;this.indexes=t||[new Wn];this.instanceTemplate=r;this.mappedClass=null;this.idxByName=b(t,function(e){return[e.name,e]})}function Gn(e){return e.length===1?e[0]:e}function Jn(e){var n=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return n&&n.bind(e)}s(Mn,ne);s(Mn,{delete:function e(n){var t=new Mn(n),r=t.delete();r.onblocked=function(e){t.on("blocked",e);return this};return r},exists:function e(n){return new Mn(n).open().then(function(e){e.close();return true}).catch(Mn.NoSuchDatabaseError,function(){return false})},getDatabaseNames:function e(n){var e=Jn(Mn.dependencies.indexedDB);return e?new Me(function(n,t){var r=e();r.onsuccess=function(e){n(p(e.target.result,0))};r.onerror=Un(t)}).then(n):Fn.dbnames.toCollection().primaryKeys(n)},defineClass:function e(){function n(e){if(e)i(this,e)}return n},applyStructure:qn,ignoreTransaction:function e(n){return Ke.trans?mn(Ke.transless,n):n()},vip:function e(n){return cn(function(){Ke.letThrough=true;return n()})},async:function e(n){return function(){try{var e=Ln(n.apply(this,arguments));if(!e||typeof e.then!=="function")return Me.resolve(e);return e}catch(e){return xn(e)}}},spawn:function e(n,t,r){try{var i=Ln(n.apply(r,t||[]));if(!i||typeof i.then!=="function")return Me.resolve(i);return i}catch(e){return xn(e)}},currentTransaction:{get:function e(){return Ke.trans||null}},waitFor:function e(n,t){var r=Me.resolve(typeof n==="function"?Mn.ignoreTransaction(n):n).timeout(t||6e4);return Ke.trans?Ke.trans.waitFor(r):r},Promise:Me,debug:{get:function e(){return B},set:function e(n){F(n,n==="dexie"?function(){return true}:Bn)}},derive:l,extend:i,props:s,override:y,Events:Pn,getByKeyPath:k,setByKeyPath:x,delByKeyPath:P,shallowClone:j,deepClone:A,getObjectDiff:I,asap:g,maxKey:Sn,minKey:On,addons:[],connections:Dn,MultiModifyError:$.Modify,errnames:X,IndexSpec:Wn,TableSchema:Qn,dependencies:function(){try{return{indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:jn,version:jn.split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,t*2)}),default:Mn,Dexie:Mn});Me.rejectionMapper=ee;Fn=new Mn("__dbnames");Fn.version(1).stores({dbnames:"name"});(function(){var e="Dexie.DatabaseNames";try{if((typeof localStorage==="undefined"?"undefined":babelHelpers.typeof(localStorage))!==undefined&&r.document!==undefined){JSON.parse(localStorage.getItem(e)||"[]").forEach(function(e){return Fn.dbnames.put({name:e}).catch(te)});localStorage.removeItem(e)}}catch(e){}})();var Xn=function e(n){babelHelpers.classCallCheck(this,e);return new Mn(n)};Xn.delete=Mn.delete;Xn.exists=Mn.exists;Xn.getDatabaseNames=Mn.getDatabaseNames;Xn.defineClass=Mn.defineClass;Xn.applyStructure=Mn.applyStructure;Xn.ignoreTransaction=Mn.ignoreTransaction;Xn.vip=Mn.vip;Xn.async=Mn.async;Xn.spawn=Mn.spawn;Xn.currentTransaction=Mn.currentTransaction;Xn.waitFor=Mn.waitFor;Xn.Promise=Mn.Promise;Xn.debug=Mn.debug;Xn.derive=Mn.derive;Xn.extend=Mn.extend;Xn.props=Mn.props;Xn.override=Mn.override;Xn.Events=Mn.Events;Xn.getByKeyPath=Mn.getByKeyPath;Xn.setByKeyPath=Mn.setByKeyPath;Xn.delByKeyPath=Mn.delByKeyPath;Xn.shallowClone=Mn.shallowClone;Xn.deepClone=Mn.deepClone;Xn.getObjectDiff=Mn.getObjectDiff;Xn.asap=Mn.asap;Xn.maxKey=Mn.maxKey;Xn.minKey=Mn.minKey;Xn.addons=Mn.addons;Xn.connections=Mn.connections;Xn.MultiModifyError=Mn.MultiModifyError;Xn.errnames=Mn.errnames;Xn.IndexSpec=Mn.IndexSpec;Xn.TableSchema=Mn.TableSchema;Xn.dependencies=Mn.dependencies;Xn.semVer=Mn.semVer;Xn.version=Mn.version;Xn.default=Mn.default;Xn.Dexie=Mn.Dexie;e.Dexie=Xn})(this.BX=this.BX||{});
 



// file: /bitrix/js/ui/vue/components/smiles/dist/smiles.bundle.js
(function(t,e,s,i,n){"use strict";var l=function(){function t(e){babelHelpers.classCallCheck(this,t);if(typeof e!=="undefined"){this.restClient=e}else{this.restClient=new BX.RestClient}this.db=new s.Dexie("bx-ui-smiles");this.db.version(1).stores({sets:"id, parentId, name, type, image",smiles:"id, setId, name, image, typing, width, height, originalWidth, originalHeight, definition"})}babelHelpers.createClass(t,[{key:"loadFromCache",value:function t(){var e=this;var s=new BX.Promise;var i=[];var n=[];this.db.transaction("r",this.db.sets,this.db.smiles,function(){e.db.sets.each(function(t){return e.db.smiles.where("setId").equals(t.id).first().then(function(e){i.push(babelHelpers.objectSpread({},t,{image:e.image}))}).catch(function(t){return s.reject(t)})}).then(function(){return e.db.smiles.where("setId").equals(i[0].id).each(function(t){n.push(t)})}).then(function(){var t={sets:i,smiles:n};s.resolve(t)}).catch(function(t){return s.reject(t)})});return s}},{key:"loadFromServer",value:function t(){var e=this;var s=new BX.Promise;this.restClient.callMethod("smile.get").then(function(t){var i=[];var n=[];var l=t.data();var r={};l.smiles=l.smiles.map(function(t){if(!r[t.setId]){r[t.setId]=t.image}var e=t.width;if(t.definition=="HD"){e=e*2}else if(t.definition=="UHD"){e=e*4}var s=t.height;if(t.definition=="HD"){s=s*2}else if(t.definition=="UHD"){s=s*4}return babelHelpers.objectSpread({},t,{originalWidth:e,originalHeight:s})});l.sets.forEach(function(t){i.push(babelHelpers.objectSpread({},t,{image:r[t.id]}))});l.smiles.forEach(function(t){if(t.setId==i[0].id){n.push(t)}});var a={sets:i,smiles:n};s.resolve(a);e.db.smiles.clear().then(function(){return e.db.sets.clear().then(function(){e.db.sets.bulkAdd(i);e.db.smiles.bulkAdd(l.smiles)}).catch(function(t){return s.reject(t)})}).catch(function(t){return s.reject(t)})}).catch(function(t){return s.reject(t)});return s}},{key:"changeSet",value:function t(e){var s=new BX.Promise;this.db.smiles.where("setId").equals(e).toArray(function(t){s.resolve(t)}).catch(function(t){return s.reject(t)});return s}}]);return t}();i.Vue.component("bx-smiles",{data:function t(){return{smiles:[],sets:[]}},created:function t(){var e=this;this.setSelected=0;this.serverLoad=false;var s=this.$root.$bitrixRestClient||n.rest;this.smilesController=new l(s);this.smilesController.loadFromCache().then(function(t){if(e.serverLoad)return true;e.smiles=t.smiles;e.sets=t.sets.map(function(t,s){t.selected=e.setSelected===s;return t})});this.smilesController.loadFromServer().then(function(t){e.smiles=t.smiles;e.sets=t.sets.map(function(t,s){t.selected=e.setSelected===s;return t})})},methods:{selectSet:function t(e){var s=this;this.$emit("selectSet",{setId:e});this.smilesController.changeSet(e).then(function(t){s.smiles=t;s.sets.map(function(t){t.selected=t.id===e;if(t.selected){s.setSelected=e}return t});s.$refs.elements.scrollTop=0})},selectSmile:function t(e){this.$emit("selectSmile",{text:" "+e+" "})}},template:'\n\t\t<div class="bx-ui-smiles-box">\n\t\t\t<div class="bx-ui-smiles-elements-wrap" ref="elements">\n\t\t\t\t<template v-if="!smiles.length">\n\t\t\t\t\t<svg class="bx-ui-smiles-loading-circular" viewBox="25 25 50 50">\n\t\t\t\t\t\t<circle class="bx-ui-smiles-loading-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t\t\t<circle class="bx-ui-smiles-loading-inner-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</template>\n\t\t\t\t<template v-else v-for="smile in smiles">\n\t\t\t\t\t<div class="bx-ui-smiles-smile">\n\t\t\t\t\t\t<img v-bx-lazyload :key="smile.id"\n\t\t\t\t\t\t\tclass="bx-ui-smiles-smile-icon"\n\t\t\t\t\t\t\t:data-lazyload-src="smile.image"\n\t\t\t\t\t\t\tdata-lazyload-error-class="bx-ui-smiles-smile-icon-error"\n\t\t\t\t\t\t\t:title="smile.name"\n\t\t\t\t\t\t\t:style="{height: (smile.originalHeight*0.5)+\'px\', width: (smile.originalWidth*0.5)+\'px\'}"\n\t\t\t\t\t\t\t@click="selectSmile(smile.typing)"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<template v-if="sets.length > 1">\n\t\t\t\t<div class="bx-ui-smiles-sets">\n\t\t\t\t\t<template v-for="set in sets">\n\t\t\t\t\t\t<div :class="[\'bx-ui-smiles-set\', {\'bx-ui-smiles-set-selected\': set.selected}]">\n\t\t\t\t\t\t\t<img v-bx-lazyload :key="set.id"\n\t\t\t\t\t\t\t\tclass="bx-ui-smiles-set-icon"\n\t\t\t\t\t\t\t\t:data-lazyload-src="set.image"\n\t\t\t\t\t\t\t\tdata-lazyload-error-class="bx-ui-smiles-set-icon-error"\n\t\t\t\t\t\t\t\t:title="set.name"\n\t\t\t\t\t\t\t\t@click="selectSet(set.id)"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},window,BX,BX,BX);
 



// file: /bitrix/js/main/md5/dist/md5.bundle.js
(function(exports){"use strict";var md5=function(){var ERROR="input is invalid type";var WINDOW=(typeof window==="undefined"?"undefined":babelHelpers.typeof(window))==="object";var root=WINDOW?window:{};if(root.JS_MD5_NO_WINDOW){WINDOW=false}var WEB_WORKER=!WINDOW&&(typeof self==="undefined"?"undefined":babelHelpers.typeof(self))==="object";var NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process==="undefined"?"undefined":babelHelpers.typeof(process))==="object"&&process.versions&&process.versions.node;if(NODE_JS){root=global}else if(WEB_WORKER){root=self}var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&(typeof module==="undefined"?"undefined":babelHelpers.typeof(module))==="object"&&module.exports;var AMD=typeof define==="function"&&define.amd;var ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[128,32768,8388608,-2147483648];var SHIFT=[0,8,16,24];var OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"];var BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");var blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer);blocks=new Uint32Array(buffer)}if(root.JS_MD5_NO_NODE_JS||!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(e){return babelHelpers.typeof(e)==="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer}}var createOutputMethod=function e(t){return function(e){return new Md5(true).update(e)[t]()}};var createMethod=function e(){var t=createOutputMethod("hex");if(NODE_JS){t=nodeWrap(t)}t.create=function(){return new Md5};t.update=function(e){return t.create().update(e)};for(var r=0;r<OUTPUT_TYPES.length;++r){var s=OUTPUT_TYPES[r];t[s]=createOutputMethod(s)}return t};var nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')");var Buffer=eval("require('buffer').Buffer");var nodeMethod=function e(t){if(typeof t==="string"){return crypto.createHash("md5").update(t,"utf8").digest("hex")}else{if(t===null||t===undefined){throw ERROR}else if(t.constructor===ArrayBuffer){t=new Uint8Array(t)}}if(Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer){return crypto.createHash("md5").update(new Buffer(t)).digest("hex")}else{return method(t)}};return nodeMethod};function Md5(e){if(e){blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;this.blocks=blocks;this.buffer8=buffer8}else{if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t);this.blocks=new Uint32Array(t)}else{this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=false;this.first=true}Md5.prototype.update=function(e){if(this.finalized){return}var t,r=babelHelpers.typeof(e);if(r!=="string"){if(r==="object"){if(e===null){throw ERROR}else if(ARRAY_BUFFER&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(e)){throw ERROR}}}else{throw ERROR}t=true}var s,i=0,f,o=e.length,h=this.blocks;var a=this.buffer8;while(i<o){if(this.hashed){this.hashed=false;h[0]=h[16];h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0}if(t){if(ARRAY_BUFFER){for(f=this.start;i<o&&f<64;++i){a[f++]=e[i]}}else{for(f=this.start;i<o&&f<64;++i){h[f>>2]|=e[i]<<SHIFT[f++&3]}}}else{if(ARRAY_BUFFER){for(f=this.start;i<o&&f<64;++i){s=e.charCodeAt(i);if(s<128){a[f++]=s}else if(s<2048){a[f++]=192|s>>6;a[f++]=128|s&63}else if(s<55296||s>=57344){a[f++]=224|s>>12;a[f++]=128|s>>6&63;a[f++]=128|s&63}else{s=65536+((s&1023)<<10|e.charCodeAt(++i)&1023);a[f++]=240|s>>18;a[f++]=128|s>>12&63;a[f++]=128|s>>6&63;a[f++]=128|s&63}}}else{for(f=this.start;i<o&&f<64;++i){s=e.charCodeAt(i);if(s<128){h[f>>2]|=s<<SHIFT[f++&3]}else if(s<2048){h[f>>2]|=(192|s>>6)<<SHIFT[f++&3];h[f>>2]|=(128|s&63)<<SHIFT[f++&3]}else if(s<55296||s>=57344){h[f>>2]|=(224|s>>12)<<SHIFT[f++&3];h[f>>2]|=(128|s>>6&63)<<SHIFT[f++&3];h[f>>2]|=(128|s&63)<<SHIFT[f++&3]}else{s=65536+((s&1023)<<10|e.charCodeAt(++i)&1023);h[f>>2]|=(240|s>>18)<<SHIFT[f++&3];h[f>>2]|=(128|s>>12&63)<<SHIFT[f++&3];h[f>>2]|=(128|s>>6&63)<<SHIFT[f++&3];h[f>>2]|=(128|s&63)<<SHIFT[f++&3]}}}}this.lastByteIndex=f;this.bytes+=f-this.start;if(f>=64){this.start=f-64;this.hash();this.hashed=true}else{this.start=f}}if(this.bytes>4294967295){this.hBytes+=this.bytes/4294967296<<0;this.bytes=this.bytes%4294967296}return this};Md5.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[t&3];if(t>=56){if(!this.hashed){this.hash()}e[0]=e[16];e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0}e[14]=this.bytes<<3;e[15]=this.hBytes<<3|this.bytes>>>29;this.hash()};Md5.prototype.hash=function(){var e,t,r,s,i,f,o=this.blocks;if(this.first){e=o[0]-680876937;e=(e<<7|e>>>25)-271733879<<0;s=(-1732584194^e&2004318071)+o[1]-117830708;s=(s<<12|s>>>20)+e<<0;r=(-271733879^s&(e^-271733879))+o[2]-1126478375;r=(r<<17|r>>>15)+s<<0;t=(e^r&(s^e))+o[3]-1316259209;t=(t<<22|t>>>10)+r<<0}else{e=this.h0;t=this.h1;r=this.h2;s=this.h3;e+=(s^t&(r^s))+o[0]-680876936;e=(e<<7|e>>>25)+t<<0;s+=(r^e&(t^r))+o[1]-389564586;s=(s<<12|s>>>20)+e<<0;r+=(t^s&(e^t))+o[2]+606105819;r=(r<<17|r>>>15)+s<<0;t+=(e^r&(s^e))+o[3]-1044525330;t=(t<<22|t>>>10)+r<<0}e+=(s^t&(r^s))+o[4]-176418897;e=(e<<7|e>>>25)+t<<0;s+=(r^e&(t^r))+o[5]+1200080426;s=(s<<12|s>>>20)+e<<0;r+=(t^s&(e^t))+o[6]-1473231341;r=(r<<17|r>>>15)+s<<0;t+=(e^r&(s^e))+o[7]-45705983;t=(t<<22|t>>>10)+r<<0;e+=(s^t&(r^s))+o[8]+1770035416;e=(e<<7|e>>>25)+t<<0;s+=(r^e&(t^r))+o[9]-1958414417;s=(s<<12|s>>>20)+e<<0;r+=(t^s&(e^t))+o[10]-42063;r=(r<<17|r>>>15)+s<<0;t+=(e^r&(s^e))+o[11]-1990404162;t=(t<<22|t>>>10)+r<<0;e+=(s^t&(r^s))+o[12]+1804603682;e=(e<<7|e>>>25)+t<<0;s+=(r^e&(t^r))+o[13]-40341101;s=(s<<12|s>>>20)+e<<0;r+=(t^s&(e^t))+o[14]-1502002290;r=(r<<17|r>>>15)+s<<0;t+=(e^r&(s^e))+o[15]+1236535329;t=(t<<22|t>>>10)+r<<0;e+=(r^s&(t^r))+o[1]-165796510;e=(e<<5|e>>>27)+t<<0;s+=(t^r&(e^t))+o[6]-1069501632;s=(s<<9|s>>>23)+e<<0;r+=(e^t&(s^e))+o[11]+643717713;r=(r<<14|r>>>18)+s<<0;t+=(s^e&(r^s))+o[0]-373897302;t=(t<<20|t>>>12)+r<<0;e+=(r^s&(t^r))+o[5]-701558691;e=(e<<5|e>>>27)+t<<0;s+=(t^r&(e^t))+o[10]+38016083;s=(s<<9|s>>>23)+e<<0;r+=(e^t&(s^e))+o[15]-660478335;r=(r<<14|r>>>18)+s<<0;t+=(s^e&(r^s))+o[4]-405537848;t=(t<<20|t>>>12)+r<<0;e+=(r^s&(t^r))+o[9]+568446438;e=(e<<5|e>>>27)+t<<0;s+=(t^r&(e^t))+o[14]-1019803690;s=(s<<9|s>>>23)+e<<0;r+=(e^t&(s^e))+o[3]-187363961;r=(r<<14|r>>>18)+s<<0;t+=(s^e&(r^s))+o[8]+1163531501;t=(t<<20|t>>>12)+r<<0;e+=(r^s&(t^r))+o[13]-1444681467;e=(e<<5|e>>>27)+t<<0;s+=(t^r&(e^t))+o[2]-51403784;s=(s<<9|s>>>23)+e<<0;r+=(e^t&(s^e))+o[7]+1735328473;r=(r<<14|r>>>18)+s<<0;t+=(s^e&(r^s))+o[12]-1926607734;t=(t<<20|t>>>12)+r<<0;i=t^r;e+=(i^s)+o[5]-378558;e=(e<<4|e>>>28)+t<<0;s+=(i^e)+o[8]-2022574463;s=(s<<11|s>>>21)+e<<0;f=s^e;r+=(f^t)+o[11]+1839030562;r=(r<<16|r>>>16)+s<<0;t+=(f^r)+o[14]-35309556;t=(t<<23|t>>>9)+r<<0;i=t^r;e+=(i^s)+o[1]-1530992060;e=(e<<4|e>>>28)+t<<0;s+=(i^e)+o[4]+1272893353;s=(s<<11|s>>>21)+e<<0;f=s^e;r+=(f^t)+o[7]-155497632;r=(r<<16|r>>>16)+s<<0;t+=(f^r)+o[10]-1094730640;t=(t<<23|t>>>9)+r<<0;i=t^r;e+=(i^s)+o[13]+681279174;e=(e<<4|e>>>28)+t<<0;s+=(i^e)+o[0]-358537222;s=(s<<11|s>>>21)+e<<0;f=s^e;r+=(f^t)+o[3]-722521979;r=(r<<16|r>>>16)+s<<0;t+=(f^r)+o[6]+76029189;t=(t<<23|t>>>9)+r<<0;i=t^r;e+=(i^s)+o[9]-640364487;e=(e<<4|e>>>28)+t<<0;s+=(i^e)+o[12]-421815835;s=(s<<11|s>>>21)+e<<0;f=s^e;r+=(f^t)+o[15]+530742520;r=(r<<16|r>>>16)+s<<0;t+=(f^r)+o[2]-995338651;t=(t<<23|t>>>9)+r<<0;e+=(r^(t|~s))+o[0]-198630844;e=(e<<6|e>>>26)+t<<0;s+=(t^(e|~r))+o[7]+1126891415;s=(s<<10|s>>>22)+e<<0;r+=(e^(s|~t))+o[14]-1416354905;r=(r<<15|r>>>17)+s<<0;t+=(s^(r|~e))+o[5]-57434055;t=(t<<21|t>>>11)+r<<0;e+=(r^(t|~s))+o[12]+1700485571;e=(e<<6|e>>>26)+t<<0;s+=(t^(e|~r))+o[3]-1894986606;s=(s<<10|s>>>22)+e<<0;r+=(e^(s|~t))+o[10]-1051523;r=(r<<15|r>>>17)+s<<0;t+=(s^(r|~e))+o[1]-2054922799;t=(t<<21|t>>>11)+r<<0;e+=(r^(t|~s))+o[8]+1873313359;e=(e<<6|e>>>26)+t<<0;s+=(t^(e|~r))+o[15]-30611744;s=(s<<10|s>>>22)+e<<0;r+=(e^(s|~t))+o[6]-1560198380;r=(r<<15|r>>>17)+s<<0;t+=(s^(r|~e))+o[13]+1309151649;t=(t<<21|t>>>11)+r<<0;e+=(r^(t|~s))+o[4]-145523070;e=(e<<6|e>>>26)+t<<0;s+=(t^(e|~r))+o[11]-1120210379;s=(s<<10|s>>>22)+e<<0;r+=(e^(s|~t))+o[2]+718787259;r=(r<<15|r>>>17)+s<<0;t+=(s^(r|~e))+o[9]-343485551;t=(t<<21|t>>>11)+r<<0;if(this.first){this.h0=e+1732584193<<0;this.h1=t-271733879<<0;this.h2=r-1732584194<<0;this.h3=s+271733878<<0;this.first=false}else{this.h0=this.h0+e<<0;this.h1=this.h1+t<<0;this.h2=this.h2+r<<0;this.h3=this.h3+s<<0}};Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,s=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]};Md5.prototype.toString=Md5.prototype.hex;Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,s=this.h3;return[e&255,e>>8&255,e>>16&255,e>>24&255,t&255,t>>8&255,t>>16&255,t>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,s&255,s>>8&255,s>>16&255,s>>24&255]};Md5.prototype.array=Md5.prototype.digest;Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16);var t=new Uint32Array(e);t[0]=this.h0;t[1]=this.h1;t[2]=this.h2;t[3]=this.h3;return e};Md5.prototype.buffer=Md5.prototype.arrayBuffer;Md5.prototype.base64=function(){var e,t,r,s="",i=this.array();for(var f=0;f<15;){e=i[f++];t=i[f++];r=i[f++];s+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[(e<<4|t>>>4)&63]+BASE64_ENCODE_CHAR[(t<<2|r>>>6)&63]+BASE64_ENCODE_CHAR[r&63]}e=i[f];s+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==";return s};return createMethod()}();exports.md5=md5})(this.BX=this.BX||{});
 



// file: /bitrix/js/ui/vue/vuex/dist/vuex.bitrix.bundle.js
(function(e,t,n,r,i){"use strict";var a=function e(t){var n=Number(t.version.split(".")[0]);if(n>=2){t.mixin({beforeCreate:i})}else{var r=t.prototype._init;t.prototype._init=function(e){if(e===void 0)e={};e.init=e.init?[i].concat(e.init):i;r.call(this,e)}}function i(){var e=this.$options;if(e.store){this.$store=typeof e.store==="function"?e.store():e.store}else if(e.parent&&e.parent.$store){this.$store=e.parent.$store}}};var o=typeof window!=="undefined"&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function s(e){if(!o){return}e._devtoolHook=o;o.emit("vuex:init",e);o.on("vuex:travel-to-state",function(t){e.replaceState(t)});e.subscribe(function(e,t){o.emit("vuex:mutation",e,t)})}function u(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function c(e){return e!==null&&babelHelpers.typeof(e)==="object"}function l(e){return e&&typeof e.then==="function"}function f(e,t){if(!e){throw new Error("[vuex] "+t)}}var d=function e(t,n){this.runtime=n;this._children=Object.create(null);this._rawModule=t;var r=t.state;this.state=(typeof r==="function"?r():r)||{}};var h={namespaced:{configurable:true}};h.namespaced.get=function(){return!!this._rawModule.namespaced};d.prototype.addChild=function e(t,n){this._children[t]=n};d.prototype.removeChild=function e(t){delete this._children[t]};d.prototype.getChild=function e(t){return this._children[t]};d.prototype.update=function e(t){this._rawModule.namespaced=t.namespaced;if(t.actions){this._rawModule.actions=t.actions}if(t.mutations){this._rawModule.mutations=t.mutations}if(t.getters){this._rawModule.getters=t.getters}};d.prototype.forEachChild=function e(t){u(this._children,t)};d.prototype.forEachGetter=function e(t){if(this._rawModule.getters){u(this._rawModule.getters,t)}};d.prototype.forEachAction=function e(t){if(this._rawModule.actions){u(this._rawModule.actions,t)}};d.prototype.forEachMutation=function e(t){if(this._rawModule.mutations){u(this._rawModule.mutations,t)}};Object.defineProperties(d.prototype,h);var p=function e(t){this.register([],t,false)};p.prototype.get=function e(t){return t.reduce(function(e,t){return e.getChild(t)},this.root)};p.prototype.getNamespace=function e(t){var n=this.root;return t.reduce(function(e,t){n=n.getChild(t);return e+(n.namespaced?t+"/":"")},"")};p.prototype.update=function e(t){v([],this.root,t)};p.prototype.register=function e(t,n,r){var i=this;if(r===void 0)r=true;{b(t,n)}var a=new d(n,r);if(t.length===0){this.root=a}else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],a)}if(n.modules){u(n.modules,function(e,n){i.register(t.concat(n),e,r)})}};p.prototype.unregister=function e(t){var n=this.get(t.slice(0,-1));var r=t[t.length-1];if(!n.getChild(r).runtime){return}n.removeChild(r)};function v(e,t,n){{b(e,n)}t.update(n);if(n.modules){for(var r in n.modules){if(!t.getChild(r)){{console.warn("[vuex] trying to add a new module '"+r+"' on hot reloading, "+"manual reload is needed")}return}v(e.concat(r),t.getChild(r),n.modules[r])}}}var m={assert:function e(t){return typeof t==="function"},expected:"function"};var g={assert:function e(t){return typeof t==="function"||babelHelpers.typeof(t)==="object"&&typeof t.handler==="function"},expected:'function or object with "handler" function'};var y={getters:m,mutations:m,actions:g};function b(e,t){Object.keys(y).forEach(function(n){if(!t[n]){return}var r=y[n];u(t[n],function(t,i){f(r.assert(t),S(e,n,i,t,r.expected))})})}function S(e,t,n,r,i){var a=t+" should be "+i+' but "'+t+"."+n+'"';if(e.length>0){a+=' in module "'+e.join(".")+'"'}a+=" is "+JSON.stringify(r)+".";return a}var w=function e(n){var r=this;if(n===void 0)n={};{f(t.VueVendor,"must call Vue.use(Vuex) before creating a store instance.");f(typeof Promise!=="undefined","vuex requires a Promise polyfill in this browser.");f(this instanceof e,"Store must be called with the new operator.")}var i=n.plugins;if(i===void 0)i=[];var a=n.strict;if(a===void 0)a=false;var o=n.state;if(o===void 0)o={};if(typeof o==="function"){o=o()||{}}this._committing=false;this._actions=Object.create(null);this._actionSubscribers=[];this._mutations=Object.create(null);this._wrappedGetters=Object.create(null);this._modules=new p(n);this._modulesNamespaceMap=Object.create(null);this._subscribers=[];this._watcherVM=new t.VueVendor;var u=this;var c=this;var l=c.dispatch;var d=c.commit;this.dispatch=function e(t,n){return l.call(u,t,n)};this.commit=function e(t,n,r){return d.call(u,t,n,r)};this.strict=a;V(this,o,[],this._modules.root);x(this,o);i.forEach(function(e){return e(r)});if(t.VueVendor.config.devtools){s(this)}};var _={state:{configurable:true}};_.state.get=function(){return this._vm._data.$$state};_.state.set=function(e){{f(false,"Use store.replaceState() to explicit replace store state.")}};w.prototype.commit=function e(t,n,r){var i=this;var a=H(t,n,r);var o=a.type;var s=a.payload;var u=a.options;var c={type:o,payload:s};var l=this._mutations[o];if(!l){{console.error("[vuex] unknown mutation type: "+o)}return}this._withCommit(function(){l.forEach(function e(t){t(s)})});this._subscribers.forEach(function(e){return e(c,i.state)});if(u&&u.silent){console.warn("[vuex] mutation type: "+o+". Silent option has been removed. "+"Use the filter functionality in the vue-devtools")}};w.prototype.dispatch=function e(t,n){var r=this;var i=H(t,n);var a=i.type;var o=i.payload;var s={type:a,payload:o};var u=this._actions[a];if(!u){{console.error("[vuex] unknown action type: "+a)}return}this._actionSubscribers.forEach(function(e){return e(s,r.state)});return u.length>1?Promise.all(u.map(function(e){return e(o)})):u[0](o)};w.prototype.subscribe=function e(t){return k(t,this._subscribers)};w.prototype.subscribeAction=function e(t){return k(t,this._actionSubscribers)};w.prototype.watch=function e(t,n,r){var i=this;{f(typeof t==="function","store.watch only accepts a function.")}return this._watcherVM.$watch(function(){return t(i.state,i.getters)},n,r)};w.prototype.replaceState=function e(t){var n=this;this._withCommit(function(){n._vm._data.$$state=t})};w.prototype.registerModule=function e(t,n,r){if(r===void 0)r={};if(typeof t==="string"){t=[t]}{f(Array.isArray(t),"module path must be a string or an Array.");f(t.length>0,"cannot register the root module by using registerModule.")}this._modules.register(t,n);V(this,this.state,t,this._modules.get(t),r.preserveState);x(this,this.state)};w.prototype.unregisterModule=function e(n){var r=this;if(typeof n==="string"){n=[n]}{f(Array.isArray(n),"module path must be a string or an Array.")}this._modules.unregister(n);this._withCommit(function(){var e=j(r.state,n.slice(0,-1));t.VueVendor.delete(e,n[n.length-1])});C(this)};w.prototype.hotUpdate=function e(t){this._modules.update(t);C(this,true)};w.prototype._withCommit=function e(t){var n=this._committing;this._committing=true;t();this._committing=n};Object.defineProperties(w.prototype,_);function k(e,t){if(t.indexOf(e)<0){t.push(e)}return function(){var n=t.indexOf(e);if(n>-1){t.splice(n,1)}}}function C(e,t){e._actions=Object.create(null);e._mutations=Object.create(null);e._wrappedGetters=Object.create(null);e._modulesNamespaceMap=Object.create(null);var n=e.state;V(e,n,[],e._modules.root,true);x(e,n,t)}function x(e,n,r){var i=e._vm;e.getters={};var a=e._wrappedGetters;var o={};u(a,function(t,n){o[n]=function(){return t(e)};Object.defineProperty(e.getters,n,{get:function t(){return e._vm[n]},enumerable:true})});var s=t.VueVendor.config.silent;t.VueVendor.config.silent=true;e._vm=new t.VueVendor({data:{$$state:n},computed:o});t.VueVendor.config.silent=s;if(e.strict){E(e)}if(i){if(r){e._withCommit(function(){i._data.$$state=null})}t.VueVendor.nextTick(function(){return i.$destroy()})}}function V(e,n,r,i,a){var o=!r.length;var s=e._modules.getNamespace(r);if(i.namespaced){e._modulesNamespaceMap[s]=i}if(!o&&!a){var u=j(n,r.slice(0,-1));var c=r[r.length-1];e._withCommit(function(){t.VueVendor.set(u,c,i.state)})}var l=i.context=O(e,s,r);i.forEachMutation(function(t,n){var r=s+n;I(e,r,t,l)});i.forEachAction(function(t,n){var r=t.root?n:s+n;var i=t.handler||t;M(e,r,i,l)});i.forEachGetter(function(t,n){var r=s+n;N(e,r,t,l)});i.forEachChild(function(t,i){V(e,n,r.concat(i),t,a)})}function O(e,t,n){var r=t==="";var i={dispatch:r?e.dispatch:function(n,r,i){var a=H(n,r,i);var o=a.payload;var s=a.options;var u=a.type;if(!s||!s.root){u=t+u;if(!e._actions[u]){console.error("[vuex] unknown local action type: "+a.type+", global type: "+u);return}}return e.dispatch(u,o)},commit:r?e.commit:function(n,r,i){var a=H(n,r,i);var o=a.payload;var s=a.options;var u=a.type;if(!s||!s.root){u=t+u;if(!e._mutations[u]){console.error("[vuex] unknown local mutation type: "+a.type+", global type: "+u);return}}e.commit(u,o,s)}};Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return A(e,t)}},state:{get:function t(){return j(e.state,n)}}});return i}function A(e,t){var n={};var r=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,r)!==t){return}var a=i.slice(r);Object.defineProperty(n,a,{get:function t(){return e.getters[i]},enumerable:true})});return n}function I(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function t(i){n.call(e,r.state,i)})}function M(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push(function t(i,a){var o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},i,a);if(!l(o)){o=Promise.resolve(o)}if(e._devtoolHook){return o.catch(function(t){e._devtoolHook.emit("vuex:error",t);throw t})}else{return o}})}function N(e,t,n,r){if(e._wrappedGetters[t]){{console.error("[vuex] duplicate getter key: "+t)}return}e._wrappedGetters[t]=function e(t){return n(r.state,r.getters,t.state,t.getters)}}function E(e){e._vm.$watch(function(){return this._data.$$state},function(){{f(e._committing,"Do not mutate vuex store state outside mutation handlers.")}},{deep:true,sync:true})}function j(e,t){return t.length?t.reduce(function(e,t){return e[t]},e):e}function H(e,t,n){if(c(e)&&e.type){n=t;t=e;e=e.type}{f(typeof e==="string","Expects string as the type, but found "+babelHelpers.typeof(e)+".")}return{type:e,payload:t,options:n}}function P(e){a(e)}var B=X(function(e,t){var n={};L(t).forEach(function(t){var r=t.key;var i=t.val;n[r]=function t(){var n=this.$store.state;var r=this.$store.getters;if(e){var a=R(this.$store,"mapState",e);if(!a){return}n=a.context.state;r=a.context.getters}return typeof i==="function"?i.call(this,n,r):n[i]};n[r].vuex=true});return n});var D=X(function(e,t){var n={};L(t).forEach(function(t){var r=t.key;var i=t.val;n[r]=function t(){var n=[],r=arguments.length;while(r--){n[r]=arguments[r]}var a=this.$store.commit;if(e){var o=R(this.$store,"mapMutations",e);if(!o){return}a=o.context.commit}return typeof i==="function"?i.apply(this,[a].concat(n)):a.apply(this.$store,[i].concat(n))}});return n});var $=X(function(e,t){var n={};L(t).forEach(function(t){var r=t.key;var i=t.val;i=e+i;n[r]=function t(){if(e&&!R(this.$store,"mapGetters",e)){return}if(!(i in this.$store.getters)){console.error("[vuex] unknown getter: "+i);return}return this.$store.getters[i]};n[r].vuex=true});return n});var T=X(function(e,t){var n={};L(t).forEach(function(t){var r=t.key;var i=t.val;n[r]=function t(){var n=[],r=arguments.length;while(r--){n[r]=arguments[r]}var a=this.$store.dispatch;if(e){var o=R(this.$store,"mapActions",e);if(!o){return}a=o.context.dispatch}return typeof i==="function"?i.apply(this,[a].concat(n)):a.apply(this.$store,[i].concat(n))}});return n});var G=function e(t){return{mapState:B.bind(null,t),mapGetters:$.bind(null,t),mapMutations:D.bind(null,t),mapActions:T.bind(null,t)}};function L(e){return Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}})}function X(e){return function(t,n){if(typeof t!=="string"){n=t;t=""}else if(t.charAt(t.length-1)!=="/"){t+="/"}return e(t,n)}}function R(e,t,n){var r=e._modulesNamespaceMap[n];if(!r){console.error("[vuex] module namespace not found in "+t+"(): "+n)}return r}var J={Store:w,install:P,version:"3.0.1",mapState:B,mapMutations:D,mapGetters:$,mapActions:T,createNamespacedHelpers:G};t.VueVendor.use(J);var U=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.siteId=t.siteId||"default";this.userId=t.userId||0;this.storage=t.storage||"default";this.name=t.name||"";this.code=(window.md5||r.md5)(this.siteId+"/"+this.userId+"/"+this.storage+"/"+this.name);this.db=new n.Dexie("bx-vuex-model");this.db.version(1).stores({data:"code, value"})}babelHelpers.createClass(e,[{key:"get",value:function e(){var t=this;return new Promise(function(e,n){t.db.data.where("code").equals(t.code).first().then(function(t){e(t?t.value:null)},function(e){n(e)})})}},{key:"set",value:function e(t){var n=this;return new Promise(function(e,r){n.db.data.put({code:n.code,value:t}).then(function(t){e(true)},function(e){r(e)})})}},{key:"clear",value:function e(){var t=this;return new Promise(function(e,n){t.db.data.delete(t.code).then(function(t){e(true)},function(e){n(e)})})}}]);return e}();var W=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.siteId=t.siteId||"default";this.userId=t.userId||0;this.storage=t.storage||"default";this.name=t.name||"";this.enabled=false;if(typeof window.localStorage!=="undefined"){try{window.localStorage.setItem("__bx_test_ls_feature__","ok");if(window.localStorage.getItem("__bx_test_ls_feature__")==="ok"){window.localStorage.removeItem("__bx_test_ls_feature__");this.enabled=true}}catch(e){}}this.code="bx-vuex-"+(window.md5||r.md5)(this.siteId+"/"+this.userId+"/"+this.storage+"/"+this.name)}babelHelpers.createClass(e,[{key:"get",value:function e(){var t=this;return new Promise(function(e,n){if(!t.enabled){e(null);return true}var r=window.localStorage.getItem(t.code);if(typeof r!=="string"){e(null);return true}try{e(t.prepareValueAfterGet(JSON.parse(r)))}catch(e){n(e)}})}},{key:"set",value:function e(t){var n=this;return new Promise(function(e,r){if(n.enabled){window.localStorage.setItem(n.code,JSON.stringify(n.prepareValueBeforeSet(t)))}e(true)})}},{key:"clear",value:function e(){var t=this;return new Promise(function(e,n){if(t.enabled){window.localStorage.removeItem(t.code)}e(true)})}},{key:"prepareValueAfterGet",value:function e(t){var n=this;if(t instanceof Array){t=t.map(function(e){return n.prepareValueAfterGet(e)})}else if(t instanceof Date);else if(t&&babelHelpers.typeof(t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueAfterGet(t[r])}}}else if(typeof t==="string"){if(t.startsWith("#DT#")){t=new Date(t.substring(4))}}return t}},{key:"prepareValueBeforeSet",value:function e(t){var n=this;if(t instanceof Array){t=t.map(function(e){return n.prepareValueBeforeSet(e)})}else if(t instanceof Date){t="#DT#"+t.toISOString()}else if(t&&babelHelpers.typeof(t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueBeforeSet(t[r])}}}return t}}]);return e}();var q=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.siteId=t.siteId||"default";this.userId=t.userId||0;this.storage=t.storage||"default";this.name=t.name||"";this.code=(window.md5||r.md5)(this.siteId+"/"+this.userId+"/"+this.storage+"/"+this.name);if(!this.isJnContext()&&typeof ApplicationStorage==="undefined"){console.error('ApplicationStorage is not defined, load "webcomponent/storage" extension.')}}babelHelpers.createClass(e,[{key:"get",value:function e(){var t=this;return new Promise(function(e,n){if(t.isJnContext()){var r=Application.sharedStorage.get(t.code);e(r?r:null)}else if(typeof ApplicationStorage!=="undefined"){ApplicationStorage.get(t.code,null).then(function(n){return e(t.prepareValueAfterGet(JSON.parse(n)))})}else{e(null)}})}},{key:"set",value:function e(t){var n=this;return new Promise(function(e,r){if(n.isJnContext()){Application.sharedStorage().set(n.code,JSON.stringify(n.prepareValueBeforeSet(t)));e()}else if(typeof ApplicationStorage!=="undefined"){ApplicationStorage.set(n.code,JSON.stringify(n.prepareValueBeforeSet(t))).then(function(t){return e()})}else{e()}})}},{key:"clear",value:function e(){return this.set(null)}},{key:"isJnContext",value:function e(){return typeof env!=="undefined"}},{key:"prepareValueAfterGet",value:function e(t){var n=this;if(t instanceof Array){t=t.map(function(e){return n.prepareValueAfterGet(e)})}else if(t instanceof Date);else if(t&&babelHelpers.typeof(t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueAfterGet(t[r])}}}else if(typeof t==="string"){if(t.startsWith("#DT#")){t=new Date(t.substring(4))}}return t}},{key:"prepareValueBeforeSet",value:function e(t){var n=this;if(t instanceof Array){t=t.map(function(e){return n.prepareValueBeforeSet(e)})}else if(t instanceof Date){t="#DT#"+t.toISOString()}else if(t&&babelHelpers.typeof(t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueBeforeSet(t[r])}}}return t}}]);return e}();var F=function(){babelHelpers.createClass(e,[{key:"getName",value:function e(){return""}},{key:"getState",value:function e(){return{}}},{key:"getElementState",value:function e(){return{}}},{key:"getStateSaveException",value:function e(){return undefined}},{key:"getGetters",value:function e(){return{}}},{key:"getActions",value:function e(){return{}}},{key:"getMutations",value:function e(){return{}}},{key:"validate",value:function e(t){return{}}},{key:"setVariables",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!(babelHelpers.typeof(t)==="object"&&t)){console.error("VuexBuilderModel.setVars: passed variables is not a Object",store);return this}this.variables=t;return this}},{key:"getVariable",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;if(!t){return n}var r=t.toString().split(".");if(r.length===1){return this.variables[r[0]]}var i;var a=Object.assign({},this.variables);for(var o=0;o<r.length;o++){if(typeof a[r[o]]!=="undefined"){a=i=a[r[o]]}else{i=n;break}}return i}},{key:"getNamespace",value:function e(){return this.namespace?this.namespace:this.getName()}},{key:"setNamespace",value:function e(t){this.namespace=t.toString();this.databaseConfig.name=this.namespace;return this}},{key:"useDatabase",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.databaseConfig.active=!!t;var r=this.db===null;if(n.type){this.databaseConfig.type=n.type.toString();r=true}if(n.storage){this.databaseConfig.storage=n.storage.toString()}if(n.siteId){this.databaseConfig.siteId=n.siteId.toString()}if(n.userId){this.databaseConfig.userId=n.userId}if(typeof n.timeout==="number"){this.databaseConfig.timeout=n.timeout}if(r){if(this.databaseConfig.type===K.DatabaseType.indexedDb){this.db=new U(this.databaseConfig)}else if(this.databaseConfig.type===K.DatabaseType.localStorage){this.db=new W(this.databaseConfig)}else if(this.databaseConfig.type===K.DatabaseType.jnSharedStorage){this.db=new q(this.databaseConfig)}else{this.db=null}}return this}},{key:"useNamespace",value:function e(t){this.withNamespace=!!t;return this}},{key:"getStore",value:function e(){var t=this;return new Promise(function(e,n){var r="";if(t.withNamespace){r=t.namespace?t.namespace:t.getName();if(!r&&t.withNamespace){console.error("VuexModel.getStore: current model can not be run in Vuex modules mode",t.getState());n()}}if(t.db){t._getStoreFromDatabase().then(function(n){return e(t._createStore(n,r))})}else{e(t._createStore(t.getState(),r))}})}},{key:"getSaveTimeout",value:function e(){return 150}},{key:"getLoadedState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t}},{key:"saveState",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.isSaveAvailable()){return true}this.lastSaveState=n;if(this.saveStateTimeout){console.log("wait save...",this.getName());return true}console.log("Start saving",this.getName());var r=this.getSaveTimeout();if(typeof this.databaseConfig.timeout==="number"){r=this.databaseConfig.timeout}this.saveStateTimeout=setTimeout(function(){console.log("save!",t.getName());var e=t.lastSaveState;if(typeof e==="function"){e=e();if(babelHelpers.typeof(e)!=="object"||!e){return false}}t.db.set(t.cloneState(e,t.getStateSaveException()));t.lastState=null;t.saveStateTimeout=null},r);return true}},{key:"clearState",value:function e(){if(this.store){var t="vuexBuilderModelClearState";t=this.withNamespace?this.getNamespace()+"/"+t:t;this.store.commit(t);return true}return this.saveState(this.getState())}},{key:"clearDatabase",value:function e(){if(!this.isSaveAvailable()){return true}this.db.clear();return true}},{key:"isSaveAvailable",value:function e(){return this.db&&this.databaseConfig.active}},{key:"isSaveNeeded",value:function e(t){if(!this.isSaveAvailable()){return false}var n=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n){return true}for(var r in t){if(!t.hasOwnProperty(r)){continue}if(typeof n[r]==="undefined"){return true}else if(babelHelpers.typeof(n[r])==="object"&&n[r]){var i=e(t[r],n[r]);if(i){return true}}}return false};return n(t,this.getStateSaveException())}}],[{key:"create",value:function e(){return new this}}]);function e(){babelHelpers.classCallCheck(this,e);this.databaseConfig={type:K.DatabaseType.indexedDb,active:null,storage:"default",name:this.getName(),siteId:"default",userId:0,timeout:null};this.db=null;this.store=null;this.namespace=null;this.variables={};this.withNamespace=false}babelHelpers.createClass(e,[{key:"setStore",value:function e(t){if(!(t instanceof i.VuexVendor.Store)){console.error("VuexBuilderModel.setStore: passed store is not a Vuex.Store",t);return this}this.store=t;return this}},{key:"_getStoreFromDatabase",value:function e(){var t=this;clearTimeout(this.cacheTimeout);return new Promise(function(e){t.cacheTimeout=setTimeout(function(){console.warn("Cache loading timeout",t.getName());e(t.getState())},1e3);t.db.get().then(function(n){clearTimeout(t.cacheTimeout);n=t.getLoadedState(n?n:{});var r=t.getState();if(n){r=t._mergeState(r,n)}e(r)},function(n){clearTimeout(t.cacheTimeout);e(t.getState())})})}},{key:"_mergeState",value:function e(t,n){for(var r in t){if(!t.hasOwnProperty(r)){continue}if(typeof n[r]==="undefined"){n[r]=t[r]}else if(!(n[r]instanceof Array)&&babelHelpers.typeof(n[r])==="object"&&n[r]&&babelHelpers.typeof(t[r])==="object"&&t[r]){n[r]=Object.assign({},t[r],n[r])}}return n}},{key:"_createStore",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i={state:t,getters:this.getGetters(),actions:this.getActions(),mutations:this.getMutations()};i.mutations.vuexBuilderModelClearState=function(e){e=Object.assign(e,n.getState());n.saveState(e)};if(r){i.namespaced=true;i=babelHelpers.defineProperty({},r,i)}return i}},{key:"cloneState",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var i;if(t instanceof Array){i=[].concat(t.map(function(e){return n.cloneState(e)}))}else if(t instanceof Date){i=new Date(t.toISOString())}else if(babelHelpers.typeof(t)==="object"&&t){i={};for(var a in t){if(!t.hasOwnProperty(a)){continue}if(typeof r==="undefined"||typeof r[a]==="undefined"){i[a]=this.cloneState(t[a])}else if(babelHelpers.typeof(r[a])==="object"&&r[a]){i[a]=this.cloneState(t[a],r[a])}}}else{i=t}return i}}],[{key:"convertToArray",value:function e(t){var n=[];for(var r in t){if(t.hasOwnProperty(r)){n.push(t[r])}}return n}}]);return e}();var z=Object.freeze({indexedDb:"indexedDb",localStorage:"localStorage",jnSharedStorage:"jnSharedStorage"});var K=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){return new this}}]);function e(){babelHelpers.classCallCheck(this,e);this.models=[];this.databaseConfig={name:null,type:null,siteId:null,userId:null,timeout:null};this.withNamespace=true}babelHelpers.createClass(e,[{key:"addModel",value:function e(t){if(!(t instanceof F)){console.error("BX.VuexBuilder.addModel: passed model is not a BX.VuexBuilderModel",t,name);return this}this.models.push(t);return this}},{key:"useNamespace",value:function e(t){this.withNamespace=!!t;return this}},{key:"setDatabaseConfig",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!(babelHelpers.typeof(t)==="object"&&t)){return this}this.databaseConfig.active=true;this.databaseConfig.storage=t.name;this.databaseConfig.type=t.type||this.databaseConfig.type;this.databaseConfig.siteId=t.siteId||this.databaseConfig.siteId;this.databaseConfig.userId=t.userId||this.databaseConfig.userId;this.databaseConfig.timeout=typeof t.timeout!=="undefined"?t.timeout:this.databaseConfig.timeout;return this}},{key:"clearModelState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=[];this.models.forEach(function(e){n.push(e.clearState())});return new Promise(function(e,r){Promise.all(n).then(function(n){e(true);if(typeof t==="function"){t(true)}},function(e){console.error("BX.VuexBuilder.clearModelState: storage was not clear due to runtime errors.",e?e:"");if(typeof t!=="function"){r("ERROR_WHILE_CLEARING")}})})}},{key:"clearDatabase",value:function e(){var t=[];this.models.forEach(function(e){t.push(e.clearDatabase())});return new Promise(function(e,n){Promise.all(t).then(function(t){e(true);if(typeof callback==="function"){callback(true)}},function(e){console.error("BX.VuexBuilder.clearModelState: storage was not clear due to runtime errors.",e?e:"");if(typeof callback!=="function"){n("ERROR_WHILE_CLEARING")}})})}},{key:"build",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=this.models.length>1;if(!this.withNamespace&&r){return new Promise(function(e,t){console.error('BX.VuexBuilder.create: you can not use the "no namespace" mode with multiple databases.');if(typeof n!=="function"){t("MULTIPLE_MODULES_WITHOUT_NAMESPACE")}})}var i=[];this.models.forEach(function(e){if(t.databaseConfig.active&&e.databaseConfig.active!==false){e.useDatabase(true,t.databaseConfig)}if(t.withNamespace){e.useNamespace(true)}i.push(e.getStore())});return new Promise(function(e,r){Promise.all(i).then(function(r){var i={};r.forEach(function(e){Object.assign(i,e)});var a=Y.store(t.withNamespace?{modules:i}:i);t.models.forEach(function(e){return e.setStore(a)});e({store:a,models:t.models,builder:t});if(typeof n==="function"){n({store:a,models:t.models,builder:t})}},function(e){console.error("BX.VuexBuilder.create: storage was not created due to runtime errors.",e?e:"");if(typeof n!=="function"){r("ERROR_IN_MODEL")}})})}}]);return e}();K.DatabaseType=z;var Q=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"store",value:function e(t){return new J.Store(t)}},{key:"mapState",value:function e(){return J.mapState.apply(J,arguments)}},{key:"mapGetters",value:function e(){return J.mapGetters.apply(J,arguments)}},{key:"mapActions",value:function e(){return J.mapActions.apply(J,arguments)}},{key:"mapMutations",value:function e(){return J.mapMutations.apply(J,arguments)}},{key:"createNamespacedHelpers",value:function e(){return J.createNamespacedHelpers.apply(J,arguments)}},{key:"version",value:function e(){return J.version}}]);return e}();var Y=Q;e.Vuex=Y;e.VuexVendor=J;e.VuexBuilder=K;e.VuexBuilderModel=F})(this.BX=this.BX||{},BX,BX,BX,BX);
 



// file: /bitrix/js/ui/progressbarjs/progressbar.js
(function(t){if(typeof window.BX==="undefined"){window.BX={}}window.BX.ProgressBarJs=t()})(function(){var t,e,r;return function t(e,r,i){function n(a,s){if(!r[a]){if(!e[a]){var u=typeof require=="function"&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[a]={exports:{}};e[a][0].call(f.exports,function(t){var r=e[a][1][t];return n(r?r:t)},f,f.exports,t,e,r,i)}return r[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,r,i){(function(){var e=this||Function("return this")();var n=function(){"use strict";var n;var o;var a="linear";var s=500;var u=1e3/60;var h=Date.now?Date.now:function(){return+new Date};var f=typeof SHIFTY_DEBUG_NOW!=="undefined"?SHIFTY_DEBUG_NOW:h;if(typeof window!=="undefined"){o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout}else{o=setTimeout}function l(){}function p(t,e){var r;for(r in t){if(Object.hasOwnProperty.call(t,r)){e(r)}}}function c(t,e){p(e,function(r){t[r]=e[r]});return t}function d(t,e){p(e,function(r){if(typeof t[r]==="undefined"){t[r]=e[r]}})}function v(t,e,r,i,o,a,s){var u=t<a?0:(t-a)/o;var h;var f;var l;for(h in e){if(e.hasOwnProperty(h)){f=s[h];l=typeof f==="function"?f:n[f];e[h]=_(r[h],i[h],l,u)}}return e}function _(t,e,r,i){return t+(e-t)*r(i)}function g(t,e){var r=T.prototype.filter;var i=t._filterArgs;p(r,function(n){if(typeof r[n][e]!=="undefined"){r[n][e].apply(t,i)}})}var w;var y;var m;var S;function x(t,e,r,i,n,o,a,s,h,l,p){w=e+r+i;y=Math.min(p||f(),w);m=y>=w;S=i-(w-y);if(t.isPlaying()){if(m){h(a,t._attachment,S);t.stop(true)}else{t._scheduleId=l(t._timeoutHandler,u);g(t,"beforeTween");if(y<e+r){v(1,n,o,a,1,1,s)}else{v(y,n,o,a,i,e+r,s)}g(t,"afterTween");h(n,t._attachment,S)}}}function O(t,e){var r={};var i=typeof e;if(i==="string"||i==="function"){p(t,function(t){r[t]=e})}else{p(t,function(t){if(!r[t]){r[t]=e[t]||a}})}return r}function T(t,e){this._currentState=t||{};this._configured=false;this._scheduleFunction=o;if(typeof e!=="undefined"){this.setConfig(e)}}T.prototype.tween=function(t){if(this._isTweening){return this}if(t!==undefined||!this._configured){this.setConfig(t)}this._timestamp=f();this._start(this.get(),this._attachment);return this.resume()};T.prototype.setConfig=function(t){t=t||{};this._configured=true;this._attachment=t.attachment;this._pausedAtTime=null;this._scheduleId=null;this._delay=t.delay||0;this._start=t.start||l;this._step=t.step||l;this._finish=t.finish||l;this._duration=t.duration||s;this._currentState=c({},t.from||this.get());this._originalState=this.get();this._targetState=c({},t.to||this.get());var e=this;this._timeoutHandler=function(){x(e,e._timestamp,e._delay,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)};var r=this._currentState;var i=this._targetState;d(i,r);this._easing=O(r,t.easing||a);this._filterArgs=[r,this._originalState,i,this._easing];g(this,"tweenCreated");return this};T.prototype.get=function(){return c({},this._currentState)};T.prototype.set=function(t){this._currentState=t};T.prototype.pause=function(){this._pausedAtTime=f();this._isPaused=true;return this};T.prototype.resume=function(){if(this._isPaused){this._timestamp+=f()-this._pausedAtTime}this._isPaused=false;this._isTweening=true;this._timeoutHandler();return this};T.prototype.seek=function(t){t=Math.max(t,0);var e=f();if(this._timestamp+t===0){return this}this._timestamp=e-t;if(!this.isPlaying()){this._isTweening=true;this._isPaused=false;x(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,e);this.pause()}return this};T.prototype.stop=function(t){this._isTweening=false;this._isPaused=false;this._timeoutHandler=l;(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.clearTimeout)(this._scheduleId);if(t){g(this,"beforeTween");v(1,this._currentState,this._originalState,this._targetState,1,0,this._easing);g(this,"afterTween");g(this,"afterTweenEnd");this._finish.call(this,this._currentState,this._attachment)}return this};T.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused};T.prototype.setScheduleFunction=function(t){this._scheduleFunction=t};T.prototype.dispose=function(){var t;for(t in this){if(this.hasOwnProperty(t)){delete this[t]}}};T.prototype.filter={};T.prototype.formula={linear:function(t){return t}};n=T.prototype.formula;c(T,{now:f,each:p,tweenProps:v,tweenProp:_,applyFilter:g,shallowCopy:c,defaults:d,composeEasingObject:O});if(typeof SHIFTY_DEBUG_NOW==="function"){e.timeoutHandler=x}if(typeof i==="object"){r.exports=T}else if(typeof t==="function"&&t.amd){t(function(){return T})}else if(typeof e.Tweenable==="undefined"){e.Tweenable=T}return T}();(function(){n.shallowCopy(n.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){if((t/=.5)<1){return.5*Math.pow(t,2)}return-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){if((t/=.5)<1){return.5*Math.pow(t,3)}return.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){if((t/=.5)<1){return.5*Math.pow(t,4)}return-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){if((t/=.5)<1){return.5*Math.pow(t,5)}return.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){if(t===0){return 0}if(t===1){return 1}if((t/=.5)<1){return.5*Math.pow(2,10*(t-1))}return.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){if((t/=.5)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;if((t/=.5)<1){return.5*(t*t*(((e*=1.525)+1)*t-e))}return.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((t*6-1)*(2*Math.PI)/2)+1},swingFromTo:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}},bouncePast:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 2-(7.5625*(t-=1.5/2.75)*t+.75)}else if(t<2.5/2.75){return 2-(7.5625*(t-=2.25/2.75)*t+.9375)}else{return 2-(7.5625*(t-=2.625/2.75)*t+.984375)}},easeFromTo:function(t){if((t/=.5)<1){return.5*Math.pow(t,4)}return-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})})();(function(){function t(t,e,r,i,n,o){var a=0,s=0,u=0,h=0,f=0,l=0;function p(t){return((a*t+s)*t+u)*t}function c(t){return((h*t+f)*t+l)*t}function d(t){return(3*a*t+2*s)*t+u}function v(t){return 1/(200*t)}function _(t,e){return c(w(t,e))}function g(t){if(t>=0){return t}else{return 0-t}}function w(t,e){var r,i,n,o,a,s;for(n=t,s=0;s<8;s++){o=p(n)-t;if(g(o)<e){return n}a=d(n);if(g(a)<1e-6){break}n=n-o/a}r=0;i=1;n=t;if(n<r){return r}if(n>i){return i}while(r<i){o=p(n);if(g(o-t)<e){return n}if(t>o){r=n}else{i=n}n=(i-r)*.5+r}return n}u=3*e;s=3*(i-e)-u;a=1-u-s;l=3*r;f=3*(n-r)-l;h=1-l-f;return _(t,v(o))}function e(e,r,i,n){return function(o){return t(o,e,r,i,n,1)}}n.setBezierFunction=function(t,r,i,o,a){var s=e(r,i,o,a);s.displayName=t;s.x1=r;s.y1=i;s.x2=o;s.y2=a;return n.prototype.formula[t]=s};n.unsetBezierFunction=function(t){delete n.prototype.formula[t]}})();(function(){function t(t,e,r,i,o,a){return n.tweenProps(i,e,t,r,1,a,o)}var e=new n;e._filterArgs=[];n.interpolate=function(r,i,o,a,s){var u=n.shallowCopy({},r);var h=s||0;var f=n.composeEasingObject(r,a||"linear");e.set({});var l=e._filterArgs;l.length=0;l[0]=u;l[1]=r;l[2]=i;l[3]=f;n.applyFilter(e,"tweenCreated");n.applyFilter(e,"beforeTween");var p=t(r,u,i,o,f,h);n.applyFilter(e,"afterTween");return p}})();(function(t){var e;var r=/(\d|\-|\.)/;var i=/([^\-0-9\.]+)/g;var n=/[0-9.\-]+/g;var o=new RegExp("rgb\\("+n.source+/,\s*/.source+n.source+/,\s*/.source+n.source+"\\)","g");var a=/^.*\(/;var s=/#([0-9]|[a-f]){3,6}/gi;var u="VAL";function h(t,e){var r=[];var i=t.length;var n;for(n=0;n<i;n++){r.push("_"+e+"_"+n)}return r}function f(t){var e=t.match(i);if(!e){e=["",""]}else if(e.length===1||t.charAt(0).match(r)){e.unshift("")}return e.join(u)}function l(e){t.each(e,function(t){var r=e[t];if(typeof r==="string"&&r.match(s)){e[t]=p(r)}})}function p(t){return g(s,t,c)}function c(t){var e=v(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}var d=[];function v(t){t=t.replace(/#/,"");if(t.length===3){t=t.split("");t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}d[0]=_(t.substr(0,2));d[1]=_(t.substr(2,2));d[2]=_(t.substr(4,2));return d}function _(t){return parseInt(t,16)}function g(t,e,r){var i=e.match(t);var n=e.replace(t,u);if(i){var o=i.length;var a;for(var s=0;s<o;s++){a=i.shift();n=n.replace(u,r(a))}}return n}function w(t){return g(o,t,y)}function y(t){var e=t.match(n);var r=e.length;var i=t.match(a)[0];for(var o=0;o<r;o++){i+=parseInt(e[o],10)+","}i=i.slice(0,-1)+")";return i}function m(e){var r={};t.each(e,function(t){var i=e[t];if(typeof i==="string"){var n=b(i);r[t]={formatString:f(i),chunkNames:h(n,t)}}});return r}function S(e,r){t.each(r,function(t){var i=e[t];var n=b(i);var o=n.length;for(var a=0;a<o;a++){e[r[t].chunkNames[a]]=+n[a]}delete e[t]})}function x(e,r){t.each(r,function(t){var i=e[t];var n=O(e,r[t].chunkNames);var o=k(n,r[t].chunkNames);i=C(r[t].formatString,o);e[t]=w(i)})}function O(t,e){var r={};var i,n=e.length;for(var o=0;o<n;o++){i=e[o];r[i]=t[i];delete t[i]}return r}var T=[];function k(t,e){T.length=0;var r=e.length;for(var i=0;i<r;i++){T.push(t[e[i]])}return T}function C(t,e){var r=t;var i=e.length;for(var n=0;n<i;n++){r=r.replace(u,+e[n].toFixed(4))}return r}function b(t){return t.match(n)}function M(e,r){t.each(r,function(t){var i=r[t];var n=i.chunkNames;var o=n.length;var a=e[t];var s;if(typeof a==="string"){var u=a.split(" ");var h=u[u.length-1];for(s=0;s<o;s++){e[n[s]]=u[s]||h}}else{for(s=0;s<o;s++){e[n[s]]=a}}delete e[t]})}function P(e,r){t.each(r,function(t){var i=r[t];var n=i.chunkNames;var o=n.length;var a=e[n[0]];var s=typeof a;if(s==="string"){var u="";for(var h=0;h<o;h++){u+=" "+e[n[h]];delete e[n[h]]}e[t]=u.substr(1)}else{e[t]=a}})}t.prototype.filter.token={tweenCreated:function(t,e,r,i){l(t);l(e);l(r);this._tokenData=m(t)},beforeTween:function(t,e,r,i){M(i,this._tokenData);S(t,this._tokenData);S(e,this._tokenData);S(r,this._tokenData)},afterTween:function(t,e,r,i){x(t,this._tokenData);x(e,this._tokenData);x(r,this._tokenData);P(i,this._tokenData)}}})(n)}).call(null)},{}],2:[function(t,e,r){var i=t("./shape");var n=t("./utils");var o=function t(e,r){this._pathTemplate="M 50,50 m 0,-{radius}"+" a {radius},{radius} 0 1 1 0,{2radius}"+" a {radius},{radius} 0 1 1 0,-{2radius}";this.containerAspectRatio=1;i.apply(this,arguments)};o.prototype=new i;o.prototype.constructor=o;o.prototype._pathString=function t(e){var r=e.strokeWidth;if(e.trailWidth&&e.trailWidth>e.strokeWidth){r=e.trailWidth}var i=50-r/2;return n.render(this._pathTemplate,{radius:i,"2radius":i*2})};o.prototype._trailString=function t(e){return this._pathString(e)};e.exports=o},{"./shape":7,"./utils":9}],3:[function(t,e,r){var i=t("./shape");var n=t("./utils");var o=function t(e,r){this._pathTemplate="M 0,{center} L 100,{center}";i.apply(this,arguments)};o.prototype=new i;o.prototype.constructor=o;o.prototype._initializeSvg=function t(e,r){e.setAttribute("viewBox","0 0 100 "+r.strokeWidth);e.setAttribute("preserveAspectRatio","none")};o.prototype._pathString=function t(e){return n.render(this._pathTemplate,{center:e.strokeWidth/2})};o.prototype._trailString=function t(e){return this._pathString(e)};e.exports=o},{"./shape":7,"./utils":9}],4:[function(t,e,r){e.exports={Line:t("./line"),Circle:t("./circle"),SemiCircle:t("./semicircle"),Square:t("./square"),Path:t("./path"),Shape:t("./shape"),utils:t("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(t,e,r){var i=t("shifty");var n=t("./utils");var o={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"};var a=function t(e,r){if(!(this instanceof t)){throw new Error("Constructor was called without new keyword")}r=n.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},r);var i;if(n.isString(e)){i=document.querySelector(e)}else{i=e}this.path=i;this._opts=r;this._tweenable=null;var o=this.path.getTotalLength();this.path.style.strokeDasharray=o+" "+o;this.set(0)};a.prototype.value=function t(){var e=this._getComputedDashOffset();var r=this.path.getTotalLength();var i=1-e/r;return parseFloat(i.toFixed(6),10)};a.prototype.set=function t(e){this.stop();this.path.style.strokeDashoffset=this._progressToOffset(e);var r=this._opts.step;if(n.isFunction(r)){var i=this._easing(this._opts.easing);var o=this._calculateTo(e,i);var a=this._opts.shape||this;r(o,a,this._opts.attachment)}};a.prototype.stop=function t(){this._stopTween();this.path.style.strokeDashoffset=this._getComputedDashOffset()};a.prototype.animate=function t(e,r,o){r=r||{};if(n.isFunction(r)){o=r;r={}}var a=n.extend({},r);var s=n.extend({},this._opts);r=n.extend(s,r);var u=this._easing(r.easing);var h=this._resolveFromAndTo(e,u,a);this.stop();this.path.getBoundingClientRect();var f=this._getComputedDashOffset();var l=this._progressToOffset(e);var p=this;this._tweenable=new i;this._tweenable.tween({from:n.extend({offset:f},h.from),to:n.extend({offset:l},h.to),duration:r.duration,easing:u,step:function(t){p.path.style.strokeDashoffset=t.offset;var e=r.shape||p;r.step(t,e,r.attachment)},finish:function(t){if(n.isFunction(o)){o()}}})};a.prototype._getComputedDashOffset=function t(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)};a.prototype._progressToOffset=function t(e){var r=this.path.getTotalLength();return r-e*r};a.prototype._resolveFromAndTo=function t(e,r,i){if(i.from&&i.to){return{from:i.from,to:i.to}}return{from:this._calculateFrom(r),to:this._calculateTo(e,r)}};a.prototype._calculateFrom=function t(e){return i.interpolate(this._opts.from,this._opts.to,this.value(),e)};a.prototype._calculateTo=function t(e,r){return i.interpolate(this._opts.from,this._opts.to,e,r)};a.prototype._stopTween=function t(){if(this._tweenable!==null){this._tweenable.stop();this._tweenable=null}};a.prototype._easing=function t(e){if(o.hasOwnProperty(e)){return o[e]}return e};e.exports=a},{"./utils":9,shifty:1}],6:[function(t,e,r){var i=t("./shape");var n=t("./circle");var o=t("./utils");var a=function t(e,r){this._pathTemplate="M 50,50 m -{radius},0"+" a {radius},{radius} 0 1 1 {2radius},0";this.containerAspectRatio=2;i.apply(this,arguments)};a.prototype=new i;a.prototype.constructor=a;a.prototype._initializeSvg=function t(e,r){e.setAttribute("viewBox","0 0 100 50")};a.prototype._initializeTextContainer=function t(e,r,i){if(e.text.style){i.style.top="auto";i.style.bottom="0";if(e.text.alignToBottom){o.setStyle(i,"transform","translate(-50%, 0)")}else{o.setStyle(i,"transform","translate(-50%, 50%)")}}};a.prototype._pathString=n.prototype._pathString;a.prototype._trailString=n.prototype._trailString;e.exports=a},{"./circle":2,"./shape":7,"./utils":9}],7:[function(t,e,r){var i=t("./path");var n=t("./utils");var o="Object is destroyed";var a=function t(e,r){if(!(this instanceof t)){throw new Error("Constructor was called without new keyword")}if(arguments.length===0){return}this._opts=n.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:true,value:"translate(-50%, -50%)"}},autoStyleContainer:true,alignToBottom:true,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:false},r,true);if(n.isObject(r)&&r.svgStyle!==undefined){this._opts.svgStyle=r.svgStyle}if(n.isObject(r)&&n.isObject(r.text)&&r.text.style!==undefined){this._opts.text.style=r.text.style}var o=this._createSvgView(this._opts);var a;if(n.isString(e)){a=document.querySelector(e)}else{a=e}if(!a){throw new Error("Container does not exist: "+e)}this._container=a;this._container.appendChild(o.svg);if(this._opts.warnings){this._warnContainerAspectRatio(this._container)}if(this._opts.svgStyle){n.setStyles(o.svg,this._opts.svgStyle)}this.svg=o.svg;this.path=o.path;this.trail=o.trail;this.text=null;var s=n.extend({attachment:undefined,shape:this},this._opts);this._progressPath=new i(o.path,s);if(n.isObject(this._opts.text)&&this._opts.text.value!==null){this.setText(this._opts.text.value)}};a.prototype.animate=function t(e,r,i){if(this._progressPath===null){throw new Error(o)}this._progressPath.animate(e,r,i)};a.prototype.stop=function t(){if(this._progressPath===null){throw new Error(o)}if(this._progressPath===undefined){return}this._progressPath.stop()};a.prototype.destroy=function t(){if(this._progressPath===null){throw new Error(o)}this.stop();this.svg.parentNode.removeChild(this.svg);this.svg=null;this.path=null;this.trail=null;this._progressPath=null;if(this.text!==null){this.text.parentNode.removeChild(this.text);this.text=null}};a.prototype.set=function t(e){if(this._progressPath===null){throw new Error(o)}this._progressPath.set(e)};a.prototype.value=function t(){if(this._progressPath===null){throw new Error(o)}if(this._progressPath===undefined){return 0}return this._progressPath.value()};a.prototype.setText=function t(e){if(this._progressPath===null){throw new Error(o)}if(this.text===null){this.text=this._createTextContainer(this._opts,this._container);this._container.appendChild(this.text)}if(n.isObject(e)){n.removeChildren(this.text);this.text.appendChild(e)}else{this.text.innerHTML=e}};a.prototype._createSvgView=function t(e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(r,e);var i=null;if(e.trailColor||e.trailWidth){i=this._createTrail(e);r.appendChild(i)}var n=this._createPath(e);r.appendChild(n);return{svg:r,path:n,trail:i}};a.prototype._initializeSvg=function t(e,r){e.setAttribute("viewBox","0 0 100 100")};a.prototype._createPath=function t(e){var r=this._pathString(e);return this._createPathElement(r,e)};a.prototype._createTrail=function t(e){var r=this._trailString(e);var i=n.extend({},e);if(!i.trailColor){i.trailColor="#eee"}if(!i.trailWidth){i.trailWidth=i.strokeWidth}i.color=i.trailColor;i.strokeWidth=i.trailWidth;i.fill=null;return this._createPathElement(r,i)};a.prototype._createPathElement=function t(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",e);i.setAttribute("stroke",r.color);i.setAttribute("stroke-width",r.strokeWidth);if(r.fill){i.setAttribute("fill",r.fill)}else{i.setAttribute("fill-opacity","0")}return i};a.prototype._createTextContainer=function t(e,r){var i=document.createElement("div");i.className=e.text.className;var o=e.text.style;if(o){if(e.text.autoStyleContainer){r.style.position="relative"}n.setStyles(i,o);if(!o.color){i.style.color=e.color}}this._initializeTextContainer(e,r,i);return i};a.prototype._initializeTextContainer=function(t,e,r){};a.prototype._pathString=function t(e){throw new Error("Override this function for each progress bar")};a.prototype._trailString=function t(e){throw new Error("Override this function for each progress bar")};a.prototype._warnContainerAspectRatio=function t(e){if(!this.containerAspectRatio){return}var r=window.getComputedStyle(e,null);var i=parseFloat(r.getPropertyValue("width"),10);var o=parseFloat(r.getPropertyValue("height"),10);if(!n.floatEquals(this.containerAspectRatio,i/o)){console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",r.getPropertyValue("width")+"(width)","/",r.getPropertyValue("height")+"(height)","=",i/o);console.warn("Aspect ratio of should be",this.containerAspectRatio)}};e.exports=a},{"./path":5,"./utils":9}],8:[function(t,e,r){var i=t("./shape");var n=t("./utils");var o=function t(e,r){this._pathTemplate="M 0,{halfOfStrokeWidth}"+" L {width},{halfOfStrokeWidth}"+" L {width},{width}"+" L {halfOfStrokeWidth},{width}"+" L {halfOfStrokeWidth},{strokeWidth}";this._trailTemplate="M {startMargin},{halfOfStrokeWidth}"+" L {width},{halfOfStrokeWidth}"+" L {width},{width}"+" L {halfOfStrokeWidth},{width}"+" L {halfOfStrokeWidth},{halfOfStrokeWidth}";i.apply(this,arguments)};o.prototype=new i;o.prototype.constructor=o;o.prototype._pathString=function t(e){var r=100-e.strokeWidth/2;return n.render(this._pathTemplate,{width:r,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2})};o.prototype._trailString=function t(e){var r=100-e.strokeWidth/2;return n.render(this._trailTemplate,{width:r,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2,startMargin:e.strokeWidth/2-e.trailWidth/2})};e.exports=o},{"./shape":7,"./utils":9}],9:[function(t,e,r){var i="Webkit Moz O ms".split(" ");var n=.001;function o(t,e,r){t=t||{};e=e||{};r=r||false;for(var i in e){if(e.hasOwnProperty(i)){var n=t[i];var a=e[i];if(r&&c(n)&&c(a)){t[i]=o(n,a,r)}else{t[i]=a}}}return t}function a(t,e){var r=t;for(var i in e){if(e.hasOwnProperty(i)){var n=e[i];var o="\\{"+i+"\\}";var a=new RegExp(o,"g");r=r.replace(a,n)}}return r}function s(t,e,r){var n=t.style;for(var o=0;o<i.length;++o){var a=i[o];n[a+h(e)]=r}n[e]=r}function u(t,e){d(e,function(e,r){if(e===null||e===undefined){return}if(c(e)&&e.prefix===true){s(t,r,e.value)}else{t.style[r]=e}})}function h(t){return t.charAt(0).toUpperCase()+t.slice(1)}function f(t){return typeof t==="string"||t instanceof String}function l(t){return typeof t==="function"}function p(t){return Object.prototype.toString.call(t)==="[object Array]"}function c(t){if(p(t)){return false}var e=typeof t;return e==="object"&&!!t}function d(t,e){for(var r in t){if(t.hasOwnProperty(r)){var i=t[r];e(i,r)}}}function v(t,e){return Math.abs(t-e)<n}function _(t){while(t.firstChild){t.removeChild(t.firstChild)}}e.exports={extend:o,render:a,setStyle:s,setStyles:u,capitalize:h,isString:f,isFunction:l,isObject:c,forEachObject:d,floatEquals:v,removeChildren:_}},{}]},{},[4])(4)});
 



// file: /bitrix/js/ui/progressbarjs/uploader/dist/uploader.bundle.js
this.BX=this.BX||{};(function(e){"use strict";var s=function(){function e(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.container=s.container;if(this.container&&typeof s.blurElement==="undefined"){s.blurElement=this.container.firstElementChild}this.blurElement=s.blurElement;this.direction=e.direction[s.direction]?s.direction:e.direction.vertical;s.sizes=s.sizes&&babelHelpers.typeof(s.sizes)==="object"?s.sizes:{};this.sizes={circle:s.sizes.circle?s.sizes.circle:54,progress:s.sizes.progress?s.sizes.progress:4,margin:s.sizes.margin?s.sizes.margin:0};s.labels=s.labels&&babelHelpers.typeof(s.labels)==="object"?s.labels:{};this.labels={loading:s.labels.loading?s.labels.loading:"",completed:s.labels.completed?s.labels.completed:"",canceled:s.labels.canceled?s.labels.canceled:"",cancelTitle:s.labels.cancelTitle?s.labels.cancelTitle:"",megabyte:s.labels.megabyte?s.labels.megabyte:"MB"};this.cancelCallback=typeof s.cancelCallback==="function"?s.cancelCallback:null;this.destroyCallback=typeof s.destroyCallback==="function"?s.destroyCallback:null;this.icon=e.icon[s.icon]?s.icon:!this.cancelCallback?e.icon.cloud:e.icon.cancel;this.inited=!!this.container;this.destroing=false}babelHelpers.createClass(e,[{key:"start",value:function s(){var i=this;if(!this.inited){return false}clearTimeout(this.timeoutSetIcon);clearTimeout(this.timeout);this.active=true;this.canceled=false;this.cancelCallbackDisabled=false;this.wrapper=document.createElement("div");this.wrapper.classList.add("ui-file-progressbar-loader-wrapper");this.wrapper.innerHTML='\n\t\t\t<div class="ui-file-progressbar-loader">\n\t\t\t\t<div class="ui-file-progressbar-icon"></div>\n\t\t\t\t<div class="ui-file-progressbar-progress ui-file-progressbar-rotating"></div>\n\t\t\t</div>\n\t\t\t<div class="ui-file-progressbar-label">'.concat(this.labels.loading,"</div>\n\t\t");this.processLoader=this.wrapper.getElementsByClassName("ui-file-progressbar-loader")[0];this.processLoaderIcon=this.wrapper.getElementsByClassName("ui-file-progressbar-icon")[0];this.processStatus=this.wrapper.getElementsByClassName("ui-file-progressbar-progress")[0];this.proccesLabel=this.wrapper.getElementsByClassName("ui-file-progressbar-label")[0];if(this.direction===e.direction.horizontal){this.wrapper.classList.add("ui-file-progressbar-loader-horizontal")}this.container.classList.add("ui-file-progressbar-container-relative");this.container.insertBefore(this.wrapper,this.container.firstChild);if(this.blurElement){this.blurElement.classList.add("ui-file-progressbar-item-blurred")}var t="width: ".concat(this.sizes.circle,"px; height: ").concat(this.sizes.circle,"px;");if(this.sizes.margin){t=t+"margin: ".concat(this.sizes.margin,"px;");this.proccesLabel.style="margin: ".concat(this.sizes.margin,"px;")}this.processLoader.style=t;if(this.cancelCallback){this.processLoader.addEventListener("click",function(e){if(i.cancelCallbackDisabled){return false}i.setProgress(0);if(i.labels.canceled){i.setProgressTitle(i.labels.canceled)}i.canceled=e;i.active=false;clearTimeout(i.timeout);i.timeout=setTimeout(function(){return i.destroy()},1e3);return true});if(this.labels.cancelTitle){this.processLoader.title=this.labels.cancelTitle}}if(!this.labels.loading){this.setProgressTitleVisibility(false)}this.setIcon(this.icon,true);this.bar=new BX.ProgressBarJs.Circle(this.processStatus,{easing:"linear",strokeWidth:this.sizes.progress,color:"#ffffff",from:{color:"#ffffff"},to:{color:"#ffffff"},step:function s(t,r){if(r.value()==1){clearTimeout(i.timeout);i.timeout=setTimeout(function(){if(i.labels.completed){i.setProgressTitle(i.labels.completed)}i.setIcon(e.icon.done);clearTimeout(i.timeout);i.timeout=setTimeout(function(){return i.destroy()},1e3)},200)}}})}},{key:"setCancelDisable",value:function e(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.cancelCallbackDisabled=!!s;if(this.labels.cancelTitle){this.processLoader.title=this.cancelCallbackDisabled?"":this.labels.cancelTitle}}},{key:"setIcon",value:function s(i){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.processLoaderIcon.style.transform="scale(0)";clearTimeout(this.timeoutSetIcon);this.timeoutSetIcon=setTimeout(function(){t.processLoaderIcon.classList.remove("ui-file-progressbar-cancel","ui-file-progressbar-done","ui-file-progressbar-cloud","ui-file-progressbar-error");if(i===e.icon.done){t.processLoaderIcon.classList.add("ui-file-progressbar-done");t.processLoaderIcon.style.transform="scale(1)"}else if(i===e.icon.cancel){t.processLoaderIcon.classList.add("ui-file-progressbar-cancel");t.processLoaderIcon.style.transform="scale(1)"}else if(i===e.icon.error){t.processLoaderIcon.classList.add("ui-file-progressbar-error");t.processLoaderIcon.style.transform="scale(1)"}else{t.processLoaderIcon.classList.add("ui-file-progressbar-cloud");t.processLoaderIcon.style.transform="scale(1)"}},r?0:200);return true}},{key:"setProgress",value:function e(s){if(!this.active||this.canceled){return false}this.bar.animate(s/100,{duration:500})}},{key:"setProgressTitle",value:function e(s){if(!this.proccesLabel){return false}this.proccesLabel.innerHTML=s}},{key:"setProgressTitleVisibility",value:function s(i){if(!this.proccesLabel){return}if(i){if(this.direction===e.direction.horizontal){this.wrapper.classList.add("ui-file-progressbar-loader-horizontal")}this.proccesLabel.style.display="block"}else{if(this.direction===e.direction.horizontal){this.wrapper.classList.remove("ui-file-progressbar-loader-horizontal")}this.proccesLabel.style.display="none"}}},{key:"setByteSent",value:function e(s,i){if(this.canceled){return false}this.setProgressTitle((s/1024/1024).toFixed(2)+" "+this.labels.megabyte+" "+" / "+(i/1024/1024).toFixed(2)+" "+this.labels.megabyte)}},{key:"destroy",value:function e(){var s=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;clearTimeout(this.timeoutSetIcon);clearTimeout(this.timeout);if(this.destroing){return true}this.active=false;this.destroing=true;this.processLoader.style.transform="scale(0)";if(this.proccesLabel){this.proccesLabel.style.transform="scale(0)"}if(this.bar){this.bar.destroy()}if(this.blurElement){this.blurElement.classList.remove("ui-file-progressbar-item-blurred")}if(this.canceled&&!this.cancelCallbackDisabled){if(this.cancelCallback){this.cancelCallback(this.canceled)}this.canceled=false}if(i){this.timeout=setTimeout(function(){return s.destroyFinally()},400)}else{this.destroyFinally()}}},{key:"destroyFinally",value:function e(){if(this.container){this.container.classList.remove("ui-file-progressbar-container-relative");this.container.removeChild(this.wrapper)}if(this.destroyCallback){this.destroyCallback()}}}]);return e}();s.direction={horizontal:"horizontal",vertical:"vertical"};s.icon={cloud:"cloud",cancel:"cancel",error:"error",done:"done"};e.Uploader=s})(this.BX.ProgressBarJs=this.BX.ProgressBarJs||{});
 



// file: /bitrix/js/im/const/dist/registry.bundle.js
this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";var t=Object.freeze({groupTitle:"groupTitle",message:"message",recentTitle:"recentTitle",recentLinesTitle:"recentLinesTitle",readedTitle:"readedTitle",default:"default",vacationTitle:"vacationTitle"});var i=Object.freeze({mobile:"mobile",desktop:"desktop"});var a=Object.freeze({horizontal:"horizontal",portrait:"portrait"});var s=Object.freeze({none:"none",add:"delete",update:"update",delete:"delete",set:"set",setAfter:"after",setBefore:"before"});var r=Object.freeze({dialogues:50,messages:20});var o=Object.freeze({imMessageAdd:"im.message.add",imMessageUpdate:"im.message.update",imMessageDelete:"im.message.delete",imMessageLike:"im.message.like",imMessageCommand:"im.message.command",imMessageShare:"im.message.share",imChatGet:"im.chat.get",imChatLeave:"im.chat.leave",imChatMute:"im.chat.mute",imChatParentJoin:"im.chat.parent.join",imDialogMessagesGet:"im.dialog.messages.get",imDialogRead:"im.dialog.read",imDialogUnread:"im.dialog.unread",imDialogWriting:"im.dialog.writing",imUserGet:"im.user.get",imUserListGet:"im.user.list.get",imDiskFolderGet:"im.disk.folder.get",imDiskFileUpload:"disk.folder.uploadfile",imDiskFileCommit:"im.disk.file.commit",mobileBrowserConstGet:"mobile.browser.const.get"});var m=Object.freeze({imChatGet:"im.chat.get",imMessageAdd:"im.message.add",imDialogRead:"im.dialog.read",imDialogMessagesGet:"im.dialog.messages.get",imDialogMessagesGetInit:"im.dialog.messages.get.init",imDialogMessagesGetUnread:"im.dialog.messages.get.unread",imDiskFolderGet:"im.disk.folder.get",imDiskFileUpload:"disk.folder.uploadfile",imDiskFileCommit:"im.disk.file.commit",imUserGet:"im.user.get",imUserListGet:"im.user.list.get",mobileBrowserConstGet:"mobile.browser.const.get"});var l=Object.freeze({dialog:{scrollToBottom:"EventType.dialog.scrollToBottom",requestHistoryResult:"EventType.dialog.requestHistoryResult",requestUnreadResult:"EventType.dialog.requestUnreadResult",sendReadMessages:"EventType.dialog.sendReadMessages"},textarea:{insertText:"EventType.textarea.insertText",focus:"EventType.textarea.focus",blur:"EventType.textarea.blur"}});var d=Object.freeze({private:"private",chat:"chat",open:"open",call:"call",crm:"crm"});var n=Object.freeze({lead:"lead",company:"company",contact:"contact",deal:"deal",none:"none"});var g=Object.freeze({listBody:"bx-im-dialog-list",listItem:"bx-im-dialog-list-item-reference",listItemName:"bx-im-dialog-list-item-name-reference",listItemBody:"bx-im-dialog-list-item-content-reference",listUnreadLoader:"bx-im-dialog-list-unread-loader-reference"});var c=Object.freeze({upload:"upload",wait:"wait",done:"done",error:"error"});var p=Object.freeze({image:"image",video:"video",audio:"audio",file:"file"});var f=Object.freeze({self:"self",opponent:"opponent",system:"system"});e.EventType=l;e.DateFormat=t;e.DeviceType=i;e.DeviceOrientation=a;e.MutationType=s;e.StorageLimit=r;e.RestMethod=o;e.RestMethodHandler=m;e.DialogType=d;e.DialogCrmType=n;e.DialogReferenceClassName=g;e.FileStatus=c;e.FileType=p;e.MessageType=f})(this.BX.Messenger.Const=this.BX.Messenger.Const||{});
 



// file: /bitrix/js/main/date/main.date.js
(function(e){if(!e.BX){e.BX={}}if(!e.BX.Main){e.BX.Main={}}else if(e.BX.Main.Date){return}var t=e.BX;t.Main.Date={AM_PM_MODE:{UPPER:1,LOWER:2,NONE:false},format:function(e,t,_,n){var a=this;var D=r.isDate(t)?new Date(t.getTime()):r.isNumber(t)?new Date(t*1e3):new Date;var i=r.isDate(_)?new Date(_.getTime()):r.isNumber(_)?new Date(_*1e3):new Date;var o=!!n;if(r.isArray(e))return F(e,D,i,o);else if(!r.isNotEmptyString(e))return"";var O=(e.match(/{{([^{}]*)}}/g)||[]).map(function(e){return(e.match(/[^{}]+/)||[""])[0]});if(O.length>0){O.forEach(function(t,r){e=e.replace("{{"+t+"}}","{{"+r+"}}")})}var u=/\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;var f={d:function(){return r.strPadLeft(c(D).toString(),2,"0")},D:function(){return a._getMessage("DOW_"+R(D))},j:function(){return c(D)},l:function(){return a._getMessage("DAY_OF_WEEK_"+R(D))},N:function(){return R(D)||7},S:function(){if(c(D)%10==1&&c(D)!=11)return"st";else if(c(D)%10==2&&c(D)!=12)return"nd";else if(c(D)%10==3&&c(D)!=13)return"rd";else return"th"},w:function(){return R(D)},z:function(){var e=new Date(g(D),0,1);var t=new Date(g(D),T(D),c(D));return Math.ceil((t-e)/(24*3600*1e3))},W:function(){var e=new Date(D.getTime());var t=(R(D)+6)%7;H(e,c(e)-t+3);var _=e.getTime();d(e,0,1);if(R(e)!=4)d(e,0,1+(4-R(e)+7)%7);var n=1+Math.ceil((_-e)/(7*24*3600*1e3));return r.strPadLeft(n.toString(),2,"0")},F:function(){return a._getMessage("MONTH_"+(T(D)+1)+"_S")},f:function(){return a._getMessage("MONTH_"+(T(D)+1))},m:function(){return r.strPadLeft((T(D)+1).toString(),2,"0")},M:function(){return a._getMessage("MON_"+(T(D)+1))},n:function(){return T(D)+1},t:function(){var e=o?new Date(Date.UTC(g(D),T(D)+1,0)):new Date(g(D),T(D)+1,0);return c(e)},L:function(){var e=g(D);return e%4==0&&e%100!=0||e%400==0?1:0},o:function(){var e=new Date(D.getTime());H(e,c(e)-(R(D)+6)%7+3);return g(e)},Y:function(){return g(D)},y:function(){return g(D).toString().slice(2)},a:function(){return E(D)>11?"pm":"am"},A:function(){return E(D)>11?"PM":"AM"},B:function(){var e=(D.getUTCHours()+1)%24+D.getUTCMinutes()/60+D.getUTCSeconds()/3600;return r.strPadLeft(Math.floor(e*1e3/24).toString(),3,"0")},g:function(){return E(D)%12||12},G:function(){return E(D)},h:function(){return r.strPadLeft((E(D)%12||12).toString(),2,"0")},H:function(){return r.strPadLeft(E(D).toString(),2,"0")},i:function(){return r.strPadLeft(A(D).toString(),2,"0")},s:function(){return r.strPadLeft(l(D).toString(),2,"0")},u:function(){return r.strPadLeft((m(D)*1e3).toString(),6,"0")},e:function(){if(o)return"UTC";return""},I:function(){if(o)return 0;var e=new Date(g(D),0,1);var t=Date.UTC(g(D),0,1);var r=new Date(g(D),6,0);var _=Date.UTC(g(D),6,0);return 0+(e-t!==r-_)},O:function(){if(o)return"+0000";var e=D.getTimezoneOffset();var t=Math.abs(e);return(e>0?"-":"+")+r.strPadLeft((Math.floor(t/60)*100+t%60).toString(),4,"0")},P:function(){if(o)return"+00:00";var e=this.O();return e.substr(0,3)+":"+e.substr(3)},Z:function(){if(o)return 0;return-D.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(u,v)},r:function(){return"D, d M Y H:i:s O".replace(u,v)},U:function(){return Math.floor(D.getTime()/1e3)},sago:function(){return S(I((i-D)/1e3),{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"})},sdiff:function(){return S(I((i-D)/1e3),{0:"FD_SECOND_DIFF_0",1:"FD_SECOND_DIFF_1","10_20":"FD_SECOND_DIFF_10_20",MOD_1:"FD_SECOND_DIFF_MOD_1",MOD_2_4:"FD_SECOND_DIFF_MOD_2_4",MOD_OTHER:"FD_SECOND_DIFF_MOD_OTHER"})},sshort:function(){return a._getMessage("FD_SECOND_SHORT").replace(/#VALUE#/g,I((i-D)/1e3))},iago:function(){return S(I((i-D)/60/1e3),{0:"FD_MINUTE_AGO_0",1:"FD_MINUTE_AGO_1","10_20":"FD_MINUTE_AGO_10_20",MOD_1:"FD_MINUTE_AGO_MOD_1",MOD_2_4:"FD_MINUTE_AGO_MOD_2_4",MOD_OTHER:"FD_MINUTE_AGO_MOD_OTHER"})},idiff:function(){return S(I((i-D)/60/1e3),{0:"FD_MINUTE_DIFF_0",1:"FD_MINUTE_DIFF_1","10_20":"FD_MINUTE_DIFF_10_20",MOD_1:"FD_MINUTE_DIFF_MOD_1",MOD_2_4:"FD_MINUTE_DIFF_MOD_2_4",MOD_OTHER:"FD_MINUTE_DIFF_MOD_OTHER"})},isago:function(){var e=I((i-D)/60/1e3);var t=S(e,{0:"FD_MINUTE_0",1:"FD_MINUTE_1","10_20":"FD_MINUTE_10_20",MOD_1:"FD_MINUTE_MOD_1",MOD_2_4:"FD_MINUTE_MOD_2_4",MOD_OTHER:"FD_MINUTE_MOD_OTHER"});t+=" ";var r=I((i-D)/1e3)-e*60;t+=S(r,{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"});return t},ishort:function(){return a._getMessage("FD_MINUTE_SHORT").replace(/#VALUE#/g,I((i-D)/60/1e3))},Hago:function(){return S(I((i-D)/60/60/1e3),{0:"FD_HOUR_AGO_0",1:"FD_HOUR_AGO_1","10_20":"FD_HOUR_AGO_10_20",MOD_1:"FD_HOUR_AGO_MOD_1",MOD_2_4:"FD_HOUR_AGO_MOD_2_4",MOD_OTHER:"FD_HOUR_AGO_MOD_OTHER"})},Hdiff:function(){return S(I((i-D)/60/60/1e3),{0:"FD_HOUR_DIFF_0",1:"FD_HOUR_DIFF_1","10_20":"FD_HOUR_DIFF_10_20",MOD_1:"FD_HOUR_DIFF_MOD_1",MOD_2_4:"FD_HOUR_DIFF_MOD_2_4",MOD_OTHER:"FD_HOUR_DIFF_MOD_OTHER"})},Hshort:function(){return a._getMessage("FD_HOUR_SHORT").replace(/#VALUE#/g,I((i-D)/60/60/1e3))},yesterday:function(){return a._getMessage("FD_YESTERDAY")},today:function(){return a._getMessage("FD_TODAY")},tommorow:function(){return a._getMessage("FD_TOMORROW")},tomorrow:function(){return a._getMessage("FD_TOMORROW")},dago:function(){return S(I((i-D)/60/60/24/1e3),{0:"FD_DAY_AGO_0",1:"FD_DAY_AGO_1","10_20":"FD_DAY_AGO_10_20",MOD_1:"FD_DAY_AGO_MOD_1",MOD_2_4:"FD_DAY_AGO_MOD_2_4",MOD_OTHER:"FD_DAY_AGO_MOD_OTHER"})},ddiff:function(){return S(I((i-D)/60/60/24/1e3),{0:"FD_DAY_DIFF_0",1:"FD_DAY_DIFF_1","10_20":"FD_DAY_DIFF_10_20",MOD_1:"FD_DAY_DIFF_MOD_1",MOD_2_4:"FD_DAY_DIFF_MOD_2_4",MOD_OTHER:"FD_DAY_DIFF_MOD_OTHER"})},dshort:function(){return a._getMessage("FD_DAY_SHORT").replace(/#VALUE#/g,I((i-D)/60/60/24/1e3))},mago:function(){return S(I((i-D)/60/60/24/31/1e3),{0:"FD_MONTH_AGO_0",1:"FD_MONTH_AGO_1","10_20":"FD_MONTH_AGO_10_20",MOD_1:"FD_MONTH_AGO_MOD_1",MOD_2_4:"FD_MONTH_AGO_MOD_2_4",MOD_OTHER:"FD_MONTH_AGO_MOD_OTHER"})},mdiff:function(){return S(I((i-D)/60/60/24/31/1e3),{0:"FD_MONTH_DIFF_0",1:"FD_MONTH_DIFF_1","10_20":"FD_MONTH_DIFF_10_20",MOD_1:"FD_MONTH_DIFF_MOD_1",MOD_2_4:"FD_MONTH_DIFF_MOD_2_4",MOD_OTHER:"FD_MONTH_DIFF_MOD_OTHER"})},mshort:function(){return a._getMessage("FD_MONTH_SHORT").replace(/#VALUE#/g,I((i-D)/60/60/24/31/1e3))},Yago:function(){return S(I((i-D)/60/60/24/365/1e3),{0:"FD_YEARS_AGO_0",1:"FD_YEARS_AGO_1","10_20":"FD_YEARS_AGO_10_20",MOD_1:"FD_YEARS_AGO_MOD_1",MOD_2_4:"FD_YEARS_AGO_MOD_2_4",MOD_OTHER:"FD_YEARS_AGO_MOD_OTHER"})},Ydiff:function(){return S(I((i-D)/60/60/24/365/1e3),{0:"FD_YEARS_DIFF_0",1:"FD_YEARS_DIFF_1","10_20":"FD_YEARS_DIFF_10_20",MOD_1:"FD_YEARS_DIFF_MOD_1",MOD_2_4:"FD_YEARS_DIFF_MOD_2_4",MOD_OTHER:"FD_YEARS_DIFF_MOD_OTHER"})},Yshort:function(){return S(I((i-D)/60/60/24/365/1e3),{0:"FD_YEARS_SHORT_0",1:"FD_YEARS_SHORT_1","10_20":"FD_YEARS_SHORT_10_20",MOD_1:"FD_YEARS_SHORT_MOD_1",MOD_2_4:"FD_YEARS_SHORT_MOD_2_4",MOD_OTHER:"FD_YEARS_SHORT_MOD_OTHER"})},x:function(){var e=a.isAmPmMode(true);var t=e===a.AM_PM_MODE.LOWER?"g:i a":e===a.AM_PM_MODE.UPPER?"g:i A":"H:i";return a.format([["tomorrow","tomorrow, "+t],["-",a.convertBitrixFormat(a._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s","sago"],["i","iago"],["today","today, "+t],["yesterday","yesterday, "+t],["",a.convertBitrixFormat(a._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")]],D,i,o)},X:function(){var e=a.isAmPmMode(true);var t=e===a.AM_PM_MODE.LOWER?"g:i a":e===a.AM_PM_MODE.UPPER?"g:i A":"H:i";var r=a.format([["tomorrow","tomorrow"],["-",a.convertBitrixFormat(a._getMessage("FORMAT_DATE"))],["today","today"],["yesterday","yesterday"],["",a.convertBitrixFormat(a._getMessage("FORMAT_DATE"))]],D,i,o);var _=a.format([["tomorrow",t],["today",t],["yesterday",t],["",""]],D,i,o);if(_.length>0)return a._getMessage("FD_DAY_AT_TIME").replace(/#DAY#/g,r).replace(/#TIME#/g,_);else return r},Q:function(){var e=I((i-D)/60/60/24/1e3);if(e==0)return a._getMessage("FD_DAY_DIFF_1").replace(/#VALUE#/g,1);else return a.format([["d","ddiff"],["m","mdiff"],["","Ydiff"]],D,i)}};var s=false;if(e[0]&&e[0]=="^"){s=true;e=e.substr(1)}var M=e.replace(u,v);if(s){M=M.replace(/\s*00:00:00\s*/g,"").replace(/(\d\d:\d\d)(:00)/g,"$1").replace(/(\s*00:00\s*)(?!:)/g,"")}if(O.length>0){O.forEach(function(e,t){M=M.replace("{{"+t+"}}",e)})}return M;function F(e,t,r,_){var n=I((r-t)/1e3);for(var D=0;D<e.length;D++){var i=e[D][0];var o=e[D][1];var O=null;if(i=="s"){if(n<60)return a.format(o,t,r,_)}else if((O=/^s(\d+)\>?(\d+)?/.exec(i))!=null){if(O[1]&&O[2]){if(n<O[1]&&n>O[2]){return a.format(o,t,r,_)}}else if(n<O[1]){return a.format(o,t,r,_)}}else if(i=="i"){if(n<60*60)return a.format(o,t,r,_)}else if((O=/^i(\d+)\>?(\d+)?/.exec(i))!=null){if(O[1]&&O[2]){if(n<O[1]*60&&n>O[2]*60){return a.format(o,t,r,_)}}else if(n<O[1]*60){return a.format(o,t,r,_)}}else if(i=="H"){if(n<24*60*60)return a.format(o,t,r,_)}else if((O=/^H(\d+)\>?(\d+)?/.exec(i))!=null){if(O[1]&&O[2]){if(n<O[1]*60*60&&n>O[2]*60*60){return a.format(o,t,r,_)}}else if(n<O[1]*60*60){return a.format(o,t,r,_)}}else if(i=="d"){if(n<31*24*60*60)return a.format(o,t,r,_)}else if((O=/^d(\d+)\>?(\d+)?/.exec(i))!=null){if(O[1]&&O[2]){if(n<O[1]*24*60*60&&n>O[2]*24*60*60){return a.format(o,t,r,_)}}else if(n<O[1]*24*60*60){return a.format(o,t,r,_)}}else if(i=="m"){if(n<365*24*60*60)return a.format(o,t,r,_)}else if((O=/^m(\d+)\>?(\d+)?/.exec(i))!=null){if(O[1]&&O[2]){if(n<O[1]*31*24*60*60&&n>O[2]*31*24*60*60){return a.format(o,t,r,_)}}else if(n<O[1]*31*24*60*60){return a.format(o,t,r,_)}}else if(i=="now"){if(t.getTime()==r.getTime()){return a.format(o,t,r,_)}}else if(i=="today"){var u=g(r),f=T(r),s=c(r);var M=_?new Date(Date.UTC(u,f,s,0,0,0,0)):new Date(u,f,s,0,0,0,0);var F=_?new Date(Date.UTC(u,f,s+1,0,0,0,0)):new Date(u,f,s+1,0,0,0,0);if(t>=M&&t<F)return a.format(o,t,r,_)}else if(i=="todayFuture"){var u=g(r),f=T(r),s=c(r);var M=r.getTime();var F=_?new Date(Date.UTC(u,f,s+1,0,0,0,0)):new Date(u,f,s+1,0,0,0,0);if(t>=M&&t<F)return a.format(o,t,r,_)}else if(i=="yesterday"){u=g(r);f=T(r);s=c(r);var E=_?new Date(Date.UTC(u,f,s-1,0,0,0,0)):new Date(u,f,s-1,0,0,0,0);var A=_?new Date(Date.UTC(u,f,s,0,0,0,0)):new Date(u,f,s,0,0,0,0);if(t>=E&&t<A)return a.format(o,t,r,_)}else if(i=="tommorow"||i=="tomorrow"){u=g(r);f=T(r);s=c(r);var l=_?new Date(Date.UTC(u,f,s+1,0,0,0,0)):new Date(u,f,s+1,0,0,0,0);var m=_?new Date(Date.UTC(u,f,s+2,0,0,0,0)):new Date(u,f,s+2,0,0,0,0);if(t>=l&&t<m)return a.format(o,t,r,_)}else if(i=="-"){if(n<0)return a.format(o,t,r,_)}}return e.length>0?a.format(e[e.length-1][1],t,r,_):""}function g(e){return o?e.getUTCFullYear():e.getFullYear()}function c(e){return o?e.getUTCDate():e.getDate()}function T(e){return o?e.getUTCMonth():e.getMonth()}function E(e){return o?e.getUTCHours():e.getHours()}function A(e){return o?e.getUTCMinutes():e.getMinutes()}function l(e){return o?e.getUTCSeconds():e.getSeconds()}function m(e){return o?e.getUTCMilliseconds():e.getMilliseconds()}function R(e){return o?e.getUTCDay():e.getDay()}function H(e,t){return o?e.setUTCDate(t):e.setDate(t)}function d(e,t,r){return o?e.setUTCMonth(t,r):e.setMonth(t,r)}function S(e,t){var r=e<100?Math.abs(e):Math.abs(e%100);var _=r%10;var n="";if(r==0)n=a._getMessage(t["0"]);else if(r==1)n=a._getMessage(t["1"]);else if(r>=10&&r<=20)n=a._getMessage(t["10_20"]);else if(_==1)n=a._getMessage(t["MOD_1"]);else if(2<=_&&_<=4)n=a._getMessage(t["MOD_2_4"]);else n=a._getMessage(t["MOD_OTHER"]);return n.replace(/#VALUE#/g,e)}function v(e,t){if(f[e])return f[e]();else return t}function I(e){return e>=0?Math.floor(e):Math.ceil(e)}},convertBitrixFormat:function(e){if(!r.isNotEmptyString(e))return"";return e.replace("YYYY","Y").replace("MMMM","F").replace("MM","m").replace("M","M").replace("DD","d").replace("G","g").replace(/GG/i,"G").replace("H","h").replace(/HH/i,"H").replace("MI","i").replace("SS","s").replace("TT","A").replace("T","a")},convertToUTC:function(e){if(!r.isDate(e))return null;return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},getNewDate:function(e){return new Date(this.getBrowserTimestamp(e))},getBrowserTimestamp:function(e){e=parseInt(e,10);var t=new Date(e*1e3).getTimezoneOffset()*60;return(parseInt(e,10)+parseInt(this._getMessage("SERVER_TZ_OFFSET"))+t)*1e3},getServerTimestamp:function(e){e=parseInt(e,10);var t=new Date(e).getTimezoneOffset()*60;return Math.round(e/1e3-(parseInt(this._getMessage("SERVER_TZ_OFFSET"),10)+parseInt(t,10)))},formatLastActivityDate:function(e,t,r){var _=this.isAmPmMode(true);var n=_===this.AM_PM_MODE.LOWER?"g:i a":_===this.AM_PM_MODE.UPPER?"g:i A":"H:i";var a=[["tomorrow","#01#"+n],["now","#02#"],["todayFuture","#03#"+n],["yesterday","#04#"+n],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s60","sago"],["i60","iago"],["H5","Hago"],["H24","#03#"+n],["d31","dago"],["m12>1","mago"],["m12>0","dago"],["","#05#"]];var D=this.format(a,e,t,r);if((match=/^#(\d+)#(.*)/.exec(D))!=null){switch(match[1]){case"01":D=this._getMessage("FD_LAST_SEEN_TOMORROW").replace("#TIME#",match[2]);break;case"02":D=this._getMessage("FD_LAST_SEEN_NOW");break;case"03":D=this._getMessage("FD_LAST_SEEN_TODAY").replace("#TIME#",match[2]);break;case"04":D=this._getMessage("FD_LAST_SEEN_YESTERDAY").replace("#TIME#",match[2]);break;case"05":D=this._getMessage("FD_LAST_SEEN_MORE_YEAR");break;default:D=match[2];break}}return D},isAmPmMode:function(e){if(e===true){return this._getMessage("AMPM_MODE")}return this._getMessage("AMPM_MODE")!==false},_getMessage:function(e){return t.message(e)}};var r={isDate:function(e){return e&&Object.prototype.toString.call(e)=="[object Date]"},isNumber:function(e){return e===0?true:e?typeof e=="number"||e instanceof Number:false},isArray:function(e){return e&&Object.prototype.toString.call(e)=="[object Array]"},isString:function(e){return e===""?true:e?typeof e=="string"||e instanceof String:false},isNotEmptyString:function(e){return this.isString(e)?e.length>0:false},strPadLeft:function(e,t,r){var _=e.length,n=r.length;if(_>=t)return e;for(;_<t;_+=n)e=r+e;return e}}})(window);
 



// file: /bitrix/js/im/utils/dist/utils.bundle.js
this.BX=this.BX||{};(function(e,t){"use strict";var i={browser:{isSafari:function e(){if(!navigator.userAgent.toLowerCase().includes("safari")){return false}return!this.isSafariBased()},isSafariBased:function e(){if(!navigator.userAgent.toLowerCase().includes("applewebkit")){return false}return navigator.userAgent.toLowerCase().includes("yabrowser")||navigator.userAgent.toLowerCase().includes("yaapp_ios_browser")||navigator.userAgent.toLowerCase().includes("crios")},isChrome:function e(){return navigator.userAgent.toLowerCase().includes("chrome")},isFirefox:function e(){return navigator.userAgent.toLowerCase().includes("firefox")},isIe:function e(){return navigator.userAgent.match(/(Trident\/|MSIE\/)/)!==null},findParent:function e(t,i){var n=i instanceof HTMLElement;if(!i||typeof i!=="string"&&!n){return null}for(;t&&t!==document;t=t.parentNode){if(typeof i==="string"){if(t.classList.contains(i)){return t}}else if(n){if(t===i){return t}}}return null}},platform:{isMac:function e(){return navigator.userAgent.toLowerCase().includes("macintosh")},isLinux:function e(){return navigator.userAgent.toLowerCase().includes("linux")},isWindows:function e(){return navigator.userAgent.toLowerCase().includes("windows")||!this.isMac()&&!this.isLinux()},isBitrixMobile:function e(){return navigator.userAgent.toLowerCase().includes("bitrixmobile")},isBitrixDesktop:function e(){return navigator.userAgent.toLowerCase().includes("bitrixdesktop")},isMobile:function e(){return this.isAndroid()||this.isIos()||this.isBitrixMobile()},isIos:function e(){return navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")},getIosVersion:function e(){if(!this.isIos()){return null}var t=navigator.userAgent.toLowerCase().match(/(iphone|ipad)(.+)(OS\s([0-9]+)([_.]([0-9]+))?)/i);if(!t||!t[4]){return null}return parseFloat(t[4]+"."+(t[6]?t[6]:0))},isAndroid:function e(){return navigator.userAgent.toLowerCase().includes("android")},openNewPage:function e(t){if(!t){return false}if(this.isBitrixMobile()){if(typeof BX.MobileTools!=="undefined"){var i=BX.MobileTools.resolveOpenFunction(t);if(i){i();return true}}app.openNewPage(t)}else{window.open(t,"_blank")}return true}},device:{isDesktop:function e(){return!this.isMobile()},isMobile:function e(){if(typeof this.isMobileStatic!=="undefined"){return this.isMobileStatic}this.isMobileStatic=navigator.userAgent.toLowerCase().includes("android")||navigator.userAgent.toLowerCase().includes("webos")||navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")||navigator.userAgent.toLowerCase().includes("ipod")||navigator.userAgent.toLowerCase().includes("blackberry")||navigator.userAgent.toLowerCase().includes("windows phone");return this.isMobileStatic},orientationHorizontal:"horizontal",orientationPortrait:"portrait",getOrientation:function e(){if(!this.isMobile()){return this.orientationHorizontal}return Math.abs(window.orientation)===0?this.orientationPortrait:this.orientationHorizontal}},types:{isString:function e(t){return t===""?true:t?typeof t=="string"||t instanceof String:false},isArray:function e(t){return t&&Object.prototype.toString.call(t)=="[object Array]"},isFunction:function e(t){return t===null?false:typeof t=="function"||t instanceof Function},isDomNode:function e(t){return t&&babelHelpers.typeof(t)=="object"&&"nodeType"in t},isDate:function e(t){return t&&Object.prototype.toString.call(t)=="[object Date]"},isPlainObject:function e(t){if(!t||babelHelpers.typeof(t)!=="object"||t.nodeType){return false}var i=Object.prototype.hasOwnProperty;try{if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var n;return typeof n==="undefined"||i.call(t,n)}},dialog:{isChatId:function e(t){return t.toString().startsWith("chat")},isEmptyDialogId:function e(t){if(!t){return true}if(typeof t==="string"&&t==="chat0"){return true}return false}},text:{quote:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(typeof t!=="string"){return t.toString()}if(!r){r=BX.message}t=t.replace(/\[USER=([0-9]{1,})](.*?)\[\/USER]/gi,function(e,t,i){return i});t=t.replace(/\[CHAT=(imol\|)?([0-9]{1,})](.*?)[\/CHAT]/gi,function(e,t,i,n){return n});t=t.replace(/\[SEND(?:=(.+?))?](.+?)?\[\/SEND]/gi,function(e,t,i){return i?i:t});t=t.replace(/\[PUT(?:=(.+?))?](.+?)?\[\/PUT]/gi,function(e,t,i){return i?i:t});t=t.replace(/\[CALL(?:=(.+?))?](.+?)?\[\/CALL]/gi,function(e,t,i){return i?i:t});t=t.replace(/\[ATTACH=([0-9]{1,})]/gi,function(e,t,i){return t===1e4?"":"["+r["IM_UTILS_TEXT_ATTACH"]+"] "});t=t.replace(/\[RATING=([1-5]{1})]/gi,function(e,t){return"["+r.IM_F_RATING+"] "});t=t.replace(/&nbsp;/gi," ");t=t.replace(/\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D([\s\S]*?)\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D/gim,"["+r["IM_UTILS_TEXT_QUOTE"]+"]");t=t.replace(/^(>>(.*)\n)/gi,"["+r["IM_UTILS_TEXT_QUOTE"]+"]\n");if(i&&i.FILE_ID&&i.FILE_ID.length>0){var a=[];i.FILE_ID.forEach(function(e){if(n[e].type==="image"){a.push(r["IM_UTILS_TEXT_IMAGE"])}else if(n[e].type==="audio"){a.push(r["IM_UTILS_TEXT_AUDIO"])}else if(n[e].type==="video"){a.push(r["IM_UTILS_TEXT_VIDEO"])}else{a.push(n[e].name)}});if(a.length<=0){a.push(r["IM_UTILS_TEXT_FILE"])}t=a.join("\n")+t}else if(i&&i.ATTACH&&i.ATTACH.length>0){t="["+r["IM_UTILS_TEXT_ATTACH"]+"]\n"+t}if(t.length<=0){t=r["IM_UTILS_TEXT_DELETED"]}return t.trim()},purify:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(typeof t!=="string"){return t.toString()}if(!r){r=BX.message}t=t.trim();if(t.startsWith("/me")){t=t.substr(4)}else if(t.startsWith("/loud")){t=t.substr(6)}t=t.replace(/<br><br \/>/gi,"<br />");t=t.replace(/<br \/><br>/gi,"<br />");t=t.replace(/\[[buis]](.*?)\[\/[buis]]/gi,"$1");t=t.replace(/\[CODE]\n?([\0-\uFFFF]*?)\[\/CODE]/gi,"$1");t=t.replace(/\[url](.*?)\[\/url]/gi,"$1");t=t.replace(/\[RATING=([1-5]{1})]/gi,function(){return"["+r["IM_UTILS_TEXT_RATING"]+"] "});t=t.replace(/\[ATTACH=([0-9]{1,})]/gi,function(){return"["+r["IM_UTILS_TEXT_ATTACH"]+"] "});t=t.replace(/\[USER=([0-9]{1,})](.*?)\[\/USER]/gi,"$2");t=t.replace(/\[CHAT=([0-9]{1,})](.*?)\[\/CHAT]/gi,"$2");t=t.replace(/\[SEND=([0-9]{1,})](.*?)\[\/SEND]/gi,"$2");t=t.replace(/\[PUT=([0-9]{1,})](.*?)\[\/PUT]/gi,"$2");t=t.replace(/\[CALL=([0-9]{1,})](.*?)\[\/CALL]/gi,"$2");t=t.replace(/\[PCH=([0-9]{1,})](.*?)\[\/PCH]/gi,"$2");t=t.replace(/<img.*?data-code="([^"]*)".*?>/gi,"$1");t=t.replace(/<span.*?title="([^"]*)".*?>.*?<\/span>/gi,"($1)");t=t.replace(/<img.*?title="([^"]*)".*?>/gi,"($1)");t=t.replace(/\[ATTACH=([0-9]{1,})]/gi,function(e,t,i){return t===1e4?"":"["+r["IM_UTILS_TEXT_ATTACH"]+"] "});t=t.replace(/<s>([^"]*)<\/s>/gi," ");t=t.replace(/\[s]([^"]*)\[\/s]/gi," ");t=t.replace(/\[icon=([^\]]*)]/gi,function(e){var t=e.match(/title=(.*[^\s\]])/i);if(t&&t[1]){t=t[1];if(t.indexOf("width=")>-1){t=t.substr(0,t.indexOf("width="))}if(t.indexOf("height=")>-1){t=t.substr(0,t.indexOf("height="))}if(t.indexOf("size=")>-1){t=t.substr(0,t.indexOf("size="))}if(t){t="("+t.trim()+")"}}else{t="("+r["IM_UTILS_TEXT_ICON"]+")"}return t});t=t.replace(/\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D([\s\S]*?)\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D/gim,"["+r["IM_UTILS_TEXT_QUOTE"]+"] ");t=t.replace(/^(>>(.*)\n)/gi,"["+r["IM_UTILS_TEXT_QUOTE"]+"] ");t=t.replace(/<\/?[^>]+>/gi,"");if(i&&i.FILE_ID&&i.FILE_ID.length>0){var a=[];i.FILE_ID.forEach(function(e){if(n[e].type==="image"){a.push(r["IM_UTILS_TEXT_IMAGE"])}else if(n[e].type==="audio"){a.push(r["IM_UTILS_TEXT_AUDIO"])}else if(n[e].type==="video"){a.push(r["IM_UTILS_TEXT_VIDEO"])}else{a.push(n[e].name)}});if(a.length<=0){a.push(r["IM_UTILS_TEXT_FILE"])}t=a.join(" ")+t}else if(i&&i.ATTACH&&i.ATTACH.length>0){t="["+r["IM_UTILS_TEXT_ATTACH"]+"] "+t}if(t.length<=0){t=r["IM_UTILS_TEXT_DELETED"]}return t.replace("\n"," ").trim()},htmlspecialchars:function e(t){if(typeof t!=="string"){return t}return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlspecialcharsback:function e(t){if(typeof t!=="string"){return t}return t.replace(/\&quot;/g,'"').replace(/&#39;/g,"'").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&amp;/g,"&").replace(/\&nbsp;/g," ")},getLocalizeForNumber:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"en";var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(!r){r=BX.message}var a=1;i=parseInt(i);if(i<0){i=i*-1}if(n){switch(n){case"de":case"en":a=i!==1?1:0;break;case"ru":case"ua":a=i%10===1&&i%100!==11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2;break}}return r[t+"_PLURAL_"+a]}},date:{getFormatType:function e(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:t.DateFormat.default;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n){n=BX.message}var r=[];if(i===t.DateFormat.groupTitle){r=[["tommorow","tommorow"],["today","today"],["yesterday","yesterday"],["",n["IM_UTILS_FORMAT_DATE"]]]}else if(i===t.DateFormat.message){r=[["",n["IM_UTILS_FORMAT_TIME"]]]}else if(i===t.DateFormat.recentTitle){r=[["tommorow","today"],["today","today"],["yesterday","yesterday"],["",n["IM_UTILS_FORMAT_DATE_RECENT"]]]}else if(i===t.DateFormat.recentLinesTitle){r=[["tommorow","tommorow"],["today","today"],["yesterday","yesterday"],["",n["IM_UTILS_FORMAT_DATE_RECENT"]]]}else if(i===t.DateFormat.readedTitle){r=[["tommorow","tommorow, "+n["IM_UTILS_FORMAT_TIME"]],["today","today, "+n["IM_UTILS_FORMAT_TIME"]],["yesterday","yesterday, "+n["IM_UTILS_FORMAT_TIME"]],["",n["IM_UTILS_FORMAT_READED"]]]}else if(i===t.DateFormat.vacationTitle){r=[["",n["IM_UTILS_FORMAT_DATE_SHORT"]]]}else{r=[["tommorow","tommorow, "+n["IM_UTILS_FORMAT_TIME"]],["today","today, "+n["IM_UTILS_FORMAT_TIME"]],["yesterday","yesterday, "+n["IM_UTILS_FORMAT_TIME"]],["",n["IM_UTILS_FORMAT_DATE_TIME"]]]}return r},getDateFunction:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.dateFormatFunction){return this.dateFormatFunction}this.dateFormatFunction=Object.create(BX.Main.Date);if(t){this.dateFormatFunction._getMessage=function(e){return t[e]}}return this.dateFormatFunction},format:function e(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!n){n=this.getFormatType(t.DateFormat.default,r)}return this.getDateFunction(r).format(n,i)},cast:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Date;var n=i;if(t instanceof Date){n=t}else if(typeof t==="string"){n=new Date(t)}else if(typeof t==="number"){n=new Date(t*1e3)}if(n instanceof Date&&Number.isNaN(n.getTime())){n=i}return n}},object:{countKeys:function e(t){var i=0;for(var n in t){if(t.hasOwnProperty(n)){i++}}return i}},user:{getLastDateText:function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n){return""}var a=i.date.getDateFunction(r);if(!r){r=BX.message}var s="";var o={};if(n.bot||n.network){s=""}else if(n.absent&&!this.isMobileActive(n,r)){o=this.getOnlineStatus(n);s=r["IM_STATUS_VACATION_TITLE"].replace("#DATE#",a.format(i.date.getFormatType(t.DateFormat.vacationTitle,r),n.absent.getTime()/1e3));if(o.isOnline&&n.idle){s=r["IM_STATUS_AWAY_TITLE"].replace("#TIME#",this.getIdleText(n,r))+". "+s}else if(o.isOnline&&!o.lastSeenText){s=o.statusText+". "+s}else if(o.lastSeenText){if(!i.platform.isMobile()){s=s+". "+r["IM_LAST_SEEN_"+(n.gender==="F"?"F":"M")].replace("#POSITION#",s).replace("#LAST_SEEN#",o.lastSeenText)}}}else if(n.lastActivityDate){o=this.getOnlineStatus(n);if(o.isOnline&&n.idle&&!this.isMobileActive(n,r)){s=r["IM_STATUS_AWAY_TITLE"].replace("#TIME#",this.getIdleText(n,r))}else if(o.isOnline&&!o.lastSeenText){if(i.platform.isMobile()&&this.isMobileActive(n,r)){s=r["IM_STATUS_MOBILE"]}else{s=o.statusText}}else if(o.lastSeenText){if(i.platform.isMobile()){s=r["IM_LAST_SEEN_SHORT_"+(n.gender==="F"?"F":"M")].replace("#LAST_SEEN#",o.lastSeenText)}else{s=r["IM_LAST_SEEN_"+(n.gender==="F"?"F":"M")].replace("#POSITION#",s).replace("#LAST_SEEN#",o.lastSeenText)}}}return s},getIdleText:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!t){return""}if(!t.idle){return""}return i.date.getDateFunction(n).format([["s60","sdiff"],["i60","idiff"],["H24","Hdiff"],["","ddiff"]],t.idle)},getOnlineStatus:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n){n=BX.message}var r={isOnline:false,status:"offline",statusText:n.IM_STATUS_OFFLINE,lastSeen:t.lastActivityDate,lastSeenText:""};if(!t.lastActivityDate||t.lastActivityDate.getTime()===0){return r}var a=new Date;r.isOnline=a.getTime()-t.lastActivityDate.getTime()<=this.getOnlineLimit(n)*1e3;r.status=r.isOnline?t.status:"offline";r.statusText=n["IM_STATUS_"+r.status.toUpperCase()]||r.status;if(t.lastActivityDate.getTime()>0&&a.getTime()-t.lastActivityDate.getTime()>300*1e3){r.lastSeenText=i.date.getDateFunction(n).formatLastActivityDate(t.lastActivityDate)}return r},isMobileActive:function e(t,i){if(!t){return false}return t.mobileLastDate&&new Date-t.mobileLastDate<this.getOnlineLimit(i)*1e3&&t.lastActivityDate-t.mobileLastDate<300*1e3},getOnlineLimit:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!t){t=BX.message}return t.LIMIT_ONLINE?parseInt(t.LIMIT_ONLINE):15*60}},isDarkColor:function e(t){if(!t||!t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){return false}if(t.length===4){t=t.replace(/#([A-Fa-f0-9])/gi,"$1$1")}else{t=t.replace(/#([A-Fa-f0-9])/gi,"$1")}t=t.toLowerCase();var i=["#17a3ea","#00aeef","#00c4fb","#47d1e2","#75d900","#ffab00","#ff5752","#468ee5","#1eae43"];if(i.includes("#"+t)){return true}var n=parseInt(t,16);var r=n>>16&255;var a=n>>8&255;var s=n&255;var o=(r*299+a*587+s*114)/1e3;return o<128},hashCode:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var i=0;if(babelHelpers.typeof(t)==="object"&&t){t=JSON.stringify(t)}else if(typeof t!=="string"){t=t.toString()}if(typeof t!=="string"){return i}for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);i=(i<<5)-i+r;i=i&i}return i},versionCompare:function e(t,i){var n=/^([\d+\.]+)$/;if(!n.test(t)||!n.test(i)){return NaN}t=t.toString().split(".");i=i.toString().split(".");if(t.length<i.length){while(t.length<i.length){t.push(0)}}else if(i.length<t.length){while(i.length<t.length){i.push(0)}}for(var r=0;r<t.length;r++){if(t[r]>i[r]){return 1}else if(t[r]<i[r]){return-1}}return 0},throttle:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var r=null;var a=null;var s=function e(){t.apply(n,a);r=null};return function(){if(!r){a=arguments;r=setTimeout(s,i)}}},debounce:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var r=null;var a=null;var s=function e(){t.apply(n,a)};return function(){a=arguments;clearTimeout(r);r=setTimeout(s,i)}},getLogTrackingParams:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=[];var n=t.name,r=n===void 0?"tracking":n,a=t.data,s=a===void 0?[]:a,o=t.dialog,l=o===void 0?null:o,u=t.message,f=u===void 0?null:u,D=t.files,c=D===void 0?null:D;r=encodeURIComponent(r);if(s&&!(s instanceof Array)&&babelHelpers.typeof(s)==="object"){var x=[];for(var T in s){if(s.hasOwnProperty(T)){x.push(encodeURIComponent(T)+"="+encodeURIComponent(s[T]))}}s=x}else if(!s instanceof Array){s=[]}if(l){i.push("timType="+l.type);if(l.type==="lines"){i.push("timLinesType="+l.entityId.split("|")[0])}}if(c){var g="file";if(c instanceof Array&&c[0]){g=c[0].type}else{g=c.type}i.push("timMessageType="+g)}else if(f){i.push("timMessageType=text")}if(this.platform.isBitrixMobile()){i.push("timDevice=bitrixMobile")}else if(this.platform.isBitrixDesktop()){i.push("timDevice=bitrixDesktop")}else if(this.platform.isIos()||this.platform.isAndroid()){i.push("timDevice=mobile")}else{i.push("timDevice=web")}return r+(s.length?"&"+s.join("&"):"")+(i.length?"&"+i.join("&"):"")}};e.Utils=i})(this.BX.Messenger=this.BX.Messenger||{},BX.Messenger.Const);
 



// file: /bitrix/js/im/model/dist/registry.bundle.js
this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,i,a,n){"use strict";var r=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"application"}},{key:"getState",value:function e(){return{common:{host:this.getVariable("common.host",location.protocol+"//"+location.host),siteId:this.getVariable("common.siteId","default"),userId:this.getVariable("common.userId",0),languageId:this.getVariable("common.languageId","en")},dialog:{dialogId:this.getVariable("dialog.dialogId","0"),chatId:this.getVariable("dialog.chatId",0),diskFolderId:this.getVariable("dialog.diskFolderId",0),messageLimit:this.getVariable("dialog.messageLimit",20),enableReadMessages:this.getVariable("dialog.enableReadMessages",true),messageExtraCount:0},disk:{enabled:false,maxFileSize:5242880},mobile:{keyboardShow:false},device:{type:this.getVariable("device.type",a.DeviceType.desktop),orientation:this.getVariable("device.orientation",a.DeviceOrientation.portrait)},options:{quoteEnable:this.getVariable("options.quoteEnable",true),quoteFromRight:this.getVariable("options.quoteFromRight",true),autoplayVideo:this.getVariable("options.autoplayVideo",true),darkBackground:this.getVariable("options.darkBackground",false)},error:{active:false,code:"",description:""}}}},{key:"getStateSaveException",value:function e(){return Object.assign({common:this.getVariable("saveException.common",null),dialog:this.getVariable("saveException.dialog",null),mobile:this.getVariable("saveException.mobile",null),device:this.getVariable("saveException.device",null),error:this.getVariable("saveException.error",null)})}},{key:"getActions",value:function e(){var t=this;return{set:function e(i,a){i.commit("set",t.validate(a))}}}},{key:"getMutations",value:function e(){var t=this;return{set:function e(i,a){var n=false;for(var r in a){if(!a.hasOwnProperty(r)){continue}for(var o in a[r]){if(!a[r].hasOwnProperty(o)){continue}i[r][o]=a[r][o];n=true}}if(n&&t.isSaveNeeded(a)){t.saveState(i)}},increaseDialogExtraCount:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a=i.count,n=a===void 0?1:a;t.dialog.messageExtraCount+=n},decreaseDialogExtraCount:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a=i.count,n=a===void 0?1:a;var r=t.dialog.messageExtraCount-n;if(r<=0){r=0}t.dialog.messageExtraCount=r},clearDialogExtraCount:function e(t){t.dialog.messageExtraCount=0}}}},{key:"validate",value:function e(t){var i={};if(babelHelpers.typeof(t.common)==="object"&&t.common){i.common={};if(typeof t.common.userId==="number"){i.common.userId=t.common.userId}if(typeof t.common.languageId==="string"){i.common.languageId=t.common.languageId}}if(babelHelpers.typeof(t.dialog)==="object"&&t.dialog){i.dialog={};if(typeof t.dialog.dialogId==="number"){i.dialog.dialogId=t.dialog.dialogId.toString();i.dialog.chatId=0}else if(typeof t.dialog.dialogId==="string"){i.dialog.dialogId=t.dialog.dialogId;if(typeof t.dialog.chatId!=="number"){var n=t.dialog.dialogId;if(n.startsWith("chat")){n=t.dialog.dialogId.substr(4)}n=parseInt(n);i.dialog.chatId=!isNaN(n)?n:0;t.dialog.chatId=i.dialog.chatId}}if(typeof t.dialog.chatId==="number"){i.dialog.chatId=t.dialog.chatId}if(typeof t.dialog.diskFolderId==="number"){i.dialog.diskFolderId=t.dialog.diskFolderId}if(typeof t.dialog.messageLimit==="number"){i.dialog.messageLimit=t.dialog.messageLimit}if(typeof t.dialog.messageExtraCount==="number"){i.dialog.messageExtraCount=t.dialog.messageExtraCount}if(typeof t.dialog.enableReadMessages==="boolean"){i.dialog.enableReadMessages=t.dialog.enableReadMessages}}if(babelHelpers.typeof(t.disk)==="object"&&t.disk){i.disk={};if(typeof t.disk.enabled==="boolean"){i.disk.enabled=t.disk.enabled}if(typeof t.disk.maxFileSize==="number"){i.disk.maxFileSize=t.disk.maxFileSize}}if(babelHelpers.typeof(t.mobile)==="object"&&t.mobile){i.mobile={};if(typeof t.mobile.keyboardShow==="boolean"){i.mobile.keyboardShow=t.mobile.keyboardShow}}if(babelHelpers.typeof(t.device)==="object"&&t.device){i.device={};if(typeof t.device.type==="string"&&typeof a.DeviceType[t.device.type]!=="undefined"){i.device.type=t.device.type}if(typeof t.device.orientation==="string"&&typeof a.DeviceOrientation[t.device.orientation]!=="undefined"){i.device.orientation=t.device.orientation}}if(babelHelpers.typeof(t.error)==="object"&&t.error){if(typeof t.error.active==="boolean"){i.error={active:t.error.active,code:t.error.code.toString()||"",description:t.error.description.toString()||""}}}return i}}]);return t}(i.VuexBuilderModel);var o={empty:"empty",equal:"equal",none:"none",found:"found",foundReverse:"foundReverse"};var s=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"getName",value:function e(){return"messages"}},{key:"getState",value:function e(){return{created:0,collection:{},mutationType:{},saveMessageList:{},saveFileList:{},saveUserList:{}}}},{key:"getElementState",value:function e(){return{templateId:0,templateType:"message",id:0,chatId:0,authorId:0,date:new Date,text:"",textConverted:"",params:{TYPE:"default",COMPONENT_ID:"bx-messenger-message"},push:false,unread:false,sending:false,error:false,retry:false,blink:false}}},{key:"getGetters",value:function e(){var t=this;return{getMutationType:function e(t){return function(e){if(!t.mutationType[e]){return{initialType:a.MutationType.none,appliedType:a.MutationType.none}}return t.mutationType[e]}},getLastId:function e(t){return function(e){if(!t.collection[e]||t.collection[e].length<=0){return null}var i=0;for(var a=0;a<t.collection[e].length;a++){var n=t.collection[e][a];if(n.push||n.sending||n.id.toString().startsWith("temporary")){continue}if(i<n.id){i=n.id}}return i?i:null}},getMessage:function e(t){return function(e,i){if(!t.collection[e]||t.collection[e].length<=0){return null}for(var a=t.collection[e].length-1;a>=0;a--){if(t.collection[e][a].id===i){return t.collection[e][a]}}return null}},get:function e(t){return function(e){if(!t.collection[e]||t.collection[e].length<=0){return[]}return t.collection[e]}},getBlank:function e(i){return function(e){return t.getElementState()}},getSaveFileList:function e(t){return function(e){return t.saveFileList}},getSaveUserList:function e(t){return function(e){return t.saveUserList}}}}},{key:"getActions",value:function e(){var i=this;return{add:function e(t,a){var n=i.validate(Object.assign({},a));n.params=Object.assign({},i.getElementState().params,n.params);n.id="temporary"+(new Date).getTime()+t.state.created;n.templateId=n.id;n.unread=false;t.commit("add",Object.assign({},i.getElementState(),n));if(a.sending!==false){t.dispatch("actionStart",{id:n.id,chatId:n.chatId})}return n.id},actionStart:function e(i,a){if(/^\d+$/.test(a.id)){a.id=parseInt(a.id)}a.chatId=parseInt(a.chatId);t.Vue.nextTick(function(){i.commit("update",{id:a.id,chatId:a.chatId,fields:{sending:true}})})},actionError:function e(i,a){if(/^\d+$/.test(a.id)){a.id=parseInt(a.id)}a.chatId=parseInt(a.chatId);t.Vue.nextTick(function(){i.commit("update",{id:a.id,chatId:a.chatId,fields:{sending:false,error:true,retry:a.retry!==false}})})},actionFinish:function e(i,a){if(/^\d+$/.test(a.id)){a.id=parseInt(a.id)}a.chatId=parseInt(a.chatId);t.Vue.nextTick(function(){i.commit("update",{id:a.id,chatId:a.chatId,fields:{sending:false,error:false,retry:false}})})},set:function e(t,n){if(n instanceof Array){n=n.map(function(e){return i.prepareMessage(e)})}else{var r=i.prepareMessage(n);(n=[]).push(r)}t.commit("set",{insertType:a.MutationType.set,data:n})},setAfter:function e(t,n){if(n instanceof Array){n=n.map(function(e){return i.prepareMessage(e)})}else{var r=i.prepareMessage(n);(n=[]).push(r)}t.commit("set",{insertType:a.MutationType.setAfter,data:n})},setBefore:function e(t,n){if(n instanceof Array){n=n.map(function(e){return i.prepareMessage(e)})}else{var r=i.prepareMessage(n);(n=[]).push(r)}t.commit("set",{insertType:a.MutationType.setBefore,data:n})},update:function e(t,a){if(/^\d+$/.test(a.id)){a.id=parseInt(a.id)}if(/^\d+$/.test(a.chatId)){a.chatId=parseInt(a.chatId)}t.commit("initCollection",{chatId:a.chatId});var n=t.state.collection[a.chatId].findIndex(function(e){return e.id===a.id});if(n<0){return false}var r=i.validate(Object.assign({},a.fields));if(r.params){r.params=Object.assign({},i.getElementState().params,t.state.collection[a.chatId][n].params,r.params)}t.commit("update",{id:a.id,chatId:a.chatId,index:n,fields:r});if(a.fields.blink){setTimeout(function(){t.commit("update",{id:a.id,chatId:a.chatId,fields:{blink:false}})},1e3)}return true},delete:function e(t,i){if(!(i.id instanceof Array)){i.id=[i.id]}i.id=i.id.map(function(e){if(/^\d+$/.test(e)){e=parseInt(e)}return e});t.commit("delete",{chatId:i.chatId,elements:i.id});return true},clear:function e(t,i){i.chatId=parseInt(i.chatId);t.commit("clear",{chatId:i.chatId});return true},applyMutationType:function e(t,i){i.chatId=parseInt(i.chatId);t.commit("applyMutationType",{chatId:i.chatId});return true},readMessages:function e(t,i){i.readId=parseInt(i.readId)||0;i.chatId=parseInt(i.chatId);if(typeof t.state.collection[i.chatId]==="undefined"){return{count:0}}var a=0;for(var n=t.state.collection[i.chatId].length-1;n>=0;n--){var r=t.state.collection[i.chatId][n];if(!r.unread)continue;if(i.readId===0||r.id<=i.readId){a++}}t.commit("readMessages",{chatId:i.chatId,readId:i.readId});return{count:a}},unreadMessages:function e(t,i){i.unreadId=parseInt(i.unreadId)||0;i.chatId=parseInt(i.chatId);if(typeof t.state.collection[i.chatId]==="undefined"||!i.unreadId){return{count:0}}var a=0;for(var n=t.state.collection[i.chatId].length-1;n>=0;n--){var r=t.state.collection[i.chatId][n];if(r.unread)continue;if(r.id>=i.unreadId){a++}}t.commit("unreadMessages",{chatId:i.chatId,unreadId:i.unreadId});return{count:a}}}}},{key:"getMutations",value:function e(){var i=this;return{initCollection:function e(t,a){return i.initCollection(t,a)},add:function e(t,n){i.initCollection(t,{chatId:n.chatId});i.setMutationType(t,{chatId:n.chatId,initialType:a.MutationType.add});t.collection[n.chatId].push(n);t.saveMessageList[n.chatId].push(n.id);t.created+=1;i.saveState(t,n.chatId)},set:function e(t,n){var r=[];var s=[];var l={};l.initialType=n.insertType;if(n.insertType===a.MutationType.set){(function(){n.insertType=a.MutationType.setAfter;var e={};n.data.forEach(function(t){if(!e[t.chatId]){e[t.chatId]=[]}e[t.chatId].push(t.id)});var r=function r(s){if(!e.hasOwnProperty(s))return"continue";i.initCollection(t,{chatId:s});if(t.saveMessageList[s].length>e[s].length||e[s].length<a.StorageLimit.messages){t.collection[s]=t.collection[s].filter(function(t){return e[s].includes(t.id)});t.saveMessageList[s]=t.saveMessageList[s].filter(function(t){return e[s].includes(t)})}var d=i.manageCacheBeforeSet(babelHelpers.toConsumableArray(t.saveMessageList[s].reverse()),e[s]);if(d.type===o.none){if(d.foundElements.length>0){t.collection[s]=t.collection[s].filter(function(e){return!d.foundElements.includes(e.id)});t.saveMessageList[s]=t.saveMessageList[s].filter(function(e){return!d.foundElements.includes(e)})}i.removeIntersectionCacheElements=t.collection[s].map(function(e){return e.id});clearTimeout(i.removeIntersectionCacheTimeout);i.removeIntersectionCacheTimeout=setTimeout(function(){t.collection[s]=t.collection[s].filter(function(e){return!i.removeIntersectionCacheElements.includes(e.id)});t.saveMessageList[s]=t.saveMessageList[s].filter(function(e){return!i.removeIntersectionCacheElements.includes(e)});i.removeIntersectionCacheElements=[]},1e3)}else{if(d.type===o.foundReverse){n.insertType=a.MutationType.setBefore;n.data=n.data.reverse()}}if(d.foundElements.length>0){if(d.type===o.found&&d.noneElements[0]){l.scrollStickToTop=false;l.scrollMessageId=d.foundElements[d.foundElements.length-1]}else{l.scrollStickToTop=false;l.scrollMessageId=0}}else if(d.type===o.none){l.scrollStickToTop=false;l.scrollMessageId=n.data[0].id}};for(var s in e){var d=r(s);if(d==="continue")continue}})()}l.appliedType=n.insertType;var d=true;var c=false;var u=undefined;try{var f=function e(){var o=g.value;i.initCollection(t,{chatId:o.chatId});var l=t.collection[o.chatId].findIndex(function(e){return e.id===o.id});if(l>-1){delete o.templateId;t.collection[o.chatId][l]=Object.assign(t.collection[o.chatId][l],o)}else if(n.insertType===a.MutationType.setBefore){t.collection[o.chatId].unshift(o)}else if(n.insertType===a.MutationType.setAfter){t.collection[o.chatId].push(o)}r.push(o.chatId);if(i.store.getters["dialogues/canSaveChat"]&&i.store.getters["dialogues/canSaveChat"](o.chatId)){s.push(o.chatId)}};for(var p=n.data[Symbol.iterator](),g;!(d=(g=p.next()).done);d=true){f()}}catch(e){c=true;u=e}finally{try{if(!d&&p.return!=null){p.return()}}finally{if(c){throw u}}}r=babelHelpers.toConsumableArray(new Set(r));s=babelHelpers.toConsumableArray(new Set(s));if(l.initialType===a.MutationType.set){r.forEach(function(e){var i=0;var a=false;for(var n=0;n<t.collection[e].length;n++){var r=t.collection[e][n];if(r.id<i){a=true;break}i=r.id}if(a){t.collection[e].sort(function(e,t){return e.id-t.id})}})}r.forEach(function(e){i.setMutationType(t,babelHelpers.objectSpread({chatId:e},l))});if(l.initialType!==a.MutationType.setBefore){s.forEach(function(e){i.saveState(t,e)})}},update:function e(t,a){i.initCollection(t,{chatId:a.chatId});var n=-1;if(typeof a.index!=="undefined"&&t.collection[a.chatId][a.index]){n=a.index}else{n=t.collection[a.chatId].findIndex(function(e){return e.id===a.id})}if(n>=0){var r=t.saveMessageList[a.chatId].includes(t.collection[a.chatId][n].id)||a.fields.id&&!a.fields.id.toString().startsWith("temporary")&&t.collection[a.chatId][n].id.toString().startsWith("temporary");delete a.fields.templateId;t.collection[a.chatId][n]=Object.assign(t.collection[a.chatId][n],a.fields);if(r){i.saveState(t,a.chatId)}}},delete:function e(t,n){i.initCollection(t,{chatId:n.chatId});i.setMutationType(t,{chatId:n.chatId,initialType:a.MutationType.delete});t.collection[n.chatId]=t.collection[n.chatId].filter(function(e){return!n.elements.includes(e.id)});if(t.saveMessageList[n.chatId].length>0){var r=true;var o=false;var s=undefined;try{for(var l=n.elements[Symbol.iterator](),d;!(r=(d=l.next()).done);r=true){var c=d.value;if(t.saveMessageList[n.chatId].includes(c)){i.saveState(t,n.chatId);break}}}catch(e){o=true;s=e}finally{try{if(!r&&l.return!=null){l.return()}}finally{if(o){throw s}}}}},clear:function e(t,a){i.initCollection(t,{chatId:a.chatId});i.setMutationType(t,{chatId:a.chatId,initialType:"clear"});t.collection[a.chatId]=[];t.saveMessageList[a.chatId]=[]},applyMutationType:function e(i,n){if(typeof i.mutationType[n.chatId]==="undefined"){t.Vue.set(i.mutationType,n.chatId,{applied:false,initialType:a.MutationType.none,appliedType:a.MutationType.none,scrollStickToTop:0,scrollMessageId:0})}i.mutationType[n.chatId].applied=true},readMessages:function e(t,a){i.initCollection(t,{chatId:a.chatId});var n=false;for(var r=t.collection[a.chatId].length-1;r>=0;r--){var o=t.collection[a.chatId][r];if(!o.unread)continue;if(a.readId===0||o.id<=a.readId){t.collection[a.chatId][r]=Object.assign(t.collection[a.chatId][r],{unread:false});n=true}}if(n){i.saveState(t,a.chatId)}},unreadMessages:function e(t,a){i.initCollection(t,{chatId:a.chatId});var n=false;for(var r=t.collection[a.chatId].length-1;r>=0;r--){var o=t.collection[a.chatId][r];if(o.unread)continue;if(o.id>=a.unreadId){t.collection[a.chatId][r]=Object.assign(t.collection[a.chatId][r],{unread:true});n=true}}if(n){i.saveState(t,a.chatId);i.updateSubordinateStates()}}}}},{key:"initCollection",value:function e(i,n){if(typeof n.chatId==="undefined"){return false}if(typeof n.chatId==="undefined"||typeof i.collection[n.chatId]!=="undefined"){return true}t.Vue.set(i.collection,n.chatId,n.messages?[].concat(n.messages):[]);t.Vue.set(i.mutationType,n.chatId,{applied:false,initialType:a.MutationType.none,appliedType:a.MutationType.none,scrollStickToTop:0,scrollMessageId:0});t.Vue.set(i.saveMessageList,n.chatId,[]);t.Vue.set(i.saveFileList,n.chatId,[]);t.Vue.set(i.saveUserList,n.chatId,[]);return true}},{key:"setMutationType",value:function e(i,n){var r={applied:false,initialType:a.MutationType.none,appliedType:a.MutationType.none,scrollStickToTop:false,scrollMessageId:0};if(n.initialType&&!n.appliedType){n.appliedType=n.initialType}if(typeof i.mutationType[n.chatId]==="undefined"){t.Vue.set(i.mutationType,n.chatId,r)}i.mutationType[n.chatId]=babelHelpers.objectSpread({},r,n);return true}},{key:"prepareMessage",value:function e(t){var i=this.validate(Object.assign({},t));i.params=Object.assign({},this.getElementState().params,i.params);i.templateId=i.id;return Object.assign({},this.getElementState(),i)}},{key:"manageCacheBeforeSet",value:function e(t,i){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n={type:o.empty,foundElements:[],noneElements:[]};if(!t||t.length<=0){return n}var r=true;var s=false;var l=undefined;try{for(var d=i[Symbol.iterator](),c;!(r=(c=d.next()).done);r=true){var u=c.value;if(t.includes(u)){if(n.type===o.empty){n.type=o.found}n.foundElements.push(u)}else{if(n.type===o.empty){n.type=o.none}n.noneElements.push(u)}}}catch(e){s=true;l=e}finally{try{if(!r&&d.return!=null){d.return()}}finally{if(s){throw l}}}if(n.type===o.found&&t.length===i.length&&n.foundElements.length===i.length){n.type=o.equal}else if(n.type===o.none&&!a&&n.foundElements.length>0){var f=this.manageCacheBeforeSet(t.reverse(),i.reverse(),true);if(f.type===o.found){f.type=o.foundReverse;return f}}return n}},{key:"updateSaveLists",value:function e(t,i){if(!this.isSaveAvailable()){return true}if(!i||!this.store.getters["dialogues/canSaveChat"]||!this.store.getters["dialogues/canSaveChat"](i)){return false}this.initCollection(t,{chatId:i});var n=0;var r=[];var o=[];var s=[];var l=this.store.getters["dialogues/getByChatId"](i);if(l&&l.type==="private"){s.push(parseInt(l.dialogId))}for(var d=t.collection[i].length-1;d>=0;d--){if(t.collection[i][d].id.toString().startsWith("temporary")){continue}if(n>=a.StorageLimit.messages&&!t.collection[i][d].unread){break}r.unshift(t.collection[i][d].id);n++}r=r.slice(0,a.StorageLimit.messages);t.collection[i].filter(function(e){return r.includes(e.id)}).forEach(function(e){if(e.authorId>0){s.push(e.authorId)}if(e.params.FILE_ID instanceof Array){o=e.params.FILE_ID.concat(o)}});t.saveMessageList[i]=r;t.saveFileList[i]=babelHelpers.toConsumableArray(new Set(o));t.saveUserList[i]=babelHelpers.toConsumableArray(new Set(s));return true}},{key:"getSaveTimeout",value:function e(){return 150}},{key:"saveState",value:function e(t,a){if(!this.updateSaveLists(t,a)){return false}babelHelpers.get(babelHelpers.getPrototypeOf(i.prototype),"saveState",this).call(this,function(){var e={collection:{},saveMessageList:{},saveUserList:{},saveFileList:{}};var i=function i(a){if(!t.saveMessageList.hasOwnProperty(a)){return"continue"}if(!t.collection[a]){return"continue"}if(!e.collection[a]){e.collection[a]=[]}t.collection[a].filter(function(e){return t.saveMessageList[a].includes(e.id)}).forEach(function(t){return e.collection[a].push(t)});e.saveMessageList[a]=t.saveMessageList[a];e.saveFileList[a]=t.saveFileList[a];e.saveUserList[a]=t.saveUserList[a]};for(var a in t.saveMessageList){var n=i(a);if(n==="continue")continue}return e})}},{key:"updateSubordinateStates",value:function e(){this.store.dispatch("users/saveState");this.store.dispatch("files/saveState")}},{key:"validate",value:function e(t){var i={};if(typeof t.id==="number"){i.id=t.id}else if(typeof t.id==="string"){if(t.id.startsWith("temporary")){i.id=t.id}else{i.id=parseInt(t.id)}}if(typeof t.templateId==="number"){i.templateId=t.templateId}else if(typeof t.templateId==="string"){if(t.templateId.startsWith("temporary")){i.templateId=t.templateId}else{i.templateId=parseInt(t.templateId)}}if(typeof t.chat_id!=="undefined"){t.chatId=t.chat_id}if(typeof t.chatId==="number"||typeof t.chatId==="string"){i.chatId=parseInt(t.chatId)}if(typeof t.date!=="undefined"){i.date=n.Utils.date.cast(t.date)}if(typeof t.textOriginal==="string"||typeof t.textOriginal==="number"){i.text=t.textOriginal.toString();if(typeof t.text==="string"||typeof t.text==="number"){i.textConverted=this.convertToHtml({text:t.text.toString(),isConverted:true})}}else{if(typeof t.text_converted!=="undefined"){t.textConverted=t.text_converted}if(typeof t.textConverted==="string"||typeof t.textConverted==="number"){i.textConverted=t.textConverted.toString()}if(typeof t.text==="string"||typeof t.text==="number"){i.text=t.text.toString();var a=typeof i.textConverted!=="undefined";i.textConverted=this.convertToHtml({text:a?i.textConverted:i.text,isConverted:a})}}if(typeof t.senderId!=="undefined"){t.authorId=t.senderId}else if(typeof t.author_id!=="undefined"){t.authorId=t.author_id}if(typeof t.authorId==="number"||typeof t.authorId==="string"){if(t.system===true||t.system==="Y"){i.authorId=0}else{i.authorId=parseInt(t.authorId)}}if(babelHelpers.typeof(t.params)==="object"&&t.params!==null){var r=this.validateParams(t.params);if(r){i.params=r}}if(typeof t.push==="boolean"){i.push=t.push}if(typeof t.sending==="boolean"){i.sending=t.sending}if(typeof t.unread==="boolean"){i.unread=t.unread}if(typeof t.blink==="boolean"){i.blink=t.blink}if(typeof t.error==="boolean"||typeof t.error==="string"){i.error=t.error}if(typeof t.retry==="boolean"){i.retry=t.retry}return i}},{key:"validateParams",value:function e(t){var i={};try{for(var a in t){if(!t.hasOwnProperty(a)){continue}if(a==="COMPONENT_ID"){if(typeof t[a]==="string"&&BX.Vue.isComponent(t[a])){i[a]=t[a]}}else if(a==="LIKE"){if(t[a]instanceof Array){i["REACTION"]={like:t[a].map(function(e){return parseInt(e)})}}}else if(a==="CHAT_LAST_DATE"){i[a]=n.Utils.date.cast(t[a])}else{i[a]=t[a]}}}catch(e){}var r=false;for(var o in i){if(!i.hasOwnProperty(o)){continue}r=true;break}return r?i:null}},{key:"convertToHtml",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=t.quote,a=i===void 0?true:i,n=t.image,r=n===void 0?true:n,o=t.text,s=o===void 0?"":o,l=t.highlightText,d=l===void 0?"":l,c=t.isConverted,u=c===void 0?false:c,f=t.enableBigSmile,p=f===void 0?true:f;s=s.trim();if(!u){s=s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}if(s.startsWith("/me")){s="<i>".concat(s.substr(4),"</i>")}else if(s.startsWith("/loud")){s="<b>".concat(s.substr(6),"</b>")}var g="&gt;&gt;";if(a&&s.indexOf(g)>=0){var h=s.split(u?"<br />":"\n");for(var m=0;m<h.length;m++){if(h[m].startsWith(g)){h[m]=h[m].replace(g,'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap">');while(++m<h.length&&h[m].startsWith(g)){h[m]=h[m].replace(g,"")}h[m-1]+="</div></div><br>"}}s=h.join("<br />")}s=s.replace(/\n/gi,"<br />");s=s.replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;");s=this.decodeBbCode(s,false,p);if(a){s=s.replace(/------------------------------------------------------<br \/>(.*?)\[(.*?)\]<br \/>(.*?)------------------------------------------------------(<br \/>)?/g,function(e,t,i,a,n,r){return(r>0?"<br>":"")+'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap"><div class="bx-im-message-content-quote-name"><span class="bx-im-message-content-quote-name-text">'+t+'</span><span class="bx-im-message-content-quote-name-time">'+i+"</span></div>"+a+"</div></div><br />"});s=s.replace(/------------------------------------------------------<br \/>(.*?)------------------------------------------------------(<br \/>)?/g,function(e,t,i,a,n){return(n>0?"<br>":"")+'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap">'+t+"</div></div><br />"})}if(r){var v=false;s=s.replace(/<a(.*?)>(http[s]{0,1}:\/\/.*?)<\/a>/gi,function(e,t,i,a){if(!i.match(/(\.(jpg|jpeg|png|gif)\?|\.(jpg|jpeg|png|gif)$)/i)||i.indexOf("/docs/pub/")>0||i.indexOf("logout=yes")>0){return e}else{v=true;return(a>0?"<br />":"")+"<a"+t+' target="_blank" class="bx-im-element-file-image"><img src="'+i+'" class="bx-im-element-file-image-source-text" onerror="BX.Messenger.Model.MessagesModel.hideErrorImage(this)"></a></span>'}});if(v){s=s.replace(/<\/span>(\n?)<br(\s\/?)>/gi,"</span>").replace(/<br(\s\/?)>(\n?)<br(\s\/?)>(\n?)<span/gi,"<br /><span")}}if(d){s=s.replace(new RegExp("("+d.replace(/[\-\[\]\/{}()*+?.\\^$|]/g,"\\$&")+")","ig"),'<span class="bx-messenger-highlight">$1</span>')}if(p){s=s.replace(/^(\s*<img\s+src=[^>]+?data-code=[^>]+?data-definition="UHD"[^>]+?style="width:)(\d+)(px[^>]+?height:)(\d+)(px[^>]+?class="bx-smile"\s*\/?>\s*)$/,function e(t,i,a,n,r,o){return i+parseInt(a,10)*1.7+n+parseInt(r,10)*1.7+o})}if(s.substr(-6)=="<br />"){s=s.substr(0,s.length-6)}s=s.replace(/<br><br \/>/gi,"<br />");s=s.replace(/<br \/><br>/gi,"<br />");return s}},{key:"decodeBbCode",value:function e(t){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return i.decodeBbCode({text:t,textOnly:a,enableBigSmile:n})}}],[{key:"decodeBbCode",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=t.text,a=t.textOnly,r=a===void 0?false:a,o=t.enableBigSmile,s=o===void 0?true:o;var l=[];i=i.replace(/\[CODE\]\n?([\0-\uFFFF]*?)\[\/CODE\]/gi,function(e,t){var i=l.length;l.push(t);return"####REPLACEMENT_MARK_"+i+"####"});i=i.replace(/\[LIKE\]/gi,'<span class="bx-smile bx-im-smile-like"></span>');i=i.replace(/\[DISLIKE\]/gi,'<span class="bx-smile bx-im-smile-dislike"></span>');i=i.replace(/\[USER=([0-9]{1,})\](.*?)\[\/USER\]/gi,function(e,t,i){return'<span class="bx-im-mention" data-type="USER" data-value="'+t+'">'+i+"</span>"});i=i.replace(/\[CHAT=(imol\|)?([0-9]{1,})\](.*?)\[\/CHAT\]/gi,function(e,t,i,a){return t?a:'<span class="bx-im-mention" data-type="CHAT" data-value="chat'+i+'">'+a+"</span>"});i=i.replace(/\[CALL(?:=(.+?))?\](.+?)?\[\/CALL\]/gi,function(e,t,i){return'<span class="bx-im-mention" data-type="CALL" data-value="'+n.Utils.text.htmlspecialchars(t)+'">'+i+"</span>"});i=i.replace(/\[PCH=([0-9]{1,})\](.*?)\[\/PCH\]/gi,function(e,t,i){return i});i=i.replace(/\[SEND(?:=(.+?))?\](.+?)?\[\/SEND\]/gi,function(e,t,i){var a="";i=i?i:t;t=(t?t:i).replace("<br />","\n");if(!r&&i){i=i.replace(/<([\w]+)[^>]*>(.*?)<\\1>/i,"$2",i);i=i.replace(/\[([\w]+)[^\]]*\](.*?)\[\/\1\]/i,"$2",i);a='<span class="bx-im-message-command-wrap">'+'<span class="bx-im-message-command" data-entity="send">'+i+"</span>"+'<span class="bx-im-message-command-data">'+t+"</span>"+"</span>"}else{a=i}return a});i=i.replace(/\[PUT(?:=(.+?))?\](.+?)?\[\/PUT\]/gi,function(e,t,i){var a="";i=i?i:t;t=(t?t:i).replace("<br />","\n");if(!r&&i){i=i.replace(/<([\w]+)[^>]*>(.*?)<\/\1>/i,"$2",i);i=i.replace(/\[([\w]+)[^\]]*\](.*?)\[\/\1\]/i,"$2",i);a='<span class="bx-im-message-command" data-entity="put">'+i+"</span>";a+='<span class="bx-im-message-command-data">'+t+"</span>"}else{a=i}return a});var d=0;if(s){d=i.replace(/\[icon\=([^\]]*)\]/gi,"").trim().length}i=i.replace(/\[icon\=([^\]]*)\]/gi,function(e){var t=e.match(/icon\=(\S+[^\s.,> )\];\'\"!?])/i);if(t&&t[1]){t=t[1]}else{return""}var i={src:t,border:0};var a=e.match(/size\=(\d+)/i);if(a&&a[1]){i["width"]=a[1];i["height"]=a[1]}else{var r=e.match(/width\=(\d+)/i);if(r&&r[1]){i["width"]=r[1]}var o=e.match(/height\=(\d+)/i);if(o&&o[1]){i["height"]=o[1]}if(i["width"]&&!i["height"]){i["height"]=i["width"]}else if(i["height"]&&!i["width"]){i["width"]=i["height"]}else if(i["height"]&&i["width"]);else{i["width"]=20;i["height"]=20}}i["width"]=i["width"]>100?100:i["width"];i["height"]=i["height"]>100?100:i["height"];if(s&&d===0&&i["width"]===i["height"]&&i["width"]===20){i["width"]=40;i["height"]=40}var l=e.match(/title\=(.*[^\s\]])/i);if(l&&l[1]){l=l[1];if(l.indexOf("width=")>-1){l=l.substr(0,l.indexOf("width="))}if(l.indexOf("height=")>-1){l=l.substr(0,l.indexOf("height="))}if(l.indexOf("size=")>-1){l=l.substr(0,l.indexOf("size="))}if(l){i["title"]=n.Utils.text.htmlspecialchars(l).trim();i["alt"]=i["title"]}}var c="";for(var u in i){if(i.hasOwnProperty(u)){c+=u+'="'+i[u]+'" '}}return'<img class="bx-smile bx-icon" '+c+">"});l.forEach(function(e,t){i=i.replace("####REPLACEMENT_MARK_"+t+"####",!r?'<div class="bx-im-message-content-code">'+e+"</div>":e)});return i}},{key:"hideErrorImage",value:function e(t){if(t.parentNode&&t.parentNode){t.parentNode.innerHTML='<a href="'+t.src+'" target="_blank">'+t.src+"</a>"}return true}}]);return i}(i.VuexBuilderModel);var l=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"getName",value:function e(){return"dialogues"}},{key:"getState",value:function e(){return{host:this.getVariable("host",location.protocol+"//"+location.host),collection:{},saveDialogList:[],saveChatList:[]}}},{key:"getStateSaveException",value:function e(){return{host:null}}},{key:"getElementStateSaveException",value:function e(){return{writingList:null,quoteId:null}}},{key:"getElementState",value:function e(){return{dialogId:"0",chatId:0,counter:0,unreadId:0,unreadLastId:0,managerList:[],readedList:[],writingList:[],textareaMessage:"",quoteId:0,init:false,name:"",owner:0,extranet:false,avatar:"",color:"#17A3EA",type:"chat",entityType:"",entityId:"",entityData1:"",entityData2:"",entityData3:"",dateCreate:new Date}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(t){return function(e){if(!t.collection[e]){return null}return t.collection[e]}},getByChatId:function e(t){return function(e){e=parseInt(e);for(var i in t.collection){if(!t.collection.hasOwnProperty(i)){continue}if(t.collection[i].chatId===e){return t.collection[i]}}return null}},getBlank:function e(i){return function(e){return t.getElementState()}},getQuoteId:function e(t){return function(e){if(!t.collection[e]){return 0}return t.collection[e].quoteId}},canSaveChat:function e(t){return function(e){if(/^\d+$/.test(e)){e=parseInt(e)}return t.saveChatList.includes(parseInt(e))}},canSaveDialog:function e(t){return function(e){return t.saveDialogList.includes(e.toString())}},isPrivateDialog:function e(t){return function(e){e=e.toString();return t.collection[e.toString()]&&t.collection[e].type==="private"}}}}},{key:"getActions",value:function e(){var t=this;return{set:function e(i,a){if(a instanceof Array){a=a.map(function(e){return Object.assign({},t.validate(Object.assign({},e),{host:i.state.host}),{init:true})})}else{var n=[];n.push(Object.assign({},t.validate(Object.assign({},a),{host:i.state.host}),{init:true}));a=n}i.commit("set",a)},update:function e(i,a){if(typeof i.state.collection[a.dialogId]==="undefined"||i.state.collection[a.dialogId].init===false){return true}i.commit("update",{dialogId:a.dialogId,fields:t.validate(Object.assign({},a.fields),{host:i.state.host})});return true},delete:function e(t,i){t.commit("delete",i.dialogId);return true},updateWriting:function e(i,a){if(typeof i.state.collection[a.dialogId]==="undefined"||i.state.collection[a.dialogId].init===false){return true}var n=i.state.collection[a.dialogId].writingList.findIndex(function(e){return e.userId===a.userId});if(a.action){if(n>=0){return true}else{var r=[].concat(i.state.collection[a.dialogId].writingList);r.unshift({userId:a.userId,userName:a.userName});i.commit("update",{actionName:"updateWriting/1",dialogId:a.dialogId,fields:t.validate({writingList:r},{host:i.state.host})})}}else{if(n>=0){var o=i.state.collection[a.dialogId].writingList.filter(function(e){return e.userId!==a.userId});i.commit("update",{actionName:"updateWriting/2",dialogId:a.dialogId,fields:t.validate({writingList:o},{host:i.state.host})});return true}else{return true}}return false},updateReaded:function e(i,a){if(typeof i.state.collection[a.dialogId]==="undefined"||i.state.collection[a.dialogId].init===false){return true}var n=i.state.collection[a.dialogId].readedList.filter(function(e){return e.userId!==a.userId});if(a.action){n.push({userId:a.userId,userName:a.userName||"",messageId:a.messageId,date:a.date||new Date})}i.commit("update",{actionName:"updateReaded",dialogId:a.dialogId,fields:t.validate({readedList:n},{host:i.state.host})});return false},increaseCounter:function e(t,i){if(typeof t.state.collection[i.dialogId]==="undefined"||t.state.collection[i.dialogId].init===false){return true}var a=t.state.collection[i.dialogId].counter;if(a===100){return true}var n=a+i.count;if(n>100){n=100}var r={counter:n};if(typeof i.unreadLastId!=="undefined"){r.unreadLastId=i.unreadLastId}t.commit("update",{actionName:"increaseCounter",dialogId:i.dialogId,fields:r});return false},decreaseCounter:function e(t,i){if(typeof t.state.collection[i.dialogId]==="undefined"||t.state.collection[i.dialogId].init===false){return true}var a=t.state.collection[i.dialogId].counter;if(a===100){return true}var n=a-i.count;if(n<0){n=0}var r=i.unreadId>t.state.collection[i.dialogId].unreadId?i.unreadId:t.state.collection[i.dialogId].unreadId;if(t.state.collection[i.dialogId].unreadId!==r||t.state.collection[i.dialogId].counter!==n){if(n===0){r=0}t.commit("update",{actionName:"decreaseCounter",dialogId:i.dialogId,fields:{counter:n,unreadId:r}})}return false},saveDialog:function e(t,i){if(typeof t.state.collection[i.dialogId]==="undefined"||t.state.collection[i.dialogId].init===false){return true}t.commit("saveDialog",{dialogId:i.dialogId,chatId:i.chatId});return false}}}},{key:"getMutations",value:function e(){var t=this;return{initCollection:function e(i,a){t.initCollection(i,a)},saveDialog:function e(i,n){if(!(n.chatId>0&&n.dialogId.length>0)){return false}var r=i.saveDialogList.filter(function(e){return e!==n.dialogId});r.unshift(n.dialogId);r=r.slice(0,a.StorageLimit.dialogues);if(i.saveDialogList.join(",")===r.join(",")){return true}i.saveDialogList=r;var o=i.saveChatList.filter(function(e){return e!==n.chatId});o.unshift(n.chatId);i.saveChatList=o.slice(0,a.StorageLimit.dialogues);t.saveState(i)},set:function e(i,a){var n=true;var r=false;var o=undefined;try{for(var s=a[Symbol.iterator](),l;!(n=(l=s.next()).done);n=true){var d=l.value;t.initCollection(i,{dialogId:d.dialogId});i.collection[d.dialogId]=Object.assign(t.getElementState(),i.collection[d.dialogId],d)}}catch(e){r=true;o=e}finally{try{if(!n&&s.return!=null){s.return()}}finally{if(r){throw o}}}t.saveState(i)},update:function e(i,a){t.initCollection(i,a);i.collection[a.dialogId]=Object.assign(i.collection[a.dialogId],a.fields);t.saveState(i)},delete:function e(i,a){delete i.collection[a.dialogId];t.saveState(i)}}}},{key:"initCollection",value:function e(i,a){if(typeof i.collection[a.dialogId]!=="undefined"){return true}t.Vue.set(i.collection,a.dialogId,this.getElementState());if(a.fields){i.collection[a.dialogId]=Object.assign(i.collection[a.dialogId],this.validate(Object.assign({},a.fields),{host:i.host}))}return true}},{key:"getSaveTimeout",value:function e(){return 100}},{key:"saveState",value:function e(){var t=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.isSaveAvailable()){return true}babelHelpers.get(babelHelpers.getPrototypeOf(i.prototype),"saveState",this).call(this,function(){var e={collection:{},saveDialogList:[].concat(a.saveDialogList),saveChatList:[].concat(a.saveChatList)};a.saveDialogList.forEach(function(i){if(!a.collection[i])return false;e.collection[i]=Object.assign(t.getElementState(),t.cloneState(a.collection[i],t.getElementStateSaveException()))});return e})}},{key:"validate",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a={};i.host=i.host||this.getState().host;if(typeof t.dialog_id!=="undefined"){t.dialogId=t.dialog_id}if(typeof t.dialogId==="number"||typeof t.dialogId==="string"){a.dialogId=t.dialogId.toString()}if(typeof t.chat_id!=="undefined"){t.chatId=t.chat_id}else if(typeof t.id!=="undefined"){t.chatId=t.id}if(typeof t.chatId==="number"||typeof t.chatId==="string"){a.chatId=parseInt(t.chatId)}if(typeof t.quoteId==="number"){a.quoteId=parseInt(t.quoteId)}if(typeof t.counter==="number"||typeof t.counter==="string"){a.counter=parseInt(t.counter)}if(typeof t.unread_id!=="undefined"){t.unreadId=t.unread_id}if(typeof t.unreadId==="number"||typeof t.unreadId==="string"){a.unreadId=parseInt(t.unreadId)}if(typeof t.unread_last_id!=="undefined"){t.unreadLastId=t.unread_last_id}if(typeof t.unreadLastId==="number"||typeof t.unreadLastId==="string"){a.unreadLastId=parseInt(t.unreadLastId)}if(typeof t.readed_list!=="undefined"){t.readedList=t.readed_list}if(typeof t.readedList!=="undefined"){a.readedList=[];if(t.readedList instanceof Array){t.readedList.forEach(function(e){var t={};if(typeof e.user_id!=="undefined"){e.userId=e.user_id}if(typeof e.user_name!=="undefined"){e.userName=e.user_name}if(typeof e.message_id!=="undefined"){e.messageId=e.message_id}if(!e.userId||!e.userName||!e.messageId){return false}t.userId=parseInt(e.userId);t.userName=e.userName.toString();t.messageId=parseInt(e.messageId);t.date=n.Utils.date.cast(e.date);a.readedList.push(t)})}}if(typeof t.writing_list!=="undefined"){t.writingList=t.writing_list}if(typeof t.writingList!=="undefined"){a.writingList=[];if(t.writingList instanceof Array){t.writingList.forEach(function(e){var t={};if(!e.userId){return false}t.userId=parseInt(e.userId);t.userName=e.userName;a.writingList.push(t)})}}if(typeof t.manager_list!=="undefined"){t.managerList=t.manager_list}if(typeof t.managerList!=="undefined"){a.managerList=[];if(t.managerList instanceof Array){t.managerList.forEach(function(e){e=parseInt(e);if(e>0){a.managerList.push(e)}})}}if(typeof t.mute_list!=="undefined"){t.muteList=t.mute_list}if(typeof t.muteList!=="undefined"){a.muteList=[];if(t.muteList instanceof Array){t.muteList.forEach(function(e){e=parseInt(e);if(e>0){a.muteList.push(e)}})}}if(typeof t.textareaMessage!=="undefined"){a.textareaMessage=t.textareaMessage.toString()}if(typeof t.title!=="undefined"){t.name=t.title}if(typeof t.name==="string"||typeof t.name==="number"){a.name=t.name.toString()}if(typeof t.owner!=="undefined"){t.ownerId=t.owner}if(typeof t.ownerId==="number"||typeof t.ownerId==="string"){a.ownerId=parseInt(t.ownerId)}if(typeof t.extranet==="boolean"){a.extranet=t.extranet}if(typeof t.avatar==="string"){var r;if(!t.avatar||t.avatar.endsWith("/js/im/images/blank.gif")){r=""}else if(t.avatar.startsWith("http")){r=t.avatar}else{r=i.host+t.avatar}if(r){a.avatar=encodeURI(r)}}if(typeof t.color==="string"){a.color=t.color.toString()}if(typeof t.type==="string"){a.type=t.type.toString()}if(typeof t.entity_type!=="undefined"){t.entityType=t.entity_type}if(typeof t.entityType==="string"){a.entityType=t.entityType.toString()}if(typeof t.entity_id!=="undefined"){t.entityId=t.entity_id}if(typeof t.entityId==="string"||typeof t.entityId==="number"){a.entityId=t.entityId.toString()}if(typeof t.entity_data_1!=="undefined"){t.entityData1=t.entity_data_1}if(typeof t.entityData1==="string"){a.entityData1=t.entityData1.toString()}if(typeof t.entity_data_2!=="undefined"){t.entityData2=t.entity_data_2}if(typeof t.entityData2==="string"){a.entityData2=t.entityData2.toString()}if(typeof t.entity_data_3!=="undefined"){t.entityData3=t.entity_data_3}if(typeof t.entityData3==="string"){a.entityData3=t.entityData3.toString()}if(typeof t.date_create!=="undefined"){t.dateCreate=t.date_create}if(typeof t.dateCreate!=="undefined"){a.dateCreate=n.Utils.date.cast(t.dateCreate)}if(typeof t.dateLastOpen!=="undefined"){a.dateLastOpen=n.Utils.date.cast(t.dateLastOpen)}return a}}]);return i}(i.VuexBuilderModel);var d=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"getName",value:function e(){return"users"}},{key:"getState",value:function e(){return{host:this.getVariable("host",location.protocol+"//"+location.host),collection:{}}}},{key:"getElementState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=t.id,a=i===void 0?0:i,n=t.name,r=n===void 0?this.getVariable("default.name",""):n,o=t.firstName,s=o===void 0?this.getVariable("default.name",""):o,l=t.lastName,d=l===void 0?"":l;return{id:a,name:r,firstName:s,lastName:d,workPosition:"",color:"#048bd0",avatar:"",gender:"M",birthday:false,extranet:false,network:false,bot:false,connector:false,externalAuthId:"default",status:"online",idle:false,lastActivityDate:false,mobileLastDate:false,absent:false,departments:[],phones:{workPhone:"",personalMobile:"",personalPhone:"",innerPhone:""},init:false}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(i){return function(e){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;e=parseInt(e);if(e<=0){if(a){e=0}else{return null}}if(!a&&(!i.collection[e]||!i.collection[e].init)){return null}if(!i.collection[e]){return t.getElementState({id:e})}return i.collection[e]}},getBlank:function e(i){return function(e){return t.getElementState(e)}}}}},{key:"getActions",value:function e(){var t=this;return{set:function e(i,a){if(a instanceof Array){a=a.map(function(e){return Object.assign({},t.getElementState(),t.validate(Object.assign({},e),{host:i.state.host}),{init:true})})}else{var n=[];n.push(Object.assign({},t.getElementState(),t.validate(Object.assign({},a),{host:i.state.host}),{init:true}));a=n}i.commit("set",a)},update:function e(i,a){a.id=parseInt(a.id);if(typeof i.state.collection[a.id]==="undefined"||i.state.collection[a.id].init===false){return true}i.commit("update",{id:a.id,fields:t.validate(Object.assign({},a.fields),{host:i.state.host})});return true},delete:function e(t,i){t.commit("delete",i.id);return true},saveState:function e(t,i){t.commit("saveState",{});return true}}}},{key:"getMutations",value:function e(){var t=this;return{set:function e(i,a){var n=true;var r=false;var o=undefined;try{for(var s=a[Symbol.iterator](),l;!(n=(l=s.next()).done);n=true){var d=l.value;t.initCollection(i,{id:d.id});i.collection[d.id]=d;t.saveState(i)}}catch(e){r=true;o=e}finally{try{if(!n&&s.return!=null){s.return()}}finally{if(r){throw o}}}},update:function e(i,a){t.initCollection(i,a);i.collection[a.id]=Object.assign(i.collection[a.id],a.fields);t.saveState(i)},delete:function e(i,a){delete i.collection[a.id];t.saveState(i)},saveState:function e(i,a){t.saveState(i)}}}},{key:"initCollection",value:function e(i,a){if(typeof i.collection[a.id]!=="undefined"){return true}t.Vue.set(i.collection,a.id,this.getElementState());return true}},{key:"getSaveUserList",value:function e(){if(!this.db){return[]}if(!this.store.getters["messages/getSaveUserList"]){return[]}var t=this.store.getters["messages/getSaveUserList"]();if(!t){return[]}return t}},{key:"getSaveTimeout",value:function e(){return 250}},{key:"saveState",value:function e(t){var a=this;if(!this.isSaveAvailable()){return false}babelHelpers.get(babelHelpers.getPrototypeOf(i.prototype),"saveState",this).call(this,function(){var e=a.getSaveUserList();if(!e){return false}var i={collection:{}};var n={absent:true,idle:true,mobileLastDate:true,lastActivityDate:true};for(var r in e){if(!e.hasOwnProperty(r)){continue}e[r].forEach(function(e){if(!t.collection[e]){return false}i.collection[e]=a.cloneState(t.collection[e],n)})}return i})}},{key:"validate",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a={};i.host=i.host||this.getState().host;if(typeof t.id==="number"||typeof t.id==="string"){a.id=parseInt(t.id)}if(typeof t.first_name!=="undefined"){t.firstName=t.first_name}if(typeof t.last_name!=="undefined"){t.lastName=t.last_name}if(typeof t.name==="string"||typeof t.name==="number"){a.name=t.name.toString();if(typeof t.firstName!=="undefined"&&!t.firstName){var r=t.name.split(" ");if(r.length>1){delete r[r.length-1];t.firstName=r.join(" ").trim()}else{t.firstName=a.name}}if(typeof t.lastName!=="undefined"&&!t.lastName){var o=t.name.split(" ");if(o.length>1){t.lastName=o[o.length-1]}else{t.lastName=""}}}if(typeof t.firstName==="string"||typeof t.name==="number"){a.firstName=t.firstName.toString()}if(typeof t.lastName==="string"||typeof t.name==="number"){a.lastName=t.lastName.toString()}if(typeof t.work_position!=="undefined"){t.workPosition=t.work_position}if(typeof t.workPosition==="string"||typeof t.workPosition==="number"){a.workPosition=t.workPosition.toString()}if(typeof t.color==="string"){a.color=t.color}if(typeof t.avatar==="string"){var s;if(!t.avatar||t.avatar.endsWith("/js/im/images/blank.gif")){s=""}else if(t.avatar.startsWith("http")){s=t.avatar}else{s=i.host+t.avatar}if(s){a.avatar=encodeURI(s)}}if(typeof t.gender!=="undefined"){a.gender=t.gender==="F"?"F":"M"}if(typeof t.birthday==="string"){a.birthday=t.birthday}if(typeof t.extranet==="boolean"){a.extranet=t.extranet}if(typeof t.network==="boolean"){a.network=t.network}if(typeof t.bot==="boolean"){a.bot=t.bot}if(typeof t.connector==="boolean"){a.connector=t.connector}if(typeof t.external_auth_id!=="undefined"){t.externalAuthId=t.external_auth_id}if(typeof t.externalAuthId==="string"&&t.externalAuthId){a.externalAuthId=t.externalAuthId}if(typeof t.status==="string"){a.status=t.status}if(typeof t.idle!=="undefined"){a.idle=n.Utils.date.cast(t.idle,false)}if(typeof t.last_activity_date!=="undefined"){t.lastActivityDate=t.last_activity_date}if(typeof t.lastActivityDate!=="undefined"){a.lastActivityDate=n.Utils.date.cast(t.lastActivityDate,false)}if(typeof t.mobile_last_date!=="undefined"){t.mobileLastDate=t.mobile_last_date}if(typeof t.mobileLastDate!=="undefined"){a.mobileLastDate=n.Utils.date.cast(t.mobileLastDate,false)}if(typeof t.absent!=="undefined"){a.absent=n.Utils.date.cast(t.absent,false)}if(typeof t.departments!=="undefined"){a.departments=[];if(t.departments instanceof Array){t.departments.forEach(function(e){e=parseInt(e);if(e>0){a.departments.push(e)}})}}if(babelHelpers.typeof(t.phones)==="object"&&t.phones){a.phones={};if(typeof t.phones.work_phone!=="undefined"){t.phones.workPhone=t.phones.work_phone}if(typeof t.phones.workPhone==="string"||typeof t.phones.workPhone==="number"){a.phones.workPhone=t.phones.workPhone.toString()}if(typeof t.phones.personal_mobile!=="undefined"){t.phones.personalMobile=t.phones.personal_mobile}if(typeof t.phones.personalMobile==="string"||typeof t.phones.personalMobile==="number"){a.phones.personalMobile=t.phones.personalMobile.toString()}if(typeof t.phones.personal_phone!=="undefined"){t.phones.personalPhone=t.phones.personal_phone}if(typeof t.phones.personalPhone==="string"||typeof t.phones.personalPhone==="number"){a.phones.personalPhone=t.phones.personalPhone.toString()}if(typeof t.phones.inner_phone!=="undefined"){t.phones.innerPhone=t.phones.inner_phone}if(typeof t.phones.innerPhone==="string"||typeof t.phones.innerPhone==="number"){a.phones.innerPhone=t.phones.innerPhone.toString()}}return a}}]);return i}(i.VuexBuilderModel);var c=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"getName",value:function e(){return"files"}},{key:"getState",value:function e(){return{created:0,host:this.getVariable("host",location.protocol+"//"+location.host),collection:{},index:{}}}},{key:"getElementState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=t.id,n=i===void 0?0:i,r=t.chatId,o=r===void 0?0:r,s=t.name,l=s===void 0?this.getVariable("default.name",""):s;return{id:n,chatId:o,name:l,templateId:n,date:new Date,type:"file",extension:"",icon:"empty",size:0,image:false,status:a.FileStatus.done,progress:100,authorId:0,authorName:"",urlPreview:"",urlShow:"",urlDownload:"",init:false}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(t){return function(e,i){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!e||!i){return null}if(!t.index[e]||!t.index[e][i]){return null}if(!a&&!t.index[e][i].init){return null}return t.index[e][i]}},getList:function e(t){return function(e){if(!t.index[e]){return null}return t.index[e]}},getBlank:function e(i){return function(e){return t.getElementState(e)}}}}},{key:"getActions",value:function e(){var t=this;return{add:function e(i,a){var n=t.validate(Object.assign({},a),{host:i.state.host});n.id="temporary"+(new Date).getTime()+i.state.created;n.templateId=n.id;n.init=true;i.commit("add",Object.assign({},t.getElementState(),n));return n.id},set:function e(i,n){if(n instanceof Array){n=n.map(function(e){var a=t.validate(Object.assign({},e),{host:i.state.host});a.templateId=a.id;return Object.assign({},t.getElementState(),a,{init:true})})}else{var r=t.validate(Object.assign({},n),{host:i.state.host});r.templateId=r.id;n=[];n.push(Object.assign({},t.getElementState(),r,{init:true}))}i.commit("set",{insertType:a.MutationType.setAfter,data:n})},setBefore:function e(i,n){if(n instanceof Array){n=n.map(function(e){var a=t.validate(Object.assign({},e),{host:i.state.host});a.templateId=a.id;return Object.assign({},t.getElementState(),a,{init:true})})}else{var r=t.validate(Object.assign({},n),{host:i.state.host});r.templateId=r.id;n=[];n.push(Object.assign({},t.getElementState(),r,{init:true}))}i.commit("set",{actionName:"setBefore",insertType:a.MutationType.setBefore,data:n})},update:function e(i,a){var n=t.validate(Object.assign({},a.fields),{host:i.state.host});i.commit("initCollection",{chatId:a.chatId});var r=i.state.collection[a.chatId].findIndex(function(e){return e.id===a.id});if(r<0){return false}i.commit("update",{id:a.id,chatId:a.chatId,index:r,fields:n});if(a.fields.blink){setTimeout(function(){i.commit("update",{id:a.id,chatId:a.chatId,fields:{blink:false}})},1e3)}return true},delete:function e(t,i){t.commit("delete",{id:i.id,chatId:i.chatId});return true},saveState:function e(t,i){t.commit("saveState",{});return true}}}},{key:"getMutations",value:function e(){var t=this;return{initCollection:function e(i,a){t.initCollection(i,a)},add:function e(i,a){t.initCollection(i,a);i.collection[a.chatId].push(a);i.index[a.chatId][a.id]=a;i.created+=1;t.saveState(i)},set:function e(i,n){var r=true;var o=false;var s=undefined;try{var l=function e(){var r=c.value;t.initCollection(i,{chatId:r.chatId});var o=i.collection[r.chatId].findIndex(function(e){return e.id===r.id});if(o>-1){delete r.templateId;i.collection[r.chatId][o]=Object.assign(i.collection[r.chatId][o],r)}else if(n.insertType===a.MutationType.setBefore){i.collection[r.chatId].unshift(r)}else{i.collection[r.chatId].push(r)}i.index[r.chatId][r.id]=r;t.saveState(i)};for(var d=n.data[Symbol.iterator](),c;!(r=(c=d.next()).done);r=true){l()}}catch(e){o=true;s=e}finally{try{if(!r&&d.return!=null){d.return()}}finally{if(o){throw s}}}},update:function e(i,a){t.initCollection(i,a);var n=-1;if(typeof a.index!=="undefined"&&i.collection[a.chatId][a.index]){n=a.index}else{n=i.collection[a.chatId].findIndex(function(e){return e.id===a.id})}if(n>=0){delete a.fields.templateId;var r=Object.assign(i.collection[a.chatId][n],a.fields);i.collection[a.chatId][n]=r;i.index[a.chatId][r.id]=r;t.saveState(i)}},delete:function e(i,a){t.initCollection(i,a);i.collection[a.chatId]=i.collection[a.chatId].filter(function(e){return e.id!==a.id});delete i.index[a.chatId][a.id];t.saveState(i)},saveState:function e(i,a){t.saveState(i)}}}},{key:"initCollection",value:function e(i,a){if(typeof i.collection[a.chatId]!=="undefined"){return true}t.Vue.set(i.collection,a.chatId,[]);t.Vue.set(i.index,a.chatId,{});return true}},{key:"getLoadedState",value:function e(t){if(!t||babelHelpers.typeof(t)!=="object"){return t}if(babelHelpers.typeof(t.collection)!=="object"){return t}t.index={};var i=function e(i){if(!t.collection.hasOwnProperty(i)){return"continue"}t.index[i]={};t.collection[i].filter(function(e){return e!=null}).forEach(function(e){t.index[i][e.id]=e})};for(var a in t.collection){var n=i(a);if(n==="continue")continue}return t}},{key:"getSaveFileList",value:function e(){if(!this.db){return[]}if(!this.store.getters["messages/getSaveFileList"]){return[]}var t=this.store.getters["messages/getSaveFileList"]();if(!t){return[]}return t}},{key:"getSaveTimeout",value:function e(){return 250}},{key:"saveState",value:function e(t){var a=this;if(!this.isSaveAvailable()){return false}babelHelpers.get(babelHelpers.getPrototypeOf(i.prototype),"saveState",this).call(this,function(){var e=a.getSaveFileList();if(!e){return false}var i={collection:{}};var n=function a(n){if(!e.hasOwnProperty(n)){return"continue"}e[n].forEach(function(e){if(!t.index[n]){return false}if(!t.index[n][e]){return false}if(!i.collection[n]){i.collection[n]=[]}i.collection[n].push(t.index[n][e])})};for(var r in e){var o=n(r);if(o==="continue")continue}return i})}},{key:"validate",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var o={};r.host=r.host||this.getState().host;if(typeof t.id==="number"){o.id=t.id}else if(typeof t.id==="string"){if(t.id.startsWith("temporary")){o.id=t.id}else{o.id=parseInt(t.id)}}if(typeof t.templateId==="number"){o.templateId=t.templateId}else if(typeof t.templateId==="string"){if(t.templateId.startsWith("temporary")){o.templateId=t.templateId}else{o.templateId=parseInt(t.templateId)}}if(typeof t.chatId==="number"||typeof t.chatId==="string"){o.chatId=parseInt(t.chatId)}if(typeof t.date!=="undefined"){o.date=n.Utils.date.cast(t.date)}if(typeof t.type==="string"){o.type=t.type}if(typeof t.extension==="string"){o.extension=t.extension.toString();if(o.type==="image"){o.icon="img"}else if(o.type==="video"){o.icon="mov"}else{o.icon=i.getIconType(o.extension)}}if(typeof t.name==="string"||typeof t.name==="number"){o.name=t.name.toString()}if(typeof t.size==="number"||typeof t.size==="string"){o.size=parseInt(t.size)}if(typeof t.image==="boolean"){o.image=false}else if(babelHelpers.typeof(t.image)==="object"&&t.image){o.image={width:0,height:0};if(typeof t.image.width==="string"||typeof t.image.width==="number"){o.image.width=parseInt(t.image.width)}if(typeof t.image.height==="string"||typeof t.image.height==="number"){o.image.height=parseInt(t.image.height)}if(o.image.width<=0||o.image.height<=0){o.image=false}}if(typeof t.status==="string"&&typeof a.FileStatus[t.status]!=="undefined"){o.status=t.status}if(typeof t.progress==="number"||typeof t.progress==="string"){o.progress=parseInt(t.progress)}if(typeof t.authorId==="number"||typeof t.authorId==="string"){o.authorId=parseInt(t.authorId)}if(typeof t.authorName==="string"||typeof t.authorName==="number"){o.authorName=t.authorName.toString()}if(typeof t.urlPreview==="string"){if(!t.urlPreview||t.urlPreview.startsWith("http")||t.urlPreview.startsWith("bx")||t.urlPreview.startsWith("file")){o.urlPreview=t.urlPreview}else{o.urlPreview=r.host+t.urlPreview}}if(typeof t.urlDownload==="string"){if(!t.urlDownload||t.urlDownload.startsWith("http")||t.urlDownload.startsWith("bx")||t.urlPreview.startsWith("file")){o.urlDownload=t.urlDownload}else{o.urlDownload=r.host+t.urlDownload}}if(typeof t.urlShow==="string"){if(!t.urlShow||t.urlShow.startsWith("http")||t.urlShow.startsWith("bx")||t.urlShow.startsWith("file")){o.urlShow=t.urlShow}else{o.urlShow=r.host+t.urlShow}}return o}}],[{key:"getType",value:function e(t){t=t.toString().toLowerCase().split(".").splice(-1)[0];switch(t){case"png":case"jpe":case"jpg":case"jpeg":case"gif":case"heic":case"bmp":return a.FileType.image;case"mp4":case"mkv":case"webm":case"mpeg":case"hevc":case"avi":case"3gp":case"flv":case"m4v":case"ogg":case"wmv":case"mov":return a.FileType.video;case"mp3":return a.FileType.audio}return a.FileType.file}},{key:"getIconType",value:function e(t){var i="empty";switch(t.toString()){case"png":case"jpe":case"jpg":case"jpeg":case"gif":case"heic":case"bmp":i="img";break;case"mp4":case"mkv":case"webm":case"mpeg":case"hevc":case"avi":case"3gp":case"flv":case"m4v":case"ogg":case"wmv":case"mov":i="mov";break;case"txt":i="txt";break;case"doc":case"docx":i="doc";break;case"xls":case"xlsx":i="xls";break;case"php":i="php";break;case"pdf":i="pdf";break;case"ppt":case"pptx":i="ppt";break;case"rar":i="rar";break;case"zip":case"7z":case"tar":case"gz":case"gzip":i="zip";break;case"set":i="set";break;case"conf":case"ini":case"plist":i="set";break}return i}}]);return i}(i.VuexBuilderModel);e.ApplicationModel=r;e.MessagesModel=s;e.DialoguesModel=l;e.UsersModel=d;e.FilesModel=c})(this.BX.Messenger.Model=this.BX.Messenger.Model||{},BX,BX,BX.Messenger.Const,BX.Messenger);
 



// file: /bitrix/js/ui/vue/components/audioplayer/dist/audioplayer.bundle.js
(function(t,e,i){"use strict";var r=Object.freeze({play:"play",pause:"pause",stop:"stop",none:"none"});i.Vue.component("bx-audioplayer",{props:{id:{default:0},src:{default:""},autoPlayNext:{default:true},background:{default:"light"}},data:function t(){return{isDark:false,preload:"none",loaded:false,loading:false,playAfterLoad:false,state:r.none,progress:0,progressInPixel:0,seek:0,timeCurrent:0,timeTotal:0}},created:function t(){this.preloadRequestSent=false;this.registeredId=0;this.registerPlayer(this.id);this.$root.$on("ui:audioplayer:play",this.onPlay);i.Vue.event.$on("ui:audioplayer:play",this.onPlay);this.$root.$on("ui:audioplayer:stop",this.onStop);i.Vue.event.$on("ui:audioplayer:stop",this.onStop);this.$root.$on("ui:audioplayer:pause",this.onPause);i.Vue.event.$on("ui:audioplayer:pause",this.onPause);this.$root.$on("ui:audioplayer:preload",this.onPreload);this.isDark=this.background==="dark"},mounted:function t(){this.getObserver().observe(this.$refs.body)},beforeDestroy:function t(){this.unregisterPlayer();this.$root.$off("ui:audioplayer:play",this.onPlay);i.Vue.event.$off("ui:audioplayer:play",this.onPlay);this.$root.$off("ui:audioplayer:stop",this.onStop);i.Vue.event.$off("ui:audioplayer:stop",this.onStop);this.$root.$off("ui:audioplayer:pause",this.onPause);i.Vue.event.$off("ui:audioplayer:pause",this.onPause);this.$root.$off("ui:audioplayer:preload",this.onPreload);this.getObserver().unobserve(this.$refs.body)},watch:{id:function t(e){this.registerPlayer(e)},progress:function t(e){if(e>70){this.preloadNext()}}},methods:{loadFile:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.loaded){return true}if(this.loading&&!e){return true}this.preload="auto";if(e){this.loading=true;if(this.source()){this.source().play()}}return true},clickToButton:function t(){if(!this.src){return false}if(this.state===r.play){this.pause()}else{this.play()}},play:function t(){if(!this.loaded){this.loadFile(true);return false}this.source().play()},pause:function t(){this.source().pause()},stop:function t(){this.state=r.stop;this.source().pause()},setPosition:function t(e){if(!this.loaded){this.loadFile(true);return false}var i=this.$refs.track.offsetWidth/100;this.setProgress(this.seek/i,this.seek);if(this.state!==r.play){this.state=r.pause}this.play();this.source().currentTime=this.timeTotal/100*this.progress},seeking:function t(e){if(!this.loaded){return false}this.seek=e.offsetX>0?e.offsetX:0;return true},setProgress:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;this.progress=e;this.progressInPixel=i>0?i:Math.round(this.$refs.track.offsetWidth/100*e)},formatTime:function t(e){e=Math.floor(e);var i=Math.floor(e/60/60);if(i>0){e-=i*60*60}var r=Math.floor(e/60);if(r>0){e-=r*60}return(i>0?i+":":"")+(i>0?r.toString().padStart(2,"0")+":":r+":")+e.toString().padStart(2,"0")},registerPlayer:function t(e){if(e<=0){return false}if(typeof this.$root.$uiAudioPlayerId==="undefined"){this.$root.$uiAudioPlayerId=[]}this.unregisterPlayer();this.$root.$uiAudioPlayerId=babelHelpers.toConsumableArray(new Set([].concat(babelHelpers.toConsumableArray(this.$root.$uiAudioPlayerId),[e]))).sort(function(t,e){if(t>e)return 1;else if(t<e)return-1;else return 0});this.registeredId=e;return true},unregisterPlayer:function t(){var e=this;if(!this.registeredId){return true}this.$root.$uiAudioPlayerId=this.$root.$uiAudioPlayerId.filter(function(t){return t!==e.registeredId});this.registeredId=0;return true},playNext:function t(){var e=this;if(!this.registeredId||!this.autoPlayNext){return false}var i=this.$root.$uiAudioPlayerId.filter(function(t){return t>e.registeredId}).slice(0,1)[0];if(i){this.$root.$emit("ui:audioplayer:play",{id:i,start:true})}return true},preloadNext:function t(){var e=this;if(this.preloadRequestSent){return true}if(!this.registeredId||!this.autoPlayNext){return false}this.preloadRequestSent=true;var i=this.$root.$uiAudioPlayerId.filter(function(t){return t>e.registeredId}).slice(0,1)[0];if(i){this.$root.$emit("ui:audioplayer:preload",{id:i})}return true},onPlay:function t(e){if(e.id!==this.id){return false}if(e.start){this.stop()}this.play()},onStop:function t(e){if(e.initiator===this.id){return false}this.stop()},onPause:function t(e){if(e.initiator===this.id){return false}this.pause()},onPreload:function t(e){if(e.id!==this.id){return false}this.loadFile()},source:function t(){return this.$refs.source},audioEventRouter:function t(e,o){if(e==="durationchange"||e==="loadeddata"||e==="loadedmetadata"){this.timeTotal=this.source().duration}else if(e==="abort"||e==="error"){console.error("BxAudioPlayer: load failed",this.id,o);this.loading=false;this.state=r.none;this.timeTotal=0;this.preload="none"}else if(e==="canplaythrough"){this.loading=false;this.loaded=true}else if(e==="timeupdate"){this.timeCurrent=this.source().currentTime;this.setProgress(Math.round(100/this.timeTotal*this.timeCurrent));if(this.timeCurrent>=this.timeTotal){this.playNext()}}else if(e==="pause"){if(this.state!==r.stop){this.state=r.pause}}else if(e==="play"){this.state=r.play;if(this.state===r.stop){this.progress=0;this.timeCurrent=0}if(this.id>0){this.$root.$emit("ui:audioplayer:pause",{initiator:this.id});i.Vue.event.$emit("ui:audioplayer:pause",{initiator:this.id})}}},getObserver:function t(){var e=this;if(this.observer){return this.observer}this.observer=new IntersectionObserver(function(t,i){t.forEach(function(t){if(t.isIntersecting){if(e.preload==="none"){e.preload="metadata";e.observer.unobserve(t.target)}}})},{threshold:[0,1]});return this.observer}},computed:{State:function t(){return r},seekPosition:function t(){if(!this.loaded&&!this.seek||this.isMobile){return"display: none"}return"left: ".concat(this.seek,"px;")},progressPosition:function t(){if(!this.loaded||this.state===r.none){return"width: 100%;"}return"width: ".concat(this.progressInPixel,"px;")},labelTime:function t(){if(!this.loaded&&!this.timeTotal){return"--:--"}var e;if(this.state===r.play){e=this.timeTotal-this.timeCurrent}else{e=this.timeTotal}return this.formatTime(e)},isMobile:function t(){var e=navigator.userAgent.toLowerCase();return e.includes("android")||e.includes("iphone")||e.includes("ipad")||e.includes("bitrixmobile")}},template:'\n\t\t<div :class="[\'ui-vue-audioplayer-container\', {\n\t\t\t\t\'ui-vue-audioplayer-container-dark\': isDark,\n\t\t\t\t\'ui-vue-audioplayer-container-mobile\': isMobile,\n\t\t\t}]" ref="body">\n\t\t\t<div class="ui-vue-audioplayer-controls-container">\n\t\t\t\t<button :class="[\'ui-vue-audioplayer-control\', {\n\t\t\t\t\t\'ui-vue-audioplayer-control-loader\': loading,\n\t\t\t\t\t\'ui-vue-audioplayer-control-play\': !loading && state !== State.play,\n\t\t\t\t\t\'ui-vue-audioplayer-control-pause\': !loading && state === State.play,\n\t\t\t\t}]" @click="clickToButton"></button>\n\t\t\t</div>\n\t\t\t<div class="ui-vue-audioplayer-timeline-container">\n\t\t\t\t<div class="ui-vue-audioplayer-track-container" @click="setPosition" ref="track">\n\t\t\t\t\t<div class="ui-vue-audioplayer-track-mask"></div>\n\t\t\t\t\t<div class="ui-vue-audioplayer-track" :style="progressPosition"></div>\n\t\t\t\t\t<div class="ui-vue-audioplayer-track-seek" :style="seekPosition"></div>\n\t\t\t\t\t<div class="ui-vue-audioplayer-track-event" @mousemove="seeking"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-vue-audioplayer-timers-container">\n\t\t\t\t\t<div class="ui-vue-audioplayer-time-current">{{labelTime}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<audio v-if="src" :src="src" class="ui-vue-audioplayer-source" ref="source" :preload="preload"\n\t\t\t\t@abort="audioEventRouter(\'abort\', $event)"\n\t\t\t\t@error="audioEventRouter(\'error\', $event)"\n\t\t\t\t@suspend="audioEventRouter(\'suspend\', $event)"\n\t\t\t\t@canplay="audioEventRouter(\'canplay\', $event)"\n\t\t\t\t@canplaythrough="audioEventRouter(\'canplaythrough\', $event)"\n\t\t\t\t@durationchange="audioEventRouter(\'durationchange\', $event)"\n\t\t\t\t@loadeddata="audioEventRouter(\'loadeddata\', $event)"\n\t\t\t\t@loadedmetadata="audioEventRouter(\'loadedmetadata\', $event)"\n\t\t\t\t@timeupdate="audioEventRouter(\'timeupdate\', $event)"\n\t\t\t\t@play="audioEventRouter(\'play\', $event)"\n\t\t\t\t@playing="audioEventRouter(\'playing\', $event)"\n\t\t\t\t@pause="audioEventRouter(\'pause\', $event)"\n\t\t\t></audio>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX);
 



// file: /bitrix/js/ui/vue/components/socialvideo/dist/socialvideo.bundle.js
(function(t,e,i,s){"use strict";var o=Object.freeze({play:"play",pause:"pause",stop:"stop",none:"none"});s.Vue.component("bx-socialvideo",{props:{id:{default:0},src:{default:""},preview:{default:""},autoplay:{default:true},containerClass:{default:null},containerStyle:{default:null},elementStyle:{default:null}},data:function t(){return{preload:"none",previewLoaded:false,loaded:false,loading:false,playAfterLoad:false,enterFullscreen:false,playBeforeMute:2,state:o.none,progress:0,timeCurrent:0,timeTotal:0,muteFlag:true}},created:function t(){this.registeredId=0;if(!this.preview){this.previewLoaded=true;this.preload="metadata"}this.registerPlayer(this.id);this.$root.$on("ui:socialvideo:play",this.onPlay);s.Vue.event.$on("ui:socialvideo:play",this.onPlay);this.$root.$on("ui:socialvideo:stop",this.onStop);s.Vue.event.$on("ui:socialvideo:stop",this.onStop);this.$root.$on("ui:socialvideo:pause",this.onPause);s.Vue.event.$on("ui:socialvideo:pause",this.onPause)},mounted:function t(){this.getObserver().observe(this.$refs.body)},beforeDestroy:function t(){this.unregisterPlayer();this.$root.$off("ui:socialvideo:play",this.onPlay);s.Vue.event.$off("ui:socialvideo:play",this.onPlay);this.$root.$off("ui:socialvideo:stop",this.onStop);s.Vue.event.$off("ui:socialvideo:stop",this.onStop);this.$root.$off("ui:socialvideo:pause",this.onPause);s.Vue.event.$off("ui:socialvideo:pause",this.onPause);this.getObserver().unobserve(this.$refs.body)},watch:{id:function t(e){this.registerPlayer(e)}},methods:{loadFile:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.loaded){return true}if(this.loading){return true}this.preload="auto";this.loading=true;this.playAfterLoad=e;return true},clickToButton:function t(e){if(!this.src){return false}if(this.state===o.play){this.getObserver().unobserve(this.$refs.body);this.pause()}else{this.play()}e.stopPropagation()},clickToMute:function t(){if(!this.src){return false}if(!this.muteFlag){this.mute()}else{this.unmute()}event.stopPropagation()},click:function t(e){if(this.autoPlayDisabled){this.play();e.stopPropagation();return false}if(this.isMobile){if(this.source().webkitEnterFullscreen){this.unmute();this.enterFullscreen=true;this.source().webkitEnterFullscreen()}else if(this.source().requestFullscreen){this.unmute();this.enterFullscreen=true;this.source().requestFullscreen()}else{this.$emit("click",e)}}else{this.$emit("click",e)}e.stopPropagation()},play:function t(e){if(!this.loaded){this.loadFile(true);return false}if(!this.source()){return false}this.source().play()},pause:function t(){if(!this.source()){return false}this.playAfterLoad=false;this.source().pause()},stop:function t(){if(!this.source()){return false}this.state=o.stop;this.source().pause()},mute:function t(){if(!this.source()){return false}this.muteFlag=true;this.playBeforeMute=2;this.source().muted=true},unmute:function t(){if(!this.source()){return false}this.muteFlag=false;this.source().muted=false},setProgress:function t(e){this.progress=e},formatTime:function t(e){e=Math.floor(e);var i=Math.floor(e/60/60);if(i>0){e-=i*60*60}var s=Math.floor(e/60);if(s>0){e-=s*60}return(i>0?i+":":"")+(i>0?s.toString().padStart(2,"0")+":":s+":")+e.toString().padStart(2,"0")},registerPlayer:function t(e){if(e<=0){return false}if(typeof this.$root.$uiSocialVideoId==="undefined"){this.$root.$uiSocialVideoId=[]}this.unregisterPlayer();this.$root.$uiSocialVideoId=babelHelpers.toConsumableArray(new Set([].concat(babelHelpers.toConsumableArray(this.$root.$uiSocialVideoId),[e]))).sort(function(t,e){if(t>e)return 1;else if(t<e)return-1;else return 0});this.registeredId=e;return true},unregisterPlayer:function t(){var e=this;if(!this.registeredId){return true}this.$root.$uiSocialVideoId=this.$root.$uiSocialVideoId.filter(function(t){return t!==e.registeredId});this.registeredId=0;return true},onPlay:function t(e){if(e.id!==this.id){return false}if(e.start){this.stop()}this.play()},onStop:function t(e){if(e.initiator===this.id){return false}this.stop()},onPause:function t(e){if(e.initiator===this.id){return false}this.pause()},source:function t(){return this.$refs.source},videoEventRouter:function t(e,i){if(e==="durationchange"||e==="loadeddata"){if(!this.source()){return false}this.timeTotal=this.source().duration}else if(e==="loadedmetadata"){if(!this.source()){return false}this.timeTotal=this.source().duration;this.loaded=true;if(this.playAfterLoad){this.play()}}else if(e==="abort"||e==="error"){console.error("BxSocialVideo: load failed",this.id,i);this.loading=false;this.state=o.none;this.timeTotal=0;this.preload="none"}else if(e==="canplaythrough"){this.loading=false;this.loaded=true;if(this.playAfterLoad){this.play()}}else if(e==="volumechange"){if(!this.source()){return false}if(this.source().muted){this.mute()}else{this.unmute()}}else if(e==="timeupdate"){if(!this.source()){return false}this.timeCurrent=this.source().currentTime;if(!this.muteFlag&&!this.enterFullscreen&&this.timeCurrent===0){if(this.playBeforeMute<=0){this.mute()}this.playBeforeMute-=1}this.setProgress(Math.round(100/this.timeTotal*this.timeCurrent))}else if(e==="pause"){if(this.state!==o.stop){this.state=o.pause}if(this.enterFullscreen){this.enterFullscreen=false;this.mute();this.play()}}else if(e==="play"){this.state=o.play;if(this.state===o.stop){this.progress=0;this.timeCurrent=0}if(this.enterFullscreen){this.enterFullscreen=false}}},getObserver:function t(){var e=this;if(this.observer){return this.observer}this.observer=new IntersectionObserver(function(t,i){if(e.autoPlayDisabled){return false}t.forEach(function(t){if(t.isIntersecting){e.play()}else{e.pause()}})},{threshold:[0,1]});return this.observer},lazyLoadCallback:function t(e){this.previewLoaded=e.state==="success"}},computed:{State:function t(){return o},autoPlayDisabled:function t(){return!this.autoplay&&this.state===o.none},showStartButton:function t(){return this.autoPlayDisabled&&this.previewLoaded},showInterface:function t(){return this.previewLoaded&&!this.showStartButton},labelTime:function t(){if(!this.loaded&&!this.timeTotal){return"--:--"}var e;if(this.state===o.play){e=this.timeTotal-this.timeCurrent}else{e=this.timeTotal}return this.formatTime(e)},isMobile:function t(){var e=navigator.userAgent.toLowerCase();return e.includes("android")||e.includes("iphone")||e.includes("ipad")||e.includes("bitrixmobile")}},template:'\n\t\t<div :class="[\'ui-vue-socialvideo\', containerClass, {\n\t\t\t\t\'ui-vue-socialvideo-mobile\': isMobile,\n\t\t\t}]" :style="containerStyle" @click="click">\n\t\t\t<transition name="ui-vue-socialvideo-animation-fade">\n\t\t\t\t<div v-if="showStartButton" class="ui-vue-socialvideo-button-start">\n\t\t\t\t\t<span class="ui-vue-socialvideo-button-start-icon"></span>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t\t<transition name="ui-vue-socialvideo-animation-fade">\n\t\t\t\t<div v-if="showInterface" class="ui-vue-socialvideo-overlay-container">\n\t\t\t\t\t<div class="ui-vue-socialvideo-controls-container" @click="clickToButton">\n\t\t\t\t\t\t<button :class="[\'ui-vue-socialvideo-control\', {\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-control-loader\': loading,\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-control-play\': !loading && state !== State.play,\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-control-pause\': !loading && state === State.play,\n\t\t\t\t\t\t}]"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-vue-socialvideo-info-container" @click="clickToMute">\n\t\t\t\t\t\t<span class="ui-vue-socialvideo-time-current">{{labelTime}}</span>\n\t\t\t\t\t\t<span :class="[\'ui-vue-socialvideo-sound\', {\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-sound-on\': state !== State.none && !muteFlag,\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-sound-off\': state !== State.none && muteFlag\n\t\t\t\t\t\t}]"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t\t<div v-if="!preview" class="ui-vue-socialvideo-background" :style="{position: (src? \'absolute\': \'relative\')}"></div>\n\t\t\t<div class="ui-vue-socialvideo-container" ref="body">\n\t\t\t\t<img \n\t\t\t\t\tv-bx-lazyload="{callback: lazyLoadCallback}"\n\t\t\t\t\tdata-lazyload-dont-hide\n\t\t\t\t\tv-if="preview"\n\t\t\t\t\tclass="ui-vue-socialvideo-image-source"\n\t\t\t\t\t:data-lazyload-src="preview"\n\t\t\t\t\t:style="{position: (src? \'absolute\': \'relative\'), ...elementStyle}"\n\t\t\t\t/>\n\t\t\t\t<video \n\t\t\t\t\tv-if="src" :src="src" \n\t\t\t\t\tclass="ui-vue-socialvideo-source" \n\t\t\t\t\tref="source"\n\t\t\t\t\t:preload="preload" \n\t\t\t\t\tplaysinline\n\t\t\t\t\tloop \n\t\t\t\t\tmuted\n\t\t\t\t\t:style="{opacity: (loaded? 1: 0), ...elementStyle}"\n\t\t\t\t\t@abort="videoEventRouter(\'abort\', $event)"\n\t\t\t\t\t@error="videoEventRouter(\'error\', $event)"\n\t\t\t\t\t@suspend="videoEventRouter(\'suspend\', $event)"\n\t\t\t\t\t@canplay="videoEventRouter(\'canplay\', $event)"\n\t\t\t\t\t@canplaythrough="videoEventRouter(\'canplaythrough\', $event)"\n\t\t\t\t\t@durationchange="videoEventRouter(\'durationchange\', $event)"\n\t\t\t\t\t@loadeddata="videoEventRouter(\'loadeddata\', $event)"\n\t\t\t\t\t@loadedmetadata="videoEventRouter(\'loadedmetadata\', $event)"\n\t\t\t\t\t@volumechange="videoEventRouter(\'volumechange\', $event)"\n\t\t\t\t\t@timeupdate="videoEventRouter(\'timeupdate\', $event)"\n\t\t\t\t\t@play="videoEventRouter(\'play\', $event)"\n\t\t\t\t\t@playing="videoEventRouter(\'playing\', $event)"\n\t\t\t\t\t@pause="videoEventRouter(\'pause\', $event)"\n\t\t\t\t></video>\n\t\t\t</div>\n\t\t</div>\t\n\t'})})(this.window=this.window||{},window,BX,BX);
 



// file: /bitrix/js/im/component/element/media/dist/media.bundle.js
(function(e,t,i,s,l,r,n,o,a,f,h){"use strict";h.Vue.component("bx-messenger-element-file",{mounted:function e(){this.createProgressbar()},beforeDestroy:function e(){this.removeProgressbar()},props:{userId:{default:0},messageType:{default:r.MessageType.self},file:{type:Object,default:s.FilesModel.create().getElementState}},methods:{download:function e(t){if(t.progress!==100){return false}if(t.type===r.FileType.image&&t.urlShow){if(l.Utils.platform.isBitrixMobile()){BXMobileApp.UI.Photo.show({photos:this.files.collection[this.application.dialog.chatId].filter(function(e){return e.type==="image"}).map(function(e){return{url:e.urlShow.replace("bxhttp","http")}}).reverse(),default_photo:t.urlShow.replace("bxhttp","http")})}else{window.open(t.urlShow,"_blank")}}else if(t.type===r.FileType.video&&t.urlShow){if(l.Utils.platform.isBitrixMobile()){app.openDocument({url:t.urlShow,name:t.name})}else{window.open(t.urlShow,"_blank")}}else if(t.urlDownload){if(l.Utils.platform.isBitrixMobile()){app.openDocument({url:t.urlDownload,name:t.name})}else{window.open(t.urlDownload,"_blank")}}else{if(l.Utils.platform.isBitrixMobile()){app.openDocument({url:t.urlShow,name:t.name})}else{window.open(t.urlShow,"_blank")}}},createProgressbar:function e(){var i=this;if(this.uploader){return true}if(this.file.progress===100){return false}var s=undefined;if(this.file.progress<0||this.file.type!==r.FileType.image&&this.file.type!==r.FileType.video){s=false}this.uploader=new t.Uploader({container:this.$refs.container,blurElement:s,direction:this.$refs.container.offsetHeight>54?t.Uploader.direction.vertical:t.Uploader.direction.horizontal,icon:this.file.progress<0?t.Uploader.icon.cloud:t.Uploader.icon.cancel,sizes:{circle:this.$refs.container.offsetHeight>54?54:38,progress:this.$refs.container.offsetHeight>54?4:8},labels:{loading:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_LOADING"],completed:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_COMPLETED"],canceled:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_CANCELED"],cancelTitle:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_CANCEL_TITLE"],megabyte:this.localize["IM_MESSENGER_ELEMENT_FILE_SIZE_MB"]},cancelCallback:this.file.progress<0?null:function(e){i.$emit("uploadCancel",{file:i.file,event:e})},destroyCallback:function e(){if(i.uploader){i.uploader=null}}});this.uploader.start();if(this.file.size&&this.file.size/1024/1024<=2||this.$refs.container.offsetHeight<=54&&this.$refs.container.offsetWidth<240){this.uploader.setProgressTitleVisibility(false)}this.updateProgressbar();return true},updateProgressbar:function e(){if(!this.uploader){var i=this.createProgressbar();if(!i){return false}}if(this.file.status===r.FileStatus.error){this.uploader.setProgress(0);this.uploader.setCancelDisable(false);this.uploader.setIcon(t.Uploader.icon.error);this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_ERROR"])}else if(this.file.status===r.FileStatus.wait){this.uploader.setProgress(this.file.progress>5?this.file.progress:5);this.uploader.setCancelDisable(true);this.uploader.setIcon(t.Uploader.icon.cloud);this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_SAVING"])}else if(this.file.progress===100){this.uploader.setProgress(100)}else if(this.file.progress===-1){this.uploader.setProgress(10);this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_WAITING"])}else{if(this.file.progress===0){this.uploader.setIcon(t.Uploader.icon.cancel)}var s=this.file.progress>5?this.file.progress:5;this.uploader.setProgress(s);if(this.file.size/1024/1024<=2){this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_LOADING"])}else{this.uploader.setByteSent(this.file.size/100*this.file.progress,this.file.size)}}},removeProgressbar:function e(){if(!this.uploader){return true}this.uploader.destroy(false);return true}},computed:babelHelpers.objectSpread({FileStatus:function e(){return r.FileStatus},localize:function e(){return h.Vue.getFilteredPhrases("IM_MESSENGER_ELEMENT_FILE_",this.$root.$bitrixMessages)},fileName:function e(){var t=70;if(this.file.name.length<t){return this.file.name}var i=10;var s=this.file.name.substring(this.file.name.length-1-(this.file.extension.length+1+i));var l=this.file.name.substring(0,t-s.length-3);return l.trim()+"..."+s.trim()},fileSize:function e(){var t=this.file.size;if(t<=0){return"&nbsp;"}var i=["BYTE","KB","MB","GB","TB"];var s=0;while(t>=1024&&s<4){t/=1024;s++}return Math.round(t)+" "+this.localize["IM_MESSENGER_ELEMENT_FILE_SIZE_"+i[s]]},uploadProgress:function e(){return this.file.status+" "+this.file.progress}},i.Vuex.mapState({application:function e(t){return t.application},files:function e(t){return t.files}})),watch:{uploadProgress:function e(){this.updateProgressbar()}},template:'\n\t\t<div class="bx-im-element-file" @click="download(file, $event)" ref="container">\n\t\t\t<div class="bx-im-element-file-icon">\n\t\t\t\t<div :class="[\'ui-icon\', \'ui-icon-file-\'+file.icon]"><i></i></div>\n\t\t\t</div>\n\t\t\t<div class="bx-im-element-file-block">\n\t\t\t\t<div class="bx-im-element-file-name" :title="file.name">\n\t\t\t\t\t{{fileName}}\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-element-file-size" v-html="fileSize"></div>\n\t\t\t</div>\n\t\t</div>\n\t'});h.Vue.cloneComponent("bx-messenger-element-file-audio","bx-messenger-element-file",{computed:{background:function e(){return this.messageType===r.MessageType.self?"dark":"light"}},template:'\n\t\t<div :class="[\'bx-im-element-file-audio\', \'bx-im-element-file-audio-\'+messageType]" ref="container">\n\t\t\t<bx-audioplayer :id="file.id" :src="file.urlShow" :background="background"/>\n\t\t</div>\t\n\t'});h.Vue.cloneComponent("bx-messenger-element-file-image","bx-messenger-element-file",{methods:{getImageSize:function e(t,i,s){var l;if(t>s){l=s/t}else{l=1}return{width:t*l,height:i*l}}},computed:{localize:function e(){return h.Vue.getFilteredPhrases("IM_MESSENGER_ELEMENT_FILE_",this.$root.$bitrixMessages)},styleFileSizes:function e(){var t=this.getImageSize(this.file.image.width,this.file.image.height,280);return{width:t.width+"px",height:t.height+"px",backgroundSize:t.width<100||t.height<100?"contain":"initial"}},styleBoxSizes:function e(){if(parseInt(this.styleFileSizes.height)<=280){return{}}return{height:"280px"}},fileSource:function e(){return this.file.urlPreview}},template:'\n\t\t<div class="bx-im-element-file-image" @click="download(file, $event)" :style="styleBoxSizes" ref="container">\n\t\t\t<img v-bx-lazyload\n\t\t\t\tclass="bx-im-element-file-image-source"\n\t\t\t\t:data-lazyload-src="fileSource"\n\t\t\t\t:title="localize.IM_MESSENGER_ELEMENT_FILE_SHOW_TITLE.replace(\'#NAME#\', file.name).replace(\'#SIZE#\', fileSize)"\n\t\t\t\t:style="styleFileSizes"\n\t\t\t/>\n\t\t</div>\n\t'});h.Vue.cloneComponent("bx-messenger-element-file-video","bx-messenger-element-file",{methods:{getImageSize:function e(t,i,s){var l;if(t>s){l=s/t}else{l=1}return{width:t*l,height:i*l}}},computed:{localize:function e(){return h.Vue.getFilteredPhrases("IM_MESSENGER_ELEMENT_FILE_",this.$root.$bitrixMessages)},styleBoxSizes:function e(){if(parseInt(this.styleVideoSizes.height)<=280){return{}}return{height:"280px"}},styleVideoSizes:function e(){if(!this.file.image){return{}}var t=this.getImageSize(this.file.image.width,this.file.image.height,280);return{width:t.width+"px",height:t.height+"px",backgroundSize:t.width<100||t.height<100?"contain":"initial"}},autoplay:function e(){return this.file.size<5e6&&this.application.options.autoplayVideo}},template:'\n\t\t<div class="bx-im-element-file-video" :style="styleBoxSizes" ref="container">\n\t\t\t<bx-socialvideo \n\t\t\t\t:id="file.id" \n\t\t\t\t:src="file.urlShow" \n\t\t\t\t:preview="file.urlPreview" \n\t\t\t\t:containerStyle="styleBoxSizes"\n\t\t\t\t:elementStyle="styleVideoSizes"\n\t\t\t\t:autoplay="autoplay"\n\t\t\t\t@click="download(file, $event)"\n\t\t\t/>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX.ProgressBarJs,BX,BX.Messenger.Model,BX.Messenger,BX.Messenger.Const,window,window,BX,window,BX);
 



// file: /bitrix/js/im/component/element/attach/dist/attach.bundle.js
(function(t,e,n,i){"use strict";var l={property:"DELIMITER",name:"bx-messenger-element-attach-delimiter",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},computed:{styles:function t(){return{width:this.config.DELIMITER.SIZE?this.config.DELIMITER.SIZE+"px":"",backgroundColor:this.config.DELIMITER.COLOR?this.config.DELIMITER.COLOR:this.color}}},template:'<div class="bx-im-element-attach-type-delimiter" :style="styles">Delimiter</div>'}};var a={property:"FILE",name:"bx-messenger-element-attach-file",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{openLink:function t(e){n.Utils.platform.openNewPage(e.LINK)},file:function t(){return{name:this.config.FILE.NAME,extension:this.config.FILE.NAME.split(".").splice(-1)[0],size:this.config.FILE.SIZE}},fileName:function t(e){var n=70;if(!e.NAME||e.NAME.length<n){return e.NAME}var i=10;var l=e.NAME.split(".").splice(-1)[0];var a=e.NAME.substring(e.NAME.length-1-(l.length+1+i));var m=e.NAME.substring(0,n-a.length-3);return m.trim()+"..."+a.trim()},fileNameFull:function t(e){return n.Utils.text.htmlspecialcharsback(e.NAME)},fileSize:function t(e){var n=e.SIZE;if(n<=0){return""}var i=["BYTE","KB","MB","GB","TB"];var l=0;while(n>=1024&&l<4){n/=1024;l++}return Math.round(n)+" "+this.localize["IM_MESSENGER_ATTACH_FILE_SIZE_"+i[l]]},fileIcon:function t(n){return e.FilesModel.getIconType(n.NAME.split(".").splice(-1)[0])}},computed:{localize:function t(){return i.Vue.getFilteredPhrases("IM_MESSENGER_ATTACH_FILE_",this.$root.$bitrixMessages)}},template:'\n\t\t\t<div class="bx-im-element-attach-type-file-element">\n\t\t\t\t<template v-for="(element, index) in config.FILE">\n\t\t\t\t\t<div class="bx-im-element-attach-type-file" @click="openLink(element)">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-icon">\n\t\t\t\t\t\t\t<div :class="[\'ui-icon\', \'ui-icon-file-\'+fileIcon(element)]"><i></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-block">\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-name" :title="fileNameFull(element)">\n\t\t\t\t\t\t\t\t{{fileName(element)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-size">{{fileSize(element)}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var m={property:"GRID",name:"bx-messenger-element-attach-grid",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},created:function t(){if(n.Utils.platform.isBitrixMobile()){this.maxCellWith=Math.floor(Math.min(screen.availWidth,screen.availHeight)/4)}else{this.maxCellWith=null}},methods:{openLink:function t(e){if(e.LINK){n.Utils.platform.openNewPage(e.LINK)}},getWidth:function t(e){if(this.type!=="row"){return e.WIDTH?e.WIDTH+"px":""}if(!e.VALUE){return false}if(this.maxCellWith&&e.WIDTH>this.maxCellWith){return this.maxCellWith+"px"}return e.WIDTH?e.WIDTH+"px":""},getValue:function t(n){if(!n.VALUE){return""}return e.MessagesModel.decodeBbCode({text:n.VALUE})}},computed:{type:function t(){return this.config.GRID[0].DISPLAY.toLowerCase()}},template:'\n\t\t\t<div class="bx-im-element-attach-type-grid">\n\t\t\t\t<template v-if="type === \'block\'">\n\t\t\t\t\t<template v-for="(element, index) in config.GRID">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-block" :style="{width: getWidth(element)}">\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-name" v-html="element.NAME"></div>\n\t\t\t\t\t\t\t<template v-if="element.LINK">\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link" @click="openLink(element)" v-html="getValue(element)"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value" v-html="getValue(element)"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if="type === \'line\'">\n\t\t\t\t\t<template v-for="(element, index) in config.GRID">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-card" :style="{width: getWidth(element)}">\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-name" v-html="element.NAME"></div>\n\t\t\t\t\t\t\t<template v-if="element.LINK">\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link" @click="openLink(element)" v-html="getValue(element)" :style="{color: element.COLOR? element.COLOR: \'\'}"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value" v-html="getValue(element)" :style="{color: element.COLOR? element.COLOR: \'\'}"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if="type === \'row\'">\n\t\t\t\t\t<div class="bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-column">\n\t\t\t\t\t\t<table class="bx-im-element-attach-type-display-column-table">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<template v-for="(element, index) in config.GRID">\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<template v-if="element.NAME">\n\t\t\t\t\t\t\t\t\t\t\t<td class="bx-im-element-attach-type-grid-element-name" :colspan="element.VALUE? 1: 2" v-html="element.NAME" :style="{width: getWidth(element)}"></td>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<template v-if="element.VALUE">\n\t\t\t\t\t\t\t\t\t\t\t<template v-if="element.LINK">\n\t\t\t\t\t\t\t\t\t\t\t\t<td class="bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link" @click="openLink(element)" v-html="getValue(element)" :colspan="element.NAME? 1: 2" :style="{color: element.COLOR? element.COLOR: \'\'}"></td>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t<td class="bx-im-element-attach-type-grid-element-value" v-html="getValue(element)" :colspan="element.NAME? 1: 2" :style="{color: element.COLOR? element.COLOR: \'\'}"></td>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var o={property:"HTML",name:"bx-messenger-element-attach-html",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},template:'<div class="bx-im-element-attach-type-html" v-html="config.HTML"></div>'}};var c={property:"IMAGE",name:"bx-messenger-element-attach-image",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{open:function t(e){if(!e){return false}if(n.Utils.platform.isBitrixMobile()){BXMobileApp.UI.Photo.show({photos:[{url:e}],default_photo:e})}else{window.open(e,"_blank")}},getImageSize:function t(e,n,i){var l;if(e>i){l=i/e}else{l=1}return{width:e*l,height:n*l}},getElementSource:function t(e){return e.PREVIEW?e.PREVIEW:e.LINK},getElementTitle:function t(e){return n.Utils.text.htmlspecialcharsback(e.NAME)},lazyLoadCallback:function t(e){if(!e.element.style.width){e.element.style.width=e.element.offsetWidth+"px"}if(!e.element.style.height){e.element.style.height=e.element.offsetHeight+"px"}},styleFileSizes:function t(e){if(!(e.WIDTH&&e.HEIGHT)){return{maxHeight:"100%",backgroundSize:"contain"}}var n=this.getImageSize(e.WIDTH,e.HEIGHT,250);return{width:n.width+"px",height:n.height+"px",backgroundSize:n.width<100||n.height<100?"contain":"initial"}},styleBoxSizes:function t(e){if(!(e.WIDTH&&e.HEIGHT)){return{height:"150px"}}if(parseInt(this.styleFileSizes(e).height)<=250){return{}}return{height:"280px"}}},template:'\n\t\t\t<div class="bx-im-element-attach-type-image">\n\t\t\t\t<template v-for="(image, index) in config.IMAGE">\n\t\t\t\t\t<div class="bx-im-element-attach-type-image-block" @click="open(image.LINK)" :style="styleBoxSizes(image)" :key="index">\n\t\t\t\t\t\t<img v-bx-lazyload="{callback: lazyLoadCallback}"\n\t\t\t\t\t\t\tclass="bx-im-element-attach-type-image-source"\n\t\t\t\t\t\t\t:data-lazyload-src="getElementSource(image)"\n\t\t\t\t\t\t\t:style="styleFileSizes(image)"\n\t\t\t\t\t\t\t:title="getElementTitle(image)"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var r={property:"LINK",name:"bx-messenger-element-attach-link",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{getImageConfig:function t(e){return{IMAGE:[{NAME:e.NAME,PREVIEW:e.PREVIEW,WIDTH:e.WIDTH,HEIGHT:e.HEIGHT}]}},openLink:function t(e){if(e.LINK){n.Utils.platform.openNewPage(e.LINK)}}},computed:{imageComponentName:function t(){return c.name}},components:babelHelpers.defineProperty({},c.name,c.component),template:'\n\t\t\t<div class="bx-im-element-attach-type-link">\n\t\t\t\t<template v-for="(element, index) in config.LINK">\n\t\t\t\t\t<div class="bx-im-element-attach-type-link-element" :key="index">\n\t\t\t\t\t\t<div v-if="element.PREVIEW" class="bx-im-element-attach-type-link-image" @click="openLink(element)">\n\t\t\t\t\t\t\t<component :is="imageComponentName" :config="getImageConfig(element)" :color="color"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-link-name" @click="openLink(element)" v-html="element.NAME"></div>\n\t\t\t\t\t\t<div v-if="element.DESC" class="bx-im-element-attach-type-link-desc" v-html="element.DESC"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var s={property:"MESSAGE",name:"bx-messenger-element-attach-message",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},computed:{message:function t(){return e.MessagesModel.decodeBbCode({text:this.config.MESSAGE})}},template:'<div class="bx-im-element-attach-type-message" v-html="message"></div>'}};var p={property:"RICH_LINK",name:"bx-messenger-element-attach-rich",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{getImageConfig:function t(e){return{IMAGE:[{NAME:e.NAME,PREVIEW:e.PREVIEW,WIDTH:e.WIDTH,HEIGHT:e.HEIGHT}]}},openLink:function t(e){if(e.LINK){n.Utils.platform.openNewPage(e.LINK)}}},computed:{imageComponentName:function t(){return c.name}},components:babelHelpers.defineProperty({},c.name,c.component),template:'\n\t\t\t<div class="bx-im-element-attach-type-rich">\n\t\t\t\t<template v-for="(element, index) in config.RICH_LINK">\n\t\t\t\t\t<div class="bx-im-element-attach-type-rich-element" :key="index">\n\t\t\t\t\t\t<div v-if="element.PREVIEW" class="bx-im-element-attach-type-rich-image" @click="openLink(element)">\n\t\t\t\t\t\t\t<component :is="imageComponentName" :config="getImageConfig(element)" :color="color"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-rich-name" @click="openLink(element)" v-html="element.NAME"></div>\n\t\t\t\t\t\t<div v-if="element.DESC" class="bx-im-element-attach-type-rich-desc" v-html="element.DESC"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var d={property:"USER",name:"bx-messenger-element-attach-user",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{openLink:function t(e){if(e.LINK){n.Utils.platform.openNewPage(e.LINK)}},getAvatarType:function t(e){if(e.AVATAR){return""}var n="user";if(e.AVATAR_TYPE==="CHAT"){n="chat"}else if(e.AVATAR_TYPE==="BOT"){n="bot"}return"bx-im-element-attach-type-user-avatar-type-"+n}},template:'\n\t\t\t<div class="bx-im-element-attach-type-user">\n\t\t\t\t<template v-for="(element, index) in config.USER">\n\t\t\t\t\t<div class="bx-im-element-attach-type-user-body" @click="openLink(element)">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-user-avatar">\n\t\t\t\t\t\t\t<div :class="[\'bx-im-element-attach-type-user-avatar-type\', getAvatarType(element)]" :style="{backgroundColor: element.AVATAR? \'\': color}">\n\t\t\t\t\t\t\t\t<img v-if="element.AVATAR" \n\t\t\t\t\t\t\t\t\tv-bx-lazyload\n\t\t\t\t\t\t\t\t\tclass="bx-im-element-attach-type-user-avatar-source"\n\t\t\t\t\t\t\t\t\t:data-lazyload-src="element.AVATAR"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-user-name" v-html="element.NAME"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var h=[l,a,m,o,c,r,s,p,d];var f={};h.forEach(function(t){f[t.name]=t.component});i.Vue.component("bx-messenger-element-attach",{props:{config:{type:Object,default:{}},baseColor:{type:String,default:"#17a3ea"}},methods:{getComponentForBlock:function t(e){for(var n=0,i=h;n<i.length;n++){var l=i[n];if(typeof e[l.property]!=="undefined"){return l.name}}return""}},computed:{color:function t(){if(typeof this.config.COLOR==="undefined"||!this.config.COLOR){return this.baseColor}if(this.config.COLOR==="transparent"){return""}return this.config.COLOR}},components:f,template:'\n\t\t<div class="bx-im-element-attach">\n\t\t\t<div v-if="color" class="bx-im-element-attach-border" :style="{borderColor: color}"></div>\n\t\t\t<div class="bx-im-element-attach-content">\n\t\t\t\t<template v-for="(block, index) in config.BLOCKS">\n\t\t\t\t\t<component :is="getComponentForBlock(block)" :config="block" :color="color" :key="index" />\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX.Messenger.Model,BX.Messenger,BX);
 



// file: /bitrix/js/im/component/element/keyboard/dist/keyboard.bundle.js
(function(exports,ui_vue,im_utils){"use strict";var _ButtonType=Object.freeze({newline:"NEWLINE",button:"BUTTON"});ui_vue.Vue.component("bx-messenger-element-keyboard",{props:{buttons:{type:Array,default:function t(){return[]}},messageId:{default:0},userId:{default:0},dialogId:{default:0}},data:function t(){return{isMobile:im_utils.Utils.platform.isMobile(),isBlocked:false,localButtons:[]}},created:function t(){this.localButtons=this.prepareButtons(this.buttons)},watch:{buttons:function t(){clearTimeout(this.recoverStateButton);this.isBlocked=false;this.localButtons=this.prepareButtons(this.buttons)}},methods:{click:function click(button){var _this=this;if(this.isBlocked){return false}if(button.DISABLED&&button.DISABLED==="Y"){return false}if(button.FUNCTION){var execFunction=button.FUNCTION.toString().replace("#MESSAGE_ID#",this.messageId).replace("#DIALOG_ID#",this.dialogId).replace("#USER_ID#",this.userId);eval(execFunction)}else if(button.APP_ID){console.warn("Messenger keyboard: open app is not implemented.")}else if(button.LINK){if(im_utils.Utils.platform.isBitrixMobile()){app.openNewPage(button.LINK)}else{window.open(button.LINK,"_blank")}}else if(button.WAIT!=="Y"){if(button.BLOCK==="Y"){this.isBlocked=true}button.WAIT="Y";this.$emit("click",{action:"COMMAND",params:{dialogId:this.dialogId,messageId:this.messageId,botId:button.BOT_ID,command:button.COMMAND,params:button.COMMAND_PARAMS}});this.recoverStateButton=setTimeout(function(){_this.isBlocked=false;button.WAIT="N"},1e4)}return true},getStyles:function t(e){var n={};if(e.WIDTH){n["width"]=e.WIDTH+"px"}else if(e.DISPLAY==="BLOCK"){n["width"]="225px"}if(e.BG_COLOR){n["backgroundColor"]=e.BG_COLOR}if(e.TEXT_COLOR){n["color"]=e.TEXT_COLOR}return n},prepareButtons:function t(e){return e.filter(function(t){if(!t.CONTEXT){return true}if(im_utils.Utils.platform.isBitrixMobile()&&t.CONTEXT==="DESKTOP"){return false}if(!im_utils.Utils.platform.isBitrixMobile()&&t.CONTEXT==="MOBILE"){return false}return true})}},computed:{ButtonType:function t(){return _ButtonType}},template:'\n\t\t<div :class="[\'bx-im-element-keyboard\', {\'bx-im-element-keyboard-mobile\': isMobile}]">\n\t\t\t<template v-for="(button, index) in localButtons">\n\t\t\t\t<div v-if="button.TYPE === ButtonType.newline" class="bx-im-element-keyboard-button-separator"></div>\n\t\t\t\t<span v-else-if="button.TYPE === ButtonType.button" :class="[\n\t\t\t\t\t\'bx-im-element-keyboard-button\', \n\t\t\t\t\t\'bx-im-element-keyboard-button-\'+button.DISPLAY.toLowerCase(), \n\t\t\t\t\t{\n\t\t\t\t\t\t\'bx-im-element-keyboard-button-disabled\': isBlocked || button.DISABLED === \'Y\',\n\t\t\t\t\t\t\'bx-im-element-keyboard-button-progress\': button.WAIT === \'Y\',\n\t\t\t\t\t}\n\t\t\t\t]" @click="click(button)">\n\t\t\t\t\t<span class="bx-im-element-keyboard-button-text bx-im-element-keyboard-button-text" :style="getStyles(button)">{{button.TEXT}}</span>\n\t\t\t\t</span>\n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX.Messenger);
 



// file: /bitrix/js/im/component/element/chatteaser/dist/chatteaser.bundle.js
(function(t,e,s){"use strict";e.Vue.component("bx-messenger-element-chat-teaser",{props:{messageCounter:{default:0},messageLastDate:{default:0},languageId:{default:"en"}},computed:{localize:function t(){return e.Vue.getFilteredPhrases("IM_MESSENGER_COMMENT_",this.$root.$bitrixMessages)},formattedDate:function t(){return s.Utils.date.format(this.messageLastDate,null,this.$root.$bitrixMessages)},formattedCounter:function t(){return this.messageCounter+" "+s.Utils.text.getLocalizeForNumber("IM_MESSENGER_COMMENT",this.messageCounter,this.languageId,this.$root.$bitrixMessages)}},template:'\n\t\t<div class="bx-im-element-chat-teaser" @click="$emit(\'click\', $event)">\n\t\t\t<span class="bx-im-element-chat-teaser-join">{{localize.IM_MESSENGER_COMMENT_OPEN}}</span>\n\t\t\t<span class="bx-im-element-chat-teaser-comment">\n\t\t\t\t<span class="bx-im-element-chat-teaser-counter">{{formattedCounter}}</span>, {{formattedDate}}\n\t\t\t</span>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX.Messenger);
 



// file: /bitrix/js/ui/vue/components/reaction/dist/reaction.bundle.js
(function(t,e){"use strict";var i=Object.freeze({none:"none",like:"like",kiss:"kiss",laugh:"laugh",wonder:"wonder",cry:"cry",angry:"angry"});var n=["like","kiss","laugh","wonder","cry","angry"];e.Vue.component("bx-reaction",{props:{values:{default:{}},userId:{default:0},openList:{default:true}},data:function t(){return{localValues:{},userReaction:i.none,buttonAnimate:false}},created:function t(){this.localValues=Object.assign({},this.values)},watch:{values:function t(e){this.localValues=Object.assign({},e)}},methods:{list:function t(){if(this.openList);this.$emit("list",{values:this.localValues})},likeIt:function t(){var e=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:i.like;if(this.userReaction===i.none){n=i.like;if(!this.localValues[n]){this.localValues=Object.assign({},this.localValues,babelHelpers.defineProperty({},n,[]))}this.localValues[n].push(this.userId);this.buttonAnimate=true;setTimeout(function(){return e.buttonAnimate=false},400);this.$emit("set",{action:"set",type:n})}else{if(this.localValues[this.userReaction]){this.localValues[this.userReaction]=this.localValues[this.userReaction].filter(function(t){return t!==e.userId})}this.$emit("set",{action:"remove",type:this.userReaction})}}},computed:{types:function t(){var e=this;this.userReaction=i.none;return n.filter(function(t){if(typeof e.localValues[t]==="undefined"||!(e.localValues[t]instanceof Array)||e.localValues[t].length<=0){return false}if(e.userId>0&&e.userReaction===i.none&&e.localValues[t].includes(e.userId)){e.userReaction=t}return true}).map(function(t){return{type:t,count:e.localValues[t].length}})},counter:function t(){return this.types.map(function(t){return t.count}).reduce(function(t,e){return t+e},0)},isTypesShowed:function t(){if(this.counter<=0){return false}if(this.userReaction!==i.none&&this.counter===1){return false}return true},isMobile:function t(){var e=navigator.userAgent.toLowerCase();return e.includes("android")||e.includes("iphone")||e.includes("ipad")||e.includes("bitrixmobile")}},template:'\n\t\t<div :class="[\'ui-vue-reaction\', {\'ui-vue-reaction-mobile\': isMobile}]">\n\t\t\t<transition name="ui-vue-reaction-result-animation">\n\t\t\t\t<div v-if="isTypesShowed" class="ui-vue-reaction-result" @click="list">\n\t\t\t\t\t<transition-group tag="div" class="ui-vue-reaction-result-types" name="ui-vue-reaction-result-type-animation" >\n\t\t\t\t\t\t<span v-for="element in types" :class="[\'ui-vue-reaction-result-type\', \'ui-vue-reaction-icon-\'+element.type]" :key="element.type"></span>\n\t\t\t\t\t</transition-group>\t\n\t\t\t\t\t<div class="ui-vue-reaction-result-counter">{{counter}}</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t\t<div v-if="userId > 0"  class="ui-vue-reaction-button" @click="likeIt">\n\t\t\t\t<div class="ui-vue-reaction-button-container">\n\t\t\t\t\t<div :class="[\'ui-vue-reaction-button-icon\', \'ui-vue-reaction-icon-\'+userReaction, {\'ui-vue-reaction-button-pressed\': buttonAnimate}]"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX);
 



// file: /bitrix/js/im/component/message/body/dist/body.bundle.js
(function(t,e,s,a,n,i,r,o,m,l,c){"use strict";var g=window.BX;var f=Object.freeze({default:"default",progress:"progress",image:"image",audio:"audio",video:"video",richLink:"richLink"});r.Vue.component("bx-messenger-message-body",{props:{userId:{default:0},dialogId:{default:"0"},chatId:{default:0},messageType:{default:l.MessageType.self},message:{type:Object,default:m.MessagesModel.create().getElementState},user:{type:Object,default:m.UsersModel.create().getElementState},dialog:{type:Object,default:m.DialoguesModel.create().getElementState},files:{type:Object,default:{}},enableReactions:{default:true},showName:{default:true},showAvatar:{default:true},referenceContentBodyClassName:{default:""},referenceContentNameClassName:{default:""}},created:function t(){this.dateFormatFunction=null;this.cacheFormatDate={}},methods:{clickByUserName:function t(e){this.$emit("clickByUserName",e)},clickByUploadCancel:function t(e){this.$emit("clickByUploadCancel",e)},clickByChatTeaser:function t(e){this.$emit("clickByChatTeaser",{message:e.message,event:e})},clickByKeyboardButton:function t(e){this.$emit("clickByKeyboardButton",babelHelpers.objectSpread({message:e.message},e.event))},setReaction:function t(e){this.$emit("setReaction",e)},openReactionList:function t(e){this.$emit("openReactionList",e)},formatDate:function t(e){var s=e.toJSON().slice(0,10);if(this.cacheFormatDate[s]){return this.cacheFormatDate[s]}var a=c.Utils.date.getFormatType(g.Messenger.Const.DateFormat.message,this.$root.$bitrixMessages);this.cacheFormatDate[s]=this._getDateFormat().format(a,e);return this.cacheFormatDate[s]},_getDateFormat:function t(){var e=this;if(this.dateFormatFunction){return this.dateFormatFunction}this.dateFormatFunction=Object.create(g.Main.Date);if(this.$root.$bitrixMessages){this.dateFormatFunction._getMessage=function(t){return e.$root.$bitrixMessages[t]}}return this.dateFormatFunction}},computed:babelHelpers.objectSpread({MessageType:function t(){return l.MessageType},ContentType:function t(){return f},contentType:function t(){if(this.filesData.length>0){var e=false;var s=false;var a=false;var n=false;var i=true;var r=false;var o=undefined;try{for(var m=this.filesData[Symbol.iterator](),l;!(i=(l=m.next()).done);i=true){var c=l.value;if(c.progress<0){n=true;break}else if(c.type==="audio"){if(s||e){e=false;s=false;break}a=true}else if(c.type==="image"&&c.image){if(s||a){a=false;s=false;break}e=true}else if(c.type==="video"){if(e||a){a=false;e=false;break}s=true}else{a=false;e=false;s=false;break}}}catch(t){r=true;o=t}finally{try{if(!i&&m.return!=null){m.return()}}finally{if(r){throw o}}}if(n){return f.progress}else if(e){return f.image}else if(a){return f.audio}else if(s){return f.video}}return f.default},localize:function t(){return r.Vue.getFilteredPhrases("IM_MESSENGER_MESSAGE_",this.$root.$bitrixMessages)},formattedDate:function t(){return this.formatDate(this.message.date)},messageText:function t(){if(this.isDeleted){return this.localize.IM_MESSENGER_MESSAGE_DELETED}return this.message.textConverted},messageAttach:function t(){return this.message.params.ATTACH},messageReactions:function t(){return this.message.params.REACTION||{}},isEdited:function t(){return this.message.params.IS_EDITED==="Y"},isDeleted:function t(){return this.message.params.IS_DELETED==="Y"},chatColor:function t(){return this.dialog.type!==l.DialogType.private?this.dialog.color:this.user.color},filesData:function t(){var e=this;var s=[];if(!this.message.params.FILE_ID||this.message.params.FILE_ID.length<=0){return s}this.message.params.FILE_ID.forEach(function(t){if(!t){return false}var a=e.$store.getters["files/get"](e.chatId,t,true);if(!a){e.$store.commit("files/set",{data:[e.$store.getters["files/getBlank"]({id:t,chatId:e.chatId})]});a=e.$store.getters["files/get"](e.chatId,t,true)}if(a){s.push(a)}});return s},keyboardButtons:function t(){var e=false;if(!this.message.params.KEYBOARD||this.message.params.KEYBOARD==="N"){return e}return this.message.params.KEYBOARD},chatTeaser:function t(){if(typeof this.message.params.CHAT_ID==="undefined"||typeof this.message.params.CHAT_LAST_DATE==="undefined"||typeof this.message.params.CHAT_MESSAGE==="undefined"){return false}return{messageCounter:this.message.params.CHAT_MESSAGE,messageLastDate:this.message.params.CHAT_LAST_DATE,languageId:this.application.common.languageId}}},o.Vuex.mapState({application:function t(e){return e.application}})),template:'\n\t\t<div class="bx-im-message-content-wrap">\n\t\t\t<template v-if="contentType == ContentType.default || contentType == ContentType.audio || contentType == ContentType.progress">\n\t\t\t\t<div class="bx-im-message-content">\n\t\t\t\t\t<span class="bx-im-message-content-box">\n\t\t\t\t\t\t<template v-if="showName && messageType == MessageType.opponent">\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-name\', referenceContentNameClassName]" :style="{color: user.color}" @click="clickByUserName({user: user, event: $event})">{{!showAvatar? user.name: (user.firstName? user.firstName: user.name)}}</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body\', referenceContentBodyClassName]">\n\t\t\t\t\t\t\t<template v-if="contentType == ContentType.audio">\n\t\t\t\t\t\t\t\t<bx-messenger-element-file-audio v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId" @uploadCancel="clickByUploadCancel"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<bx-messenger-element-file v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId" @uploadCancel="clickByUploadCancel"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body-wrap\', {\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-with-text\': messageText.length > 0,\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-without-text\': messageText.length <= 0,\n\t\t\t\t\t\t\t}]">\n\t\t\t\t\t\t\t\t<template v-if="messageText">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-text" v-html="messageText"></span>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-for="(config, id) in messageAttach">\n\t\t\t\t\t\t\t\t\t<bx-messenger-element-attach :baseColor="chatColor" :config="config" :key="id"/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<span class="bx-im-message-content-params">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-date">{{formattedDate}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div v-if="!message.push && enableReactions && message.authorId" class="bx-im-message-content-reaction">\n\t\t\t\t\t\t<bx-reaction :values="messageReactions" :userId="userId" :openList="false" @set="setReaction({message: message, reaction: $event})" @list="openReactionList({message: message, values: $event.values})"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if="contentType == ContentType.richLink">\n\t\t\t\t\x3c!-- richLink type markup --\x3e\n\t\t\t</template>\n\t\t\t<template v-else-if="contentType == ContentType.image || contentType == ContentType.video">\n\t\t\t\t<div class="bx-im-message-content bx-im-message-content-fit">\n\t\t\t\t\t<span class="bx-im-message-content-box">\n\t\t\t\t\t\t<template v-if="showName && messageType == MessageType.opponent">\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-name\', referenceContentNameClassName]" :style="{color: user.color}" @click="clickByUserName({user: user, event: $event})">{{!showAvatar? user.name: (user.firstName? user.firstName: user.name)}}</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body\', referenceContentBodyClassName]">\n\t\t\t\t\t\t\t<template v-if="contentType == ContentType.image">\n\t\t\t\t\t\t\t\t<bx-messenger-element-file-image v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId" @uploadCancel="clickByUploadCancel"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if="contentType == ContentType.video">\n\t\t\t\t\t\t\t\t<bx-messenger-element-file-video v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId" @uploadCancel="clickByUploadCancel"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body-wrap\', {\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-with-text\': messageText.length > 0,\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-without-text\': messageText.length <= 0,\n\t\t\t\t\t\t\t}]">\n\t\t\t\t\t\t\t\t<template v-if="messageText">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-text" v-html="messageText"></span>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<span class="bx-im-message-content-params">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-date">{{formattedDate}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div v-if="!message.push && enableReactions && message.authorId" class="bx-im-message-content-reaction">\n\t\t\t\t\t\t<bx-reaction :values="messageReactions" :userId="userId" :openList="false" @set="setReaction({message: message, reaction: $event})" @list="openReactionList({message: message, values: $event.values})"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-if="keyboardButtons">\n\t\t\t\t<bx-messenger-element-keyboard :buttons="keyboardButtons" :messageId="message.id" :userId="userId" :dialogId="dialogId" @click="clickByKeyboardButton({message: message, event: $event})"/>\n\t\t\t</template>\n\t\t\t<template v-if="chatTeaser">\n\t\t\t\t<bx-messenger-element-chat-teaser :messageCounter="chatTeaser.messageCounter" :messageLastDate="chatTeaser.messageLastDate" :languageId="chatTeaser.languageId" @click="clickByChatTeaser({message: message, event: $event})"/>\n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},window,window,window,window,window,BX,BX,BX.Messenger.Model,BX.Messenger.Const,BX.Messenger);
 



// file: /bitrix/js/im/tools/animation/dist/animation.bundle.js
this.BX=this.BX||{};(function(e){"use strict";var n=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"start",value:function e(n){var i=n.start,e=i===void 0?0:i,t=n.end,r=t===void 0?0:t,a=n.increment,o=a===void 0?20:a,u=n.callback,c=u===void 0?function(){}:u,s=n.duration,l=s===void 0?500:s,m=n.element,f=n.elementProperty;var v=r-e;var w=0;var d=function e(n,i,t,r){n/=r/2;if(n<1){return t/2*n*n+i}n--;return-t/2*(n*(n-2)-1)+i};var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)};var A=null;var h=function n(){w+=o;m[f]=d(w,e,v,l);if(w<l){A=b(n)}else{if(c&&typeof c==="function"){c()}}return A};return h()}},{key:"cancel",value:function e(n){var i=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)};i(n)}}]);return e}();n.frameIds={};e.Animation=n})(this.BX.Messenger=this.BX.Messenger||{});
 



// file: /bitrix/js/im/component/message/dist/message.bundle.js
(function(t,e,s,a,i,n,r){"use strict";a.Vue.component("bx-messenger-message",{props:{userId:{default:0},dialogId:{default:0},chatId:{default:0},enableReactions:{default:true},enableDateActions:{default:true},enableCreateContent:{default:true},enableGestureQuote:{default:true},enableGestureQuoteFromRight:{default:true},enableGestureMenu:{default:false},showAvatar:{default:true},showMenu:{default:true},showName:{default:true},showLargeFont:{default:true},capturedMoveEvent:{default:null},referenceContentClassName:{default:""},referenceContentBodyClassName:{default:""},referenceContentNameClassName:{default:""},dialog:{type:Object,default:s.DialoguesModel.create().getElementState},message:{type:Object,default:s.MessagesModel.create().getElementState}},data:function t(){return{componentBodyId:"bx-messenger-message-body",drag:false,dragWidth:0,dragPosition:0,dragIconShowLeft:false,dragIconShowRight:false}},created:function t(){this.dragStartPositionX=0;this.dragStartPositionY=0;this.dragMovePositionX=0;this.dragMovePositionY=0},beforeDestroy:function t(){clearTimeout(this.dragStartTimeout1);clearTimeout(this.dragStartTimeout2);if(this.dragBackAnimation){r.Animation.cancel(this.dragBackAnimation)}},methods:{clickByAvatar:function t(e){this.$emit("clickByUserName",e)},clickByUserName:function t(e){if(this.showAvatar&&n.Utils.platform.isMobile()){return false}this.$emit("clickByUserName",e)},clickByUploadCancel:function t(e){this.$emit("clickByUploadCancel",e)},clickByKeyboardButton:function t(e){this.$emit("clickByKeyboardButton",e)},clickByChatTeaser:function t(e){this.$emit("clickByChatTeaser",e)},clickByMessageMenu:function t(e){this.$emit("clickByMessageMenu",e)},clickByMessageRetry:function t(e){this.$emit("clickByMessageRetry",e)},setMessageReaction:function t(e){this.$emit("setMessageReaction",e)},openMessageReactionList:function t(e){this.$emit("openMessageReactionList",e)},gestureRouter:function t(e,s){this.gestureQuote(e,s);this.gestureMenu(e,s)},gestureMenu:function t(e,s){var a=this;if(!this.enableGestureMenu){return}if(e==="touchstart"){this.gestureMenuStarted=true;this.gestureMenuPreventTouchEnd=false;if(s.target.tagName==="A"){return false}this.gestureMenuStartPosition={x:s.changedTouches[0].clientX,y:s.changedTouches[0].clientY};this.gestureMenuTimeout=setTimeout(function(){a.gestureMenuPreventTouchEnd=true;a.$emit("clickByMessageMenu",{message:a.message,event:s})},500)}else if(e==="touchmove"){if(!this.gestureMenuStarted){return false}if(Math.abs(this.gestureMenuStartPosition.x-s.changedTouches[0].clientX)>=10||Math.abs(this.gestureMenuStartPosition.y-s.changedTouches[0].clientY)>=10){this.gestureMenuStarted=false;clearTimeout(this.gestureMenuTimeout)}}else if(e==="touchend"){if(!this.gestureMenuStarted){return false}this.gestureMenuStarted=false;clearTimeout(this.gestureMenuTimeout);if(this.gestureMenuPreventTouchEnd){s.preventDefault()}}},gestureQuote:function t(e,s){var a=this;var i=n.Utils.browser.findParent(s.target,"bx-im-message")||s.target;if(!this.enableGestureQuote||n.Utils.platform.isAndroid()){return}var o=this.enableGestureQuoteFromRight;var g=i.getBoundingClientRect().left+s.layerX;var l=i.getBoundingClientRect().top+s.layerY;if(e==="touchstart"){this.dragCheck=true;this.dragStartInitialX=i.getBoundingClientRect().left;this.dragStartInitialY=i.getBoundingClientRect().top;this.dragStartPositionX=g;this.dragStartPositionY=l;this.dragMovePositionX=null;this.dragMovePositionY=null;clearTimeout(this.dragStartTimeout1);clearTimeout(this.dragStartTimeout2);this.dragStartTimeout1=setTimeout(function(){if(a.dragMovePositionX!==null){if(Math.abs(a.dragStartPositionY-a.dragMovePositionY)>=10){a.dragCheck=false}}},29);this.dragStartTimeout2=setTimeout(function(){a.dragCheck=false;if(Math.abs(a.dragStartPositionY-a.dragMovePositionY)>=10){return}if(a.dragMovePositionX===null){return}else if(o&&a.dragStartPositionX-a.dragMovePositionX<9){return}else if(!o&&a.dragStartPositionX-a.dragMovePositionX>9){return}r.Animation.cancel(a.dragBackAnimation);a.drag=true;a.$emit("dragMessage",{result:a.drag,event:s});a.dragWidth=a.$refs.body.offsetWidth},80)}else if(e==="touchmove"){if(this.drag||!this.dragCheck){return false}this.dragMovePositionX=g;this.dragMovePositionY=l}else if(e==="touchend"){clearTimeout(this.dragStartTimeout1);clearTimeout(this.dragStartTimeout2);this.dragCheck=false;if(!this.drag){this.dragIconShowLeft=false;this.dragIconShowRight=false;return}r.Animation.cancel(this.dragBackAnimation);this.drag=false;this.$emit("dragMessage",{result:this.drag,event:s});if(this.enableGestureQuoteFromRight&&this.dragIconShowRight&&this.dragPosition!==0||!this.enableGestureQuoteFromRight&&this.dragIconShowLeft&&this.dragPosition!==this.dragStartInitialX){if(n.Utils.platform.isBitrixMobile()){setTimeout(function(){return app.exec("callVibration")},200)}this.$emit("quoteMessage",{message:this.message})}this.dragIconShowLeft=false;this.dragIconShowRight=false;this.dragBackAnimation=r.Animation.start({start:this.dragPosition,end:this.dragStartInitialX,increment:20,duration:300,element:this,elementProperty:"dragPosition",callback:function t(){a.dragLayerPosition=undefined;a.dragWidth=0;a.dragPosition=0}})}}},watch:{capturedMoveEvent:function t(e){if(!this.drag||!e){return}var s=n.Utils.browser.findParent(e.target,"bx-im-message")||e.target;var a=s.getBoundingClientRect().left+e.layerX;if(typeof this.dragLayerPosition==="undefined"){this.dragLayerPosition=a}var i=this.dragLayerPosition-a;this.dragLayerPosition=a;this.dragPosition=this.dragPosition-i;if(this.enableGestureQuoteFromRight){var r=(this.showAvatar?30:0)+45;var o=this.showAvatar?30:30;if(this.dragPosition<-r){this.dragPosition=-r}else if(this.dragPosition<-o){if(!this.dragIconShowRight){this.dragIconShowRight=true}}else if(this.dragPosition>=0){this.dragPosition=0}}else{var g=60;var l=40;if(this.dragPosition<=this.dragStartInitialX){this.dragPosition=this.dragStartInitialX}else if(this.dragPosition>=g){this.dragPosition=g}else if(this.dragPosition>=l){if(!this.dragIconShowLeft){this.dragIconShowLeft=true}}}}},computed:{MessageType:function t(){return i.MessageType},type:function t(){if(this.message.system||this.message.authorId==0){return i.MessageType.system}else if(this.message.authorId===-1||this.message.authorId==this.userId){return i.MessageType.self}else{return i.MessageType.opponent}},localize:function t(){var t=a.Vue.getFilteredPhrases("IM_MESSENGER_MESSAGE_",this.$root.$bitrixMessages);return Object.freeze(Object.assign({},t,{IM_MESSENGER_MESSAGE_MENU_TITLE:t.IM_MESSENGER_MESSAGE_MENU_TITLE.replace("#SHORTCUT#",n.Utils.platform.isMac()?"CMD":"CTRL")}))},userData:function t(){return this.$store.getters["users/get"](this.message.authorId,true)},userAvatar:function t(){return this.userData.avatar?"url('".concat(this.userData.avatar,"')"):""},filesData:function t(){var e=this.$store.getters["files/getList"](this.chatId);return e?e:{}},isEdited:function t(){return this.message.params.IS_EDITED==="Y"},isDeleted:function t(){return this.message.params.IS_DELETED==="Y"},isLargeFont:function t(){return this.showLargeFont&&this.message.params.LARGE_FONT==="Y"}},template:'\n\t\t<div :class="[\'bx-im-message\', {\n\t\t\t\t\'bx-im-message-without-menu\': !showMenu,\n\t\t\t\t\'bx-im-message-without-avatar\': !showAvatar,\n\t\t\t\t\'bx-im-message-type-system\': type === MessageType.system,\n\t\t\t\t\'bx-im-message-type-self\': type === MessageType.self,\n\t\t\t\t\'bx-im-message-type-other\': type !== MessageType.self,\n\t\t\t\t\'bx-im-message-type-opponent\': type === MessageType.opponent,\n\t\t\t\t\'bx-im-message-status-error\': message.error,\n\t\t\t\t\'bx-im-message-status-unread\': message.unread,\n\t\t\t\t\'bx-im-message-status-blink\': message.blink,\n\t\t\t\t\'bx-im-message-status-edited\': isEdited,\n\t\t\t\t\'bx-im-message-status-deleted\': isDeleted,\n\t\t\t\t\'bx-im-message-large-font\': isLargeFont,\n\t\t\t}]" \n\t\t\t@touchstart="gestureRouter(\'touchstart\', $event)"\n\t\t\t@touchmove="gestureRouter(\'touchmove\', $event)"\n\t\t\t@touchend="gestureRouter(\'touchend\', $event)"\n\t\t\tref="body"\n\t\t\t:style="{\n\t\t\t\twidth: dragWidth > 0? dragWidth+\'px\': \'\', \n\t\t\t\tmarginLeft: (enableGestureQuoteFromRight && dragPosition < 0) || (!enableGestureQuoteFromRight && dragPosition > 0)? dragPosition+\'px\': \'\',\n\t\t\t}"\n\t\t>\n\t\t\t<template v-if="type === MessageType.self">\n\t\t\t\t<template v-if="dragIconShowRight">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-right">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t\t<div class="bx-im-message-box">\n\t\t\t\t\t<component :is="componentBodyId"\n\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t:chatId="chatId"\n\t\t\t\t\t\t:messageType="type"\n\t\t\t\t\t\t:dialog="dialog"\n\t\t\t\t\t\t:message="message"\n\t\t\t\t\t\t:user="userData"\n\t\t\t\t\t\t:files="filesData"\n\t\t\t\t\t\t:showAvatar="showAvatar"\n\t\t\t\t\t\t:showName="showName"\n\t\t\t\t\t\t:enableReactions="enableReactions"\n\t\t\t\t\t\t:referenceContentBodyClassName="referenceContentBodyClassName"\n\t\t\t\t\t\t:referenceContentNameClassName="referenceContentNameClassName"\n\t\t\t\t\t\t@clickByUserName="clickByUserName"\n\t\t\t\t\t\t@clickByUploadCancel="clickByUploadCancel"\n\t\t\t\t\t\t@clickByKeyboardButton="clickByKeyboardButton"\n\t\t\t\t\t\t@clickByChatTeaser="clickByChatTeaser"\n\t\t\t\t\t\t@setReaction="setMessageReaction"\n\t\t\t\t\t\t@openReactionList="openMessageReactionList"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-message-box-status">\n\t\t\t\t\t<template v-if="message.sending">\n\t\t\t\t\t\t<div class="bx-im-message-sending"></div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<transition name="bx-im-message-status-retry">\n\t\t\t\t\t\t<template v-if="!message.sending && message.error && message.retry">\n\t\t\t\t\t\t\t<div class="bx-im-message-status-retry" :title="localize.IM_MESSENGER_MESSAGE_RETRY_TITLE" @click="clickByMessageRetry({message: message, event: $event})">\n\t\t\t\t\t\t\t\t<span class="bx-im-message-retry-icon"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</transition>\n\t\t\t\t\t<template v-if="showMenu && !message.sending && !message.error">\n\t\t\t\t\t\t<div class="bx-im-message-status-menu" :title="localize.IM_MESSENGER_MESSAGE_MENU_TITLE" @click="clickByMessageMenu({message: message, event: $event})">\n\t\t\t\t\t\t\t<span class="bx-im-message-menu-icon"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template> \n\t\t\t\t</div>\n\t\t\t\t<template v-if="dragIconShowLeft">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-left">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t</template>\n\t\t\t<template v-else-if="type !== MessageType.self">\n\t\t\t\t<template v-if="dragIconShowLeft">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-left">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t\t<template v-if="type === MessageType.opponent">\n\t\t\t\t\t<div v-if="showAvatar" class="bx-im-message-avatar" @click="clickByAvatar({user: userData, event: $event})">\n\t\t\t\t\t\t<div :class="[\'bx-im-message-avatar-image\', {\n\t\t\t\t\t\t\t\t\'bx-im-message-avatar-image-default\': !userData.avatar\n\t\t\t\t\t\t\t}]"\n\t\t\t\t\t\t\t:style="{\n\t\t\t\t\t\t\t\tbackgroundColor: !userData.avatar? userData.color: \'\', \n\t\t\t\t\t\t\t\tbackgroundImage: userAvatar\n\t\t\t\t\t\t\t}" \n\t\t\t\t\t\t\t:title="userData.name"\n\t\t\t\t\t\t></div>\t\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div class="bx-im-message-box">\n\t\t\t\t\t<component :is="componentBodyId"\n\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t:chatId="chatId"\n\t\t\t\t\t\t:messageType="type"\n\t\t\t\t\t\t:message="message"\n\t\t\t\t\t\t:user="userData"\n\t\t\t\t\t\t:files="filesData"\n\t\t\t\t\t\t:showAvatar="showAvatar"\n\t\t\t\t\t\t:showName="showName"\n\t\t\t\t\t\t:enableReactions="enableReactions"\n\t\t\t\t\t\t:referenceContentBodyClassName="referenceContentBodyClassName"\n\t\t\t\t\t\t:referenceContentNameClassName="referenceContentNameClassName"\n\t\t\t\t\t\t@clickByUserName="clickByUserName"\n\t\t\t\t\t\t@clickByUploadCancel="clickByUploadCancel"\n\t\t\t\t\t\t@clickByKeyboardButton="clickByKeyboardButton"\n\t\t\t\t\t\t@clickByChatTeaser="clickByChatTeaser"\n\t\t\t\t\t\t@setReaction="setMessageReaction"\n\t\t\t\t\t\t@openReactionList="openMessageReactionList"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="showMenu"  class="bx-im-message-menu" :title="localize.IM_MESSENGER_MESSAGE_MENU_TITLE" @click="clickByMessageMenu({message: message, event: $event})">\n\t\t\t\t\t<span class="bx-im-message-menu-icon"></span>\n\t\t\t\t</div>\t\n\t\t\t\t<template v-if="dragIconShowRight">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-right">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},window,BX.Messenger.Model,BX,BX.Messenger.Const,BX.Messenger,BX.Messenger);
 



// file: /bitrix/js/im/component/dialog/dist/dialog.bundle.js
(function(t,e,i,s,o,n,a,r){"use strict";var l=Object.freeze({message:"message",delimiter:"delimiter",group:"group",historyLoader:"historyLoader",unreadLoader:"unreadLoader",button:"button"});var c=Object.freeze({history:"history",unread:"unread",read:"read",none:"none"});var u=Object.freeze({before:"before",after:"after"});var d=Object.freeze({none:"none",mixed:"mixed",enter:"enter",leave:"leave"});i.Vue.component("bx-messenger-dialog",{props:{userId:{default:0},dialogId:{default:0},chatId:{default:0},messageLimit:{default:20},messageExtraCount:{default:0},listenEventScrollToBottom:{default:""},listenEventRequestHistory:{default:""},listenEventRequestUnread:{default:""},listenEventSendReadMessages:{default:""},enableReadMessages:{default:true},enableReactions:{default:true},enableDateActions:{default:true},enableCreateContent:{default:true},enableGestureQuote:{default:true},enableGestureQuoteFromRight:{default:true},enableGestureMenu:{default:false},showMessageUserName:{default:true},showMessageAvatar:{default:true},showMessageMenu:{default:true}},data:function t(){return{scrollAnimating:false,showScrollButton:false,messageShowCount:0,unreadLoaderShow:false,historyLoaderBlocked:false,historyLoaderShow:true,startMessageLimit:0,templateMessageScrollOffset:20,templateMessageWithNameDifferent:29,TemplateType:l,ObserverType:c,DialogReferenceClassName:n.DialogReferenceClassName,captureMove:false,capturedMoveEvent:null,lastMessageId:null,maxMessageId:null}},created:function t(){this.showScrollButton=this.unreadCounter>0;this.scrollChangedByUser=false;this.scrollButtonDiff=100;this.scrollButtonShowTimeout=null;this.scrollPosition=0;this.scrollPositionChangeTime=(new Date).getTime();this.animationScrollHeightStart=0;this.animationScrollHeightEnd=0;this.animationScrollTop=0;this.animationScrollChange=0;this.animationScrollLastUserId=0;this.animationType=d.none;this.animationCollection=[];this.animationCollectionOffset={};this.animationLastElementBeforeStart=0;this.observers={};this.requestHistoryInterval=null;this.requestUnreadInterval=null;this.lastAuthorId=0;this.firstMessageId=null;this.firstUnreadMessageId=null;this.dateFormatFunction=null;this.cacheGroupTitle={};this.waitLoadHistory=false;this.waitLoadUnread=false;this.skipUnreadScroll=false;this.readMessageQueue=[];this.readMessageTarget={};this.readMessageDelayed=a.Utils.debounce(this.readMessage,50,this);this.requestHistoryBlockIntersect=false;this.requestHistoryDelayed=a.Utils.debounce(this.requestHistory,50,this);this.requestUnreadBlockIntersect=false;this.requestUnreadDelayed=a.Utils.debounce(this.requestUnread,50,this);this.startMessageLimit=this.messageLimit;if(this.listenEventScrollToBottom){i.Vue.event.$on(this.listenEventScrollToBottom,this.onScrollToBottom);this.$root.$on(this.listenEventScrollToBottom,this.onScrollToBottom)}if(this.listenEventRequestHistory){this.$root.$on(this.listenEventRequestHistory,this.onRequestHistoryAnswer)}if(this.listenEventRequestUnread){this.$root.$on(this.listenEventRequestUnread,this.onRequestUnreadAnswer)}if(this.listenEventSendReadMessages){this.$root.$on(this.listenEventSendReadMessages,this.onSendReadMessages)}window.addEventListener("orientationchange",this.onOrientationChange);window.addEventListener("focus",this.onWindowFocus);window.addEventListener("blur",this.onWindowBlur);i.Vue.event.$on("bitrixmobile:controller:focus",this.onWindowFocus);i.Vue.event.$on("bitrixmobile:controller:blur",this.onWindowBlur)},beforeDestroy:function t(){this.observers={};clearTimeout(this.scrollButtonShowTimeout);clearInterval(this.requestHistoryInterval);clearInterval(this.requestUnreadInterval);if(this.listenEventScrollToBottom){i.Vue.event.$off(this.listenEventScrollToBottom,this.onScrollToBottom);this.$root.$off(this.listenEventScrollToBottom,this.onScrollToBottom)}if(this.listenEventRequestHistory){this.$root.$off(this.listenEventRequestHistory,this.onRequestHistoryAnswer)}if(this.listenEventRequestUnread){this.$root.$off(this.listenEventRequestUnread,this.onRequestUnreadAnswer)}if(this.listenEventSendReadMessages){this.$root.$off(this.listenEventSendReadMessages,this.onSendReadMessages)}window.removeEventListener("orientationchange",this.onOrientationChange);window.removeEventListener("focus",this.onWindowFocus);window.removeEventListener("blur",this.onWindowBlur);i.Vue.event.$off("bitrixmobile:controller:focus",this.onWindowFocus);i.Vue.event.$off("bitrixmobile:controller:blur",this.onWindowBlur)},mounted:function t(){var e=h.getFirstUnreadMessage(this.collection);if(e){h.scrollToFirstUnreadMessage(this,this.collection,e,true)}else{var i=this.$refs.body;h.scrollToPosition(this,i.scrollHeight-i.clientHeight)}this.windowFocused=a.Utils.platform.isBitrixMobile()?true:document.hasFocus()},computed:babelHelpers.objectSpread({localize:function t(){return i.Vue.getFilteredPhrases("IM_MESSENGER_DIALOG_",this.$root.$bitrixMessages)},dialog:function t(){var t=this.$store.getters["dialogues/get"](this.dialogId);return t?t:this.$store.getters["dialogues/getBlank"]()},collectionMutationType:function t(){return this.$store.getters["messages/getMutationType"](this.chatId)},collection:function t(){return this.$store.getters["messages/get"](this.chatId)},elementsWithLimit:function t(){var e=this;var i=this.collection.filter(function(t){return t.unread}).length;var s=this.messageExtraCount+this.messageLimit*2;if(i>s){s=i}var o=this.collection.length-s;if(!this.historyLoaderShow||o<0){o=0}var n=o===0?this.collection:this.collection.slice(o,this.collection.length);this.messageShowCount=n.length;this.firstMessageId=null;this.lastMessageId=0;this.maxMessageId=0;this.lastMessageAuthorId=0;var a=[];var r=0;var l={};this.firstUnreadMessageId=0;if(this.messageShowCount>0){n.forEach(function(t){if(e.firstMessageId===null||e.firstMessageId>t.id){e.firstMessageId=t.id}if(e.maxMessageId<t.id){e.maxMessageId=t.id}e.lastMessageId=t.id;var i=e._groupTitle(t.date);if(!l[i.title]){l[i.title]=i.id;a.push(f.getGroup(i.id,i.title))}else if(r!==t.authorId){a.push(f.getDelimiter(t.id))}a.push(t);r=t.authorId;if(t.unread){if(!e.firstUnreadMessageId){e.firstUnreadMessageId=t.id}}});this.lastMessageAuthorId=r}else{this.firstMessageId=0}if(this.collection.length>=this.messageLimit&&this.collection.length>=this.messageShowCount&&this.historyLoaderBlocked===false){this.historyLoaderShow=true}else{this.historyLoaderShow=false}if(this.dialog.unreadLastId>this.maxMessageId){this.unreadLoaderShow=true}else{this.unreadLoaderShow=false}return a},statusWriting:function t(){var e=this;clearTimeout(this.scrollToTimeout);if(this.dialog.writingList.length===0){return""}if(!this.scrollChangedByUser&&!this.showScrollButton){this.scrollToTimeout=setTimeout(function(){return e.scrollTo({duration:500})},300)}return this.localize.IM_MESSENGER_DIALOG_WRITES_MESSAGE.replace("#USER#",this.dialog.writingList.map(function(t){return t.userName}).join(", "))},statusReaded:function t(){var e=this;clearTimeout(this.scrollToTimeout);if(this.dialog.readedList.length===0){return""}var i="";if(this.dialog.type===n.DialogType.private){var s=this.dialog.readedList[0];if(s.messageId===this.lastMessageId&&s.userId!==this.lastMessageAuthorId){var o=a.Utils.date.getFormatType(BX.Messenger.Const.DateFormat.readedTitle,this.$root.$bitrixMessages);i=this.localize.IM_MESSENGER_DIALOG_MESSAGES_READED_USER.replace("#DATE#",this._getDateFormat().format(o,s.date))}}else{var r=this.dialog.readedList.filter(function(t){return t.messageId===e.lastMessageId&&t.userId!==e.lastMessageAuthorId});if(r.length===1){i=this.localize.IM_MESSENGER_DIALOG_MESSAGES_READED_CHAT.replace("#USERS#",r[0].userName)}else if(r.length>1){i=this.localize.IM_MESSENGER_DIALOG_MESSAGES_READED_CHAT.replace("#USERS#",this.localize.IM_MESSENGER_DIALOG_MESSAGES_READED_CHAT_PLURAL.replace("#USER#",r[0].userName).replace("#COUNT#",r.length-1).replace("[LINK]","").replace("[/LINK]",""))}}if(!i){return""}if(!this.scrollChangedByUser&&!this.showScrollButton){this.scrollToTimeout=setTimeout(function(){return e.scrollTo({duration:500})},300)}return i},unreadCounter:function t(){return this.dialog.counter>999?999:this.dialog.counter},scrollBlocked:function t(){if(this.application.device.type!==n.DeviceType.mobile){return false}return this.scrollAnimating||this.captureMove},isDarkBackground:function t(){return this.application.options.darkBackground},isMobile:function t(){return this.application.device.type===n.DeviceType.mobile},AnimationType:function t(){return d}},s.Vuex.mapState({application:function t(e){return e.application}})),methods:{onDialogClick:function t(e){if(i.Vue.testNode(e.target,{className:"bx-im-message-command"})){this.onCommandClick(e)}else if(i.Vue.testNode(e.target,{className:"bx-im-mention"})){this.onMentionClick(e)}this.windowFocused=true;this.$emit("click",{event:e})},onDialogMove:function t(e){if(!this.captureMove){return}this.capturedMoveEvent=e},onCommandClick:function t(e){var i="";if(e.target.dataset.entity==="send"||e.target.dataset.entity==="put"){i=e.target.nextSibling.innerHTML}else if(e.target.dataset.entity==="call"){i=e.target.dataset.command}this.$emit("clickByCommand",{type:e.target.dataset.entity,value:i,event:e})},onMentionClick:function t(e){this.$emit("clickByMention",{type:e.target.dataset.type,value:e.target.dataset.value,event:e})},onScroll:function t(e){var i=this;clearTimeout(this.scrollToTimeout);this.scrollPosition=e.target.scrollTop;this.scrollPositionChangeTime=(new Date).getTime();this.scrollChangedByUser=!(e.target.scrollTop+this.scrollButtonDiff>=e.target.scrollHeight-e.target.clientHeight);clearTimeout(this.scrollButtonShowTimeout);this.scrollButtonShowTimeout=setTimeout(function(){if(i.scrollChangedByUser){if(!i.showScrollButton){i.showScrollButton=true}}else{if(i.showScrollButton&&!i.unreadLoaderShow){i.showScrollButton=false}}},200);if(e.target.scrollTop===e.target.scrollHeight-e.target.offsetHeight){clearTimeout(this.scrollButtonShowTimeout);if(this.showScrollButton&&!this.unreadLoaderShow){this.showScrollButton=false}}},scrollToBottom:function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var s=i.force,o=s===void 0?false:s,n=i.cancelIfScrollChange,a=n===void 0?false:n,r=i.duration,l=r===void 0?null:r;if(a&&this.scrollChangedByUser){return false}var c=this.$refs.body;if(this.dialog.counter>0){var u=this.dialog.counter>1&&this.firstUnreadMessageId?this.firstUnreadMessageId:this.lastMessageId;h.scrollToFirstUnreadMessage(this,this.collection,u);if(this.dialog.counter<this.startMessageLimit){this.historyLoaderShow=true;this.historyLoaderBlocked=false}return true}this.showScrollButton=false;if(o){h.scrollToPosition(this,c.scrollHeight-c.clientHeight);if(this.messageExtraCount){this.$store.commit("application/clearDialogExtraCount")}this.historyLoaderShow=true;this.historyLoaderBlocked=false}else{var d={};if(l){d.duration=l}this.scrollTo(babelHelpers.objectSpread({callback:function t(){if(e.messageExtraCount){e.$store.commit("application/clearDialogExtraCount")}e.historyLoaderShow=true;e.historyLoaderBlocked=false}},d))}},scrollTo:function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this.animateScrollId){r.Animation.cancel(this.animateScrollId);this.scrollAnimating=false}if(typeof i==="function"){i={callback:i}}var s=this.$refs.body;if(!s){if(i.callback&&typeof i.callback==="function"){i.callback()}this.animateScrollId=null;this.scrollAnimating=false;return true}if(a.Utils.platform.isIos()&&a.Utils.platform.getIosVersion()>12&&a.Utils.platform.getIosVersion()<13.2){s.scrollTop=s.scrollHeight-s.clientHeight;return true}var o=i,n=o.start,l=n===void 0?s.scrollTop:n,c=o.end,u=c===void 0?s.scrollHeight-s.clientHeight:c,d=o.increment,h=d===void 0?20:d,f=o.callback,g=o.duration,m=g===void 0?500:g;var p=this.$refs.container;if(p&&u-l>p.offsetHeight*3){l=u-p.offsetHeight*3;console.warn("Scroll trajectory has been reduced")}this.scrollAnimating=true;console.warn("User scroll blocked while scrolling");this.animateScrollId=r.Animation.start({start:l,end:u,increment:h,duration:m,element:s,elementProperty:"scrollTop",callback:function t(){e.animateScrollId=null;e.scrollAnimating=false;if(f&&typeof f==="function"){f()}}})},onScrollToBottom:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.force=e.force===true;e.cancelIfScrollChange=e.cancelIfScrollChange===true;if(this.firstUnreadMessageId){console.warn("onScrollToBottom canceled - unread messages");return false}this.scrollToBottom(e);return true},onOrientationChange:function t(){var e=this;clearTimeout(this.scrollToTimeout);if(this.application.device.type!==n.DeviceType.mobile){return false}console.log("Orientation changed");if(!this.scrollChangedByUser){this.scrollToTimeout=setTimeout(function(){return e.scrollToBottom({force:true})},300)}},onWindowFocus:function t(){this.windowFocused=true;this.readMessage();return true},onWindowBlur:function t(){this.windowFocused=false},requestHistory:function t(){var e=this;if(!this.requestHistoryBlockIntersect){return false}if(this.waitLoadHistory||!this.windowFocused||this.animateScrollId){this.requestHistoryDelayed();return false}if(this.scrollPositionChangeTime+100>(new Date).getTime()){this.requestHistoryDelayed();return true}this.waitLoadHistory=true;clearTimeout(this.waitLoadHistoryTimeout);this.waitLoadHistoryTimeout=setTimeout(function(){e.waitLoadHistory=false},1e4);var i=this.collection.length;var s=this.messageShowCount;if(i>s){var o=this.$refs.body.getElementsByClassName(n.DialogReferenceClassName.listItem)[0];this.$store.commit("application/increaseDialogExtraCount",{count:this.startMessageLimit});h.scrollToElementAfterLoadHistory(this,o);return true}this.$emit("requestHistory",{lastId:this.firstMessageId})},requestUnread:function t(){if(!this.requestUnreadBlockIntersect){return false}if(this.waitLoadUnread||!this.windowFocused||this.animateScrollId){this.requestUnreadDelayed();return false}if(this.scrollPositionChangeTime+10>(new Date).getTime()){this.requestUnreadDelayed();return true}this.waitLoadUnread=true;this.skipUnreadScroll=true;this.$emit("requestUnread",{lastId:this.lastMessageId})},onRequestHistoryAnswer:function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(i.error){this.historyLoaderBlocked=false}else{this.historyLoaderBlocked=i.count<this.startMessageLimit;this.$store.commit("application/increaseDialogExtraCount",{count:i.count})}if(this.historyLoaderBlocked){this.historyLoaderShow=false}var s=this.$refs.body.getElementsByClassName(n.DialogReferenceClassName.listItem)[0];if(i.count>0){if(s){h.scrollToElementAfterLoadHistory(this,s)}}else if(i.error){s.scrollIntoView(true)}else{h.scrollToPosition(this,0)}clearTimeout(this.waitLoadHistoryTimeout);this.waitLoadHistoryTimeout=setTimeout(function(){e.waitLoadHistory=false},1e3);return true},onRequestUnreadAnswer:function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(i.error){this.historyLoaderBlocked=false}else{if(i.count<this.startMessageLimit){this.unreadLoaderShow=false}this.$store.commit("application/increaseDialogExtraCount",{count:i.count})}var s=this.$refs.body;if(i.count>0);else if(i.error){var o=this.$refs.body.getElementsByClassName(n.DialogReferenceClassName.listUnreadLoader)[0];if(o){h.scrollToPosition(this,s.scrollTop-o.offsetHeight*2)}else{h.scrollToPosition(this,s.scrollHeight-s.clientHeight)}}else{h.scrollToPosition(this,s.scrollHeight-s.clientHeight)}setTimeout(function(){return e.waitLoadUnread=false},1e3);return true},onSendReadMessages:function t(){this.readMessageDelayed();return true},readMessage:function t(){var e=this;if(!this.windowFocused){return false}this.readMessageQueue=this.readMessageQueue.filter(function(t){if(e.readMessageTarget[t]){if(e.observers[c.read]){e.observers[c.read].unobserve(e.readMessageTarget[t])}delete e.readMessageTarget[t]}e.requestReadMessage(t);return false})},requestReadMessage:function t(e){this.$emit("readMessage",{id:e})},onClickByUserName:function t(e){if(!this.windowFocused){return false}this.$emit("clickByUserName",e)},onClickByUploadCancel:function t(e){if(!this.windowFocused){return false}this.$emit("clickByUploadCancel",e)},onClickByKeyboardButton:function t(e){if(!this.windowFocused){return false}this.$emit("clickByKeyboardButton",e)},onClickByChatTeaser:function t(e){this.$emit("clickByChatTeaser",e)},onClickByMessageMenu:function t(e){if(!this.windowFocused){return false}this.$emit("clickByMessageMenu",e)},onClickByMessageRetry:function t(e){if(!this.windowFocused){return false}this.$emit("clickByMessageRetry",e)},onClickByReadedList:function t(e){var i=this;var s=this.dialog.readedList.filter(function(t){return t.messageId===i.lastMessageId&&t.userId!==i.lastMessageAuthorId});this.$emit("clickByReadedList",{list:s,event:e})},onMessageReactionSet:function t(e){this.$emit("setMessageReaction",e)},onMessageReactionListOpen:function t(e){this.$emit("openMessageReactionList",e)},onDragMessage:function t(e){if(!this.windowFocused){return false}this.captureMove=e.result;if(!e.result){this.capturedMoveEvent=null}},onQuoteMessage:function t(e){if(!this.windowFocused){return false}this.$emit("quoteMessage",e)},_getDateFormat:function t(){var e=this;if(this.dateFormatFunction){return this.dateFormatFunction}this.dateFormatFunction=Object.create(BX.Main.Date);if(this.$root.$bitrixMessages){this.dateFormatFunction._getMessage=function(t){return e.$root.$bitrixMessages[t]}}return this.dateFormatFunction},_groupTitle:function t(e){var i=h.getDateFormat(e);if(this.cacheGroupTitle[i]){return{id:i,title:this.cacheGroupTitle[i]}}var s=a.Utils.date.getFormatType(BX.Messenger.Const.DateFormat.groupTitle,this.$root.$bitrixMessages);this.cacheGroupTitle[i]=this._getDateFormat().format(s,e);return{id:i,title:this.cacheGroupTitle[i]}},animationTrigger:function t(e,i,s){var o=this;var a=s.dataset.templateId;var r=s.dataset.type;var c=this.$refs.body;if(!c||!a){return false}if(i){if(!this.animationScrollHeightStart){this.animationScrollHeightStart=c.scrollHeight;this.animationScrollHeightEnd=c.scrollHeight;this.animationScrollTop=c.scrollTop;this.animationScrollChange=0;clearTimeout(this.scrollToTimeout);this.scrollChangedByUser=!(c.scrollTop+this.scrollButtonDiff>=c.scrollHeight-c.clientHeight);if(this.scrollChangedByUser&&!this.showScrollButton&&this.unreadCounter>1){this.showScrollButton=true}}}else{this.animationScrollHeightEnd=c.scrollHeight}if(!this.collectionMutationType.applied&&this.collectionMutationType.initialType!==n.MutationType.set){if(i){this.animationCollection.push(a)}else{this.animationCollection=this.animationCollection.filter(function(t){delete o.animationCollectionOffset[a];return t!==a})}this.animationStart();return false}if(!this.collectionMutationType.applied&&this.collectionMutationType.initialType===n.MutationType.set&&this.collectionMutationType.appliedType===n.MutationType.setBefore){var u=h.getFirstUnreadMessage(this.collection);if(u){h.scrollToFirstUnreadMessage(this,this.collection,u,true);return false}h.scrollToPosition(this,c.scrollHeight-c.clientHeight);if(i){this.animationCollection.push(a)}else{this.animationCollection=this.animationCollection.filter(function(t){delete o.animationCollectionOffset[a];return t!==a})}this.animationStart();return false}if(i){if(e===d.leave){this.animationCollectionOffset[a]=s.offsetHeight}if(this.animationType===d.none){this.animationType=e}else if(this.animationType!==e){this.animationType=d.mixed}this.animationCollection.push(a)}else{if(e===d.enter){var f=s.offsetHeight;this.animationScrollChange+=f;c.scrollTop+=f}else if(e===d.leave){var g=this.animationCollectionOffset[a]?this.animationCollectionOffset[a]:0;this.animationScrollChange-=g;c.scrollTop-=g;this.animationScrollLastIsDelimeter=r!==l.message}this.animationCollection=this.animationCollection.filter(function(t){delete o.animationCollectionOffset[a];return t!==a})}this.animationStart()},animationStart:function t(){var e=this;if(this.animationCollection.length>0){return false}var i=this.$refs.body;if(this.animationType===d.leave){var s=0;if(i.scrollTop!==this.animationScrollTop+this.animationScrollChange){s=this.animationScrollTop+this.animationScrollChange}else{s=i.scrollTop}if(!this.animationScrollLastIsDelimeter){s+=this.templateMessageWithNameDifferent}if(s!==i.scrollTop){h.scrollToPosition(this,s)}}else if(this.animationType===d.mixed){var o=h.getFirstUnreadMessage(this.collection);if(o){h.scrollToFirstUnreadMessage(this,this.collection,o,true)}}this.animationType=d.none;this.animationScrollHeightStart=0;this.animationScrollHeightEnd=0;this.animationScrollTop=0;this.animationScrollChange=0;if(h.scrollByMutationType(this)){return false}if(this.scrollChangedByUser){console.warn("Animation canceled: scroll changed by user");return false}if(this.unreadCounter>0&&this.firstUnreadMessageId){if(this.skipUnreadScroll){this.skipUnreadScroll=false;return}h.scrollToFirstUnreadMessage(this,this.collection,this.firstUnreadMessageId);return}this.scrollTo(function(){if(e.unreadCounter<=0&&e.messageExtraCount){e.$store.commit("application/clearDialogExtraCount")}})}},directives:{"bx-messenger-dialog-observer":{inserted:function t(e,i,s){if(i.value===c.none){return false}if(!s.context.observers[i.value]){s.context.observers[i.value]=h.getMessageLoaderObserver({type:i.value,context:s.context})}s.context.observers[i.value].observe(e);return true},unbind:function t(e,i,s){if(i.value===c.none){return true}if(s.context.observers[i.value]){s.context.observers[i.value].unobserve(e)}return true}}},template:'\n\t\t<div class="bx-im-dialog" @click="onDialogClick" @touchmove="onDialogMove" ref="container">\t\n\t\t\t<div :class="[DialogReferenceClassName.listBody, {\n\t\t\t\t\'bx-im-dialog-list-scroll-blocked\': scrollBlocked, \n\t\t\t\t\'bx-im-dialog-dark-background\': isDarkBackground,\n\t\t\t\t\'bx-im-dialog-mobile\': isMobile,\n\t\t\t}]" @scroll.passive="onScroll" ref="body">\n\t\t\t\t<template v-if="historyLoaderShow">\n\t\t\t\t\t<div class="bx-im-dialog-load-more bx-im-dialog-load-more-history" v-bx-messenger-dialog-observer="ObserverType.history">\n\t\t\t\t\t\t<span class="bx-im-dialog-load-more-text">{{ localize.IM_MESSENGER_DIALOG_LOAD_MESSAGES }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<transition-group \n\t\t\t\t\ttag="div" class="bx-im-dialog-list-box" name="bx-im-dialog-message-animation" \n\t\t\t\t\t@before-enter="animationTrigger(AnimationType.enter, true, $event)" \n\t\t\t\t\t@after-enter="animationTrigger(AnimationType.enter, false, $event)" \n\t\t\t\t\t@before-leave="animationTrigger(AnimationType.leave, true, $event)" \n\t\t\t\t\t@after-leave="animationTrigger(AnimationType.leave, false, $event)"\n\t\t\t\t>\n\t\t\t\t\t<template v-for="element in elementsWithLimit">\n\t\t\t\t\t\t<template v-if="element.templateType == TemplateType.message">\n\t\t\t\t\t\t\t<div :class="[\'bx-im-dialog-list-item\', DialogReferenceClassName.listItem, DialogReferenceClassName.listItem+\'-\'+element.id]" :data-message-id="element.id" :data-template-id="element.templateId" :data-type="element.templateType" :key="element.templateId" v-bx-messenger-dialog-observer="element.unread? ObserverType.read: ObserverType.none">\t\t\t\n\t\t\t\t\t\t\t\t<component :is="element.params.COMPONENT_ID"\n\t\t\t\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t\t\t\t:chatId="chatId"\n\t\t\t\t\t\t\t\t\t:dialog="dialog"\n\t\t\t\t\t\t\t\t\t:message="element"\n\t\t\t\t\t\t\t\t\t:enableReactions="enableReactions"\n\t\t\t\t\t\t\t\t\t:enableDateActions="enableDateActions"\n\t\t\t\t\t\t\t\t\t:enableCreateContent="showMessageMenu"\n\t\t\t\t\t\t\t\t\t:enableGestureQuote="enableGestureQuote"\n\t\t\t\t\t\t\t\t\t:enableGestureQuoteFromRight="enableGestureQuoteFromRight"\n\t\t\t\t\t\t\t\t\t:enableGestureMenu="enableGestureMenu"\n\t\t\t\t\t\t\t\t\t:showName="showMessageUserName"\n\t\t\t\t\t\t\t\t\t:showAvatar="showMessageAvatar"\n\t\t\t\t\t\t\t\t\t:showMenu="showMessageMenu"\n\t\t\t\t\t\t\t\t\t:capturedMoveEvent="capturedMoveEvent"\n\t\t\t\t\t\t\t\t\t:referenceContentClassName="DialogReferenceClassName.listItem"\n\t\t\t\t\t\t\t\t\t:referenceContentBodyClassName="DialogReferenceClassName.listItemBody"\n\t\t\t\t\t\t\t\t\t:referenceContentNameClassName="DialogReferenceClassName.listItemName"\n\t\t\t\t\t\t\t\t\t@clickByUserName="onClickByUserName"\n\t\t\t\t\t\t\t\t\t@clickByUploadCancel="onClickByUploadCancel"\n\t\t\t\t\t\t\t\t\t@clickByKeyboardButton="onClickByKeyboardButton"\n\t\t\t\t\t\t\t\t\t@clickByChatTeaser="onClickByChatTeaser"\n\t\t\t\t\t\t\t\t\t@clickByMessageMenu="onClickByMessageMenu"\n\t\t\t\t\t\t\t\t\t@clickByMessageRetry="onClickByMessageRetry"\n\t\t\t\t\t\t\t\t\t@setMessageReaction="onMessageReactionSet"\n\t\t\t\t\t\t\t\t\t@openMessageReactionList="onMessageReactionListOpen"\n\t\t\t\t\t\t\t\t\t@dragMessage="onDragMessage"\n\t\t\t\t\t\t\t\t\t@quoteMessage="onQuoteMessage"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if="element.templateType == TemplateType.group">\n\t\t\t\t\t\t\t<div class="bx-im-dialog-group" :data-template-id="element.templateId" :data-type="element.templateType" :key="element.templateId">\n\t\t\t\t\t\t\t\t<div class="bx-im-dialog-group-date">{{ element.text }}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if="element.templateType == TemplateType.delimiter">\n\t\t\t\t\t\t\t<div class="bx-im-dialog-delimiter" :data-template-id="element.templateId" :data-type="element.templateType" :key="element.templateId"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</transition-group>\n\t\t\t\t<template v-if="unreadLoaderShow">\n\t\t\t\t\t<div :class="[\'bx-im-dialog-load-more\', \'bx-im-dialog-load-more-unread\', DialogReferenceClassName.listUnreadLoader]" v-bx-messenger-dialog-observer="ObserverType.unread">\n\t\t\t\t\t\t<span class="bx-im-dialog-load-more-text">{{ localize.IM_MESSENGER_DIALOG_LOAD_MESSAGES }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<transition name="bx-im-dialog-status">\n\t\t\t\t\t<template v-if="statusWriting">\n\t\t\t\t\t\t<div class="bx-im-dialog-status">\n\t\t\t\t\t\t\t<span class="bx-im-dialog-status-writing"></span>\n\t\t\t\t\t\t\t{{ statusWriting }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="statusReaded">\n\t\t\t\t\t\t<div class="bx-im-dialog-status" @click="onClickByReadedList">\n\t\t\t\t\t\t\t{{ statusReaded }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t\t<transition name="bx-im-dialog-scroll-button">\n\t\t\t\t<div v-show="showScrollButton || unreadLoaderShow && unreadCounter" class="bx-im-dialog-scroll-button-box" @click="scrollToBottom()">\n\t\t\t\t\t<div class="bx-im-dialog-scroll-button">\n\t\t\t\t\t\t<div v-show="unreadCounter" class="bx-im-dialog-scroll-button-counter">\n\t\t\t\t\t\t\t<div class="bx-im-dialog-scroll-button-counter-digit">{{unreadCounter}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-dialog-scroll-button-arrow"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t'});var h={getDateFormat:function t(e){return e.toJSON().slice(0,10)},scrollToMessage:function t(e,i){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var r=e.$refs.body;var l=r.getElementsByClassName(n.DialogReferenceClassName.listItem+"-"+s)[0];var c=0;if(!l){if(a){c=10}else{c=r.scrollHeight-r.clientHeight}}else if(a){c=l.offsetTop-e.templateMessageScrollOffset/2}else{c=l.offsetTop+l.offsetHeight-r.clientHeight+e.templateMessageScrollOffset/2}if(o){this.scrollToPosition(e,c)}else{e.scrollTo({end:c})}return true},getFirstUnreadMessage:function t(e){var i=null;for(var s=e.length-1;s>=0;s--){if(!e[s].unread){break}i=e[s].id}return i},scrollToPosition:function t(e,i){var s=e.$refs.body;if(!s){return false}if(e.animateScrollId){r.Animation.cancel(e.animateScrollId);this.scrollAnimating=false;e.animateScrollId=null}s.scrollTop=i},scrollByMutationType:function t(e){if(e.collectionMutationType.applied||e.collectionMutationType.initialType!==n.MutationType.set){return false}e.$store.dispatch("messages/applyMutationType",{chatId:e.chatId});if(e.collectionMutationType.appliedType===n.MutationType.setBefore){var i=e.$refs.body;this.scrollToPosition(e,i.scrollHeight-i.clientHeight);return true}if(e.collectionMutationType.scrollMessageId>0){var s=h.getFirstUnreadMessage(e.collection);var o=e.collectionMutationType.scrollMessageId;var a=!e.collectionMutationType.scrollStickToTop;var r=e.collectionMutationType.scrollStickToTop;if(s&&o>s){r=true;a=true;o=s;s=null}h.scrollToMessage(e,e.collection,o,a,r);if(s){h.scrollToMessage(e,e.collection,s);return true}}return false},scrollToFirstUnreadMessage:function t(e,i){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var a=e.$refs.body;var r=false;if(s!==null){r=a.getElementsByClassName(n.DialogReferenceClassName.listItem+"-"+s)[0]}if(!r){s=this.getFirstUnreadMessage(i)}this.scrollToMessage(e,i,s,o)},scrollToElementAfterLoadHistory:function t(e,i){var s=this;var o=i.getElementsByClassName(n.DialogReferenceClassName.listItemBody)[0];if(o){i=o}var a=i.getBoundingClientRect().top;e.$nextTick(function(){clearTimeout(e.waitLoadHistoryTimeout);e.waitLoadHistoryTimeout=setTimeout(function(){e.waitLoadHistory=false},1e3);if(!i){return false}s.scrollToPosition(e,i.getBoundingClientRect().top-a)})},scrollToElementAfterLoadUnread:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;e.showScrollButton=true;if(i){this.scrollToMessage(e,e.collection,i,false,false)}},getMessageLoaderObserver:function t(e){if(typeof window.IntersectionObserver==="undefined"||e.value===c.none){return{observe:function t(){},unobserve:function t(){}}}var i,s;if(e.type===c.read){i=function t(i,s){i.forEach(function(t){var i=false;if(t.isIntersecting){if(t.intersectionRatio>=1){i=true}else if(t.intersectionRatio>0&&t.rootBounds.height<t.boundingClientRect.height+20&&t.intersectionRect.height>t.rootBounds.height/2){i=true}}if(i){e.context.readMessageQueue.push(t.target.dataset.messageId);e.context.readMessageTarget[t.target.dataset.messageId]=t.target}else{e.context.readMessageQueue=e.context.readMessageQueue.filter(function(e){return e!==t.target.dataset.messageId});delete e.context.readMessageTarget[t.target.dataset.messageId]}if(e.context.enableReadMessages){e.context.readMessageDelayed()}})};s={root:e.context.$refs.body,threshold:new Array(101).fill(0).map(function(t,e){return e*.01})}}else{i=function t(i,s){i.forEach(function(t){if(t.isIntersecting){if(e.type===c.unread){e.context.requestUnreadBlockIntersect=true;e.context.requestUnreadDelayed()}else{e.context.requestHistoryBlockIntersect=true;e.context.requestHistoryDelayed()}}else{if(e.type===c.unread){e.context.requestUnreadBlockIntersect=false}else{e.context.requestHistoryBlockIntersect=false}}})};s={root:e.context.$refs.body,threshold:[0,.01,.99,1]}}return new IntersectionObserver(i,s)}};var f={getDelimiter:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return{templateId:"delimiter"+e,templateType:l.delimiter}},getGroup:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";return{templateId:"group"+e,templateType:l.group,text:i}},getHistoryLoader:function t(){return{templateId:"historyLoader",templateType:l.historyLoader}},getUnreadLoader:function t(){return{templateId:"unreadLoader",templateType:l.unreadLoader}},getLoadButton:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:u.before;return{templateId:"loadButton"+e+s,templateType:l.button,text:i,type:s,messageId:e}}}})(this.window=this.window||{},BX,BX,BX,window,BX.Messenger.Const,BX.Messenger,BX.Messenger);
 



// file: /bitrix/js/im/tools/localstorage/dist/localstorage.bundle.js
this.BX=this.BX||{};(function(e){"use strict";var t=function(){function e(){babelHelpers.classCallCheck(this,e);this.enabled=null;this.expireList=null;this.expireInterval=null}babelHelpers.createClass(e,[{key:"isEnabled",value:function e(){if(this.enabled!==null){return this.enabled}this.enabled=false;if(typeof window.localStorage!=="undefined"){try{window.localStorage.setItem("__bx_test_ls_feature__","ok");if(window.localStorage.getItem("__bx_test_ls_feature__")==="ok"){window.localStorage.removeItem("__bx_test_ls_feature__");this.enabled=true}}catch(e){}}if(this.enabled&&!this.expireInterval){try{var t=window.localStorage.getItem("bx-messenger-localstorage-expire");if(t){this.expireList=JSON.parse(t)}}catch(e){}clearInterval(this.expireInterval);this.expireInterval=setInterval(this._checkExpireInterval.bind(this),6e4)}return this.enabled}},{key:"set",value:function e(t,i,r,n){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(!this.isEnabled()){return false}var l=null;if(s){l=new Date((new Date).getTime()+s*1e3)}var a=JSON.stringify({value:n,expire:l});if(window.localStorage.getItem(this._getKey(t,i,r))!==a){window.localStorage.setItem(this._getKey(t,i,r),a)}if(s){if(!this.expireList){this.expireList={}}this.expireList[this._getKey(t,i,r)]=l;window.localStorage.setItem("bx-messenger-localstorage-expire",JSON.stringify(this.expireList))}return true}},{key:"get",value:function e(t,i,r,n){if(!this.isEnabled()){return typeof n!=="undefined"?n:null}var s=window.localStorage.getItem(this._getKey(t,i,r));if(s===null){return typeof n!=="undefined"?n:null}try{s=JSON.parse(s);if(s&&typeof s.value!=="undefined"){if(!s.expire||new Date(s.expire)>new Date){s=s.value}else{window.localStorage.removeItem(this._getKey(t,i,r));if(this.expireList){delete this.expireList[this._getKey(t,i,r)]}return typeof n!=="undefined"?n:null}}else{return typeof n!=="undefined"?n:null}}catch(e){return typeof n!=="undefined"?n:null}return s}},{key:"remove",value:function e(t,i,r){if(!this.isEnabled()){return false}if(this.expireList){delete this.expireList[this._getKey(t,i,r)]}return window.localStorage.removeItem(this._getKey(t,i,r))}},{key:"_getKey",value:function e(t,i,r){return"bx-messenger-"+t+"-"+i+"-"+r}},{key:"_checkExpireInterval",value:function e(){if(!this.expireList)return true;var t=new Date;var i=0;for(var r in this.expireList){if(!this.expireList.hasOwnProperty(r)){continue}if(new Date(this.expireList[r])<=t){window.localStorage.removeItem(r);delete this.expireList[r]}else{i++}}if(i){window.localStorage.setItem("bx-messenger-localstorage-expire",JSON.stringify(this.expireList))}else{this.expireList=null;window.localStorage.removeItem("bx-messenger-localstorage-expire")}return true}}]);return e}();var i=new t;e.LocalStorage=i})(this.BX.Messenger=this.BX.Messenger||{});
 



// file: /bitrix/js/im/component/textarea/dist/textarea.bundle.js
(function(e,t,s,i){"use strict";t.Vue.component("bx-messenger-textarea",{props:{siteId:{default:"default"},userId:{default:0},dialogId:{default:0},enableCommand:{default:true},enableMention:{default:true},desktopMode:{default:false},enableEdit:{default:false},enableFile:{default:false},sendByEnter:{default:true},autoFocus:{default:null},writesEventLetter:{default:0},styles:{type:Object,default:function e(){return{}}},listenEventInsertText:{default:""},listenEventFocus:{default:""},listenEventBlur:{default:""}},data:function e(){return{placeholderMessage:"",currentMessage:"",previousMessage:"",commandListen:false,mentionListen:false,stylesDefault:Object.freeze({button:{backgroundColor:null,iconColor:null}})}},created:function e(){if(this.listenEventInsertText){t.Vue.event.$on(this.listenEventInsertText,this.onInsertText);this.$root.$on(this.listenEventInsertText,this.onInsertText)}if(this.listenEventFocus){t.Vue.event.$on(this.listenEventFocus,this.onFocusSet);this.$root.$on(this.listenEventFocus,this.onFocusSet)}if(this.listenEventBlur){t.Vue.event.$on(this.listenEventBlur,this.onFocusClear);this.$root.$on(this.listenEventBlur,this.onFocusClear)}this.localStorage=s.LocalStorage;this.textareaHistory=this.localStorage.get(this.siteId,this.userId,"textarea-history",{});this.currentMessage=this.textareaHistory[this.dialogId]||"";this.placeholderMessage=this.currentMessage},beforeDestroy:function e(){if(this.listenEventInsertText){t.Vue.event.$off(this.listenEventInsertText,this.onInsertText);this.$root.$off(this.listenEventInsertText,this.onInsertText)}if(this.listenEventFocus){t.Vue.event.$off(this.listenEventFocus,this.onFocusSet);this.$root.$off(this.listenEventFocus,this.onFocusSet)}if(this.listenEventBlur){t.Vue.event.$off(this.listenEventBlur,this.onFocusClear);this.$root.$off(this.listenEventBlur,this.onFocusClear)}clearTimeout(this.messageStoreTimeout);this.localStorage.set(this.siteId,this.userId,"textarea-history",this.textareaHistory);this.localStorage=null},computed:{textareaClassName:function e(){return"bx-im-textarea"+(i.Utils.device.isMobile()?" bx-im-textarea-mobile":"")},buttonStyle:function e(){var t=Object.assign({},this.stylesDefault,this.styles);var s=false;if(t.button.iconColor){s=i.Utils.isDarkColor(t.button.iconColor)}else{s=!i.Utils.isDarkColor(t.button.backgroundColor)}t.button.className=s?"bx-im-textarea-send-button":"bx-im-textarea-send-button bx-im-textarea-send-button-bright-arrow";t.button.style=t.button.backgroundColor?"background-color: "+t.button.backgroundColor+";":"";return t},localize:function e(){return t.Vue.getFilteredPhrases("BX_MESSENGER_TEXTAREA_",this.$root.$bitrixMessages)}},directives:{"bx-im-focus":{inserted:function e(t,s){if(s.value===true||s.value===null&&!i.Utils.device.isMobile()){t.focus()}}}},methods:{insertText:function e(t){var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"current";var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"after";var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=this.$refs.textarea;var l=o.selectionStart;var r=o.selectionEnd;if(i=="start"){if(s){t=t+"\n"}o.value=t+o.value;if(a){if(n=="after"){o.selectionStart=t.length;o.selectionEnd=o.selectionStart}else if(n=="before"){o.selectionStart=0;o.selectionEnd=o.selectionStart}}}else if(i=="current"){if(s){if(o.value.substring(0,l).trim().length>0){t="\n"+t}t=t+"\n"}o.value=o.value.substring(0,l)+t+o.value.substring(r,o.value.length);if(a){if(n=="after"){o.selectionStart=l+t.length;o.selectionEnd=o.selectionStart}else if(n=="before"){o.selectionStart=l;o.selectionEnd=o.selectionStart}}}else if(i=="end"){if(s){if(o.value.substring(0,l).trim().length>0){t="\n"+t}t=t+"\n"}o.value=o.value+t;if(a){if(n=="after"){o.selectionStart=o.value.length;o.selectionEnd=o.selectionStart}else if(n=="before"){o.selectionStart=o.value.length-t.length;o.selectionEnd=o.selectionStart}}}if(a){if(n=="start"){o.selectionStart=0;o.selectionEnd=0}else if(n=="end"){o.selectionStart=o.value.length;o.selectionEnd=o.selectionStart}o.focus()}this.textChangeEvent()},sendMessage:function e(){this.$emit("send",{text:this.currentMessage.trim()});var t=this.$refs.textarea;if(t){t.value=""}if(this.autoFocus===null||this.autoFocus){t.focus()}this.textChangeEvent()},textChangeEvent:function e(){var t=this;var s=this.$refs.textarea;if(!s){return}var i=s.value.trim();if(this.currentMessage===i){return}if(this.writesEventLetter<=i.length){this.$emit("writes",{text:i})}this.previousMessage=this.currentMessage;this.previousSelectionStart=s.selectionStart;this.previousSelectionEnd=this.previousSelectionStart;this.currentMessage=i;if(i.toString().length>0){this.textareaHistory[this.dialogId]=i}else{delete this.textareaHistory[this.dialogId]}clearTimeout(this.messageStoreTimeout);this.messageStoreTimeout=setTimeout(function(){t.localStorage.set(t.siteId,t.userId,"textarea-history",t.textareaHistory,t.userId?0:10)},500)},onKeyDown:function e(t){this.$emit("keydown",t);var s=t.target;var n=s.value.trim();var a=i.Utils.platform.isMac();var o=i.Utils.platform.isBitrixDesktop()||!i.Utils.browser.isChrome();if(this.commandListen);else if(this.mentionListen);else if(!(t.altKey&&t.ctrlKey)){if(this.enableMention&&t.shiftKey&&(t.keyCode==61||t.keyCode==50||t.keyCode==187||t.keyCode==187)||t.keyCode==107);else if(this.enableCommand&&(t.keyCode==191||t.keyCode==111||t.keyCode==220));}if(t.keyCode==27){if(s.value!=""&&s===document.activeElement){t.preventDefault();t.stopPropagation()}if(t.shiftKey){s.value=""}}else if(t.metaKey||t.ctrlKey){if(o&&t.key==="t"||!o&&t.key==="e"){t.preventDefault()}else if(["b","s","i","u"].includes(t.key)){var l=s.selectionStart;var r=s.selectionEnd;var u="["+t.key.toLowerCase()+"]";var c="[/"+t.key.toLowerCase()+"]";var f=s.value.substring(l,r);if(f.startsWith(u)&&f.endsWith(c)){f=f.substring(u.length,f.indexOf(c))}else{f=u+f+c}s.value=s.value.substring(0,l)+f+s.value.substring(r,s.value.length);s.selectionStart=l;s.selectionEnd=l+f.length;t.preventDefault()}}if(t.keyCode==9){this.insertText("\t");t.preventDefault()}else if(this.enableEdit&&t.keyCode==38&&n.length<=0){this.$emit("edit",{})}else if(t.keyCode==13){if(i.Utils.device.isMobile());else if(this.sendByEnter==true){if(t.ctrlKey||t.altKey||t.shiftKey){if(!t.shiftKey){this.insertText("\n")}}else if(n.length<=0){t.preventDefault()}else{this.sendMessage();t.preventDefault()}}else{if(t.ctrlKey==true){this.sendMessage();t.preventDefault()}else if(a&&(t.metaKey==true||t.altKey==true)){this.sendMessage();t.preventDefault()}}}else if((t.ctrlKey||t.metaKey)&&t.key=="z"){if(this.previousMessage){s.value=this.previousMessage;s.selectionStart=this.previousSelectionStart;s.selectionEnd=this.previousSelectionEnd;this.previousMessage="";t.preventDefault()}}},onKeyUp:function e(t){this.$emit("keyup",t);this.textChangeEvent()},onPaste:function e(t){this.$nextTick(this.textChangeEvent)},onInput:function e(t){this.textChangeEvent()},onFocus:function e(t){this.$emit("focus",t)},onBlur:function e(t){this.$emit("blur",t)},onAppButtonClick:function e(t,s){this.$emit("appButtonClick",{appId:t,event:s})},onInsertText:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!t.text){return false}this.insertText(t.text,t.breakline,t.position,t.cursor,t.focus);return true},onFocusSet:function e(){this.$refs.textarea.focus();return true},onFocusClear:function e(){this.$refs.textarea.blur();return true},onFileClick:function e(t){t.target.value=""},onFileSelect:function e(t){this.$emit("fileSelected",{fileInput:t.target})}},template:'\n\t\t<div :class="textareaClassName">\n\t\t\t<div class="bx-im-textarea-box">\n\t\t\t\t<textarea ref="textarea" class="bx-im-textarea-input" @keydown="onKeyDown" @keyup="onKeyUp" @paste="onPaste" @input="onInput" @focus="onFocus" @blur="onBlur" v-bx-im-focus="autoFocus" :placeholder="localize.BX_MESSENGER_TEXTAREA_PLACEHOLDER">{{placeholderMessage}}</textarea>\n\t\t\t\t<transition enter-active-class="bx-im-textarea-send-button-show" leave-active-class="bx-im-textarea-send-button-hide">\n\t\t\t\t\t<button v-if="currentMessage" :class="buttonStyle.button.className" :style="buttonStyle.button.style" @click="sendMessage" :title="localize.BX_MESSENGER_TEXTAREA_BUTTON_SEND"></button>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t\t<div class="bx-im-textarea-app-box">\n\t\t\t\t<label v-if="enableFile" class="bx-im-textarea-app-button bx-im-textarea-app-file" :title="localize.BX_MESSENGER_TEXTAREA_FILE"><input type="file" @click="onFileClick($event)" @change="onFileSelect($event)"></label>\n\t\t\t\t<button class="bx-im-textarea-app-button bx-im-textarea-app-smile" :title="localize.BX_MESSENGER_TEXTAREA_SMILE" @click="onAppButtonClick(\'smile\', $event)"></button>\n\t\t\t\t<button v-if="false" class="bx-im-textarea-app-button bx-im-textarea-app-gif" :title="localize.BX_MESSENGER_TEXTAREA_GIPHY" @click="onAppButtonClick(\'giphy\', $event)"></button>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX.Messenger,BX.Messenger);
 



// file: /bitrix/js/im/component/quotepanel/dist/quotepanel.bundle.js
(function(t,e){"use strict";e.Vue.component("bx-messenger-quote-panel",{props:{id:{default:0},title:{default:""},description:{default:""},color:{default:""},canClose:{default:true}},methods:{close:function t(e){this.$emit("close",e)}},computed:{formattedTittle:function t(){return this.title?this.title.substr(0,255):this.localize.IM_QUOTE_PANEL_DEFAULT_TITLE},formattedDescription:function t(){return this.description?this.description.substr(0,255):""},localize:function t(){return e.Vue.getFilteredPhrases("IM_QUOTE_PANEL_",this.$root.$bitrixMessages)}},template:'\n\t\t<transition enter-active-class="bx-im-quote-panel-animation-show" leave-active-class="bx-im-quote-panel-animation-close">\t\t\t\t\n\t\t\t<div v-if="id > 0" class="bx-im-quote-panel">\n\t\t\t\t<div class="bx-im-quote-panel-wrap">\n\t\t\t\t\t<div class="bx-im-quote-panel-box" :style="{borderLeftColor: color}">\n\t\t\t\t\t\t<div class="bx-im-quote-panel-box-title" :style="{color: color}">{{formattedTittle}}</div>\n\t\t\t\t\t\t<div class="bx-im-quote-panel-box-desc">{{formattedDescription}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="canClose" class="bx-im-quote-panel-close" @click="close"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t'})})(this.window=this.window||{},BX);
 



// file: /bitrix/js/imopenlines/component/message/dist/message.bundle.js
(function(e){"use strict";var s=Object.freeze({none:"none",like:"like",welcome:"welcome",offline:"offline",history:"history"});var i=Object.freeze({none:"none",like:"like",dislike:"dislike"});BX.Vue.cloneComponent("bx-imopenlines-message","bx-messenger-message",{methods:{checkFormShow:function e(){if(!this.message.params||!this.message.params.IMOL_FORM){return true}if(this.message.params.IMOL_FORM==="welcome"){if(!this.widget.dialog.sessionClose&&!this.widget.user.name&&!this.widget.user.lastName&&!this.widget.user.email&&!this.widget.user.phone){this.$root.$emit("requestShowForm",{type:s.welcome,delayed:true})}}else if(this.message.params.IMOL_FORM==="offline"){if(!this.widget.dialog.sessionClose&&!this.widget.user.email){this.$root.$emit("requestShowForm",{type:s.offline,delayed:true})}}else if(this.message.params.IMOL_FORM==="history-delay"){if(parseInt(this.message.params.IMOL_VOTE)===this.widget.dialog.sessionId&&this.widget.dialog.userVote===i.none){this.$root.$emit("requestShowForm",{type:s.like,delayed:true})}}}},created:function e(){this.checkFormShow()},computed:babelHelpers.objectSpread({dialogNumber:function e(){if(!this.message.params){return false}if(!this.message.params.IMOL_SID){return false}return this.localize.IMOL_MESSAGE_DIALOG_ID.replace("#ID#",this.message.params.IMOL_SID)},localize:function e(){return Object.freeze(Object.assign({},this.parentLocalize,BX.Vue.getFilteredPhrases("IMOL_MESSAGE_",this.$root.$bitrixMessages)))},showMessage:function e(){if(!this.message.params){return true}if(this.message.params.IMOL_FORM&&this.message.params.IMOL_FORM==="history-delay"){return false}return true}},BX.Vuex.mapState({widget:function e(s){return s.widget}})),template:'\n\t\t<div v-if="showMessage" class="bx-imopenlines-message">\n\t\t\t<div v-if="dialogNumber" class="bx-imopenlines-message-dialog-number">{{dialogNumber}}</div>\n\t\t\t#PARENT_TEMPLATE#\n\t\t</div>\n\t'})})(this.window=this.window||{});
 



// file: /bitrix/js/im/tools/timer/dist/timer.bundle.js
this.BX=this.BX||{};(function(t){"use strict";var e=function(){function t(){babelHelpers.classCallCheck(this,t);this.list={};this.updateInterval=1e3;clearInterval(this.updateIntervalId);this.updateIntervalId=setInterval(this.worker.bind(this),this.updateInterval)}babelHelpers.createClass(t,[{key:"start",value:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var l=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};i=i==null?"default":i;n=parseFloat(n);if(isNaN(n)||n<=0){return false}n=n*1e3;if(typeof this.list[e]==="undefined"){this.list[e]={}}this.list[e][i]={dateStop:(new Date).getTime()+n,callback:typeof s==="function"?s:function(){},callbackParams:l};return true}},{key:"has",value:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";i=i==null?"default":i;if(i.toString().length<=0||typeof this.list[e]==="undefined"){return false}return!!this.list[e][i]}},{key:"stop",value:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";var n=arguments.length>2?arguments[2]:undefined;i=i==null?"default":i;if(i.toString().length<=0||typeof this.list[e]==="undefined"){return false}if(!this.list[e][i]){return true}if(n!==true){this.list[e][i]["callback"](i,this.list[e][i]["callbackParams"])}delete this.list[e][i];return true}},{key:"stopAll",value:function t(e){for(var i in this.list){if(this.list.hasOwnProperty(i)){for(var n in this.list[i]){if(this.list[i].hasOwnProperty(n)){this.stop(i,n,e)}}}}return true}},{key:"worker",value:function t(){for(var e in this.list){if(!this.list.hasOwnProperty(e)){continue}for(var i in this.list[e]){if(!this.list[e].hasOwnProperty(i)||this.list[e][i]["dateStop"]>new Date){continue}this.stop(e,i)}}return true}},{key:"clean",value:function t(){clearInterval(this.updateIntervalId);this.stopAll(true);return true}}]);return t}();t.Timer=e})(this.BX.Messenger=this.BX.Messenger||{});
 



// file: /bitrix/js/im/controller/dist/registry.bundle.js
this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,i,s){"use strict";var a=function(){function e(){babelHelpers.classCallCheck(this,e);this.store=null;this.restClient=null;this.templateEngine=null;this.timer=new t.Timer;this._prepareFilesBeforeSave=function(e){return e};this.defaultMessageLimit=20;this.requestMessageLimit=this.getDefaultMessageLimit();this.messageLastReadId={};this.messageReadQueue={}}babelHelpers.createClass(e,[{key:"setTemplateEngine",value:function e(t){this.templateEngine=t}},{key:"setRestClient",value:function e(t){this.restClient=t}},{key:"setStore",value:function e(t){this.store=t}},{key:"getSiteId",value:function e(){return this.store.state.application.common.siteId}},{key:"getUserId",value:function e(){return this.store.state.application.common.userId}},{key:"getLanguageId",value:function e(){return this.store.state.application.common.languageId}},{key:"getCurrentUser",value:function e(){return this.store.getters["users/get"](this.store.state.application.common.userId,true)}},{key:"getChatId",value:function e(){return this.store.state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.store.state.application.dialog.dialogId}},{key:"getDialogData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();if(this.store.state.dialogues.collection[t]){return this.store.state.dialogues.collection[t]}return this.store.getters["dialogues/getBlank"]()}},{key:"getDialogCrmData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();var s={enabled:false,entityType:i.DialogCrmType.none,entityId:0};var a=this.getDialogData(t);if(a.type===i.DialogType.call){if(a.entityData1&&typeof a.entityData1==="string"){var n=a.entityData1.split("|"),r=babelHelpers.slicedToArray(n,3),u=r[0],o=r[1],d=r[2];if(u){o=o?o.toString().toLowerCase():i.DialogCrmType.none;s={enabled:u,entityType:o,entityId:d}}}}else if(a.type===i.DialogType.crm){var l=a.entityId.split("|"),g=babelHelpers.slicedToArray(l,2),h=g[0],f=g[1];h=h?h.toString().toLowerCase():i.DialogCrmType.none;s={enabled:true,entityType:h,entityId:f}}return s}},{key:"getDialogIdByChatId",value:function e(t){if(this.getDialogId()==="chat"+t){return this.getDialogId()}var i=this.store.getters["dialogues/getByChatId"](t);if(!i){return 0}return i.dialogId}},{key:"getDiskFolderId",value:function e(){return this.store.state.application.dialog.diskFolderId}},{key:"getMessageLimit",value:function e(){return this.store.state.application.dialog.messageLimit}},{key:"getDefaultMessageLimit",value:function e(){return this.defaultMessageLimit}},{key:"getRequestMessageLimit",value:function e(){return this.requestMessageLimit}},{key:"emit",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.templateEngine.$emit(t,i);return true}},{key:"listen",value:function e(t,i){if(typeof i!=="function"){return false}this.templateEngine.$on(t,i);return true}},{key:"getReadedList",value:function e(){var t=this.store.state.dialogues.collection[this.getDialogId()];if(!t){return[]}return t.readedList}},{key:"muteDialog",value:function e(){var t=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.getDialogId();if(s.Utils.dialog.isEmptyDialogId(n)){return false}if(a===null){a=!this.isDialogMuted()}this.timer.start("muteDialog",n,.3,function(e){t.restClient.callMethod(i.RestMethod.imChatMute,{DIALOG_ID:n,ACTION:a?"Y":"N"})});var r=[];if(a){r=this.getDialogData().muteList;r.push(this.getUserId())}else{r=this.getDialogData().muteList.filter(function(e){return e!==t.getUserId()})}this.store.dispatch("dialogues/update",{dialogId:n,fields:{muteList:r}});return true}},{key:"isDialogMuted",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();return this.getDialogData().muteList.includes(this.getUserId())}},{key:"isUnreadMessagesLoaded",value:function e(){var t=this.store.state.dialogues.collection[this.getDialogId()];if(!t){return true}if(t.unreadLastId<=0){return true}var i=this.store.state.messages.collection[this.getChatId()];if(!i||i.length<=0){return true}var s=0;for(var a=i.length-1;a>=0;a--){var n=i[a];if(typeof n.id==="number"){s=n.id;break}}return s>=t.unreadLastId}},{key:"prepareFilesBeforeSave",value:function e(t){return this._prepareFilesBeforeSave(t)}},{key:"setPrepareFilesBeforeSaveFunction",value:function e(t){this._prepareFilesBeforeSave=t.bind(this)}},{key:"startOpponentWriting",value:function e(t){var i=this;var s=t.dialogId,a=t.userId,n=t.userName;this.store.dispatch("dialogues/updateWriting",{dialogId:s,userId:a,userName:n,action:true});this.timer.start("writingEnd",s+"|"+a,35,function(e,t){var s=t.dialogId,a=t.userId;i.store.dispatch("dialogues/updateWriting",{dialogId:s,userId:a,action:false})},{dialogId:s,userId:a});return true}},{key:"stopOpponentWriting",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=t.dialogId,s=t.userId,a=t.userName;this.timer.stop("writingStart",i+"|"+s,true);this.timer.stop("writingEnd",i+"|"+s);return true}},{key:"startWriting",value:function e(){var t=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();if(s.Utils.dialog.isEmptyDialogId(a)||this.timer.has("writes",a)){return false}this.timer.start("writes",a,28);this.timer.start("writesSend",a,5,function(e){t.restClient.callMethod(i.RestMethod.imDialogWriting,{DIALOG_ID:a}).catch(function(){t.timer.stop("writes",a)})})}},{key:"stopWriting",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();this.timer.stop("writes",t,true);this.timer.stop("writesSend",t,true)}},{key:"joinParentChat",value:function e(t,s){var a=this;return new Promise(function(e,n){if(!t||!s){return n()}if(typeof a.tempJoinChat==="undefined"){a.tempJoinChat={}}else if(a.tempJoinChat["wait"]){return n()}a.tempJoinChat["wait"]=true;a.restClient.callMethod(i.RestMethod.imChatParentJoin,{DIALOG_ID:s,MESSAGE_ID:t}).then(function(){a.tempJoinChat["wait"]=false;a.tempJoinChat[s]=true;return e(s)}).catch(function(){a.tempJoinChat["wait"]=false;return n()})})}},{key:"setTextareaMessage",value:function e(t){var i=t.message,s=i===void 0?"":i,a=t.dialogId,n=a===void 0?this.getDialogId():a;this.store.dispatch("dialogues/update",{dialogId:n,fields:{textareaMessage:s}})}},{key:"setSendingMessageFlag",value:function e(t){this.store.dispatch("messages/actionStart",{id:t,chatId:this.getChatId()})}},{key:"reactMessage",value:function e(t){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"auto";this.restClient.callMethod(i.RestMethod.imMessageLike,{MESSAGE_ID:t,ACTION:s==="auto"?"auto":s==="set"?"plus":"minus"})}},{key:"readMessage",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=this.getChatId();if(typeof this.messageLastReadId[n]==="undefined"){this.messageLastReadId[n]=null}if(typeof this.messageReadQueue[n]==="undefined"){this.messageReadQueue[n]=[]}if(i){this.messageReadQueue[n].push(parseInt(i))}this.timer.stop("readMessage",n,true);this.timer.stop("readMessageServer",n,true);if(s){return this.readMessageExecute(n,a)}return new Promise(function(e,i){t.timer.start("readMessage",n,.1,function(i,s){return t.readMessageExecute(i,a).then(function(t){return e(t)})})})}},{key:"readMessageExecute",value:function e(t){var s=this;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise(function(e,n){if(s.messageReadQueue[t]){s.messageReadQueue[t]=s.messageReadQueue[t].filter(function(e){if(!s.messageLastReadId[t]){s.messageLastReadId[t]=e}else if(s.messageLastReadId[t]<e){s.messageLastReadId[t]=e}})}var r=s.getDialogIdByChatId(t);var u=s.messageLastReadId[t]||0;if(u<=0){e({dialogId:r,lastId:0});return true}s.store.dispatch("messages/readMessages",{chatId:t,readId:u}).then(function(n){s.store.dispatch("dialogues/decreaseCounter",{dialogId:r,count:n.count});if(s.getChatId()===t&&s.store.getters["dialogues/canSaveChat"]){var o=s.store.getters["dialogues/get"](r);if(o.counter<=0){s.store.commit("application/clearDialogExtraCount")}}if(a){e({dialogId:r,lastId:u})}else{s.timer.start("readMessageServer",t,.5,function(){s.restClient.callMethod(i.RestMethod.imDialogRead,{DIALOG_ID:r,MESSAGE_ID:u}).then(function(){return e({dialogId:r,lastId:u})}).catch(function(){return e({dialogId:r,lastId:u})})})}}).catch(function(){e()})})}},{key:"unreadMessage",value:function e(){var t=this;var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this.getChatId();if(typeof this.messageLastReadId[n]==="undefined"){this.messageLastReadId[n]=null}if(typeof this.messageReadQueue[n]==="undefined"){this.messageReadQueue[n]=[]}if(s){this.messageReadQueue[n]=this.messageReadQueue[n].filter(function(e){return e<s})}this.timer.stop("readMessage",n,true);this.timer.stop("readMessageServer",n,true);this.messageLastReadId[n]=s;this.store.dispatch("messages/unreadMessages",{chatId:n,unreadId:this.messageLastReadId[n]}).then(function(e){var r=t.getDialogIdByChatId(n);t.store.dispatch("dialogues/update",{dialogId:r,fields:{unreadId:s}});t.store.dispatch("dialogues/increaseCounter",{dialogId:r,count:e.count});if(!a){t.restClient.callMethod(i.RestMethod.imDialogUnread,{DIALOG_ID:r,MESSAGE_ID:t.messageLastReadId[n]})}}).catch(function(){})}},{key:"shareMessage",value:function e(t,s){this.restClient.callMethod(i.RestMethod.imMessageShare,{DIALOG_ID:this.getDialogId(),MESSAGE_ID:t,TYPE:s});return true}}]);return e}();e.ApplicationController=a})(this.BX.Messenger.Controller=this.BX.Messenger.Controller||{},BX.Messenger,BX.Messenger.Const,BX.Messenger);
 



// file: /bitrix/js/im/provider/rest/dist/registry.bundle.js
this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.Provider=this.BX.Messenger.Provider||{};(function(e,s,t){"use strict";var r=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(s)}}]);function e(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(babelHelpers.typeof(s.controller)==="object"&&s.controller){this.controller=s.controller}if(babelHelpers.typeof(s.store)==="object"&&s.store){this.store=s.store}}babelHelpers.createClass(e,[{key:"execute",value:function e(s,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};s="handle"+s.split(".").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("");if(t.error()){if(typeof this[s+"Error"]==="function"){return this[s+"Error"](t.error(),r)}}else{if(typeof this[s+"Success"]==="function"){return this[s+"Success"](t.data(),r)}}return typeof this[s]==="function"?this[s](t,r):null}}]);return e}();var i=function(e){babelHelpers.inherits(r,e);function r(){babelHelpers.classCallCheck(this,r);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(r).apply(this,arguments))}babelHelpers.createClass(r,[{key:"handleImUserListGetSuccess",value:function e(s){this.store.dispatch("users/set",t.VuexBuilderModel.convertToArray(s))}},{key:"handleImUserGetSuccess",value:function e(s){this.store.dispatch("users/set",[s])}},{key:"handleImChatGetSuccess",value:function e(s){this.store.dispatch("dialogues/set",s)}},{key:"handleImDialogMessagesGetSuccess",value:function e(s){this.store.dispatch("users/set",s.users);this.store.dispatch("files/setBefore",this.controller.prepareFilesBeforeSave(s.files));this.store.dispatch("messages/setBefore",s.messages)}},{key:"handleImDialogMessagesGetInitSuccess",value:function e(s){this.store.dispatch("users/set",s.users);this.store.dispatch("files/set",this.controller.prepareFilesBeforeSave(s.files));this.store.dispatch("messages/set",s.messages.reverse())}},{key:"handleImDialogMessagesGetUnreadSuccess",value:function e(s){this.store.dispatch("users/set",s.users);this.store.dispatch("files/set",this.controller.prepareFilesBeforeSave(s.files));this.store.dispatch("messages/setAfter",s.messages)}},{key:"handleImDiskFolderGetSuccess",value:function e(s){this.store.commit("application/set",{dialog:{diskFolderId:s.ID}})}},{key:"handleImMessageAddSuccess",value:function e(s,t){var r=this;this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{id:s,sending:false,error:false}}).then(function(){r.store.dispatch("messages/actionFinish",{id:s,chatId:t.chatId})})}},{key:"handleImMessageAddError",value:function e(s,t){this.store.dispatch("messages/actionError",{id:t.id,chatId:t.chatId})}},{key:"handleImDiskFileCommitSuccess",value:function e(s,t){var r=this;this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{id:s["MESSAGE_ID"],sending:false,error:false}}).then(function(){r.store.dispatch("messages/actionFinish",{id:s["MESSAGE_ID"],chatId:t.chatId})})}},{key:"handleImDiskFileCommitError",value:function e(t,r){this.store.dispatch("files/update",{chatId:r.chatId,id:r.file.id,fields:{status:s.FileStatus.error,progress:0}});this.store.dispatch("messages/actionError",{id:r.id,chatId:r.chatId,retry:false})}}]);return r}(r);e.ImRestAnswerHandler=i;e.BaseRestAnswerHandler=r})(this.BX.Messenger.Provider.Pull=this.BX.Messenger.Provider.Pull||{},BX.Messenger.Const,BX);
 



// file: /bitrix/js/im/provider/pull/dist/registry.bundle.js
this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.Provider=this.BX.Messenger.Provider||{};(function(e,t,s,a){"use strict";var i=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(babelHelpers.typeof(t.controller)==="object"&&t.controller){this.controller=t.controller}if(babelHelpers.typeof(t.store)==="object"&&t.store){this.store=t.store}this.option=babelHelpers.typeof(t.store)==="object"&&t.store?t.store:{};if(!(babelHelpers.typeof(this.option.handlingDialog)==="object"&&this.option.handlingDialog&&this.option.handlingDialog.chatId&&this.option.handlingDialog.dialogId)){this.option.handlingDialog=false}}babelHelpers.createClass(e,[{key:"getModuleId",value:function e(){return"im"}},{key:"getSubscriptionType",value:function e(){return t.PullClient.SubscriptionType.Server}},{key:"skipExecute",value:function e(t){var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!s.optionImportant){if(this.option.skip){console.info("Pull: command skipped while loading messages",t);return true}if(!this.option.handlingDialog){return false}}if(typeof t.chatId!=="undefined"||typeof t.dialogId!=="undefined"){if(typeof t.chatId!=="undefined"&&parseInt(t.chatId)===parseInt(this.option.handlingDialog.chatId)){return false}if(typeof t.dialogId!=="undefined"&&t.dialogId.toString()===this.option.handlingDialog.dialogId.toString()){return false}return true}return false}},{key:"handleMessage",value:function e(t,s){this.handleMessageAdd(t,s)}},{key:"handleMessageChat",value:function e(t,s){this.handleMessageAdd(t,s)}},{key:"handleMessageAdd",value:function e(t,i){var n=this;if(this.skipExecute(t,i)){return false}if(t.chat&&t.chat[t.chatId]){this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:t.chat[t.chatId]})}if(t.users){this.store.dispatch("users/set",s.VuexBuilderModel.convertToArray(t.users))}if(t.files){var l=s.VuexBuilderModel.convertToArray(t.files);l.forEach(function(e){e=n.controller.prepareFilesBeforeSave(e);if(l.length===1&&t.message.templateFileId&&n.store.state.files.index[t.chatId]&&n.store.state.files.index[t.chatId][t.message.templateFileId]){n.store.dispatch("files/update",{id:t.message.templateFileId,chatId:t.chatId,fields:e}).then(function(){n.controller.emit(a.EventType.dialog.scrollToBottom,{cancelIfScrollChange:true})})}else{n.store.dispatch("files/set",e)}})}var d=this.store.state.messages.collection[t.chatId];if(!d){d=[]}var o=false;if(t.message.templateId&&d.length>0){for(var r=d.length-1;r>=0;r--){if(d[r].id===t.message.templateId){o=true;break}}}if(o){this.store.dispatch("messages/update",{id:t.message.templateId,chatId:t.chatId,fields:babelHelpers.objectSpread({push:false},t.message,{sending:false,error:false})}).then(function(){n.controller.emit(a.EventType.dialog.scrollToBottom,{cancelIfScrollChange:t.message.senderId!==n.controller.getUserId()})})}else if(this.controller.isUnreadMessagesLoaded()){if(this.controller.getChatId()===t.chatId){this.store.commit("application/increaseDialogExtraCount")}this.store.dispatch("messages/setAfter",babelHelpers.objectSpread({push:false},t.message,{unread:true}))}this.controller.stopOpponentWriting({dialogId:t.dialogId,userId:t.message.senderId});if(t.message.senderId===this.controller.getUserId()){this.store.dispatch("messages/readMessages",{chatId:t.chatId}).then(function(e){n.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{counter:0}})})}else{this.store.dispatch("dialogues/increaseCounter",{dialogId:t.dialogId,count:1})}}},{key:"handleMessageUpdate",value:function e(t,s,a){this.execMessageUpdateOrDelete(t,s,a)}},{key:"handleMessageDelete",value:function e(t,s,a){this.execMessageUpdateOrDelete(t,s,a)}},{key:"execMessageUpdateOrDelete",value:function e(t,s,i){var n=this;if(this.skipExecute(t,s)){return false}this.controller.stopOpponentWriting({dialogId:t.dialogId,userId:t.senderId});this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{text:i==="messageUpdate"?t.text:"",textOriginal:i==="messageUpdate"?t.textOriginal:"",params:t.params,blink:true}}).then(function(){n.controller.emit(a.EventType.dialog.scrollToBottom,{cancelIfScrollChange:true})})}},{key:"handleMessageDeleteComplete",value:function e(t,s){if(this.skipExecute(t,s)){return false}this.store.dispatch("messages/delete",{id:t.id,chatId:t.chatId});this.controller.stopOpponentWriting({dialogId:t.dialogId,userId:t.senderId,action:false})}},{key:"handleMessageLike",value:function e(t,s){if(this.skipExecute(t,s)){return false}this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{params:{LIKE:t.users}}})}},{key:"handleChatOwner",value:function e(t,s){if(this.skipExecute(t,s)){return false}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{ownerId:t.userId}})}},{key:"handleMessageParamsUpdate",value:function e(t,s){var i=this;if(this.skipExecute(t,s)){return false}this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{params:t.params}}).then(function(){i.controller.emit(a.EventType.dialog.scrollToBottom,{cancelIfScrollChange:true})})}},{key:"handleStartWriting",value:function e(t,s){if(this.skipExecute(t,s)){return false}this.controller.startOpponentWriting(t)}},{key:"handleReadMessage",value:function e(t,s){var a=this;if(this.skipExecute(t,s)){return false}this.store.dispatch("messages/readMessages",{chatId:t.chatId,readId:t.lastId}).then(function(e){a.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{counter:t.counter}})})}},{key:"handleReadMessageChat",value:function e(t,s){this.handleReadMessage(t,s)}},{key:"handleReadMessageOpponent",value:function e(t,s){this.execReadMessageOpponent(t,s)}},{key:"handleReadMessageChatOpponent",value:function e(t,s){this.execReadMessageOpponent(t,s)}},{key:"execReadMessageOpponent",value:function e(t,s){if(this.skipExecute(t,s)){return false}this.store.dispatch("dialogues/updateReaded",{dialogId:t.dialogId,userId:t.userId,userName:t.userName,messageId:t.lastId,date:t.date,action:true})}},{key:"handleUnreadMessageOpponent",value:function e(t,s){this.execUnreadMessageOpponent(t,s)}},{key:"handleUnreadMessageChatOpponent",value:function e(t,s){this.execUnreadMessageOpponent(t,s)}},{key:"execUnreadMessageOpponent",value:function e(t,s){if(this.skipExecute(t,s)){return false}this.store.dispatch("dialogues/updateReaded",{dialogId:t.dialogId,userId:t.userId,action:false})}},{key:"handleFileUpload",value:function e(t,i){var n=this;if(this.skipExecute(t,i)){return false}this.store.dispatch("files/set",this.controller.prepareFilesBeforeSave(s.VuexBuilderModel.convertToArray({file:t.fileParams}))).then(function(){n.controller.emit(a.EventType.dialog.scrollToBottom,{cancelIfScrollChange:true})})}}]);return e}();e.ImPullCommandHandler=i})(this.BX.Messenger.Provider.Pull=this.BX.Messenger.Provider.Pull||{},BX,BX,BX.Messenger.Const);
 



// file: /bitrix/js/im/tools/logger/dist/logger.bundle.js
this.BX=this.BX||{};(function(e){"use strict";var n=function(){function e(){babelHelpers.classCallCheck(this,e);this.enabled=null}babelHelpers.createClass(e,[{key:"enable",value:function e(){this.enabled=true;if(typeof window.localStorage!=="undefined"){try{window.localStorage.setItem("bx-messenger-logger","enable")}catch(e){}}return this.enabled}},{key:"disable",value:function e(){this.enabled=false;if(typeof window.localStorage!=="undefined"){try{window.localStorage.removeItem("bx-messenger-logger")}catch(e){}}return this.enabled}},{key:"isEnabled",value:function e(){if(this.enabled===null){if(typeof window.localStorage!=="undefined"){try{this.enabled=window.localStorage.getItem("bx-messenger-logger")==="enable"}catch(e){}}}return this.enabled===true}},{key:"log",value:function e(){if(this.isEnabled()){var n;(n=console).log.apply(n,arguments)}}},{key:"info",value:function e(){if(this.isEnabled()){var n;(n=console).info.apply(n,arguments)}}},{key:"warn",value:function e(){if(this.isEnabled()){var n;(n=console).warn.apply(n,arguments)}}},{key:"error",value:function e(){if(this.isEnabled()){var n;(n=console).error.apply(n,arguments)}}}]);return e}();var l=new n;e.Logger=l})(this.BX.Messenger=this.BX.Messenger||{});
 



// file: /bitrix/js/imopenlines/component/widget/dist/widget.bundle.js
(function(t,e,i,o,s,a,n,r,l,c,d,h,u,m,g,f,v,p,b,w,x,y,C,I){"use strict";function T(t){var e=[];for(var i in t){if(t.hasOwnProperty(i)){e.push(t[i])}}return e}var E=Object.freeze({none:"none",like:"like",dislike:"dislike"});var _=Object.freeze({russian:"ru",ukraine:"ua",world:"en"});var M=Object.freeze({none:"none",like:"like",smile:"smile",consent:"consent",welcome:"welcome",offline:"offline",history:"history"});var L=Object.freeze({topLeft:1,topMiddle:2,topBottom:3,bottomLeft:6,bottomMiddle:5,bottomRight:4});var k=Object.freeze({1:"top-left",2:"top-center",3:"top-right",6:"bottom-left",5:"bottom-center",4:"bottom-right"});var D=Object.freeze({configLoaded:"configLoaded",widgetOpen:"widgetOpen",widgetClose:"widgetClose",sessionStart:"sessionStart",sessionOperatorChange:"sessionOperatorChange",sessionFinish:"sessionFinish",operatorMessage:"operatorMessage",userForm:"userForm",userMessage:"userMessage",userFile:"userFile",userVote:"userVote",every:"every"});var S=T(D);var F=Object.freeze({widgetUserRegister:"imopenlines.widget.user.register",widgetConfigGet:"imopenlines.widget.config.get",widgetDialogGet:"imopenlines.widget.dialog.get",widgetUserGet:"imopenlines.widget.user.get",widgetUserConsentApply:"imopenlines.widget.user.consent.apply",widgetVoteSend:"imopenlines.widget.vote.send",widgetFormSend:"imopenlines.widget.form.send",pullServerTime:"server.time",pullConfigGet:"pull.config.get"});var R=T(F);var A=Object.freeze({guest:"guest"});var H={get:function t(e,i){var o=e?e+"_"+i:i;if(navigator.cookieEnabled){var s=document.cookie.match(new RegExp("(?:^|; )"+o.replace(/([.$?*|{}()\[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));if(s){return decodeURIComponent(s[1])}}if(g.LocalStorage.isEnabled()){var a=g.LocalStorage.get(e,0,i,undefined);if(typeof a!=="undefined"){return a}}if(typeof window.BX.LiveChatCookie==="undefined"){window.BX.LiveChatCookie={}}return window.BX.LiveChatCookie[o]},set:function t(e,i,o,s){s=s||{};var a=s.expires;if(typeof a=="number"&&a){var n=new Date;n.setTime(n.getTime()+a*1e3);a=s.expires=n}if(a&&a.toUTCString){s.expires=a.toUTCString()}o=encodeURIComponent(o);var r=e?e+"_"+i:i;var l=r+"="+o;for(var c in s){if(!s.hasOwnProperty(c)){continue}l+="; "+c;var d=s[c];if(d!==true){l+="="+d}}document.cookie=l;if(typeof window.BX.LiveChatCookie==="undefined"){BX.LiveChatCookie={}}window.BX.LiveChatCookie[r]=o;g.LocalStorage.set(e,0,i,o);return true}};var $=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getName",value:function t(){return"widget"}},{key:"getState",value:function t(){return{common:{configId:0,configName:"",host:this.getVariable("common.host",location.protocol+"//"+location.host),pageMode:this.getVariable("common.pageMode",false),copyright:this.getVariable("common.copyright",true),copyrightUrl:this.getVariable("common.copyrightUrl","https://bitrix24.com"),location:this.getVariable("common.location",L.bottomRight),styles:{backgroundColor:this.getVariable("styles.backgroundColor","#17a3ea"),iconColor:this.getVariable("styles.iconColor","#ffffff")},vote:{enable:false,messageText:this.getVariable("vote.messageText",""),messageLike:this.getVariable("vote.messageLike",""),messageDislike:this.getVariable("vote.messageDislike","")},textMessages:{bxLivechatOnlineLine1:this.getVariable("textMessages.bxLivechatOnlineLine1",""),bxLivechatOnlineLine2:this.getVariable("textMessages.bxLivechatOnlineLine2",""),bxLivechatOffline:this.getVariable("textMessages.bxLivechatOffline","")},online:false,operators:[],connectors:[],showForm:M.none,showed:false,reopen:false,dragged:false,textareaHeight:0,showConsent:false,consentUrl:"",dialogStart:false},dialog:{sessionId:0,sessionClose:true,userVote:E.none,userConsent:false,operator:{name:"",firstName:"",lastName:"",workPosition:"",avatar:"",online:false}},user:{id:-1,hash:"",name:"",firstName:"",lastName:"",avatar:"",email:"",phone:"",www:"",gender:"M",position:""}}}},{key:"getStateSaveException",value:function t(){return{common:{host:null,pageMode:null,copyright:null,copyrightUrl:null,styles:null,dragged:null,showed:null,showConsent:null,showForm:null,location:null}}}},{key:"getMutations",value:function t(){var e=this;return{common:function t(i,o){if(typeof o.configId==="number"){i.common.configId=o.configId}if(typeof o.configName==="string"){i.common.configName=o.configName}if(typeof o.online==="boolean"){i.common.online=o.online}if(y.Utils.types.isPlainObject(o.vote)){if(typeof o.vote.enable==="boolean"){i.common.vote.enable=o.vote.enable}if(typeof o.vote.messageText==="string"){i.common.vote.messageText=o.vote.messageText}if(typeof o.vote.messageLike==="string"){i.common.vote.messageLike=o.vote.messageLike}if(typeof o.vote.messageDislike==="string"){i.common.vote.messageDislike=o.vote.messageDislike}}if(y.Utils.types.isPlainObject(o.textMessages)){if(typeof o.textMessages.bxLivechatOnlineLine1==="string"&&o.textMessages.bxLivechatOnlineLine1!==""){i.common.textMessages.bxLivechatOnlineLine1=o.textMessages.bxLivechatOnlineLine1}if(typeof o.textMessages.bxLivechatOnlineLine2==="string"&&o.textMessages.bxLivechatOnlineLine2!==""){i.common.textMessages.bxLivechatOnlineLine2=o.textMessages.bxLivechatOnlineLine2}if(typeof o.textMessages.bxLivechatOffline==="string"&&o.textMessages.bxLivechatOffline!==""){i.common.textMessages.bxLivechatOffline=o.textMessages.bxLivechatOffline}}if(typeof o.dragged==="boolean"){i.common.dragged=o.dragged}if(typeof o.textareaHeight==="number"){i.common.textareaHeight=o.textareaHeight}if(typeof o.showConsent==="boolean"){i.common.showConsent=o.showConsent}if(typeof o.consentUrl==="string"){i.common.consentUrl=o.consentUrl}if(typeof o.showed==="boolean"){i.common.showed=o.showed;o.reopen=y.Utils.device.isMobile()?false:o.showed}if(typeof o.reopen==="boolean"){i.common.reopen=o.reopen}if(typeof o.copyright==="boolean"){i.common.copyright=o.copyright}if(typeof o.dialogStart==="boolean"){i.common.dialogStart=o.dialogStart}if(o.operators instanceof Array){i.common.operators=o.operators}if(o.connectors instanceof Array){i.common.connectors=o.connectors}if(typeof o.showForm==="string"&&typeof M[o.showForm]!=="undefined"){i.common.showForm=o.showForm}if(typeof o.location==="number"&&typeof k[o.location]!=="undefined"){i.common.location=o.location}if(e.isSaveNeeded({common:o})){e.saveState(i)}},dialog:function t(i,o){if(typeof o.sessionId==="number"){i.dialog.sessionId=o.sessionId}if(typeof o.sessionClose==="boolean"){i.dialog.sessionClose=o.sessionClose}if(typeof o.userConsent==="boolean"){i.dialog.userConsent=o.userConsent}if(typeof o.userVote==="string"&&typeof o.userVote!=="undefined"){i.dialog.userVote=o.userVote}if(y.Utils.types.isPlainObject(o.operator)){if(typeof o.operator.name==="string"||typeof o.operator.name==="number"){i.dialog.operator.name=o.operator.name.toString()}if(typeof o.operator.lastName==="string"||typeof o.operator.lastName==="number"){i.dialog.operator.lastName=o.operator.lastName.toString()}if(typeof o.operator.firstName==="string"||typeof o.operator.firstName==="number"){i.dialog.operator.firstName=o.operator.firstName.toString()}if(typeof o.operator.workPosition==="string"||typeof o.operator.workPosition==="number"){i.dialog.operator.workPosition=o.operator.workPosition.toString()}if(typeof o.operator.avatar==="string"){if(!o.operator.avatar||o.operator.avatar.startsWith("http")){i.dialog.operator.avatar=o.operator.avatar}else{i.dialog.operator.avatar=i.common.host+o.operator.avatar}}if(typeof o.operator.online==="boolean"){i.dialog.operator.online=o.operator.online}}if(e.isSaveNeeded({dialog:o})){e.saveState(i)}},user:function t(i,o){if(typeof o.id==="number"){i.user.id=o.id}if(typeof o.hash==="string"&&o.hash!==i.user.hash){i.user.hash=o.hash;H.set(null,"LIVECHAT_HASH",o.hash,{expires:365*86400,path:"/"})}if(typeof o.name==="string"||typeof o.name==="number"){i.user.name=o.name.toString()}if(typeof o.firstName==="string"||typeof o.firstName==="number"){i.user.firstName=o.firstName.toString()}if(typeof o.lastName==="string"||typeof o.lastName==="number"){i.user.lastName=o.lastName.toString()}if(typeof o.avatar==="string"){i.user.avatar=o.avatar}if(typeof o.email==="string"){i.user.email=o.email}if(typeof o.phone==="string"||typeof o.phone==="number"){i.user.phone=o.phone.toString()}if(typeof o.www==="string"){i.user.www=o.www}if(typeof o.gender==="string"){i.user.gender=o.gender}if(typeof o.position==="string"){i.user.position=o.position}if(e.isSaveNeeded({user:o})){e.saveState(i)}}}}}]);return e}(I.VuexBuilderModel);var B=function(){function t(e){babelHelpers.classCallCheck(this,t);this.queryAuthRestore=false;this.setAuthId(A.guest);this.restClient=new l.RestClient({endpoint:e.endpoint,queryParams:this.queryParams,cors:true})}babelHelpers.createClass(t,[{key:"setAuthId",value:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(babelHelpers.typeof(this.queryParams)!=="object"){this.queryParams={}}if(e==A.guest||typeof e==="string"&&e.match(/^[a-f0-9]{32}$/)){this.queryParams.livechat_auth_id=e}else{console.error("%LiveChatRestClient.setAuthId: auth is not correct (%c".concat(e,"%c)"),"color: black;","font-weight: bold; color: red","color: black");return false}if(e==A.guest&&typeof i==="string"&&i.match(/^[a-f0-9]{32}$/)){this.queryParams.livechat_custom_auth_id=i}return true}},{key:"getAuthId",value:function t(){if(babelHelpers.typeof(this.queryParams)!=="object"){this.queryParams={}}return this.queryParams.livechat_auth_id||null}},{key:"callMethod",value:function t(e,i,o,s){var a=this;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;if(!n){n=y.Utils.getLogTrackingParams({name:e})}var r=new BX.Promise;this.restClient.callMethod(e,i,null,s,n).then(function(t){a.queryAuthRestore=false;r.fulfill(t)}).catch(function(t){var o=t.error();if(o.ex.error=="LIVECHAT_AUTH_WIDGET_USER"){a.setAuthId(o.ex.hash);if(e===F.widgetUserRegister){console.warn("BX.LiveChatRestClient: ".concat(o.ex.error_description," (").concat(o.ex.error,")"));a.queryAuthRestore=false;r.reject(t);return false}if(!a.queryAuthRestore){console.warn("BX.LiveChatRestClient: your auth-token has expired, send query with a new token");a.queryAuthRestore=true;a.restClient.callMethod(e,i,null,s,n).then(function(t){a.queryAuthRestore=false;r.fulfill(t)}).catch(function(t){a.queryAuthRestore=false;r.reject(t)});return false}}a.queryAuthRestore=false;r.reject(t)});return r}},{key:"callBatch",value:function t(e,i,o,s,a){var n=this;var r=function t(r){for(var l in e){if(!e.hasOwnProperty(l)){continue}var c=r[l].error();if(c&&c.ex.error=="LIVECHAT_AUTH_WIDGET_USER"){n.setAuthId(c.ex.hash);if(l===F.widgetUserRegister){console.warn("BX.LiveChatRestClient: ".concat(c.ex.error_description," (").concat(c.ex.error,")"));n.queryAuthRestore=false;i(r);return false}if(!n.queryAuthRestore){console.warn("BX.LiveChatRestClient: your auth-token has expired, send query with a new token");n.queryAuthRestore=true;n.restClient.callBatch(e,i,o,s,a);return false}}}n.queryAuthRestore=false;i(r);return true};return this.restClient.callBatch(e,r,o,s,a)}}]);return t}();var U=function(t){babelHelpers.inherits(e,t);function e(){var t;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this,i));t.widget=i.widget;return t}babelHelpers.createClass(e,[{key:"handleImopenlinesWidgetConfigGetSuccess",value:function t(e){this.store.commit("widget/common",{configId:e.configId,configName:e.configName,vote:e.vote,textMessages:e.textMessages,operators:e.operators||[],online:e.online,consentUrl:e.consentUrl,connectors:e.connectors||[]});this.store.commit("application/set",{disk:e.disk});this.widget.addLocalize(e.serverVariables);g.LocalStorage.set(this.widget.getSiteId(),0,"serverVariables",e.serverVariables||{})}},{key:"handleImopenlinesWidgetUserRegisterSuccess",value:function t(e){this.widget.restClient.setAuthId(e.hash);var i=[];if(typeof this.store.state.messages.collection[this.controller.getChatId()]!=="undefined"){i=this.store.state.messages.collection[this.controller.getChatId()]}this.store.commit("messages/initCollection",{chatId:e.chatId,messages:i});this.store.commit("dialogues/initCollection",{dialogId:e.dialogId,fields:{entityType:"LIVECHAT",type:"livechat"}});this.store.commit("application/set",{dialog:{chatId:e.chatId,dialogId:"chat"+e.chatId}})}},{key:"handleImopenlinesWidgetUserGetSuccess",value:function t(e){this.store.commit("widget/user",{id:e.id,hash:e.hash,name:e.name,firstName:e.firstName,lastName:e.lastName,phone:e.phone,avatar:e.avatar,email:e.email,www:e.www,gender:e.gender,position:e.position});this.store.dispatch("users/set",[{id:e.id,name:e.name,firstName:e.firstName,lastName:e.lastName,avatar:e.avatar,gender:e.gender,workPosition:e.position}]);this.store.commit("application/set",{common:{userId:e.id}})}},{key:"handleImopenlinesWidgetDialogGetSuccess",value:function t(e){this.store.commit("messages/initCollection",{chatId:e.chatId});this.store.commit("widget/dialog",{sessionId:e.sessionId,sessionClose:e.sessionClose,userVote:e.userVote,userConsent:e.userConsent,operator:e.operator});this.store.commit("application/set",{dialog:{chatId:e.chatId,dialogId:"chat"+e.chatId,diskFolderId:e.diskFolderId}})}},{key:"handleImDialogMessagesGetSuccess",value:function t(e){if(e.messages&&e.messages.length>0&&!this.widget.isDialogStart()){this.store.commit("widget/common",{dialogStart:true})}}},{key:"handleImMessageAddSuccess",value:function t(e,i){this.widget.messagesQueue=this.widget.messagesQueue.filter(function(t){return t.id!=i.id});this.widget.sendEvent({type:D.userMessage,data:{id:e,text:i.text}})}},{key:"handleImMessageAddError",value:function t(e,i){this.widget.messagesQueue=this.widget.messagesQueue.filter(function(t){return t.id!=i.id})}},{key:"handleImDiskFileCommitSuccess",value:function t(e,i){this.widget.messagesQueue=this.widget.messagesQueue.filter(function(t){return t.id!=i.id});this.widget.sendEvent({type:D.userFile,data:{}})}}]);return e}(f.BaseRestAnswerHandler);var N=function(){babelHelpers.createClass(t,[{key:"getModuleId",value:function t(){return"im"}}],[{key:"create",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(e)}}]);function t(e){babelHelpers.classCallCheck(this,t);this.controller=e.controller;this.store=e.store;this.widget=e.widget}babelHelpers.createClass(t,[{key:"handleMessageChat",value:function t(e,i,o){if(e.message.senderId!=this.controller.getUserId()){this.widget.sendEvent({type:D.operatorMessage,data:e});if(!this.store.state.widget.common.showed&&!this.widget.onceShowed){this.widget.onceShowed=true;this.widget.open()}}}}]);return t}();var P=function(){babelHelpers.createClass(t,null,[{key:"create",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(e)}}]);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);this.controller=e.controller;this.store=e.store;this.widget=e.widget}babelHelpers.createClass(t,[{key:"getModuleId",value:function t(){return"imopenlines"}},{key:"handleSessionStart",value:function t(e,i,o){this.store.commit("widget/dialog",{sessionId:e.sessionId,sessionClose:false,userVote:E.none});this.widget.sendEvent({type:D.sessionStart,data:{sessionId:e.sessionId}})}},{key:"handleSessionOperatorChange",value:function t(e,i,o){this.store.commit("widget/dialog",{operator:e.operator});this.widget.sendEvent({type:D.sessionOperatorChange,data:{operator:e.operator}})}},{key:"handleSessionFinish",value:function t(e,i,o){this.store.commit("widget/dialog",{sessionId:e.sessionId,sessionClose:true});this.widget.sendEvent({type:D.sessionFinish,data:{sessionId:e.sessionId}});if(!e.spam){this.store.commit("widget/dialog",{operator:{name:"",firstName:"",lastName:"",workPosition:"",avatar:"",online:false}})}}}]);return t}();var V=function(){function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);this.ready=true;this.widgetDataRequested=false;this.offline=false;this.code=i.code||"";this.host=i.host||"";this.language=i.language||"en";this.copyright=i.copyright!==false;this.copyrightUrl=this.copyright&&i.copyrightUrl?i.copyrightUrl:"";this.buttonInstance=babelHelpers.typeof(i.buttonInstance)==="object"&&i.buttonInstance!==null?i.buttonInstance:null;this.pageMode=babelHelpers.typeof(i.pageMode)==="object"&&i.pageMode;if(this.pageMode){this.pageMode.useBitrixLocalize=i.pageMode.useBitrixLocalize===true;this.pageMode.placeholder=document.getElementById(i.pageMode.placeholder)}if(typeof this.code==="string"){if(this.code.length<=0){console.warn("%cLiveChatWidget.constructor: code is not correct (%c".concat(this.code,"%c)"),"color: black;","font-weight: bold; color: red","color: black");this.ready=false}}if(typeof this.host==="string"){if(this.host.length<=0||!this.host.startsWith("http")){console.warn("%cLiveChatWidget.constructor: host is not correct (%c".concat(this.host,"%c)"),"color: black;","font-weight: bold; color: red","color: black");this.ready=false}}this.inited=false;this.initEventFired=false;this.restClient=null;this.userRegisterData={};this.customData=[];this.localize=this.pageMode&&this.pageMode.useBitrixLocalize?window.BX.message:{};if(babelHelpers.typeof(i.localize)==="object"){this.addLocalize(i.localize)}this.subscribers={};this.dateFormat=null;this.messagesQueue=[];this.configRequestXhr=null;if(this.pageMode&&this.pageMode.placeholder){this.rootNode=this.pageMode.placeholder}else{this.rootNode=document.createElement("div");if(document.body.firstChild){document.body.insertBefore(this.rootNode,document.body.firstChild)}else{document.body.appendChild(this.rootNode)}}this.template=null;window.addEventListener("orientationchange",function(){if(!e.store){return}e.store.commit("application/set",{device:{orientation:y.Utils.device.getOrientation()}});if(e.store.state.widget.common.showed&&e.store.state.application.device.type===b.DeviceType.mobile&&e.store.state.application.device.orientation===b.DeviceOrientation.horizontal){document.activeElement.blur()}});var o=g.LocalStorage.get(this.getSiteId(),0,"serverVariables",false);if(o){this.addLocalize(o)}var s={common:{host:this.getHost(),pageMode:this.pageMode!==false,copyright:this.copyright,copyrightUrl:this.copyrightUrl},vote:{messageText:this.getLocalize("BX_LIVECHAT_VOTE_TITLE"),messageLike:this.getLocalize("BX_LIVECHAT_VOTE_PLUS_TITLE"),messageDislike:this.getLocalize("BX_LIVECHAT_VOTE_MINUS_TITLE")},textMessages:{bxLivechatOnlineLine1:this.getLocalize("BX_LIVECHAT_ONLINE_LINE_1"),bxLivechatOnlineLine2:this.getLocalize("BX_LIVECHAT_ONLINE_LINE_2"),bxLivechatOffline:this.getLocalize("BX_LIVECHAT_OFFLINE")}};if(i.location&&typeof k[i.location]!=="undefined"){s.common.location=i.location}if(y.Utils.types.isPlainObject(i.styles)&&(i.styles.backgroundColor||i.styles.iconColor)){s.styles={};if(i.styles.backgroundColor){s.styles.backgroundColor=i.styles.backgroundColor}if(i.styles.iconColor){s.styles.iconColor=i.styles.iconColor}}this.controller=new m.ApplicationController;var a={common:{host:this.getHost(),siteId:this.getSiteId(),languageId:this.language},device:{type:y.Utils.device.isMobile()?b.DeviceType.mobile:b.DeviceType.desktop,orientation:y.Utils.device.getOrientation()},dialog:{messageLimit:this.controller.getDefaultMessageLimit()},saveException:{common:{host:null,siteId:null,languageId:null},dialog:{messageLimit:null,messageExtraCount:null}}};var n=!y.Utils.browser.isIe();(new I.VuexBuilder).addModel($.create().setVariables(s)).addModel(u.ApplicationModel.create().setVariables(a)).addModel(u.DialoguesModel.create().useDatabase(n).setVariables({host:this.host})).addModel(u.MessagesModel.create().useDatabase(n)).addModel(u.FilesModel.create().useDatabase(n).setVariables({host:this.host,default:{name:this.getLocalize("IM_MESSENGER_MESSAGE_FILE_DELETED")}})).addModel(u.UsersModel.create().useDatabase(n).setVariables({host:this.host,default:{name:this.getLocalize("IM_MESSENGER_MESSAGE_USER_ANONYM")}})).setDatabaseConfig({name:"imol/widget",type:I.VuexBuilder.DatabaseType.localStorage,siteId:this.getSiteId()}).build(function(t){e.store=t.store;e.storeCollector=t.builder;e.initRestClient();e.controller.setStore(e.store);e.controller.setRestClient(e.restClient);e.controller.setPrepareFilesBeforeSaveFunction(e.prepareFileData.bind(e));e.imRestAnswer=f.ImRestAnswerHandler.create({store:e.store,controller:e.controller});e.widgetRestAnswer=U.create({widget:e,store:e.store,controller:e.controller});window.dispatchEvent(new CustomEvent("onBitrixLiveChat",{detail:{widget:e,widgetCode:e.code,widgetHost:e.host}}));if(e.callStartFlag){e.start()}if(e.pageMode||e.callOpenFlag){e.open()}})}babelHelpers.createClass(t,[{key:"initRestClient",value:function t(){this.restClient=new B({endpoint:this.host+"/rest"});if(this.isUserRegistered()){this.restClient.setAuthId(this.getUserHash())}else{this.restClient.setAuthId(A.guest)}}},{key:"requestWidgetData",value:function t(){var e=this;if(!this.isReady()){console.error("LiveChatWidget.start: widget code or host is not specified");return false}this.widgetDataRequested=true;if(!this.isUserRegistered()&&(this.userRegisterData.hash||this.getUserHashCookie())){this.requestData();this.inited=true;this.fireInitEvent()}else if(this.isConfigDataLoaded()&&this.isUserRegistered()){this.requestData();this.inited=true;this.fireInitEvent()}else{this.restClient.callMethod(F.widgetConfigGet,{code:this.code},function(t){e.configRequestXhr=t}).then(function(t){e.configRequestXhr=null;e.clearError();e.executeRestAnswer(F.widgetConfigGet,t);if(!e.inited){e.inited=true;e.fireInitEvent()}}).catch(function(t){e.configRequestXhr=null;e.setError(t.error().ex.error,t.error().ex.error_description)});if(this.isConfigDataLoaded()){this.inited=true;this.fireInitEvent()}}}},{key:"requestData",value:function t(){var e=this;if(this.requestDataSend){return true}this.requestDataSend=true;if(this.configRequestXhr){this.configRequestXhr.abort()}var i=babelHelpers.defineProperty({},F.widgetConfigGet,[F.widgetConfigGet,{code:this.code}]);if(this.isUserRegistered()){i[F.widgetDialogGet]=[F.widgetDialogGet,{config_id:this.getConfigId(),trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}];i[b.RestMethodHandler.imChatGet]=[b.RestMethod.imChatGet,{dialog_id:"$result["+F.widgetDialogGet+"][dialogId]"}];i[b.RestMethodHandler.imDialogMessagesGetInit]=[b.RestMethod.imDialogMessagesGet,{chat_id:"$result["+F.widgetDialogGet+"][chatId]",limit:this.controller.getRequestMessageLimit(),convert_text:"Y"}]}else{i[F.widgetUserRegister]=[F.widgetUserRegister,babelHelpers.objectSpread({config_id:"$result["+F.widgetConfigGet+"][configId]"},this.getUserRegisterFields())];i[b.RestMethodHandler.imChatGet]=[b.RestMethod.imChatGet,{dialog_id:"$result["+F.widgetUserRegister+"][dialogId]"}];if(this.userRegisterData.hash||this.getUserHashCookie()){i[F.widgetDialogGet]=[F.widgetDialogGet,{config_id:"$result["+F.widgetConfigGet+"][configId]",trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}];i[b.RestMethodHandler.imDialogMessagesGetInit]=[b.RestMethod.imDialogMessagesGet,{chat_id:"$result["+F.widgetDialogGet+"][chatId]",limit:this.controller.getRequestMessageLimit(),convert_text:"Y"}]}if(this.isUserAgreeConsent()){i[F.widgetUserConsentApply]=[F.widgetUserConsentApply,{config_id:"$result["+F.widgetConfigGet+"][configId]",consent_url:location.href}]}}i[F.pullServerTime]=[F.pullServerTime,{}];i[F.pullConfigGet]=[F.pullConfigGet,{CACHE:"N"}];i[F.widgetUserGet]=[F.widgetUserGet,{}];this.restClient.callBatch(i,function(t){if(!t){e.requestDataSend=false;e.setError("EMPTY_RESPONSE","Server returned an empty response.");return false}var i=t[F.widgetConfigGet];if(i&&i.error()){e.requestDataSend=false;e.setError(i.error().ex.error,i.error().ex.error_description);return false}e.executeRestAnswer(F.widgetConfigGet,i);var o=t[F.widgetUserGet];if(o.error()){e.requestDataSend=false;e.setError(o.error().ex.error,o.error().ex.error_description);return false}e.executeRestAnswer(F.widgetUserGet,o);var s=t[b.RestMethodHandler.imChatGet];if(s.error()){e.requestDataSend=false;e.setError(s.error().ex.error,s.error().ex.error_description);return false}e.executeRestAnswer(b.RestMethodHandler.imChatGet,s);var a=t[F.widgetDialogGet];if(a){if(a.error()){e.requestDataSend=false;e.setError(a.error().ex.error,a.error().ex.error_description);return false}e.executeRestAnswer(F.widgetDialogGet,a)}var n=t[b.RestMethodHandler.imDialogMessagesGetInit];if(n){if(n.error()){e.requestDataSend=false;e.setError(n.error().ex.error,n.error().ex.error_description);return false}e.store.dispatch("dialogues/saveDialog",{dialogId:e.controller.getDialogId(),chatId:e.controller.getChatId()});e.executeRestAnswer(b.RestMethodHandler.imDialogMessagesGetInit,n)}var r=t[F.widgetUserRegister];if(r){if(r.error()){e.requestDataSend=false;e.setError(r.error().ex.error,r.error().ex.error_description);return false}e.executeRestAnswer(F.widgetUserRegister,r)}var l=0;var c=t[F.pullServerTime];if(c&&!c.error()){l=Math.floor(((new Date).getTime()-new Date(c.data()).getTime())/1e3)}var d=null;var h=t[F.pullConfigGet];if(h&&!h.error()){d=h.data();d.server.timeShift=l}e.startPullClient(d).then(function(){e.processSendMessages()}).catch(function(t){e.setError(t.ex.error,t.ex.error_description)});e.requestDataSend=false},false,false,y.Utils.getLogTrackingParams({name:"widget.init.config",dialog:this.controller.getDialogData()}))}},{key:"executeRestAnswer",value:function t(e,i,o){this.imRestAnswer.execute(e,i,o);this.widgetRestAnswer.execute(e,i,o)}},{key:"prepareFileData",value:function t(e){var i=this;if(H.get(null,"BITRIX_LIVECHAT_AUTH")){return e}if(!y.Utils.types.isArray(e)){return e}return e.map(function(t){var e=(window.md5||c.md5)(i.getUserId()+"|"+t.id+"|"+i.getUserHash());var o="livechat_auth_id="+e+"&livechat_user_id="+i.getUserId();if(t.urlPreview){t.urlPreview=t.urlPreview+"&"+o}if(t.urlShow){t.urlShow=t.urlShow+"&"+o}if(t.urlDownload){t.urlDownload=t.urlDownload+"&"+o}return t})}},{key:"checkBrowserVersion",value:function t(){if(y.Utils.platform.isIos()){var e=y.Utils.platform.getIosVersion();if(e&&e<=10){return false}}return true}},{key:"startPullClient",value:function t(e){var i=this;var o=new BX.Promise;if(this.pullClient){if(!this.pullClient.isConnected()){this.pullClient.scheduleReconnect()}o.resolve(true);return o}if(!this.getUserId()||!this.getSiteId()||!this.restClient){o.reject({ex:{error:"WIDGET_NOT_LOADED",error_description:"Widget is not loaded."}});return o}this.pullClient=new h.PullClient({serverEnabled:true,userId:this.getUserId(),siteId:this.getSiteId(),restClient:this.restClient,configTimestamp:e?e.server.config_timestamp:0,skipCheckRevision:true});this.pullClient.subscribe(new v.ImPullCommandHandler({store:this.store,controller:this.controller}));this.pullClient.subscribe(new N({store:this.store,controller:this.controller,widget:this}));this.pullClient.subscribe(new P({store:this.store,controller:this.controller,widget:this}));this.pullClient.subscribe({type:h.PullClient.SubscriptionType.Status,callback:this.eventStatusInteraction.bind(this)});this.pullConnectedFirstTime=this.pullClient.subscribe({type:h.PullClient.SubscriptionType.Status,callback:function t(e){if(e.status===h.PullClient.PullStatus.Online){o.resolve(true);i.pullConnectedFirstTime()}}});if(this.template){this.template.$root.$bitrixPullClient=this.pullClient;this.template.$root.$emit("onBitrixPullClientInited",this.pullClient)}this.pullClient.start(babelHelpers.objectSpread({},e,{skipReconnectToLastSession:true})).catch(function(){o.reject({ex:{error:"PULL_CONNECTION_ERROR",error_description:"Pull is not connected."}})});return o}},{key:"stopPullClient",value:function t(){if(this.pullClient){this.pullClient.stop(h.PullClient.CloseReasons.MANUAL,"Closed manually")}}},{key:"recoverPullConnection",value:function t(){this.pullClient.restart(h.PullClient.CloseReasons.MANUAL,"Restart after click by connection status button.")}},{key:"eventStatusInteraction",value:function t(e){var i=this;if(e.status===h.PullClient.PullStatus.Online){this.offline=false;if(this.pullRequestMessage){this.getDialogUnread().then(function(){i.processSendMessages()});this.pullRequestMessage=false}else{this.readMessage();this.processSendMessages()}}else if(e.status===h.PullClient.PullStatus.Offline){this.pullRequestMessage=true;this.offline=true}}},{key:"attachTemplate",value:function t(){if(this.template){this.store.commit("widget/common",{showed:true});return true}this.rootNode.innerHTML="";this.rootNode.appendChild(document.createElement("div"));var e=this;var i=this.controller;var o=this.restClient;var s=this.pullClient||null;this.template=C.Vue.create({el:this.rootNode.firstChild,store:this.store,template:"<bx-livechat/>",beforeCreate:function t(){this.$bitrixWidget=e;this.$bitrixController=i;this.$bitrixRestClient=o;this.$bitrixPullClient=s;this.$bitrixMessages=e.localize;e.sendEvent({type:D.widgetOpen,data:{}})},destroyed:function t(){e.sendEvent({type:D.widgetClose,data:{}});this.$bitrixWidget.template=null;this.$bitrixWidget.templateAttached=false;this.$bitrixWidget.rootNode.innerHTML="";this.$bitrixWidget=null;this.$bitrixRestClient=null;this.$bitrixPullClient=null;this.$bitrixMessages=null}});this.controller.setTemplateEngine(this.template);return true}},{key:"detachTemplate",value:function t(){if(!this.template){return true}this.template.$destroy();return true}},{key:"mutateTemplateComponent",value:function t(e,i){return C.Vue.mutateComponent(e,i)}},{key:"addMessage",value:function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!i&&!o){return false}p.Logger.warn("addMessage",i,o);if(!this.controller.isUnreadMessagesLoaded()){this.sendMessage({id:0,text:i,file:o});this.processSendMessages();return true}this.store.commit("application/increaseDialogExtraCount");var s={};if(o){s.FILE_ID=[o.id]}this.store.dispatch("messages/add",{chatId:this.getChatId(),authorId:this.getUserId(),text:i,params:s,sending:!o}).then(function(t){if(!e.isDialogStart()){e.store.commit("widget/common",{dialogStart:true})}e.messagesQueue.push({id:t,text:i,file:o,sending:false});if(e.getChatId()){e.processSendMessages()}else{e.requestData()}});return true}},{key:"uploadFile",value:function t(e){var i=this;if(!e){return false}p.Logger.warn("addFile",e.files[0].name,e.files[0].size,e.files[0]);var o=e.files[0];var s="file";if(o.type.toString().startsWith("image")){s="image"}if(!this.controller.isUnreadMessagesLoaded()){this.addMessage("",{id:0,source:e});return true}this.store.dispatch("files/add",{chatId:this.getChatId(),authorId:this.getUserId(),name:o.name,type:s,extension:o.name.split(".").splice(-1)[0],size:o.size,image:false,status:b.FileStatus.upload,progress:0,authorName:this.controller.getCurrentUser().name,urlPreview:""}).then(function(t){return i.addMessage("",{id:t,source:e})});return true}},{key:"cancelUploadFile",value:function t(e){var i=this;var o=this.messagesQueue.find(function(t){return t.file&&t.file.id===e});if(o){if(o.xhr){o.xhr.abort()}this.store.dispatch("messages/delete",{chatId:this.getChatId(),id:o.id}).then(function(){i.store.dispatch("files/delete",{chatId:i.getChatId(),id:o.file.id});i.messagesQueue=i.messagesQueue.filter(function(t){return t.id!==o.id})})}}},{key:"processSendMessages",value:function t(){var e=this;if(this.offline){return false}this.messagesQueue.filter(function(t){return!t.sending}).forEach(function(t){t.sending=true;if(t.file){e.sendMessageWithFile(t)}else{e.sendMessage(t)}});return true}},{key:"sendMessage",value:function t(e){var i=this;this.controller.stopWriting();var o=this.store.getters["dialogues/getQuoteId"](this.getDialogId());if(o){var s=this.store.getters["messages/getMessage"](this.getChatId(),o);if(s){var a=this.store.getters["users/get"](s.authorId);var n=[];n.push("------------------------------------------------------");n.push(a.name?a.name:this.getLocalize("BX_LIVECHAT_SYSTEM_MESSAGE"));n.push(s.text);n.push("------------------------------------------------------");n.push(e.text);e.text=n.join("\n");this.quoteMessageClear()}}e.chatId=this.getChatId();this.restClient.callMethod(b.RestMethod.imMessageAdd,{TEMPLATE_ID:e.id,CHAT_ID:e.chatId,MESSAGE:e.text},null,null,y.Utils.getLogTrackingParams({name:b.RestMethod.imMessageAdd,data:{timMessageType:"text"},dialog:this.getDialogData()})).then(function(t){i.executeRestAnswer(b.RestMethodHandler.imMessageAdd,t,e)}).catch(function(t){i.executeRestAnswer(b.RestMethodHandler.imMessageAdd,t,e)});return true}},{key:"sendMessageWithFile",value:function t(e){var i=this;this.controller.stopWriting();var o=this.store.getters["files/get"](this.getChatId(),e.file.id,true).type;var s=this.getDiskFolderId();var a={};if(s){a[b.RestMethodHandler.imDiskFileUpload]=[b.RestMethod.imDiskFileUpload,{id:s,data:{NAME:e.file.source.files[0].name},fileContent:e.file.source,generateUniqueName:true}]}else{a[b.RestMethodHandler.imDiskFolderGet]=[b.RestMethod.imDiskFolderGet,{chat_id:this.getChatId()}];a[b.RestMethodHandler.imDiskFileUpload]=[b.RestMethod.imDiskFileUpload,{id:"$result["+b.RestMethodHandler.imDiskFolderGet+"][ID]",data:{NAME:e.file.source.files[0].name},fileContent:e.file.source,generateUniqueName:true}]}this.restClient.callBatch(a,function(t){if(!t){i.requestDataSend=false;console.warn("EMPTY_RESPONSE","Server returned an empty response. [1]");i.fileError(i.getChatId,e.file.id,e.id);return false}if(!s){var a=t[b.RestMethodHandler.imDiskFolderGet];if(a&&a.error()){console.warn(a.error().ex.error,a.error().ex.error_description);i.fileError(i.getChatId(),e.file.id,e.id);return false}i.executeRestAnswer(b.RestMethodHandler.imDiskFolderGet,a)}var n=0;var r=t[b.RestMethodHandler.imDiskFileUpload];if(r){var l=r.data();if(r.error()){console.warn(r.error().ex.error,r.error().ex.error_description);i.fileError(i.getChatId(),e.file.id,e.id);return false}else if(!l){console.warn("EMPTY_RESPONSE","Server returned an empty response. [2]");i.fileError(i.getChatId(),e.file.id,e.id);return false}n=l.ID}else{console.warn("EMPTY_RESPONSE","Server returned an empty response. [3]");i.fileError(i.getChatId(),e.file.id,e.id);return false}e.chatId=i.getChatId();i.store.dispatch("files/update",{chatId:e.chatId,id:e.file.id,fields:{status:b.FileStatus.wait,progress:95}});i.fileCommit({chatId:e.chatId,uploadId:n,messageText:e.text,messageId:e.id,fileId:e.file.id,fileType:o},e)},false,function(t){e.xhr=t},y.Utils.getLogTrackingParams({name:b.RestMethodHandler.imDiskFileCommit,data:{timMessageType:o},dialog:this.getDialogData()}))}},{key:"fileError",value:function t(e,i){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.store.dispatch("files/update",{chatId:e,id:i,fields:{status:b.FileStatus.error,progress:0}});if(o){this.store.dispatch("messages/actionError",{chatId:e,id:o,retry:false})}}},{key:"fileCommit",value:function t(e,i){var o=this;this.restClient.callMethod(b.RestMethod.imDiskFileCommit,{chat_id:e.chatId,upload_id:e.uploadId,message:e.messageText,template_id:e.messageId,file_template_id:e.fileId},null,null,y.Utils.getLogTrackingParams({name:b.RestMethod.imDiskFileCommit,data:{timMessageType:e.fileType},dialog:this.getDialogData()})).then(function(t){o.executeRestAnswer(b.RestMethodHandler.imDiskFileCommit,t,i)}).catch(function(t){o.executeRestAnswer(b.RestMethodHandler.imDiskFileCommit,t,i)});return true}},{key:"getDialogHistory",value:function t(e){var i=this;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.controller.getRequestMessageLimit();this.restClient.callMethod(b.RestMethod.imDialogMessagesGet,{CHAT_ID:this.getChatId(),LAST_ID:e,LIMIT:o,CONVERT_TEXT:"Y"}).then(function(t){i.executeRestAnswer(b.RestMethodHandler.imDialogMessagesGet,t);i.template.$emit(b.EventType.dialog.requestHistoryResult,{count:t.data().messages.length})}).catch(function(t){i.template.$emit(b.EventType.dialog.requestHistoryResult,{error:t.error().ex})})}},{key:"getDialogUnread",value:function t(e){var i=this;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.controller.getRequestMessageLimit();var s=new BX.Promise;if(!e){e=this.store.getters["messages/getLastId"](this.controller.getChatId())}if(!e){this.template.$emit(b.EventType.dialog.requestUnreadResult,{error:{error:"LAST_ID_EMPTY",error_description:"LastId is empty."}});s.reject();return s}this.controller.readMessage(e,true,true).then(function(){var t;var a=(t={},babelHelpers.defineProperty(t,b.RestMethodHandler.imDialogRead,[b.RestMethod.imDialogRead,{dialog_id:i.getDialogId(),message_id:e}]),babelHelpers.defineProperty(t,b.RestMethodHandler.imChatGet,[b.RestMethod.imChatGet,{dialog_id:i.getDialogId()}]),babelHelpers.defineProperty(t,b.RestMethodHandler.imDialogMessagesGetUnread,[b.RestMethod.imDialogMessagesGet,{chat_id:i.getChatId(),first_id:e,limit:o,convert_text:"Y"}]),t);i.restClient.callBatch(a,function(t){if(!t){i.template.$emit(b.EventType.dialog.requestUnreadResult,{error:{error:"EMPTY_RESPONSE",error_description:"Server returned an empty response."}});s.reject();return false}var e=t[b.RestMethodHandler.imChatGet];if(!e.error()){i.executeRestAnswer(b.RestMethodHandler.imChatGet,e)}var o=t[b.RestMethodHandler.imDialogMessagesGetUnread];if(o.error()){i.template.$emit(b.EventType.dialog.requestUnreadResult,{error:o.error().ex})}else{i.executeRestAnswer(b.RestMethodHandler.imDialogMessagesGetUnread,o);i.template.$emit(b.EventType.dialog.requestUnreadResult,{firstMessageId:o.data().messages.length>0?o.data().messages[0].id:0,count:o.data().messages.length})}s.fulfill(t)},false,false,y.Utils.getLogTrackingParams({name:b.RestMethodHandler.imDialogMessagesGetUnread,dialog:i.getDialogData()}))});return s}},{key:"retrySendMessage",value:function t(e){if(this.messagesQueue.find(function(t){return t.id===e.id})){return false}this.messagesQueue.push({id:e.id,text:e.text,sending:false});this.controller.setSendingMessageFlag(e.id);this.processSendMessages()}},{key:"readMessage",value:function t(e){if(this.offline){return false}return this.controller.readMessage(e)}},{key:"quoteMessage",value:function t(e){this.store.dispatch("dialogues/update",{dialogId:this.controller.getDialogId(),fields:{quoteId:e}})}},{key:"reactMessage",value:function t(e,i){this.controller.reactMessage(e,i.type,i.action)}},{key:"execMessageKeyboardCommand",value:function t(e){if(e.action!=="COMMAND"){return false}var i=e.params,o=i.dialogId,s=i.messageId,a=i.botId,n=i.command,r=i.params;this.restClient.callMethod(b.RestMethod.imMessageCommand,{MESSAGE_ID:s,DIALOG_ID:o,BOT_ID:a,COMMAND:n,COMMAND_PARAMS:r});return true}},{key:"quoteMessageClear",value:function t(){this.store.dispatch("dialogues/update",{dialogId:this.controller.getDialogId(),fields:{quoteId:0}})}},{key:"sendDialogVote",value:function t(e){var i=this;if(!this.getSessionId()){return false}this.restClient.callMethod(F.widgetVoteSend,{SESSION_ID:this.getSessionId(),ACTION:e}).catch(function(t){i.store.commit("widget/dialog",{userVote:E.none})});this.sendEvent({type:D.userVote,data:{vote:e}})}},{key:"sendForm",value:function t(e,i){var o,s=this;p.Logger.info("LiveChatWidgetPrivate.sendForm:",e,i);var a=(o={},babelHelpers.defineProperty(o,F.widgetFormSend,[F.widgetFormSend,{CHAT_ID:this.getChatId(),FORM:e.toUpperCase(),FIELDS:i}]),babelHelpers.defineProperty(o,F.widgetUserGet,[F.widgetUserGet,{}]),o);this.restClient.callBatch(a,function(t){if(!t){s.requestDataSend=false;s.setError("EMPTY_RESPONSE","Server returned an empty response.");return false}var o=t[F.widgetUserGet];if(o.error()){s.requestDataSend=false;s.setError(o.error().ex.error,o.error().ex.error_description);return false}s.executeRestAnswer(F.widgetUserGet,o);s.sendEvent({type:D.userForm,data:{form:e,fields:i}})},false,false,y.Utils.getLogTrackingParams({name:F.widgetUserGet,dialog:this.getDialogData()}))}},{key:"sendConsentDecision",value:function t(e){e=e===true;this.store.commit("widget/dialog",{userConsent:e});if(e&&this.isUserRegistered()){this.restClient.callMethod(F.widgetUserConsentApply,{config_id:this.getConfigId(),consent_url:location.href})}}},{key:"start",value:function t(){if(!this.store){this.callStartFlag=true;return true}if(this.isSessionActive()){this.requestWidgetData()}return true}},{key:"open",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};clearTimeout(this.openTimeout);if(!this.store){this.callOpenFlag=true;return true}if(!e.openFromButton&&this.buttonInstance){this.buttonInstance.wm.showById("openline_livechat")}if(!this.checkBrowserVersion()){this.setError("OLD_BROWSER_LOCALIZED",this.localize.BX_LIVECHAT_OLD_BROWSER)}else if(y.Utils.versionCompare(C.Vue.version(),"2.1")<0){alert(this.localize.BX_LIVECHAT_OLD_VUE);console.error("LiveChatWidget.error: OLD_VUE_VERSION (".concat(this.localize.BX_LIVECHAT_OLD_VUE_DEV.replace("#CURRENT_VERSION#",C.Vue.version()),")"));return false}else if(!this.isWidgetDataRequested()){this.requestWidgetData()}this.attachTemplate()}},{key:"close",value:function t(){if(this.pageMode){return false}if(this.buttonInstance){this.buttonInstance.onWidgetClose()}this.detachTemplate()}},{key:"showNotification",value:function t(e){if(!this.store){console.error("LiveChatWidget.showNotification: method can be called after fired event - onBitrixLiveChat");return false}}},{key:"fireInitEvent",value:function t(){if(this.initEventFired){return true}this.sendEvent({type:D.configLoaded,data:{}});if(this.store.state.widget.common.reopen){this.open()}this.initEventFired=true;return true}},{key:"isReady",value:function t(){return this.ready}},{key:"isInited",value:function t(){return this.inited}},{key:"isUserRegistered",value:function t(){return!!this.getUserHash()}},{key:"isConfigDataLoaded",value:function t(){return this.store.state.widget.common.configId}},{key:"isWidgetDataRequested",value:function t(){return this.widgetDataRequested}},{key:"isChatLoaded",value:function t(){return this.store.state.application.dialog.chatId>0}},{key:"isSessionActive",value:function t(){return!this.store.state.widget.dialog.sessionClose}},{key:"isUserAgreeConsent",value:function t(){return this.store.state.widget.dialog.userConsent}},{key:"getCrmTraceData",value:function t(){var e="";if(!this.buttonInstance){return e}if(typeof this.buttonInstance.getTrace!=="function"){e=this.buttonInstance.getTrace()}else if(typeof this.buttonInstance.b24Tracker!=="undefined"&&typeof this.buttonInstance.b24Tracker.guest!=="undefined"){e=this.buttonInstance.b24Tracker.guest.getTrace()}return e}},{key:"getCustomData",value:function t(){var e=[];if(this.customData.length>0){e=this.customData}else{e=[{MESSAGE:this.localize.BX_LIVECHAT_EXTRA_SITE+": "+location.href}]}return JSON.stringify(e)}},{key:"isUserLoaded",value:function t(){return this.store.state.widget.user.id>0}},{key:"getSiteId",value:function t(){return this.host.replace(/(http.?:\/\/)|([:.\\\/])/gm,"")+this.code}},{key:"getHost",value:function t(){return this.host}},{key:"getConfigId",value:function t(){return this.store.state.widget.common.configId}},{key:"isDialogStart",value:function t(){return this.store.state.widget.common.dialogStart}},{key:"getChatId",value:function t(){return this.store.state.application.dialog.chatId}},{key:"getDialogId",value:function t(){return this.store.state.application.dialog.dialogId}},{key:"getDiskFolderId",value:function t(){return this.store.state.application.dialog.diskFolderId}},{key:"getDialogData",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();return this.store.state.dialogues.collection[e]}},{key:"getSessionId",value:function t(){return this.store.state.widget.dialog.sessionId}},{key:"getUserHash",value:function t(){return this.store.state.widget.user.hash}},{key:"getUserHashCookie",value:function t(){var e="";var i=H.get(null,"LIVECHAT_HASH");if(typeof i==="string"&&i.match(/^[a-f0-9]{32}$/)){e=i}else{var o=H.get(this.getSiteId(),"LIVECHAT_HASH");if(typeof o==="string"&&o.match(/^[a-f0-9]{32}$/)){e=o}}return e}},{key:"getUserId",value:function t(){return this.store.state.widget.user.id}},{key:"getUserData",value:function t(){if(!this.store){console.error("LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat");return false}return this.store.state.widget.user}},{key:"getUserRegisterFields",value:function t(){return{name:this.userRegisterData.name||"",last_name:this.userRegisterData.lastName||"",avatar:this.userRegisterData.avatar||"",email:this.userRegisterData.email||"",www:this.userRegisterData.www||"",gender:this.userRegisterData.gender||"",position:this.userRegisterData.position||"",user_hash:this.userRegisterData.hash||this.getUserHashCookie()||"",consent_url:this.store.state.widget.common.consentUrl?location.href:"",trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}}},{key:"getWidgetLocationCode",value:function t(){return k[this.store.state.widget.common.location]}},{key:"setUserRegisterData",value:function t(e){if(!this.store){console.error("LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat");return false}var i=["hash","name","lastName","avatar","email","www","gender","position"];if(!y.Utils.types.isPlainObject(e)){console.error("%cLiveChatWidget.setUserData: params is not a object","color: black;");return false}for(var o in this.userRegisterData){if(!this.userRegisterData.hasOwnProperty(o)){continue}if(!e[o]){delete this.userRegisterData[o]}}for(var s in e){if(!e.hasOwnProperty(s)){continue}if(i.indexOf(s)===-1){console.warn("%cLiveChatWidget.setUserData: user field is not set, because you are trying to set an unknown field (%c".concat(s,"%c)"),"color: black;","font-weight: bold; color: red","color: black");continue}this.userRegisterData[s]=e[s]}if(this.userRegisterData.hash&&this.getUserHash()&&this.userRegisterData.hash!==this.getUserHash()){this.setNewAuthToken(this.userRegisterData.hash)}}},{key:"setNewAuthToken",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";this.storeCollector.clearModelState();H.set(null,"LIVECHAT_HASH","",{expires:365*86400,path:"/"});this.restClient.setAuthId(A.guest,e)}},{key:"setCustomData",value:function t(e){if(!this.store){console.error("LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat");return false}var i=[];if(e instanceof Array){e.forEach(function(t){if(t&&babelHelpers.typeof(t)==="object"){i.push(t)}});if(i.length<=0){console.error("LiveChatWidget.setCustomData: params is empty");return false}}else{if(!e){return false}i=[{MESSAGE:e}]}this.customData=this.customData.concat(i);return true}},{key:"setError",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";console.error("LiveChatWidget.error: ".concat(e," (").concat(i,")"));var o="";if(e==="LIVECHAT_AUTH_FAILED"){o=this.getLocalize("BX_LIVECHAT_AUTH_FAILED").replace("#LINK_START#",'<a href="javascript:void();" onclick="location.reload()">').replace("#LINK_END#","</a>");this.setNewAuthToken()}else if(e==="LIVECHAT_AUTH_PORTAL_USER"){o=this.getLocalize("BX_LIVECHAT_PORTAL_USER_NEW").replace("#LINK_START#",'<a href="'+this.host+'">').replace("#LINK_END#","</a>")}else if(e.endsWith("LOCALIZED")){o=i}this.store.commit("application/set",{error:{active:true,code:e,description:o}})}},{key:"clearError",value:function t(){this.store.commit("application/set",{error:{active:false,code:"",description:""}})}},{key:"subscribe",value:function t(e){if(!y.Utils.types.isPlainObject(e)){console.error("%cLiveChatWidget.subscribe: params is not a object","color: black;");return false}if(!S.includes(e.type)){console.error("%cLiveChatWidget.subscribe: subscription type is not correct (%c".concat(e.type,"%c)"),"color: black;","font-weight: bold; color: red","color: black");return false}if(typeof e.callback!=="function"){console.error("%cLiveChatWidget.subscribe: callback is not a function (%c".concat(babelHelpers.typeof(e.callback),"%c)"),"color: black;","font-weight: bold; color: red","color: black");return false}if(typeof this.subscribers[e.type]==="undefined"){this.subscribers[e.type]=[]}this.subscribers[e.type].push(e.callback);return function(){this.subscribers[e.type]=this.subscribers[e.type].filter(function(t){return t!==e.callback})}.bind(this)}},{key:"sendEvent",value:function t(e){e=e||{};if(!e.type){return false}if(babelHelpers.typeof(e.data)!=="object"||!e.data){e.data={}}if(this.subscribers[e.type]instanceof Array&&this.subscribers[e.type].length>0){this.subscribers[e.type].forEach(function(t){return t(e.data)})}if(this.subscribers[D.every]instanceof Array&&this.subscribers[D.every].length>0){this.subscribers[D.every].forEach(function(t){return t({type:e.type,data:e.data})})}return true}},{key:"addLocalize",value:function t(e){if(babelHelpers.typeof(e)!=="object"||!e){return false}for(var i in e){if(e.hasOwnProperty(i)){this.localize[i]=e[i]}}return true}},{key:"getLocalize",value:function t(e){var i="";if(typeof e==="undefined"){return this.localize}else if(typeof this.localize[e.toString()]==="undefined"){console.warn("LiveChatWidget.getLocalize: message with code '".concat(e.toString(),"' is undefined."))}else{i=this.localize[e]}return i}}]);return t}();var O=function(){function t(e){babelHelpers.classCallCheck(this,t);this.developerInfo="Do not use private methods.";this.__privateMethods__=new V(e);this.__createLegacyMethods()}babelHelpers.createClass(t,[{key:"open",value:function t(e){return this.__privateMethods__.open(e)}},{key:"close",value:function t(){return this.__privateMethods__.close()}},{key:"showNotification",value:function t(e){return this.__privateMethods__.showNotification(e)}},{key:"getUserData",value:function t(){return this.__privateMethods__.getUserData()}},{key:"setUserRegisterData",value:function t(e){return this.__privateMethods__.setUserRegisterData(e)}},{key:"setCustomData",value:function t(e){return this.__privateMethods__.setCustomData(e)}},{key:"mutateTemplateComponent",value:function t(e,i){return this.__privateMethods__.mutateTemplateComponent(e,i)}},{key:"addLocalize",value:function t(e){return this.__privateMethods__.addLocalize(e)}},{key:"subscribe",value:function t(e){return this.__privateMethods__.subscribe(e)}},{key:"start",value:function t(){return this.__privateMethods__.start()}},{key:"__createLegacyMethods",value:function t(){var e=this;if(typeof window.BX.LiveChat==="undefined"){var i=document.createElement("a");i.href=this.__privateMethods__.host;var o=i.protocol+"//"+i.hostname+(i.port&&i.port!="80"&&i.port!="443"?":"+i.port:"");window.BX.LiveChat={openLiveChat:function t(){e.open({openFromButton:true})},closeLiveChat:function t(){e.close()},addEventListener:function t(i,s,a){if(s==="message"){e.subscribe({type:D.userMessage,callback:function t(e){a({origin:o,data:JSON.stringify({action:"sendMessage"}),event:e})}})}else{console.warn("Method BX.LiveChat.addEventListener is not supported, user new format for subscribe.")}},setCookie:function t(){},getCookie:function t(){},sourceDomain:o}}if(typeof window.BxLiveChatInit==="function"){var s=window.BxLiveChatInit();if(s.user){this.__privateMethods__.setUserRegisterData(s.user)}if(s.firstMessage){this.__privateMethods__.setCustomData(s.firstMessage)}}if(window.BxLiveChatLoader instanceof Array){window.BxLiveChatLoader.forEach(function(t){return t()})}return true}}]);return t}();C.Vue.component("bx-livechat",{data:function t(){return{viewPortMetaSiteNode:null,viewPortMetaWidgetNode:null,storedMessage:"",storedFile:null,textareaFocused:false,textareaDrag:false,textareaHeight:100,textareaMinimumHeight:100,textareaMaximumHeight:y.Utils.device.isMobile()?200:300}},created:function t(){this.onCreated();document.addEventListener("keydown",this.onWindowKeyDown);this.$root.$on("requestShowForm",this.onRequestShowForm)},beforeDestroy:function t(){document.removeEventListener("keydown",this.onWindowKeyDown);this.$root.$off("requestShowForm",this.onRequestShowForm);this.onTextareaDragEventRemove()},computed:babelHelpers.objectSpread({FormType:function t(){return M},VoteType:function t(){return E},DeviceType:function t(){return b.DeviceType},EventType:function t(){return b.EventType},textareaHeightStyle:function t(e){return"flex: 0 0 "+this.textareaHeight+"px;"},localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)},widgetMobileDisabled:function t(e){if(e.application.device.type===b.DeviceType.mobile){if(navigator.userAgent.toString().includes("iPad"));else if(e.application.device.orientation===b.DeviceOrientation.horizontal){if(navigator.userAgent.toString().includes("iPhone")){return true}else{return!(babelHelpers.typeof(window.screen)==="object"&&window.screen.availHeight>=800)}}}return false},widgetClassName:function t(e){var i=["bx-livechat-wrapper"];i.push("bx-livechat-show");if(e.widget.common.pageMode){i.push("bx-livechat-page-mode")}else{i.push("bx-livechat-position-"+k[e.widget.common.location])}if(e.application.common.languageId===_.russian){i.push("bx-livechat-logo-ru")}else if(e.application.common.languageId===_.ukraine){i.push("bx-livechat-logo-ua")}else{i.push("bx-livechat-logo-en")}if(!e.widget.common.online){i.push("bx-livechat-offline-state")}if(e.widget.common.dragged){i.push("bx-livechat-drag-n-drop")}if(e.widget.common.dialogStart){i.push("bx-livechat-chat-start")}if(e.widget.dialog.operator.name&&!(e.application.device.type===b.DeviceType.mobile&&e.application.device.orientation===b.DeviceOrientation.horizontal)){i.push("bx-livechat-has-operator")}if(y.Utils.device.isMobile()){i.push("bx-livechat-mobile")}else if(y.Utils.browser.isSafari()){i.push("bx-livechat-browser-safari")}else if(y.Utils.browser.isIe()){i.push("bx-livechat-browser-ie")}if(y.Utils.platform.isMac()){i.push("bx-livechat-mac")}else{i.push("bx-livechat-custom-scroll")}if(e.widget.common.styles.backgroundColor&&y.Utils.isDarkColor(e.widget.common.styles.iconColor)){i.push("bx-livechat-bright-header")}return i.join(" ")},showMessageDialog:function t(){return this.messageCollection.length>0},quotePanelData:function t(){var e={id:0,title:"",description:"",color:""};if(!this.dialog.quoteId){return e}var i=this.$store.getters["messages/getMessage"](this.dialog.chatId,this.dialog.quoteId);if(!i){return e}var o=this.$store.getters["users/get"](i.authorId);e={id:this.dialog.quoteId,title:o?o.name:"",color:o?o.color:"",description:i.textConverted?i.textConverted:this.localize.BX_LIVECHAT_FILE_MESSAGE};return e}},I.Vuex.mapState({widget:function t(e){return e.widget},application:function t(e){return e.application},dialog:function t(e){return e.dialogues.collection[e.application.dialog.dialogId]},messageCollection:function t(e){return e.messages.collection[e.application.dialog.chatId]}})),watch:{sessionClose:function t(e){p.Logger.log("sessionClose change",e)}},methods:{close:function t(e){if(this.widget.common.pageMode){return false}this.onBeforeClose();this.$store.commit("widget/common",{showed:false})},showLikeForm:function t(){if(this.offline){return false}clearTimeout(this.showFormTimeout);if(!this.widget.common.vote.enable){return false}if(this.widget.dialog.sessionClose&&this.widget.dialog.userVote!==E.none){return false}this.$store.commit("widget/common",{showForm:M.like})},showWelcomeForm:function t(){clearTimeout(this.showFormTimeout);this.$store.commit("widget/common",{showForm:M.welcome})},showOfflineForm:function t(){clearTimeout(this.showFormTimeout);if(this.widget.dialog.showForm!==M.welcome){this.$store.commit("widget/common",{showForm:M.offline})}},showHistoryForm:function t(){clearTimeout(this.showFormTimeout);this.$store.commit("widget/common",{showForm:M.history})},hideForm:function t(){clearTimeout(this.showFormTimeout);if(this.widget.common.showForm!==M.none){this.$store.commit("widget/common",{showForm:M.none})}},showConsentWidow:function t(){this.$store.commit("widget/common",{showConsent:true})},agreeConsentWidow:function t(){this.$store.commit("widget/common",{showConsent:false});this.$root.$bitrixWidget.sendConsentDecision(true);if(this.storedMessage||this.storedFile){if(this.storedMessage){this.onTextareaSend({focus:this.application.device.type!==b.DeviceType.mobile});this.storedMessage=""}if(this.storedFile){this.onTextareaFileSelected();this.storedFile=""}}else if(this.widget.common.showForm===M.none){this.$root.$emit(b.EventType.textarea.focus)}},disagreeConsentWidow:function t(){this.$store.commit("widget/common",{showForm:M.none});this.$store.commit("widget/common",{showConsent:false});this.$root.$bitrixWidget.sendConsentDecision(false);if(this.storedMessage){this.$root.$emit(b.EventType.textarea.insertText,{text:this.storedMessage,focus:this.application.device.type!==b.DeviceType.mobile});this.storedMessage=""}if(this.storedFile){this.storedFile=""}if(this.application.device.type!==b.DeviceType.mobile){this.$root.$emit(b.EventType.textarea.focus)}},logEvent:function t(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++){o[s-1]=arguments[s]}p.Logger.info.apply(p.Logger,[e].concat(o))},onCreated:function t(){var e=this;if(y.Utils.device.isMobile()){var i=Array.from(document.head.getElementsByTagName("meta")).filter(function(t){return t.name==="viewport"})[0];if(i){this.viewPortMetaSiteNode=i;document.head.removeChild(this.viewPortMetaSiteNode)}else{var o=document.body.offsetWidth;if(o<window.innerWidth){o=window.innerWidth}if(o<1024){o=1024}this.viewPortMetaSiteNode=document.createElement("meta");this.viewPortMetaSiteNode.setAttribute("name","viewport");this.viewPortMetaSiteNode.setAttribute("content","width=".concat(o,", initial-scale=1.0, user-scalable=1"))}if(!this.viewPortMetaWidgetNode){this.viewPortMetaWidgetNode=document.createElement("meta");this.viewPortMetaWidgetNode.setAttribute("name","viewport");this.viewPortMetaWidgetNode.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0");document.head.appendChild(this.viewPortMetaWidgetNode)}document.body.classList.add("bx-livechat-mobile-state");if(y.Utils.browser.isSafariBased()){document.body.classList.add("bx-livechat-mobile-safari-based")}setTimeout(function(){e.$store.commit("widget/common",{showed:true})},50)}else{this.$store.commit("widget/common",{showed:true})}this.textareaHeight=this.widget.common.textareaHeight||this.textareaHeight;this.$store.commit("files/initCollection",{chatId:this.$root.$bitrixWidget.getChatId()});this.$store.commit("messages/initCollection",{chatId:this.$root.$bitrixWidget.getChatId()});this.$store.commit("dialogues/initCollection",{dialogId:this.$root.$bitrixWidget.getDialogId(),fields:{entityType:"LIVECHAT",type:"livechat"}})},onBeforeClose:function t(){if(y.Utils.device.isMobile()){document.body.classList.remove("bx-livechat-mobile-state");if(y.Utils.browser.isSafariBased()){document.body.classList.remove("bx-livechat-mobile-safari-based")}if(this.viewPortMetaWidgetNode){document.head.removeChild(this.viewPortMetaWidgetNode);this.viewPortMetaWidgetNode=null}if(this.viewPortMetaSiteNode){document.head.appendChild(this.viewPortMetaSiteNode);this.viewPortMetaSiteNode=null}}},onAfterClose:function t(){this.$root.$bitrixWidget.close()},onRequestShowForm:function t(e){var i=this;clearTimeout(this.showFormTimeout);if(e.type===M.welcome){if(e.delayed){this.showFormTimeout=setTimeout(function(){i.showWelcomeForm()},5e3)}else{this.showWelcomeForm()}}else if(e.type===M.offline){if(e.delayed){this.showFormTimeout=setTimeout(function(){i.showOfflineForm()},3e3)}else{this.showOfflineForm()}}else if(e.type===M.like){if(e.delayed){this.showFormTimeout=setTimeout(function(){i.showLikeForm()},5e3)}else{this.showLikeForm()}}},onDialogRequestHistory:function t(e){this.$root.$bitrixWidget.getDialogHistory(e.lastId)},onDialogRequestUnread:function t(e){this.$root.$bitrixWidget.getDialogUnread(e.lastId)},onDialogMessageClickByUserName:function t(e){this.$root.$emit(b.EventType.textarea.insertText,{text:e.user.name+" "})},onDialogMessageClickByUploadCancel:function t(e){this.$root.$bitrixWidget.cancelUploadFile(e.file.id)},onDialogMessageClickByKeyboardButton:function t(e){this.$root.$bitrixWidget.execMessageKeyboardCommand(e)},onDialogMessageClickByCommand:function t(e){if(e.type==="put"){this.$root.$emit(b.EventType.textarea.insertText,{text:e.value+" "})}else if(e.type==="send"){this.$root.$bitrixWidget.addMessage(e.value)}else{p.Logger.warn("Unprocessed command",e)}},onDialogMessageMenuClick:function t(e){p.Logger.warn("Message menu:",e)},onDialogMessageRetryClick:function t(e){p.Logger.warn("Message retry:",e);this.$root.$bitrixWidget.retrySendMessage(e.message)},onDialogReadMessage:function t(e){this.$root.$bitrixWidget.readMessage(e.id)},onDialogQuoteMessage:function t(e){this.$root.$bitrixWidget.quoteMessage(e.message.id)},onDialogMessageReactionSet:function t(e){this.$root.$bitrixWidget.reactMessage(e.message.id,e.reaction)},onDialogClick:function t(e){if(this.widget.common.showForm!==M.none){this.$store.commit("widget/common",{showForm:M.none})}},onTextareaSend:function t(e){e.focus=e.focus!==false;if(this.widget.common.showForm===M.smile){this.$store.commit("widget/common",{showForm:M.none})}if(!this.widget.dialog.userConsent&&this.widget.common.consentUrl){if(e.text){this.storedMessage=e.text}this.showConsentWidow();return false}e.text=e.text?e.text:this.storedMessage;if(!e.text){return false}this.hideForm();this.$root.$bitrixWidget.addMessage(e.text);if(e.focus){this.$root.$emit(b.EventType.textarea.focus)}return true},onTextareaWrites:function t(e){this.$root.$bitrixController.startWriting()},onTextareaFocus:function t(e){var i=this;if(this.widget.common.copyright&&this.application.device.type===b.DeviceType.mobile){this.widget.common.copyright=false}if(y.Utils.device.isMobile()){clearTimeout(this.onTextareaFocusScrollTimeout);this.onTextareaFocusScrollTimeout=setTimeout(function(){document.addEventListener("scroll",i.onWindowScroll)},1e3)}this.textareaFocused=true},onTextareaBlur:function t(e){var i=this;if(!this.widget.common.copyright&&this.widget.common.copyright!==this.$root.$bitrixWidget.copyright){this.widget.common.copyright=this.$root.$bitrixWidget.copyright;this.$nextTick(function(){i.$root.$emit(b.EventType.dialog.scrollToBottom,{force:true})})}if(y.Utils.device.isMobile()){clearTimeout(this.onTextareaFocusScrollTimeout);document.removeEventListener("scroll",this.onWindowScroll)}this.textareaFocused=false},onTextareaStartDrag:function t(e){if(this.textareaDrag){return}p.Logger.log("Livechat: textarea drag started");this.textareaDrag=true;e=e.changedTouches?e.changedTouches[0]:e;this.textareaDragCursorStartPoint=e.clientY;this.textareaDragHeightStartPoint=this.textareaHeight;this.onTextareaDragEventAdd();this.$root.$emit(b.EventType.textarea.blur,true)},onTextareaContinueDrag:function t(e){if(!this.textareaDrag){return}e=e.changedTouches?e.changedTouches[0]:e;this.textareaDragCursorControlPoint=e.clientY;var i=Math.max(Math.min(this.textareaDragHeightStartPoint+this.textareaDragCursorStartPoint-this.textareaDragCursorControlPoint,this.textareaMaximumHeight),this.textareaMinimumHeight);p.Logger.log("Livechat: textarea drag","new: "+i,"curr: "+this.textareaHeight);if(this.textareaHeight!==i){this.textareaHeight=i}},onTextareaStopDrag:function t(){if(!this.textareaDrag){return}p.Logger.log("Livechat: textarea drag ended");this.textareaDrag=false;this.onTextareaDragEventRemove();this.$store.commit("widget/common",{textareaHeight:this.textareaHeight});this.$root.$emit(b.EventType.dialog.scrollToBottom,{force:true})},onTextareaDragEventAdd:function t(){document.addEventListener("mousemove",this.onTextareaContinueDrag);document.addEventListener("touchmove",this.onTextareaContinueDrag);document.addEventListener("touchend",this.onTextareaStopDrag);document.addEventListener("mouseup",this.onTextareaStopDrag);document.addEventListener("mouseleave",this.onTextareaStopDrag)},onTextareaDragEventRemove:function t(){document.removeEventListener("mousemove",this.onTextareaContinueDrag);document.removeEventListener("touchmove",this.onTextareaContinueDrag);document.removeEventListener("touchend",this.onTextareaStopDrag);document.removeEventListener("mouseup",this.onTextareaStopDrag);document.removeEventListener("mouseleave",this.onTextareaStopDrag)},onTextareaFileSelected:function t(e){var i=e&&e.fileInput?e.fileInput:this.storedFile;if(!i){return false}if(i.files[0].size>this.application.disk.maxFileSize){alert(this.localize.BX_LIVECHAT_FILE_SIZE_EXCEEDED.replace("#LIMIT#",Math.round(this.application.disk.maxFileSize/1024/1024)));return false}if(!this.widget.dialog.userConsent&&this.widget.common.consentUrl){this.storedFile=e.fileInput;this.showConsentWidow();return false}this.$root.$bitrixWidget.uploadFile(i)},onTextareaAppButtonClick:function t(e){if(e.appId===M.smile){if(this.widget.common.showForm===M.smile){this.$store.commit("widget/common",{showForm:M.none})}else{this.$store.commit("widget/common",{showForm:M.smile})}}else{this.$root.$emit(b.EventType.textarea.focus)}},onPullRequestConfig:function t(e){this.$root.$bitrixWidget.recoverPullConnection()},onSmilesSelectSmile:function t(e){this.$root.$emit(b.EventType.textarea.insertText,{text:e.text})},onSmilesSelectSet:function t(){this.$root.$emit(b.EventType.textarea.focus)},onQuotePanelClose:function t(){this.$root.$bitrixWidget.quoteMessageClear()},onWindowKeyDown:function t(e){if(e.keyCode===27){if(this.widget.common.showForm!==M.none){this.$store.commit("widget/common",{showForm:M.none})}else if(this.widget.common.showConsent){this.disagreeConsentWidow()}else{this.close()}e.preventDefault();e.stopPropagation();this.$root.$emit(b.EventType.textarea.focus)}},onWindowScroll:function t(e){var i=this;clearTimeout(this.onWindowScrollTimeout);this.onWindowScrollTimeout=setTimeout(function(){i.$root.$emit(b.EventType.textarea.blur,true)},50)}},template:'\n\t\t<transition enter-active-class="bx-livechat-show" leave-active-class="bx-livechat-close" @after-leave="onAfterClose">\n\t\t\t<div :class="widgetClassName" v-if="widget.common.showed">\n\t\t\t\t<div class="bx-livechat-box">\n\t\t\t\t\t<bx-livechat-head :isWidgetDisabled="widgetMobileDisabled" @like="showLikeForm" @history="showHistoryForm" @close="close"/>\n\t\t\t\t\t<template v-if="widgetMobileDisabled">\n\t\t\t\t\t\t<bx-livechat-body-orientation-disabled/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="application.error.active">\n\t\t\t\t\t\t<bx-livechat-body-error/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="!widget.common.configId">\n\t\t\t\t\t\t<div class="bx-livechat-body" key="loading-body">\n\t\t\t\t\t\t\t<bx-livechat-body-loading/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\t\t\t\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<template v-if="!widget.common.dialogStart">\n\t\t\t\t\t\t\t<div class="bx-livechat-body" key="welcome-body">\n\t\t\t\t\t\t\t\t<bx-livechat-body-operators/>\n\t\t\t\t\t\t\t\t<keep-alive include="bx-livechat-smiles">\n\t\t\t\t\t\t\t\t\t<template v-if="widget.common.showForm == FormType.smile">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-smiles @selectSmile="onSmilesSelectSmile" @selectSet="onSmilesSelectSet"/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if="widget.common.dialogStart">\n\t\t\t\t\t\t\t<bx-pull-status :canReconnect="true" @reconnect="onPullRequestConfig"/>\n\t\t\t\t\t\t\t<div :class="[\'bx-livechat-body\', {\'bx-livechat-body-with-message\': showMessageDialog}]" key="with-message">\n\t\t\t\t\t\t\t\t<template v-if="showMessageDialog">\n\t\t\t\t\t\t\t\t\t<div class="bx-livechat-dialog">\n\t\t\t\t\t\t\t\t\t\t<bx-messenger-dialog\n\t\t\t\t\t\t\t\t\t\t\t:userId="application.common.userId" \n\t\t\t\t\t\t\t\t\t\t\t:dialogId="application.dialog.dialogId"\n\t\t\t\t\t\t\t\t\t\t\t:chatId="application.dialog.chatId"\n\t\t\t\t\t\t\t\t\t\t\t:messageLimit="application.dialog.messageLimit"\n\t\t\t\t\t\t\t\t\t\t\t:messageExtraCount="application.dialog.messageExtraCount"\n\t\t\t\t\t\t\t\t\t\t\t:enableReactions="true"\n\t\t\t\t\t\t\t\t\t\t\t:enableDateActions="false"\n\t\t\t\t\t\t\t\t\t\t\t:enableCreateContent="false"\n\t\t\t\t\t\t\t\t\t\t\t:enableGestureQuote="true"\n\t\t\t\t\t\t\t\t\t\t\t:enableGestureMenu="true"\n\t\t\t\t\t\t\t\t\t\t\t:showMessageAvatar="false"\n\t\t\t\t\t\t\t\t\t\t\t:showMessageMenu="false"\n\t\t\t\t\t\t\t\t\t\t\t:listenEventScrollToBottom="EventType.dialog.scrollToBottom"\n\t\t\t\t\t\t\t\t\t\t\t:listenEventRequestHistory="EventType.dialog.requestHistoryResult"\n\t\t\t\t\t\t\t\t\t\t\t:listenEventRequestUnread="EventType.dialog.requestUnreadResult"\n\t\t\t\t\t\t\t\t\t\t\t@readMessage="onDialogReadMessage"\n\t\t\t\t\t\t\t\t\t\t\t@requestHistory="onDialogRequestHistory"\n\t\t\t\t\t\t\t\t\t\t\t@requestUnread="onDialogRequestUnread"\n\t\t\t\t\t\t\t\t\t\t\t@quoteMessage="onDialogQuoteMessage"\n\t\t\t\t\t\t\t\t\t\t\t@clickByCommand="onDialogMessageClickByCommand"\n\t\t\t\t\t\t\t\t\t\t\t@clickByUserName="onDialogMessageClickByUserName"\n\t\t\t\t\t\t\t\t\t\t\t@clickByUploadCancel="onDialogMessageClickByUploadCancel"\n\t\t\t\t\t\t\t\t\t\t\t@clickByKeyboardButton="onDialogMessageClickByKeyboardButton"\n\t\t\t\t\t\t\t\t\t\t\t@clickByMessageMenu="onDialogMessageMenuClick"\n\t\t\t\t\t\t\t\t\t\t\t@clickByMessageRetry="onDialogMessageRetryClick"\n\t\t\t\t\t\t\t\t\t\t\t@setMessageReaction="onDialogMessageReactionSet"\n\t\t\t\t\t\t\t\t\t\t\t@click="onDialogClick"\n\t\t\t\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t\t\t</div>\t \n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<bx-livechat-body-loading/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<bx-messenger-quote-panel :id="quotePanelData.id" :title="quotePanelData.title" :description="quotePanelData.description" :color="quotePanelData.color" @close="onQuotePanelClose"/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<keep-alive include="bx-livechat-smiles">\n\t\t\t\t\t\t\t\t\t<template v-if="widget.common.showForm == FormType.like && widget.common.vote.enable">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-vote/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm == FormType.welcome">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-welcome/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm == FormType.offline">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-offline/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm == FormType.history">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-history/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm == FormType.smile">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-smiles @selectSmile="onSmilesSelectSmile" @selectSet="onSmilesSelectSet"/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t<div class="bx-livechat-textarea" :style="textareaHeightStyle" ref="textarea">\n\t\t\t\t\t\t\t<div class="bx-livechat-textarea-resize-handle" @mousedown="onTextareaStartDrag" @touchstart="onTextareaStartDrag"></div>\n\t\t\t\t\t\t\t<bx-messenger-textarea\n\t\t\t\t\t\t\t\t:siteId="application.common.siteId"\n\t\t\t\t\t\t\t\t:userId="application.common.userId"\n\t\t\t\t\t\t\t\t:dialogId="application.dialog.dialogId"\n\t\t\t\t\t\t\t\t:writesEventLetter="3"\n\t\t\t\t\t\t\t\t:enableEdit="true"\n\t\t\t\t\t\t\t\t:enableCommand="false"\n\t\t\t\t\t\t\t\t:enableMention="false"\n\t\t\t\t\t\t\t\t:enableFile="application.disk.enabled"\n\t\t\t\t\t\t\t\t:autoFocus="application.device.type !== DeviceType.mobile"\n\t\t\t\t\t\t\t\t:styles="{button: {backgroundColor: widget.common.styles.backgroundColor, iconColor: widget.common.styles.iconColor}}"\n\t\t\t\t\t\t\t\t:listenEventInsertText="EventType.textarea.insertText"\n\t\t\t\t\t\t\t\t:listenEventFocus="EventType.textarea.focus"\n\t\t\t\t\t\t\t\t:listenEventBlur="EventType.textarea.blur"\n\t\t\t\t\t\t\t\t@writes="onTextareaWrites" \n\t\t\t\t\t\t\t\t@send="onTextareaSend" \n\t\t\t\t\t\t\t\t@focus="onTextareaFocus" \n\t\t\t\t\t\t\t\t@blur="onTextareaBlur" \n\t\t\t\t\t\t\t\t@edit="logEvent(\'edit message\', $event)"\n\t\t\t\t\t\t\t\t@fileSelected="onTextareaFileSelected"\n\t\t\t\t\t\t\t\t@appButtonClick="onTextareaAppButtonClick"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<bx-livechat-form-consent @agree="agreeConsentWidow" @disagree="disagreeConsentWidow"/>\n\t\t\t\t\t\t<template v-if="widget.common.copyright">\n\t\t\t\t\t\t\t<bx-livechat-footer/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t'});C.Vue.component("bx-livechat-body-error",{computed:babelHelpers.objectSpread({localize:function t(){return Object.freeze({BX_LIVECHAT_ERROR_TITLE:this.$root.$bitrixMessages.BX_LIVECHAT_ERROR_TITLE,BX_LIVECHAT_ERROR_DESC:this.$root.$bitrixMessages.BX_LIVECHAT_ERROR_DESC})}},I.Vuex.mapState({application:function t(e){return e.application}})),template:'\n\t\t<div class="bx-livechat-body" key="error-body">\n\t\t\t<div class="bx-livechat-warning-window">\n\t\t\t\t<div class="bx-livechat-warning-icon"></div>\n\t\t\t\t<template v-if="application.error.description"> \n\t\t\t\t\t<div class="bx-livechat-help-title bx-livechat-help-title-sm bx-livechat-warning-msg" v-html="application.error.description"></div>\n\t\t\t\t</template> \n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class="bx-livechat-help-title bx-livechat-help-title-md bx-livechat-warning-msg">{{localize.BX_LIVECHAT_ERROR_TITLE}}</div>\n\t\t\t\t\t<div class="bx-livechat-help-title bx-livechat-help-title-sm bx-livechat-warning-msg">{{localize.BX_LIVECHAT_ERROR_DESC}}</div>\n\t\t\t\t</template> \n\t\t\t</div>\n\t\t</div>\n\t'});C.Vue.component("bx-livechat-head",{props:{isWidgetDisabled:{default:false}},methods:{close:function t(e){this.$emit("close")},like:function t(e){this.$emit("like")},history:function t(e){this.$emit("history")}},computed:babelHelpers.objectSpread({VoteType:function t(){return E},customBackgroundStyle:function t(e){return e.widget.common.styles.backgroundColor?"background-color: "+e.widget.common.styles.backgroundColor+"!important;":""},customBackgroundOnlineStyle:function t(e){return e.widget.common.styles.backgroundColor?"border-color: "+e.widget.common.styles.backgroundColor+"!important;":""},showName:function t(){return this.widget.dialog.operator.firstName||this.widget.dialog.operator.lastName},localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget},application:function t(e){return e.application}})),watch:{showName:function t(e){var i=this;if(e){setTimeout(function(){i.$root.$emit(b.EventType.dialog.scrollToBottom)},300)}}},template:'\n\t\t<div class="bx-livechat-head-wrap">\n\t\t\t<template v-if="isWidgetDisabled">\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<div class="bx-livechat-title">{{widget.common.configName || localize.BX_LIVECHAT_TITLE}}</div>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t</template>\n\t\t\t<template v-else-if="application.error.active">\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<div class="bx-livechat-title">{{widget.common.configName || localize.BX_LIVECHAT_TITLE}}</div>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if="!widget.common.configId">\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<div class="bx-livechat-title">{{widget.common.configName || localize.BX_LIVECHAT_TITLE}}</div>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\t\t\t\n\t\t\t<template v-else>\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<template v-if="!showName">\n\t\t\t\t\t\t<div class="bx-livechat-title">{{widget.common.configName || localize.BX_LIVECHAT_TITLE}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class="bx-livechat-user bx-livechat-status-online">\n\t\t\t\t\t\t\t<template v-if="widget.dialog.operator.avatar">\n\t\t\t\t\t\t\t\t<div class="bx-livechat-user-icon" :style="\'background-image: url(\'+encodeURI(widget.dialog.operator.avatar)+\')\'">\n\t\t\t\t\t\t\t\t\t<div v-if="widget.dialog.operator.online" class="bx-livechat-user-status" :style="customBackgroundOnlineStyle"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="bx-livechat-user-icon">\n\t\t\t\t\t\t\t\t\t<div v-if="widget.dialog.operator.online" class="bx-livechat-user-status" :style="customBackgroundOnlineStyle"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-livechat-user-info">\n\t\t\t\t\t\t\t<div class="bx-livechat-user-name">{{widget.dialog.operator.firstName? widget.dialog.operator.firstName: widget.dialog.operator.name}}</div>\n\t\t\t\t\t\t\t<div class="bx-livechat-user-position">{{widget.dialog.operator.workPosition? widget.dialog.operator.workPosition: localize.BX_LIVECHAT_USER}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<span class="bx-livechat-control-box-active" v-if="widget.common.dialogStart && widget.dialog.sessionId">\n\t\t\t\t\t\t\t<button v-if="widget.common.vote.enable && (!widget.dialog.sessionClose || widget.dialog.sessionClose && widget.dialog.userVote == VoteType.none)" :class="\'bx-livechat-control-btn bx-livechat-control-btn-like bx-livechat-dialog-vote-\'+(widget.dialog.userVote)" :title="localize.BX_LIVECHAT_VOTE_BUTTON" @click="like"></button>\n\t\t\t\t\t\t\t<button v-if="widget.common.vote.enable && widget.dialog.sessionClose && widget.dialog.userVote != VoteType.none" :class="\'bx-livechat-control-btn bx-livechat-control-btn-disabled bx-livechat-control-btn-like bx-livechat-dialog-vote-\'+(widget.dialog.userVote)"></button>\n\t\t\t\t\t\t\t<button class="bx-livechat-control-btn bx-livechat-control-btn-mail" :title="localize.BX_LIVECHAT_MAIL_BUTTON_NEW" @click="history"></button>\n\t\t\t\t\t\t</span>\t\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t'});C.Vue.component("bx-livechat-body-loading",{computed:{localize:function t(){return Object.freeze({BX_LIVECHAT_LOADING:this.$root.$bitrixMessages.BX_LIVECHAT_LOADING})}},template:'\n\t\t<div class="bx-livechat-loading-window">\n\t\t\t<svg class="bx-livechat-loading-circular" viewBox="25 25 50 50">\n\t\t\t\t<circle class="bx-livechat-loading-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t<circle class="bx-livechat-loading-inner-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t</svg>\n\t\t\t<h3 class="bx-livechat-help-title bx-livechat-help-title-md bx-livechat-loading-msg">{{localize.BX_LIVECHAT_LOADING}}</h3>\n\t\t</div>\n\t'});C.Vue.component("bx-livechat-body-operators",{computed:babelHelpers.objectSpread({localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget}})),template:'\n\t\t<div class="bx-livechat-help-container">\n\t\t\t<transition name="bx-livechat-animation-fade">\n\t\t\t\t<h2 v-if="widget.common.online" key="online" class="bx-livechat-help-title bx-livechat-help-title-lg">{{widget.common.textMessages.bxLivechatOnlineLine1}}<div class="bx-livechat-help-subtitle">{{widget.common.textMessages.bxLivechatOnlineLine2}}</div></h2>\n\t\t\t\t<h2 v-else key="offline" class="bx-livechat-help-title bx-livechat-help-title-sm">{{widget.common.textMessages.bxLivechatOffline}}</h2>\n\t\t\t</transition>\t\n\t\t\t<div class="bx-livechat-help-user">\n\t\t\t\t<template v-for="operator in widget.common.operators">\n\t\t\t\t\t<div class="bx-livechat-user" :key="operator.id">\n\t\t\t\t\t\t<template v-if="operator.avatar">\n\t\t\t\t\t\t\t<div class="bx-livechat-user-icon" :style="\'background-image: url(\'+encodeURI(operator.avatar)+\')\'"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class="bx-livechat-user-icon"></div>\n\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t<div class="bx-livechat-user-info">\n\t\t\t\t\t\t\t<div class="bx-livechat-user-name">{{operator.firstName? operator.firstName: operator.name}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\t\n\t\t\t</div>\n\t\t</div>\n\t'});C.Vue.component("bx-livechat-body-orientation-disabled",{computed:{localize:function t(){return Object.freeze({BX_LIVECHAT_MOBILE_ROTATE:this.$root.$bitrixMessages.BX_LIVECHAT_MOBILE_ROTATE})}},template:'\n\t\t<div class="bx-livechat-body" key="orientation-head">\n\t\t\t<div class="bx-livechat-mobile-orientation-box">\n\t\t\t\t<div class="bx-livechat-mobile-orientation-icon"></div>\n\t\t\t\t<div class="bx-livechat-mobile-orientation-text">{{localize.BX_LIVECHAT_MOBILE_ROTATE}}</div>\n\t\t\t</div>\n\t\t</div>\n\t'});C.Vue.component("bx-livechat-form-consent",{computed:babelHelpers.objectSpread({localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget}})),methods:{agree:function t(e){this.$emit("agree",{event:e})},disagree:function t(e){this.$emit("disagree",{event:e})},onShow:function t(e,i){e.classList.add("bx-livechat-consent-window-show");i()},onHide:function t(e,i){e.classList.remove("bx-livechat-consent-window-show");e.classList.add("bx-livechat-consent-window-close");setTimeout(function(){i()},400)},onKeyDown:function t(e){if(e.keyCode==9){if(e.target===this.$refs.iframe){if(e.shiftKey){this.$refs.cancel.focus()}else{this.$refs.success.focus()}}else if(e.target===this.$refs.success){if(e.shiftKey){this.$refs.iframe.focus()}else{this.$refs.cancel.focus()}}else if(e.target===this.$refs.cancel){if(e.shiftKey){this.$refs.success.focus()}else{this.$refs.iframe.focus()}}e.preventDefault()}else if(e.keyCode==39||e.keyCode==37){if(e.target.nextElementSibling){e.target.nextElementSibling.focus()}else if(e.target.previousElementSibling){e.target.previousElementSibling.focus()}e.preventDefault()}}},directives:{focus:{inserted:function t(e,i){e.focus()}}},template:'\n\t\t<transition @enter="onShow" @leave="onHide">\n\t\t\t<template v-if="widget.common.showConsent && widget.common.consentUrl">\n\t\t\t\t<div class="bx-livechat-consent-window">\n\t\t\t\t\t<div class="bx-livechat-consent-window-title">{{localize.BX_LIVECHAT_CONSENT_TITLE}}</div>\n\t\t\t\t\t<div class="bx-livechat-consent-window-content">\n\t\t\t\t\t\t<iframe class="bx-livechat-consent-window-content-iframe" ref="iframe" frameborder="0" marginheight="0"  marginwidth="0" allowtransparency="allow-same-origin" seamless="true" :src="widget.common.consentUrl" @keydown="onKeyDown"></iframe>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class="bx-livechat-consent-window-btn-box">\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-success" ref="success" @click="agree" @keydown="onKeyDown" v-focus>{{localize.BX_LIVECHAT_CONSENT_AGREE}}</button>\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-cancel" ref="cancel" @click="disagree" @keydown="onKeyDown">{{localize.BX_LIVECHAT_CONSENT_DISAGREE}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</transition>\n\t'});C.Vue.component("bx-livechat-form-history",{data:function t(){return{fieldEmail:""}},watch:{fieldEmail:function t(e){clearTimeout(this.fieldEmailTimeout);this.fieldEmailTimeout=setTimeout(this.checkEmailField,300)}},computed:babelHelpers.objectSpread({localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget}})),created:function t(){this.fieldEmail=""+this.widget.user.email},methods:{formShowed:function t(){if(!y.Utils.platform.isMobile()){this.$refs.emailInput.focus()}},sendForm:function t(){var e=this.checkEmailField()?this.fieldEmail:"";if(e){this.$root.$bitrixWidget.sendForm(M.history,{email:e})}this.hideForm()},hideForm:function t(e){clearTimeout(this.fieldEmailTimeout);this.$parent.hideForm()},onFieldEnterPress:function t(e){this.sendForm();e.preventDefault()},checkEmailField:function t(){if(this.fieldEmail.match(/^(.*)@(.*)\.[a-zA-Z]{2,}$/)){if(this.$refs.email){this.$refs.email.classList.remove("ui-ctl-danger")}return true}else{if(document.activeElement!==this.$refs.emailInput){if(this.$refs.email){this.$refs.email.classList.add("ui-ctl-danger")}}return false}}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close" @after-enter="formShowed">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-form-show" key="welcome">\t\n\t\t\t\t<div class="bx-livechat-alert-close" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-form-box">\n\t\t\t\t\t<h4 class="bx-livechat-alert-title bx-livechat-alert-title-sm">{{localize.BX_LIVECHAT_MAIL_TITLE_NEW}}</h4>\n\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg" ref="email">\n\t\t\t\t\t   <div class="ui-ctl-after ui-ctl-icon-mail bx-livechat-form-icon" :title="localize.BX_LIVECHAT_FIELD_MAIL_TOOLTIP"></div>\n\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_MAIL" v-model="fieldEmail" ref="emailInput" @blur="checkEmailField" @keydown.enter="onFieldEnterPress">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bx-livechat-btn-box">\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-success" @click="sendForm">{{localize.BX_LIVECHAT_MAIL_BUTTON_NEW}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t</transition>\t\n\t'});C.Vue.cloneComponent("bx-livechat-form-offline","bx-livechat-form-welcome",{methods:{formShowed:function t(){if(!y.Utils.platform.isMobile()){this.$refs.emailInput.focus()}},sendForm:function t(){var e=this.fieldName;var i=this.checkEmailField()?this.fieldEmail:"";var o=this.checkPhoneField()?this.fieldPhone:"";if(e||i||o){this.$root.$bitrixWidget.sendForm(M.offline,{name:e,email:i,phone:o})}this.hideForm()},onFieldEnterPress:function t(e){if(e.target===this.$refs.emailInput){this.showFullForm();this.$refs.phoneInput.focus()}else if(e.target===this.$refs.phoneInput){this.$refs.nameInput.focus()}else{this.sendForm()}e.preventDefault()}},watch:{fieldName:function t(){clearTimeout(this.fieldNameTimeout);this.fieldNameTimeout=setTimeout(this.checkNameField,300)},fieldEmail:function t(){clearTimeout(this.showFormTimeout);this.showFormTimeout=setTimeout(this.showFullForm,1e3);clearTimeout(this.fieldEmailTimeout);this.fieldEmailTimeout=setTimeout(this.checkEmailField,300)}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close" @after-enter="formShowed">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-form-show" key="welcome">\t\n\t\t\t\t<div class="bx-livechat-alert-close" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-form-box">\n\t\t\t\t\t<h4 class="bx-livechat-alert-title bx-livechat-alert-title-sm">{{localize.BX_LIVECHAT_OFFLINE_TITLE}}</h4>\n\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg" ref="email">\n\t\t\t\t\t   <div class="ui-ctl-after ui-ctl-icon-mail bx-livechat-form-icon" :title="localize.BX_LIVECHAT_FIELD_MAIL_TOOLTIP"></div>\n\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_MAIL" v-model="fieldEmail" ref="emailInput" @blur="checkEmailField" @keydown.enter="onFieldEnterPress">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :class="[\'bx-livechat-form-short\', {\n\t\t\t\t\t\t\'bx-livechat-form-full\': isFullForm,\n\t\t\t\t\t}]">\n\t\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg" ref="phone">\n\t\t\t\t\t\t   <div class="ui-ctl-after ui-ctl-icon-phone bx-livechat-form-icon" :title="localize.BX_LIVECHAT_FIELD_PHONE_TOOLTIP"></div>\n\t\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_PHONE" v-model="fieldPhone" ref="phoneInput" @blur="checkPhoneField" @keydown.enter="onFieldEnterPress">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-w100 ui-ctl-lg" ref="name">\n\t\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_NAME" v-model="fieldName" ref="nameInput" @blur="checkNameField" @keydown.enter="onFieldEnterPress"  @keydown.tab="onFieldEnterPress">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-livechat-btn-box">\n\t\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-success" @click="sendForm">{{localize.BX_LIVECHAT_ABOUT_SEND}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t</transition>\t\n\t'});C.Vue.component("bx-livechat-form-vote",{computed:babelHelpers.objectSpread({VoteType:function t(){return E},localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget}})),methods:{userVote:function t(e){this.$store.commit("widget/common",{showForm:M.none});this.$store.commit("widget/dialog",{userVote:e});this.$root.$bitrixWidget.sendDialogVote(e)},hideForm:function t(e){this.$parent.hideForm()}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-form-rate-show" key="vote">\n\t\t\t\t<div class="bx-livechat-alert-close" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-rate-box">\n\t\t\t\t\t<h4 class="bx-livechat-alert-title bx-livechat-alert-title-mdl">{{widget.common.vote.messageText}}</h4>\n\t\t\t\t\t<div class="bx-livechat-btn-box">\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-like" @click="userVote(VoteType.like)" :title="widget.common.vote.messageLike"></button>\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-dislike" @click="userVote(VoteType.dislike)" :title="widget.common.vote.messageDislike"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\t\n\t'});C.Vue.component("bx-livechat-form-welcome",{data:function t(){return{fieldName:"",fieldEmail:"",fieldPhone:"",isFullForm:y.Utils.platform.isMobile()}},watch:{fieldName:function t(){clearTimeout(this.showFormTimeout);this.showFormTimeout=setTimeout(this.showFullForm,1e3);clearTimeout(this.fieldNameTimeout);this.fieldNameTimeout=setTimeout(this.checkNameField,300)},fieldEmail:function t(e){clearTimeout(this.fieldEmailTimeout);this.fieldEmailTimeout=setTimeout(this.checkEmailField,300)},fieldPhone:function t(e){clearTimeout(this.fieldPhoneTimeout);this.fieldPhoneTimeout=setTimeout(this.checkPhoneField,300)}},computed:babelHelpers.objectSpread({localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget}})),created:function t(){this.fieldName=""+this.widget.user.name;this.fieldEmail=""+this.widget.user.email;this.fieldPhone=""+this.widget.user.phone},methods:{formShowed:function t(){if(!y.Utils.platform.isMobile()){this.$refs.nameInput.focus()}},showFullForm:function t(){clearTimeout(this.showFormTimeout);this.isFullForm=true},sendForm:function t(){var e=this.fieldName;var i=this.checkEmailField()?this.fieldEmail:"";var o=this.checkPhoneField()?this.fieldPhone:"";if(e||i||o){this.$root.$bitrixWidget.sendForm(M.welcome,{name:e,email:i,phone:o})}this.hideForm()},hideForm:function t(e){clearTimeout(this.showFormTimeout);clearTimeout(this.fieldNameTimeout);clearTimeout(this.fieldEmailTimeout);clearTimeout(this.fieldPhoneTimeout);this.$parent.hideForm()},onFieldEnterPress:function t(e){if(e.target===this.$refs.nameInput){this.showFullForm();this.$refs.emailInput.focus()}else if(e.target===this.$refs.emailInput){this.$refs.phoneInput.focus()}else{this.sendForm()}e.preventDefault()},checkNameField:function t(){if(this.fieldName.length>0){if(this.$refs.name){this.$refs.name.classList.remove("ui-ctl-danger")}return true}else{if(document.activeElement!==this.$refs.nameInput){if(this.$refs.name){this.$refs.name.classList.add("ui-ctl-danger")}}return false}},checkEmailField:function t(){if(this.fieldEmail.match(/^(.*)@(.*)\.[a-zA-Z]{2,}$/)){if(this.$refs.email){this.$refs.email.classList.remove("ui-ctl-danger")}return true}else{if(document.activeElement!==this.$refs.emailInput){if(this.$refs.email){this.$refs.email.classList.add("ui-ctl-danger")}}return false}},checkPhoneField:function t(){if(this.fieldPhone.match(/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/)){if(this.$refs.phone){this.$refs.phone.classList.remove("ui-ctl-danger")}return true}else{if(document.activeElement!==this.$refs.phoneInput){if(this.$refs.phone){this.$refs.phone.classList.add("ui-ctl-danger")}}return false}}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close" @after-enter="formShowed">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-form-show" key="welcome">\t\n\t\t\t\t<div class="bx-livechat-alert-close" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-form-box">\n\t\t\t\t\t<h4 class="bx-livechat-alert-title bx-livechat-alert-title-sm">{{localize.BX_LIVECHAT_ABOUT_TITLE}}</h4>\n\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-w100 ui-ctl-lg" ref="name">\n\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_NAME" v-model="fieldName" ref="nameInput" @blur="checkNameField" @keydown.enter="onFieldEnterPress"  @keydown.tab="onFieldEnterPress">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :class="[\'bx-livechat-form-short\', {\n\t\t\t\t\t\t\'bx-livechat-form-full\': isFullForm,\n\t\t\t\t\t}]">\n\t\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg" ref="email">\n\t\t\t\t\t\t   <div class="ui-ctl-after ui-ctl-icon-mail bx-livechat-form-icon" :title="localize.BX_LIVECHAT_FIELD_MAIL_TOOLTIP"></div>\n\t\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_MAIL" v-model="fieldEmail" ref="emailInput" @blur="checkEmailField" @keydown.enter="onFieldEnterPress">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg" ref="phone">\n\t\t\t\t\t\t   <div class="ui-ctl-after ui-ctl-icon-phone bx-livechat-form-icon" :title="localize.BX_LIVECHAT_FIELD_PHONE_TOOLTIP"></div>\n\t\t\t\t\t\t   <input type="text" class="ui-ctl-element ui-ctl-textbox" :placeholder="localize.BX_LIVECHAT_FIELD_PHONE" v-model="fieldPhone" ref="phoneInput" @blur="checkPhoneField" @keydown.enter="onFieldEnterPress">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-livechat-btn-box">\n\t\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-success" @click="sendForm">{{localize.BX_LIVECHAT_ABOUT_SEND}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t</transition>\t\n\t'});C.Vue.cloneComponent("bx-livechat-smiles","bx-smiles",{methods:{hideForm:function t(e){this.$parent.hideForm()}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-alert-box-zero-padding bx-livechat-form-show" key="vote">\n\t\t\t\t<div class="bx-livechat-alert-close" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-smiles-box">\n\t\t\t\t\t#PARENT_TEMPLATE#\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t'});C.Vue.component("bx-livechat-footer",{computed:babelHelpers.objectSpread({localize:function t(){return C.Vue.getFilteredPhrases("BX_LIVECHAT_COPYRIGHT_",this.$root.$bitrixMessages)}},I.Vuex.mapState({widget:function t(e){return e.widget}})),template:'\n\t\t<div class="bx-livechat-copyright">\t\n\t\t\t<template v-if="widget.common.copyrightUrl">\n\t\t\t\t<a :href="widget.common.copyrightUrl" target="_blank">\n\t\t\t\t\t<span class="bx-livechat-logo-name">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t\t<span class="bx-livechat-logo-icon"></span>\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<span class="bx-livechat-logo-name">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t<span class="bx-livechat-logo-icon"></span>\n\t\t\t</template>\n\t\t</div>\n\t'});BX.LiveChatWidget=O;BX.LiveChatWidget.VoteType=E;BX.LiveChatWidget.SubscriptionType=D;BX.LiveChatWidget.LocationStyle=k;BX.LiveChatWidget.Cookie=H;window.dispatchEvent(new CustomEvent("onBitrixLiveChatSourceLoaded",{detail:{}}))})(this.window=this.window||{},BX,window,window,window,window,window,window,BX,BX,BX,BX,BX.Messenger.Model,BX.Messenger.Controller,BX.Messenger,BX.Messenger.Provider.Pull,BX.Messenger.Provider.Pull,BX.Messenger,BX.Messenger.Const,BX,BX,BX.Messenger,BX,BX);
 

